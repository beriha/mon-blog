!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,function(){"use strict";function e(t){var n=this.constructor;return this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){return n.reject(e)})})}var t=setTimeout;function o(){}function a(e){if(!(this instanceof a))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(e,this)}function i(n,o){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,a._immediateFn(function(){var e=1===n._state?o.onFulfilled:o.onRejected;if(null!==e){var t;try{t=e(n._value)}catch(e){return void r(o.promise,e)}s(o.promise,t)}else(1===n._state?s:r)(o.promise,n._value)})):n._deferreds.push(o)}function s(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof a)return t._state=3,t._value=e,void l(t);if("function"==typeof n)return void u(function(e,t){return function(){e.apply(t,arguments)}}(n,e),t)}t._state=1,t._value=e,l(t)}catch(e){r(t,e)}}function r(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&a._immediateFn(function(){e._handled||a._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)i(e,e._deferreds[t]);e._deferreds=null}function c(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function u(e,t){var n=!1;try{e(function(e){n||(n=!0,s(t,e))},function(e){n||(n=!0,r(t,e))})}catch(e){if(n)return;n=!0,r(t,e)}}a.prototype.catch=function(e){return this.then(null,e)},a.prototype.then=function(e,t){var n=new this.constructor(o);return i(this,new c(e,t,n)),n},a.prototype.finally=e,a.all=function(t){return new a(function(o,i){if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var a=Array.prototype.slice.call(t);if(0===a.length)return o([]);var s=a.length;function r(t,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if("function"==typeof n)return void n.call(e,function(e){r(t,e)},i)}a[t]=e,0==--s&&o(a)}catch(e){i(e)}}for(var e=0;e<a.length;e++)r(e,a[e])})},a.resolve=function(t){return t&&"object"==typeof t&&t.constructor===a?t:new a(function(e){e(t)})},a.reject=function(n){return new a(function(e,t){t(n)})},a.race=function(i){return new a(function(e,t){for(var n=0,o=i.length;n<o;n++)i[n].then(e,t)})},a._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){t(e,0)},a._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();"Promise"in n?n.Promise.prototype.finally||(n.Promise.prototype.finally=e):n.Promise=a});var Geohash={base32:"0123456789bcdefghjkmnpqrstuvwxyz",encode:function(e,t,n){if(void 0===n){for(var o=1;o<=12;o++){var i=Geohash.encode(e,t,o),a=Geohash.decode(i);if(a.lat==e&&a.lon==t)return i}n=12}if(e=Number(e),t=Number(t),n=Number(n),isNaN(e)||isNaN(t)||isNaN(n))throw new Error("Invalid geohash");for(var s=0,r=0,l=!0,c="",u=-90,d=90,p=-180,f=180;c.length<n;){if(l){var m=(p+f)/2;m<=t?(s=2*s+1,p=m):(s*=2,f=m)}else{var g=(u+d)/2;g<=e?(s=2*s+1,u=g):(s*=2,d=g)}l=!l,5==++r&&(c+=Geohash.base32.charAt(s),s=r=0)}return c},decode:function(e){var t=Geohash.bounds(e),n=t.sw.lat,o=t.sw.lon,i=t.ne.lat,a=t.ne.lon,s=(n+i)/2,r=(o+a)/2;return s=s.toFixed(Math.floor(2-Math.log(i-n)/Math.LN10)),r=r.toFixed(Math.floor(2-Math.log(a-o)/Math.LN10)),{lat:Number(s),lon:Number(r)}},bounds:function(e){if(0===e.length)throw new Error("Invalid geohash");e=e.toLowerCase();for(var t=!0,n=-90,o=90,i=-180,a=180,s=0;s<e.length;s++){var r=e.charAt(s),l=Geohash.base32.indexOf(r);if(-1==l)throw new Error("Invalid geohash");for(var c=4;0<=c;c--){var u=l>>c&1;if(t){var d=(i+a)/2;1==u?i=d:a=d}else{var p=(n+o)/2;1==u?n=p:o=p}t=!t}}return{sw:{lat:n,lon:i},ne:{lat:o,lon:a}}},adjacent:function(e,t){if(e=e.toLowerCase(),t=t.toLowerCase(),0===e.length)throw new Error("Invalid geohash");if(-1=="nsew".indexOf(t))throw new Error("Invalid direction");var n=e.slice(-1),o=e.slice(0,-1),i=e.length%2;return-1!={n:["prxz","bcfguvyz"],s:["028b","0145hjnp"],e:["bcfguvyz","prxz"],w:["0145hjnp","028b"]}[t][i].indexOf(n)&&""!==o&&(o=Geohash.adjacent(o,t)),o+Geohash.base32.charAt({n:["p0r21436x8zb9dcf5h7kjnmqesgutwvy","bc01fg45238967deuvhjyznpkmstqrwx"],s:["14365h7k9dcfesgujnmqp0r2twvyx8zb","238967debc01fg45kmstqrwxuvhjyznp"],e:["bc01fg45238967deuvhjyznpkmstqrwx","p0r21436x8zb9dcf5h7kjnmqesgutwvy"],w:["238967debc01fg45kmstqrwxuvhjyznp","14365h7k9dcfesgujnmqp0r2twvyx8zb"]}[t][i].indexOf(n))},neighbours:function(e){return{n:Geohash.adjacent(e,"n"),ne:Geohash.adjacent(Geohash.adjacent(e,"n"),"e"),e:Geohash.adjacent(e,"e"),se:Geohash.adjacent(Geohash.adjacent(e,"s"),"e"),s:Geohash.adjacent(e,"s"),sw:Geohash.adjacent(Geohash.adjacent(e,"s"),"w"),w:Geohash.adjacent(e,"w"),nw:Geohash.adjacent(Geohash.adjacent(e,"n"),"w")}}};"undefined"!=typeof module&&module.exports&&(module.exports=Geohash),function(x){var o={fr:{FRA:"France",BEL:"Belgique",ESP:"Espagne",UNKNOWN_POSITION:"Position inconnue",DESC_IP_DISQUALIFIED:"Selon votre IP disqualifiée",DESC_UNSHARED:"Position non partagée",DESC_IP_QUALIFIED:"Selon votre IP qualifiée",DESC_HTML5:"Selon la position de votre appareil",DESC_MANUAL:"Selon votre position encodée manuellement",RELOCATION:'<button class="pxs-link">Rafra&icirc;chissez</button> ou <button class="pxs-link">modifiez votre position</button>',MORE_INFO:"Plus d'infos",POSITION_BLOCKED:"Votre navigateur bloque actuellement la localisation.",CLOSE:"Fermer",DETAIL:"Détail",REFUSE_GEOLOC:"Ne plus être localisé",BE_GEOLOC:"Être localisé",NOT_SUPPORTED:"Votre navigateur n'est pas supporté"},nl:{FRA:"Frankrijk",BEL:"België",ESP:"Spanje",UNKNOWN_POSITION:"Onbekende positie",DESC_IP_DISQUALIFIED:"Volgens uw gediskwalificeerd IP",DESC_IP_QUALIFIED:"Volgens uw gekwalificeerd IP",DESC_UNSHARED:"niet gedeelde lokalisatie",DESC_HTML5:"Volgens de lokalisatie van uw toestel",DESC_MANUAL:"Volgens de lokalisatie dat uw manueel heeft gecodeerde",RELOCATION:'<button class="pxs-link">Update</button> of <button class="pxs-link">verander uw lokalisatie</button>',MORE_INFO:"Meer info",POSITION_BLOCKED:"Uw navigator blokkeert momenteel de lokalisatie.",CLOSE:"Sluiten",DETAIL:"Detail",REFUSE_GEOLOC:"Ik wil niet gelokaliseerd zijn",BE_GEOLOC:"Ik wil gelokaliseerd zijn",NOT_SUPPORTED:"Uw browser is niet compatibel met onze system"},es:{FRA:"Francia",BEL:"Bélgica",ESP:"España",UNKNOWN_POSITION:"Posición desconocida",DESC_IP_DISQUALIFIED:"Según su IP descalificada",DESC_IP_QUALIFIED:"Según su IP calificada",DESC_HTML5:"Según la posición de su dispositivo",DESC_MANUAL:"Según su posición codificada manualmente",DESC_UNSHARED:"Position non partagée",RELOCATION:'<button class="pxs-link">Refrescar</button> o <button class="pxs-link">modificar su posición</button>',MORE_INFO:"Más información",POSITION_BLOCKED:"Tu navegador está actualmente bloqueando la localización.",CLOSE:"Cerca",DETAIL:"Detalle",REFUSE_GEOLOC:"",BE_GEOLOC:"",NOT_SUPPORTED:""},en:{FRA:"France",BEL:"Belgium",ESP:"Spain",UNKNOWN_POSITION:"Unknown position",DESC_IP_DISQUALIFIED:"Based on your disqualified IP",DESC_IP_QUALIFIED:"From your qualified IP",DESC_UNSHARED:"Unshared location",DESC_HTML5:"From your device position",DESC_MANUAL:"From your manually encoded location",RELOCATION:'<button class="pxs-link">Refresh</button> or <button class="pxs-link">update your location</button>',MORE_INFO:"More info",POSITION_BLOCKED:"Your browser is currently blocking the position.",CLOSE:"Close",DETAIL:"Detail",REFUSE_GEOLOC:"Don’t be located",BE_GEOLOC:"Be located",NOT_SUPPORTED:"Your navigator is not supported"}};function _(e,t){var n=x.config().language;return o[n]||(n="en"),o[n][e]||t||""}function t(e){document.getElementById("untrack");var t=document.getElementById(e);if(null!=t){var n,o,i,a,s,r,m=e+"-country",l=e+"-location",c=e+"-descr",g=e+"-reloc",h=e+"-more",E=e+"-modal",y=e+"-modal-iframe",u=x.config().customClassName||"pxs-custom-"+(2<=(n=window.location.hostname.split(".")).length?n[n.length-2]+"-"+n[n.length-1]:n[0]),d="px-toolbar";if(x.config().darkTheme&&(u+=" pxs-theme-dark"),u,t.innerHTML=function(){var e='<div class="pxs-widget '+u+'"> <div id="'+E+'" class="pxs-modal">\n  <div class="pxs-modal-content">\n<span class="pxs-modal-close">\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" version="1.1" width="48px" height="48px">\n<g id="surface1">\n<path style=" " d="M 19.28125 5.28125 L 9 15.5625 L 4.71875 11.28125 L 3.28125 12.71875 L 8.28125 17.71875 L 9 18.40625 L 9.71875 17.71875 L 20.71875 6.71875 Z "/>\n</g>\n</svg>\n</span>\n    <iframe allow="geolocation *;" id="'+y+'" width="100%" height="500px" scrolling="no" frameBorder="0" ></iframe>\n  </div>\n</div><span id="'+m+'" class="pxs-country"></span>\n    <div class="pxs-container">\n                <span id="'+l+'" class="pxs-location">\n                    <div class="pxs-dot pxs-turn">\n                        <svg width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 303.68 469.22">\n                           <g class="Calque_2" data-name="Calque 2">\n                                <g class="Layer_1" data-name="Layer 1">\n                                    <path class="pxs-ip" d="M151.83,469.22a13,13,0,0,1-12.68-10L99.43,294.36a151.1,151.1,0,0,1-17.26-7.61,148.42,148.42,0,0,1-22.55-14.31,151.83,151.83,0,1,1,199.59-228,152.06,152.06,0,0,1,38.09,151,154.42,154.42,0,0,1-8.9,22.76,152.79,152.79,0,0,1-84.16,76.1L164.51,459.25A13,13,0,0,1,151.83,469.22Zm0-441A123.69,123.69,0,0,0,95.14,261.7a125.85,125.85,0,0,0,20.33,8.3,14.08,14.08,0,0,1,9.43,9.54l26.93,111.8,26.78-111.15c0-.06.19-.72.2-.78a13,13,0,0,1,8.89-9.26,123.43,123.43,0,0,0,87.74-117.6c0-.24,0-.47,0-.71s0-.48,0-.72A123.65,123.65,0,0,0,151.83,28.22Z"\n                                    />\n                                    <path class="pxs-ip" d="M151.83,207.16a56,56,0,1,1,56-55.95A56,56,0,0,1,151.83,207.16Zm0-85.82a29.87,29.87,0,1,0,29.87,29.87A29.9,29.9,0,0,0,151.83,121.34Z"\n                                    />\n                                </g>\n                            </g>\n                        </svg>\n                    </div>\n                </span>\n        <span class="pxs-sep">-</span>\n        <span id="'+c+'" class="pxs-desc"></span>\n        <span class="pxs-sep">-</span>\n        <span id="'+g+'" class="pxs-reloc"></span>\n        <span class="pxs-sep">-</span>\n';e+='<a id="untrack" class="pxs-link" target="_blank"><a> <span class="pxs-sep">-</span>\n',x.config().backLink?e+='<a href="'+x.config().backLink+'" class="pxs-link" target="_blank" id="'+h+'" class="pxs-more"></a>\n':e+='<a href="//proxistore.com/geolocation?lang='+x.config().language+'" class="pxs-link" target="_blank" id="'+h+'" class="pxs-more"></a>\n';return e+="    </div>"}(),!1===x.config().consentString)v(_("UNKNOWN_POSITION")),O(_("DESC_IP_DISQUALIFIED")),w("pxs-ip-disqualified"),document.querySelectorAll(".pxs-sep").forEach(function(e){e.textContent=""});else if(x.isSafari()){v(_("UNKNOWN_POSITION")),O(_("NOT_SUPPORTED")),w("pxs-ip-disqualified"),document.querySelectorAll(".pxs-sep").forEach(function(e){e.textContent=""})}(new x.Ajax).get("//abs.proxistore.com/cookie/read-uv").then(function(e){var t=JSON.parse(e);if(t.ui){var n="//pixel.tapad.com/idsync/ex/receive?partner_id=3169&partner_device_id="+t.ui,o=document.getElementsByClassName("pxs-modal")[0],i=document.createElement("IMG");i.setAttribute("src",n),i.style.width="1px",i.style.height="1px",o.appendChild(i);var a=document.createElement("style");a.textContent="#px_frame_sir_data {display: none;}",document.head.appendChild(a);var s=document.createElement("iframe");s.setAttribute("id","px_frame_sir_data"),s.setAttribute("src","//abs.proxistore.com/sirdata/segments.html"),document.body.appendChild(s)}}),-1<x.config().shortWidgetIds.indexOf(e)&&null!==navigator.userAgent.match(/Android|(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|bolt|cldc|compal|doris|elaine|fennec|gobrowser|hiptop|htc|huawei|iemobile|ip(hone|od|ad)|iris|kindle|lge |lumia|nokia|maemo|mib|midp|minimo|mmp|model-orange|netfront|nexus \d+|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|playbook|plucker|pocket|psp|qnx|semc-browser|series(4|6)0|Silk|skyfire|symb(ian|ianos|os)|teashark|teleca|treo|up\.(browser|link)|uzard|wap|windows (ce|phone)|xda|xiino/i)&&(t.innerHTML=t.innerHTML.replace("pxs-widget","pxs-widget pxs-mini")),(r=document.getElementById(E)).getElementsByClassName("pxs-modal-close")[0].onclick=function(){r.style.display="none",x.em.publish(x.em.GEOLOCATION_REQUESTED,{})},window.onclick=function(e){document.getElementsByTagName("body"),e.target===r&&(r.style.display="none",x.em.publish(x.em.GEOLOCATION_REQUESTED,{}))},document.getElementById(y).addEventListener("load",function e(){document.getElementById(y).removeEventListener("load",e),null!=o&&I(o,i)},!1),x.em.subscribe(x.em.GEOLOCATION_CHANGED,function(e){for(var t,n=_(e.countryIso3,e.country),o=(e.postalCode||"")+" "+(e.locality||""),i="",a=_("RELOCATION"),s=_("POSITION_BLOCKED"),r=_("DETAIL"),l=_("CLOSE"),c=_("MORE_INFO"),u=null,d=!1,p=document.getElementsByClassName("pxs-turn"),f=0;f<p.length;f++)p[f].className="pxs-dot";x.config().consentString?"IP"===e.type?e.disqualified?(o=_("UNKNOWN_POSITION"),i=_("DESC_IP_DISQUALIFIED"),w("pxs-ip-disqualified"),t=_("REFUSE_GEOLOC")):(i=_("DESC_IP_QUALIFIED"),w("pxs-ip-qualified"),u=e.position,t=_("REFUSE_GEOLOC"),d=!0):"HTML5"===e.type?(i=_("DESC_HTML5"),w("pxs-html5"),u=e.position,d=!0,t=_("REFUSE_GEOLOC")):"MANUAL"===e.type?(i=_("DESC_MANUAL"),w("pxs-manual"),u=e.position,d=!0,t=_("REFUSE_GEOLOC")):d=(t="UNTRACK"===e.type?(o=_("DESC_UNSHARED"),w("pxs-unknown"),_("BE_GEOLOC")):(o=_("UNKNOWN_POSITION"),w("pxs-unknown"),_("REFUSE_GEOLOC")),!1):(o=_("UNKNOWN_POSITION"),i=_("DESC_IP_DISQUALIFIED"),w("pxs-ip-disqualified"),t=_("REFUSE_GEOLOC")),function(e){document.getElementById(m).textContent=e}(n),v(o),O(i),function(e){document.getElementById(g).innerHTML=e,document.getElementById(g).getElementsByTagName("button")[0].onclick=function(){var e=new x.Ajax,t=x.config().apiRootVersionedUrl+"/cookie/geo";e.delete(t).then(function(e){x.em.publish(x.em.GEOLOCATION_REQUESTED,{});var t=_("REFUSE_GEOLOC");document.getElementById("untrack").innerHTML=t},function(e){console.error(e)});for(var n=document.getElementsByClassName("pxs-dot"),o=0;o<n.length;o++)n[o].className+=" pxs-turn";document.getElementById("px-toolbar").className+="canShow",x.em.publish(x.em.GEOLOCATION_REQUESTED,{forceHtml5:!0})},document.getElementById(g).getElementsByTagName("button")[1].onclick=function(){x.em.publish(x.em.GEOLOCATION_REQUESTED,{});var e=document.getElementById(y),t=x.config().apiRoot+"/assets/html/geolocation.html?language="+x.config().language+"&googleApiKey="+x.config().googleApiKey+"&apiRoot="+encodeURIComponent(x.config().apiRoot);e.setAttribute("src",t),document.getElementById(E).style.display="block"}}(a),function(e){var o=document.getElementById("untrack");o.innerHTML=e,o.onclick=function(){if(this.textContent===_("REFUSE_GEOLOC")){x.em.publish(x.em.GEOLOCATION_REFUSED);var e=_("BE_GEOLOC");o.innerHTML=e}else{var t=new x.Ajax,n=x.config().apiRootVersionedUrl+"/cookie/geo";t.delete(n).then(function(e){x.em.publish(x.em.GEOLOCATION_REQUESTED,{});var t=_("REFUSE_GEOLOC");o.innerHTML=t},function(e){console.error(e)})}}}(t),function(e){document.getElementById(h).textContent=e}(c),I(u,d),b(s,r,l)}),x.em.subscribe(x.em.GEOLOCATION_ERROR,function(e){x.log("geolocation error:",e),a&&"flex"!==a.style.display&&"pxs-slideOutRightcanShow"===a.className&&(a.classList.remove("pxs-slideOutRightcanShow"),a.className+="pxs-slideOutRight",s=setTimeout(f,5e3),a.style.display="flex",a.classList.replace("pxs-slideOutRight","pxs-slideInRight"))})}function v(e){var t=document.getElementById(l).childNodes;t[t.length-1].nodeValue=e}function O(e){document.getElementById(c).textContent=e}function I(e,t){o=e,i=t,setTimeout(function(){p("update-map-center",{position:e,showMarker:t})},200)}function p(e,t){var n=document.getElementById(y).contentWindow,o=new MessageChannel;n.postMessage({type:e,data:t},"*",[o.port2])}function b(e,t,n){if(!document.getElementById(d)){var o=document.createElement("div");o.setAttribute("id",d),o.setAttribute("class","pxs-slideOutRight"),o.innerHTML='    <?xml version="1.0" encoding="iso-8859-1"?>\n    \x3c!-- Generator: Adobe Illustrator 19.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="120 -220 100 730" width="60px" height="45px">\n        <g>\n            <g>\n                <path d="M467.819,431.851l-36.651-61.056c-16.896-28.181-25.835-60.437-25.835-93.312V224    c0-82.325-67.008-149.333-149.333-149.333S106.667,141.675,106.667,224v53.483c0,32.875-8.939,65.131-25.835,93.312    l-36.651,61.056c-1.984,3.285-2.027,7.403-0.149,10.731c1.899,3.349,5.461,5.419,9.301,5.419h405.333    c3.84,0,7.403-2.069,9.301-5.419C469.845,439.253,469.803,435.136,467.819,431.851z M72.171,426.667l26.944-44.907    C118.016,350.272,128,314.219,128,277.483V224c0-70.592,57.408-128,128-128s128,57.408,128,128v53.483    c0,36.736,9.984,72.789,28.864,104.277l26.965,44.907H72.171z" fill="#91DC5A"/>\n            </g>\n        </g>\n        <g>\n            <g>\n                <path d="M256,0c-23.531,0-42.667,19.136-42.667,42.667v42.667C213.333,91.221,218.112,96,224,96s10.667-4.779,10.667-10.667    V42.667c0-11.776,9.557-21.333,21.333-21.333s21.333,9.557,21.333,21.333v42.667C277.333,91.221,282.112,96,288,96    s10.667-4.779,10.667-10.667V42.667C298.667,19.136,279.531,0,256,0z" fill="#91DC5A"/>\n            </g>\n        </g>\n        <g>\n            <g>\n                <path d="M302.165,431.936c-3.008-5.077-9.515-6.741-14.613-3.819c-5.099,2.987-6.805,9.536-3.819,14.613    c2.773,4.715,4.288,10.368,4.288,15.936c0,17.643-14.357,32-32,32c-17.643,0-32-14.357-32-32c0-5.568,1.515-11.221,4.288-15.936    c2.965-5.099,1.259-11.627-3.819-14.613c-5.141-2.923-11.627-1.259-14.613,3.819c-4.715,8.064-7.211,17.301-7.211,26.731    C202.667,488.085,226.581,512,256,512s53.333-23.915,53.376-53.333C309.376,449.237,306.88,440,302.165,431.936z" fill="#91DC5A"/>\n            </g>\n        </g>\n    </svg>\n    <p>'+e+'</p>\n    <ul id="px-toolbar-menu">\n        <li>'+n+'</li>\n <li><a href="https://www.proxistore.com/geolocation?lang='+x.config().language+'" target="_blank" >'+t+"</a></li>\n    </ul>\n</div>",document.body.appendChild(o),a=document.getElementById(d),document.getElementById("px-toolbar-menu").children[0].onclick=function(){a.style.display="none"},a.onmouseover=function(){this.children[2].style.display="flex",clearTimeout(s)},a.onmouseout=function(){this.children[2].style.display="none",s=setTimeout(f,2e3)}}}function f(){a.classList.replace("pxs-slideInRight","pxs-slideOutRight"),setTimeout(function(e){e.style.display="none"}(a),1e3)}function w(e){for(var t=document.getElementById(l).getElementsByTagName("div")[0].getElementsByTagName("svg")[0].getElementsByTagName("g")[0].getElementsByTagName("g")[0].getElementsByTagName("path"),n=0;n<t.length;n++)t[n].setAttribute("class",e)}}function n(e){t(e)}function i(){x.config().widgetIds&&(Array.isArray(x.config().widgetIds)||x.config().widgetIds instanceof String||"string"==typeof x.config().widgetIds)&&0<x.config().widgetIds.length&&x.hasConsent().then(function(e){if(e){if(x.config().consentString=!0,"function"==typeof x.config().geoLocationCallback&&x.em.subscribe(x.em.GEOLOCATION_CHANGED,function(e){var t="",n="";e.areas.forEach(function(e){"POSTAL CODE"==e.label?t=e.code:e.label.match("NISS|IRIS")&&(n=e.code)});var o={type:e.type,locality:e.locality,postalCode:e.postalCode,countryIso2:e.countryIso2,countryIso3:e.countryIso3,country:e.country,disqualified:e.disqualified,px_country:e.countryIso2,px_city:e.locality,px_zip:t,px_district:n};x.config().geoLocationCallback(o)}),!x.config().visible)return void x.em.publish(x.em.GEOLOCATION_REQUESTED,{});Array.isArray(x.config().widgetIds)?x.config().widgetIds.forEach(function(e){new n(e)}):new n(x.config().widgetIds),x.em.publish(x.em.GEOLOCATION_REQUESTED,{})}else Array.isArray(x.config().widgetIds)?x.config().widgetIds.forEach(function(e){new n(e)}):new n(x.config().widgetIds)})}var a=x.config;x.config=function(e){var t=a(e);return e&&i(),t},x.createWidgets=i}((Proxistore=function(s){Object.defineProperty(s.em,"GEOLOCATION_CHANGED",{value:"GEOLOCATION_CHANGED",writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(s.em,"GEOLOCATION_ERROR",{value:"GEOLOCATION_ERROR",writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(s.em,"GEOLOCATION_REQUESTED",{value:"GEOLOCATION_REQUESTED",writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(s.em,"GEOLOCATION_REFUSED",{value:"GEOLOCATION_REFUSED",writable:!1,enumerable:!0,configurable:!1});var r=new s.Ajax;function l(e,t,n,o,i,a,s,r,l){this.type=e,this.locality=t,this.postalCode=n,this.countryIso2=o,this.countryIso3=i,this.country=a,this.disqualified=r,s&&(this.position=Geohash.decode(s)),this.areas=l}return new function(){function n(t){navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){(function(t){var n=s.config().apiRootVersionedUrl+"/cookie/geo/html5?";return Object.keys(t).forEach(function(e){n+=e+"="+t[e]+"&"}),n+="1=1",r.post(n)})({latitude:e.coords.latitude,longitude:e.coords.longitude,accuracy:e.coords.accuracy}).then(function(e){i(JSON.parse(e)),t&&function(){var e=s.config().apiRootVersionedUrl+"/cookie/geo/manual";r.delete(e)}()},function(e){a(e)})},function(e){(function(){var e=s.config().apiRootVersionedUrl+"/cookie/geo/html5-refusal";return r.get(e)})().then(function(){},function(e){a(e)}),a(e)},{maximumAge:6e5,timeout:6e4,enableHighAccuracy:!1})}s.em.subscribe(s.em.GEOLOCATION_REQUESTED,function(e){s.isSafari()||(e.latitude&&e.longitude?function(t){var n=s.config().apiRootVersionedUrl+"/cookie/geo/manual?";return Object.keys(t).forEach(function(e){n+=e+"="+t[e]+"&"}),n+="1=1",r.post(n)}(e).then(function(e){i(JSON.parse(e))},function(e){a(e)}):e.forceHtml5?n(e.forceHtml5):function(){var e=s.config().apiRootVersionedUrl+"/widget/geo";return r.get(e)}().then(function(e){var t=JSON.parse(e);"untrack"===t.geoCookieType&&s.em.publish(s.em.GEOLOCATION_REFUSED),i(t),s.config().disableHtml5GeoLocation||t.html5Refusal||"IP"!==t.geoCookieType||n()},function(e){a(e)}))}),s.em.subscribe(s.em.GEOLOCATION_CHANGED,function(e){if(Array.isArray(e.areas)&&void 0!==e.areas&&1<e.areas.length){var t={type:e.type,locality:e.locality,postalCode:e.postalCode,countryIso2:e.countryIso2,countryIso3:e.countryIso3,country:e.country,disqualified:e.disqualified,areas:e.areas[e.areas.length-1]},n="https://abs.proxistore.com/fr/v3/widget/customization?referer="+location.hostname.replace("www.","");r.get(n).then(function(e){(e=JSON.parse(e))&&e.sendToSirdata&&o(t)}).catch(function(e){s.log("Error",e.message)})}}),s.em.subscribe(s.em.GEOLOCATION_REFUSED,function(){r.get("https://abs.proxistore.com/v3/cookie/geo/untrack").then(function(e){e=JSON.parse(e),loc={type:e.geoCookieType,locality:e.locality,postalCode:e.postalCode,countryIso2:e.countryIso2,countryIso3:e.countryIso3,country:e.country,disqualified:e.disqualified,areas:e.areas},s.em.publish(s.em.GEOLOCATION_CHANGED,loc)},function(e){a(e)})});var o=function(e){var t={cmp:0,pa:"22509",si:function(e){switch(e){case"be":return"1";case"fr":return"2";case"es":return"3";default:return"4"}}(e.countryIso2.toLowerCase()),uf_postal_code:e.postalCode,user_country:e.countryIso2.toLowerCase(),user_city:e.locality,user_lat:"",user_long:"",user_iris:"",user_nis9:"",custom_segment:"",rand:(new Date).getTime()};"IRIS CODE"===e.areas.label?t.user_iris=e.areas.code:"NISS CODE"===e.areas.label&&(t.user_nis9=e.areas.code);var n=[];for(var o in t)n.push(o+"="+encodeURIComponent(t[o]));var i=document.createElement("script");i.async=!0,i.type="text/javascript",i.src="https://js.sddan.com/GS.d?"+n.join("&"),document.getElementsByTagName("head")[0].appendChild(i)};function i(e){var t=new l(e.geoCookieType,e.locality,e.postalCode,e.countryIso2,e.countryIso3,e.country,e.geoHash,e.disqualified,e.areas);s.em.publish(s.em.GEOLOCATION_CHANGED,t)}function a(e){s.em.publish(s.em.GEOLOCATION_ERROR,e)}},s}((Proxistore=function(e){return e.Ajax=function(){function n(o,i,a){return e.log("AJAX -",i,o,a||""),new Promise(function(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&(200<=n.status&&n.status<300?e(n.responseText):t(Error(n.statusText)))},n.onerror=function(){t(Error("Network Error"))},n.withCredentials=!0,n.open(i,o,!0),n.setRequestHeader("Content-Type","application/json"),n.send(a)})}this.get=function(e){return n(e,"GET")},this.post=function(e,t){return n(e,"POST",t)},this.put=function(e,t){return n(e,"PUT",t)},this.delete=function(e,t){return n(e,"DELETE",t)}},e}((Proxistore=function(e){return e.em=new function(){var i={};this.publish=function(e,t){var n=i[e];0!=!!n&&n.forEach(function(e){e.call(this,t)})},this.subscribe=function(e,t){var n=i[e];0==!!n&&(n=i[e]=[]),-1===n.indexOf(t)&&n.push(t)},this.unsubscribe=function(e,t){var n=i[e];if(0!=!!n){var o=n.indexOf(t);-1!==o&&n.splice(o)}}},e}((Proxistore=function(e){"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),o=1;o<arguments.length;o++){var i=arguments[o];if(null!=i)for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])}return n},writable:!0,configurable:!0});var t={apiRoot:"//abs.proxistore.com",apiVersion:"v3",language:"fr",disableHtml5GeoLocation:!1,googleApiKey:"AIzaSyDXpL2ODv3_7-x0WhiPmspBEnHdIRlBWo8",geoLocationCallback:new function(e){},darkTheme:!1,customClassName:null,widgetIds:[],shortWidgetIds:[],verbose:!1,backLink:"",visible:!0,consentString:!1};t.apiRootUrl=t.apiRoot+"/"+t.language,t.apiRootVersionedUrl=t.apiRootUrl+"/"+t.apiVersion;var n=Object.assign({},t);return e.config=function(e){return e&&((n=Object.assign(n,e)).language.match("fr|nl|es")?n.apiRootUrl=n.apiRoot+"/"+n.language:n.apiRootUrl=n.apiRoot+"/"+t.language,n.apiRootVersionedUrl=n.apiRootUrl+"/"+n.apiVersion),n},e.log=function(){if(n.verbose){var e=Array.prototype.slice.call(arguments);e.splice(0,0,"PROXISTORE -"),console.log.apply(this,e)}},e.hasConsent=function(){return new Promise(function(t,e){"function"!=typeof __cmp?t(!0):__cmp("getVendorConsents",null,function(e){t(!0===e.vendorConsents[418])})})},e.isSafari=function(){return-1!=navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")},e}(Proxistore||{}))||{}))||{}))||{}))||{});var Proxistore=function(d){function a(e,t){t=-1===t.search("\\?")?t+"?ps_v="+(new Date).getTime():t+"&ps_v="+(new Date).getTime();var n=document.createElement("img"),o=r("src",t);n.setAttributeNode(o),e.appendChild(n)}function r(e,t){var n=document.createAttribute(e);return n.value=t,n}function p(e,t,n){var o=function(e,t){var n=document.getElementById(t),o=document.getElementById("ps-pixelCounter-"+e);if(null===o){o=document.createElement("div");var i=r("id","ps-pixelCounter-"+e);o.setAttributeNode(i);var a=r("class","ps-pixelCounter");o.setAttributeNode(a);var s=r("style","display:none");o.setAttributeNode(s),n.appendChild(o)}return o}(e,t);if(n.constructor!==Array)a(o,n);else for(var i=n.length;i--;)a(o,n[i])}function f(e,t,n){clearTimeout(window["ps_infoboxTimeout_"+e]);var o=document.getElementById("ps-infobox-"+e);o.style.width="horizontal"===t?0===o.clientWidth||n?"250px":0:0===o.clientWidth||n?"116px":0}return d.advertisementBox=function(e){var t=new d.Ajax;e.viewUrl&&("GET"===(e.viewMethod||"GET")?function(e){var t=document.getElementsByTagName("body")[0]||document.body,n=document.createElement("div");n.innerHTML='<div style="position: absolute; left: 0px; top: 0px; visibility: hidden;"><img src="'+e.viewUrl+'" border="0" width="1" height="1" alt="" style="display:none"></div>',t.appendChild(n)}(e):t.put(e.viewUrl)),d.box(e.advertisement,null,e.boxId,null,t,e.isHTML5)},d.box=function(e,t,n,o,i){var a=i||new d.Ajax;null!==t?a.put(d.config().apiRootVersionedUrl+"/rtb/prebid/viewed?dealId="+t):o&&a.put(o),function(e){var t=document.createElement("link"),n=document.getElementsByTagName("head")[0]||document.documentElement;t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",e),n.insertBefore(t,n.firstChild)}(d.config().apiRoot+"/assets/css/proxistore.min.css");var s,r,l=e.publisherSpot.publisherSpotReferenceId,c="horizontal";if(s=e.urlVisuals[0],r=s.lastIndexOf(".")+1,"html"===s.substr(r,s.length)){var u='<iframe id="inlineFrameExample"title="titleExample"width="'+e.width+'"height="'+e.height+'"src="'+e.urlVisuals[0]+'"</iframe>';document.getElementById(n).innerHTML=u}else{u="<span id='ps-picto-"+l+"' class='ps-picto "+c+"'>   <svg viewBox='0 0 1500 1500' width='0'><path d='M750,1500a41.7,41.7,0,0,1-40.53-31.88L582.47,941a483.06,483.06,0,0,1-55.19-24.33,473.74,473.74,0,0,1-72.09-45.77C334.12,778.29,264.61,637.76,264.61,485.39c0-129.73,50.49-251.63,142.16-343.25S620.4,0,750,0s251.5,50.47,343.26,142.14,142.16,213.59,142.16,343.25A486.14,486.14,0,0,1,1215,625,486,486,0,0,1,917.5,941l-127,527.11A41.71,41.71,0,0,1,750,1500ZM750,90.22c-105.49,0-204.71,41.12-279.37,115.77S354.88,379.92,354.88,485.39c0,124,56.59,238.44,155.24,313.91a390.76,390.76,0,0,0,123.61,63.82c14.05,4.32,26.68,16.24,30.16,30.52L750,1251l85.59-355.32c0-.2.61-2.33.65-2.51a41.63,41.63,0,0,1,28.42-29.62c105.65-32.46,192.85-107.14,240.76-205.34A400.36,400.36,0,0,0,1128.56,599a396.35,396.35,0,0,0,16.58-111.32c0-.77-.07-1.52-.07-2.28s0-1.51.07-2.28A392.4,392.4,0,0,0,1029.39,206C954.71,131.34,855.49,90.22,750,90.22Z'/><path d='M750,662.25c-98.61,0-178.84-80.24-178.84-178.87S651.37,304.51,750,304.51s178.89,80.24,178.89,178.87S848.61,662.25,750,662.25Zm0-274.35a95.48,95.48,0,1,0,95.49,95.49A95.58,95.58,0,0,0,750,387.89Z'/></svg></span><span id='ps-infobox-"+l+"' class='ps-infobox "+c+"'>   <span class='ps-location "+c+"'>       <svg viewBox='0 0 109.32 109.32' width='0'><path d='M108.14,1.18a4,4,0,0,0-4.45-.84L2.41,44.5A4,4,0,0,0,2.9,52L45,64.34l12.29,42.08a4,4,0,0,0,3.61,2.89h.26a4,4,0,0,0,3.69-2.41L109,5.63A4,4,0,0,0,108.14,1.18Z'/></svg>       <a class='ps-city "+c+"' href='"+e.relocalisationUrl+"' target='_blank'>"+e.surferCityName+"</a>   </span>   <span class='ps-actions "+c+"'>       <a id='ps-store-"+l+"' class='ps-store "+c+"' target='_blank'>           <svg viewBox='0 0 525.16 525.16' width='0'><path d='M517.47,244.07,281.09,7.68a26.12,26.12,0,0,0-37,0L7.68,244.07a26.12,26.12,0,0,0,0,37L244.09,517.47a26.12,26.12,0,0,0,37,0L517.49,281.07C527.71,271.15,527.71,254.52,517.47,244.07ZM315,328.35V262.69H209.89v78.84H157.39V236.45a26.34,26.34,0,0,1,26.24-26.26H315V144.55l91.9,91.9Z'/></svg>       </a>   </span></span><a id='ps-ad-"+l+"' class='ps-ad "+c+"' target='_blank'>   <img id='ps-ad-img-"+l+"' class='ps-ad-img "+c+"'></a>";document.getElementById(n).innerHTML=u,function(e,t,n,o){var i=document.getElementById(t);clearInterval(window["ps_interval_"+e]),i.style.width=n.width+"px",i.style.height=n.height+"px",document.getElementById("ps-ad-img-"+e).src=n.urlVisuals[0],document.getElementById("ps-ad-"+e).href=n.urlRedirection,1<n.urlVisuals.length&&(window["ps_visualIdx_"+e]=1,window["ps_interval_"+e]=setInterval(function(){document.getElementById("ps-ad-img-"+e).src=n.urlVisuals[window["ps_visualIdx_"+e]],window["ps_visualIdx_"+e]=(window["ps_visualIdx_"+e]+1)%n.urlVisuals.length},5e3)),n.urlPixelCounters||(n.urlPixelCounters=[""]),0<n.urlPixelCounters.length&&p(p,t,n.urlPixelCounters)}(l,n,e),function(e){var t=document.getElementById("ps-picto-"+e);window["ps_infoboxTimeout_"+e]=setTimeout(function(){t.click(),window["ps_infoboxTimeout_"+e]=setTimeout(function(){t.click()},4e3)},1e3)}(l),function(e,t){document.getElementById("ps-ad-"+e.publisherSpot.publisherSpotReferenceId).addEventListener("click",t)}(e,function(){a.put(d.config().apiRootUrl+"/tags/click/"+e.advertisementId,JSON.stringify({publisherSpotReferenceId:e.publisherSpot.publisherSpotReferenceId,campaignId:e.campaignId}),"application/json; charset=utf-8")}),function(e,t,n,o){document.getElementById("ps-picto-"+e.publisherSpot.publisherSpotReferenceId).addEventListener("click",n),document.getElementById("ps-infobox-"+e.publisherSpot.publisherSpotReferenceId).addEventListener("mouseover",o)}(e,0,function(){f(e.publisherSpot.publisherSpotReferenceId,c)},function(){f(e.publisherSpot.publisherSpotReferenceId,c,!0)})}},d}(Proxistore||{});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvbHlmaWxsLmpzIiwibGF0bG9uLWdlb2hhc2guanMiLCJweC13aWRnZXQuanMiLCJweC1nZW8uanMiLCJweC1hamF4LmpzIiwicHgtZW0uanMiLCJweC1hcGkuanMiLCJweC1ib3guanMiXSwibmFtZXMiOlsiZ2xvYmFsIiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJ0aGlzIiwiZmluYWxseUNvbnN0cnVjdG9yIiwiY2FsbGJhY2siLCJjb25zdHJ1Y3RvciIsInRoZW4iLCJ2YWx1ZSIsInJlc29sdmUiLCJyZWFzb24iLCJyZWplY3QiLCJzZXRUaW1lb3V0RnVuYyIsInNldFRpbWVvdXQiLCJub29wIiwiUHJvbWlzZSIsImZuIiwiVHlwZUVycm9yIiwiX3N0YXRlIiwiX2hhbmRsZWQiLCJfdmFsdWUiLCJ1bmRlZmluZWQiLCJfZGVmZXJyZWRzIiwiZG9SZXNvbHZlIiwiaGFuZGxlIiwic2VsZiIsImRlZmVycmVkIiwiX2ltbWVkaWF0ZUZuIiwiY2IiLCJvbkZ1bGZpbGxlZCIsIm9uUmVqZWN0ZWQiLCJyZXQiLCJlIiwicHJvbWlzZSIsInB1c2giLCJuZXdWYWx1ZSIsImZpbmFsZSIsInRoaXNBcmciLCJhcHBseSIsImFyZ3VtZW50cyIsImJpbmQiLCJsZW5ndGgiLCJfdW5oYW5kbGVkUmVqZWN0aW9uRm4iLCJpIiwibGVuIiwiSGFuZGxlciIsImRvbmUiLCJleCIsInByb3RvdHlwZSIsInByb20iLCJhbGwiLCJhcnIiLCJhcmdzIiwiQXJyYXkiLCJzbGljZSIsImNhbGwiLCJyZW1haW5pbmciLCJyZXMiLCJ2YWwiLCJyYWNlIiwidmFsdWVzIiwic2V0SW1tZWRpYXRlIiwiZXJyIiwiY29uc29sZSIsIndhcm4iLCJnbG9iYWxOUyIsIndpbmRvdyIsIkVycm9yIiwiR2VvaGFzaCIsImJhc2UzMiIsImVuY29kZSIsImxhdCIsImxvbiIsInByZWNpc2lvbiIsInAiLCJoYXNoIiwicG9zbiIsImRlY29kZSIsIk51bWJlciIsImlzTmFOIiwiaWR4IiwiYml0IiwiZXZlbkJpdCIsImdlb2hhc2giLCJsYXRNaW4iLCJsYXRNYXgiLCJsb25NaW4iLCJsb25NYXgiLCJsb25NaWQiLCJsYXRNaWQiLCJjaGFyQXQiLCJib3VuZHMiLCJzdyIsIm5lIiwidG9GaXhlZCIsIk1hdGgiLCJmbG9vciIsImxvZyIsIkxOMTAiLCJ0b0xvd2VyQ2FzZSIsImNociIsImluZGV4T2YiLCJuIiwiYml0TiIsImFkamFjZW50IiwiZGlyZWN0aW9uIiwibGFzdENoIiwicGFyZW50IiwidHlwZSIsInMiLCJ3IiwibmVpZ2hib3VycyIsInNlIiwibnciLCJQcm94aXN0b3JlIiwibWVzc2FnZXMiLCJmciIsIkZSQSIsIkJFTCIsIkVTUCIsIlVOS05PV05fUE9TSVRJT04iLCJERVNDX0lQX0RJU1FVQUxJRklFRCIsIkRFU0NfVU5TSEFSRUQiLCJERVNDX0lQX1FVQUxJRklFRCIsIkRFU0NfSFRNTDUiLCJERVNDX01BTlVBTCIsIlJFTE9DQVRJT04iLCJNT1JFX0lORk8iLCJQT1NJVElPTl9CTE9DS0VEIiwiQ0xPU0UiLCJERVRBSUwiLCJSRUZVU0VfR0VPTE9DIiwiQkVfR0VPTE9DIiwiTk9UX1NVUFBPUlRFRCIsIm5sIiwiZXMiLCJlbiIsIm1lc3NhZ2UiLCJrZXkiLCJkZWZhdWx0VmFsdWUiLCJsYW5ndWFnZSIsImNvbmZpZyIsImNyZWF0ZVdpZGdldCIsInBhcmVudEVsZW1lbnRJZCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ3aWRnZXQiLCJpdGVtcyIsImxhdGVzdFBvc2l0aW9uIiwibGF0ZXN0U2hvd01hcmtlciIsIm5vdGlmaWNhdGlvbkJhciIsInRpbWVPdXRIYW5sZGVyIiwibW9kYWwiLCJjb3VudHJ5RWxlbWVudElkIiwibG9jYXRpb25FbGVtZW50SWQiLCJkZXNjcmlwdGlvbkVsZW1lbnRJZCIsInJlbG9jYXRpb25FbGVtZW50SWQiLCJtb3JlSW5mb0VsZW1lbnRJZCIsIm1vZGFsRWxlbWVudElkIiwibW9kYWxJRnJhbWVFbGVtZW50SWQiLCJjdXN0b21DbGFzc05hbWUiLCJsb2NhdGlvbiIsImhvc3RuYW1lIiwic3BsaXQiLCJub3RpZmljYXRpb25Ub29sYmFySWQiLCJkYXJrVGhlbWUiLCJpbm5lckhUTUwiLCJ3aWRnZXRIVE1MIiwiYmFja0xpbmsiLCJnZXRXaWRnZXRIVE1MIiwiY29uc2VudFN0cmluZyIsInNldExvY2F0aW9uIiwic2V0RGVzY3JpcHRpb24iLCJzZXRJY29uQ2xhc3MiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImVsZSIsInRleHRDb250ZW50IiwiaXNTYWZhcmkiLCJBamF4IiwiZ2V0IiwicmVzcCIsInBhcnNlZCIsIkpTT04iLCJwYXJzZSIsInVpIiwidXJpIiwid2lkZ2V0Tm9kZSIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJpbWciLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwic3R5bGUiLCJ3aWR0aCIsImhlaWdodCIsImFwcGVuZENoaWxkIiwicHhfaWZyYW1lX3N0eWxlIiwiaGVhZCIsInB4X2lmcmFtZV9zaXJkYXRhIiwiYm9keSIsInNob3J0V2lkZ2V0SWRzIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwibWF0Y2giLCJyZXBsYWNlIiwib25jbGljayIsImRpc3BsYXkiLCJlbSIsInB1Ymxpc2giLCJHRU9MT0NBVElPTl9SRVFVRVNURUQiLCJldmVudCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwidGFyZ2V0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImlGcmFtZUxvYWRlZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ1cGRhdGVNYXBDZW50ZXIiLCJzdWJzY3JpYmUiLCJHRU9MT0NBVElPTl9DSEFOR0VEIiwidW50cmFja01zZyIsImNvdW50cnkiLCJjb3VudHJ5SXNvMyIsInBvc3RhbENvZGUiLCJsb2NhbGl0eSIsImRlc2NyaXB0aW9uIiwicmVsb2NhdGlvbiIsImdlbG9jQmxvY2siLCJkZXRhaWwiLCJjbG9zZSIsIm1vcmVJbmZvIiwicG9zaXRpb24iLCJzaG93TWFya2VyIiwiaWNvbnMiLCJjbGFzc05hbWUiLCJkaXNxdWFsaWZpZWQiLCJzZXRDb3VudHJ5IiwiYWpheCIsInVybCIsImFwaVJvb3RWZXJzaW9uZWRVcmwiLCJkZWxldGUiLCJyZXNwb25zZSIsIm1zZyIsImVycm9yIiwiZm9yY2VIdG1sNSIsInB4X2lmcmFtZSIsInNyYyIsImFwaVJvb3QiLCJnb29nbGVBcGlLZXkiLCJlbmNvZGVVUklDb21wb25lbnQiLCJzZXRSZWxvY2F0aW9uIiwicmVmdXNlR2VvbG9jIiwidW50cmFja0xpbmsiLCJHRU9MT0NBVElPTl9SRUZVU0VEIiwic2V0UmVmdXNlR2VvbG9jIiwic2V0TW9yZUluZm8iLCJjcmVhdGVOb3RpZmljYXRpb25CYXIiLCJHRU9MT0NBVElPTl9FUlJPUiIsImNsYXNzTGlzdCIsInJlbW92ZSIsImhpZGVOb3RpZmljYXRpb24iLCJub2RlcyIsImNoaWxkTm9kZXMiLCJub2RlVmFsdWUiLCJwb3N0TWVzc2FnZVRvSUZyYW1lIiwiZGF0YSIsImlGcmFtZVdpbmRvdyIsImNvbnRlbnRXaW5kb3ciLCJjaGFubmVsIiwiTWVzc2FnZUNoYW5uZWwiLCJwb3N0TWVzc2FnZSIsInBvcnQyIiwibm90aWZpY2F0aW9uRGl2IiwiY2hpbGRyZW4iLCJvbm1vdXNlb3ZlciIsImNsZWFyVGltZW91dCIsIm9ubW91c2VvdXQiLCJjb250YWluZXIiLCJkaXNwbGF5Tm9uZSIsImNscyIsInBhdGhzIiwiV2lkZ2V0IiwiY3JlYXRlV2lkZ2V0cyIsIndpZGdldElkcyIsImlzQXJyYXkiLCJTdHJpbmciLCJoYXNDb25zZW50IiwiZ2VvTG9jYXRpb25DYWxsYmFjayIsImV2IiwicHhfemlwIiwicHhfZGlzdHJpY3QiLCJhcmVhcyIsImFyZWEiLCJsYWJlbCIsImNvZGUiLCJsb2NhdGlvblJlc3RyaWN0ZWQiLCJjb3VudHJ5SXNvMiIsInB4X2NvdW50cnkiLCJweF9jaXR5IiwidmlzaWJsZSIsIndpZGdldElkIiwib3ZlcnJpZGRlbkNvbmZpZyIsImNmZyIsImMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsIndyaXRhYmxlIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIkxvY2F0aW9uIiwiZ2VvSGFzaCIsImh0bWw1R2VvbG9jYXRpb24iLCJnZW9sb2NhdGlvbiIsImdldEN1cnJlbnRQb3NpdGlvbiIsInBhcmFtcyIsImtleXMiLCJuYW1lIiwicG9zdCIsImNyZWF0ZUNvb2tpZUh0bWw1IiwibGF0aXR1ZGUiLCJjb29yZHMiLCJsb25naXR1ZGUiLCJhY2N1cmFjeSIsImh0bWw1Q29va2llVmFsdWUiLCJnZW9sb2NhdGlvbkNoYW5nZWQiLCJkZWxldGVDb29raWVNYW51YWwiLCJnZW9sb2NhdGlvbkVycm9yIiwiY3JlYXRlQ29va2llUmVmdXNhbEh0bWw1IiwibWF4aW11bUFnZSIsInRpbWVvdXQiLCJlbmFibGVIaWdoQWNjdXJhY3kiLCJjcmVhdGVDb29raWVNYW51YWwiLCJtYW51YWxDb29raWVWYWx1ZSIsInJlYWQiLCJjb29raWVWYWx1ZSIsImNvb2tpZSIsImdlb0Nvb2tpZVR5cGUiLCJkaXNhYmxlSHRtbDVHZW9Mb2NhdGlvbiIsImh0bWw1UmVmdXNhbCIsImxvYyIsIm5ld0xvYyIsInNlbmRUb1NpcmRhdGEiLCJzZW5kR2VvbG9jVG9TaXJEYXRhIiwiY2F0Y2giLCJjbXAiLCJwYSIsInNpIiwiY291bnRyeUNvZGUiLCJnZXRDb3VudHJ5U0kiLCJ1Zl9wb3N0YWxfY29kZSIsInVzZXJfY291bnRyeSIsInVzZXJfY2l0eSIsInVzZXJfbGF0IiwidXNlcl9sb25nIiwidXNlcl9pcmlzIiwidXNlcl9uaXM5IiwiY3VzdG9tX3NlZ21lbnQiLCJyYW5kIiwiRGF0ZSIsImdldFRpbWUiLCJjb25maWdQYXJhbXMiLCJ2Iiwic2RkYW5KUyIsImFzeW5jIiwiam9pbiIsIm1ldGhvZCIsInJlcXVlc3QiLCJYTUxIdHRwUmVxdWVzdCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJET05FIiwic3RhdHVzIiwicmVzcG9uc2VUZXh0Iiwic3RhdHVzVGV4dCIsIm9uZXJyb3IiLCJ3aXRoQ3JlZGVudGlhbHMiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsInNlbmQiLCJwdXQiLCJldmVudHMiLCJoYW5kbGVycyIsImhhbmRsZXIiLCJ1bnN1YnNjcmliZSIsImhhbmRsZXJJZHgiLCJzcGxpY2UiLCJhc3NpZ24iLCJ2YXJBcmdzIiwidG8iLCJpbmRleCIsIm5leHRTb3VyY2UiLCJuZXh0S2V5IiwiaGFzT3duUHJvcGVydHkiLCJfZGVmYXVsdHMiLCJhcGlWZXJzaW9uIiwidmVyYm9zZSIsImFwaVJvb3RVcmwiLCJfY29uZmlnIiwiX19jbXAiLCJ2ZW5kb3JDb25zZW50cyIsImFkZFBpeGVsQ291bnRlckltZyIsInBpeGVsQ291bnRlckRpdiIsInBpeGVsQ291bnRlckltZ1VybCIsInNlYXJjaCIsInBpeGVsQ291bnRlcl9pbWciLCJwaXhlbENvdW50ZXJfaW1nX3NyYyIsImNyZWF0ZUF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZU5vZGUiLCJhdHRyaWJ1dGUiLCJhZGRQaXhlbENvdW50ZXIiLCJwdWJsaXNoZXJTcG90SWQiLCJib3hJZCIsInBpeGVsQ291bnRlckltZ1VybHMiLCJib3hQb3NpdGlvbiIsInBpeGVsQ291bnRlcl9kaXZfaWQiLCJwaXhlbENvdW50ZXJfZGl2X2NsYXNzIiwicGl4ZWxDb3VudGVyX2Rpdl9zdHlsZSIsImdldFBpeGVsQ291bnRlckRpdiIsIm1hbmFnZUluZm9Cb3giLCJwdWJsaXNoZXJTcG90UmVmZXJlbmNlSWQiLCJpbmZvQm94T3JpZW50YXRpb24iLCJmb3JjZUV4cGFuZCIsImluZm9Cb3giLCJjbGllbnRXaWR0aCIsImFkdmVydGlzZW1lbnRCb3giLCJvcHRpb25zIiwidmlld1VybCIsInZpZXdNZXRob2QiLCJkaXYiLCJpbmplY3RNYXJrdXAiLCJib3giLCJhZHZlcnRpc2VtZW50IiwiaXNIVE1MNSIsImRlYWxJZCIsInZpZXdQdXRVcmwiLCJweEFqYXgiLCJocmVmIiwibGluayIsImRvY3VtZW50RWxlbWVudCIsImluc2VydEJlZm9yZSIsImZpcnN0Q2hpbGQiLCJsb2FkQ1NTIiwic3RhcnQiLCJwdWJsaXNoZXJTcG90IiwidXJsVmlzdWFscyIsImxhc3RJbmRleE9mIiwic3Vic3RyIiwiJHBzX2JveF9jb2RlIiwicmVsb2NhbGlzYXRpb25VcmwiLCJzdXJmZXJDaXR5TmFtZSIsInN1cmZlckRhdGEiLCJjbGVhckludGVydmFsIiwidXJsUmVkaXJlY3Rpb24iLCJzZXRJbnRlcnZhbCIsInVybFBpeGVsQ291bnRlcnMiLCJ1cGRhdGVBZCIsInBpY3RvIiwiY2xpY2siLCJzdGFydEluZm9ib3hUcmFuc2l0aW9uIiwiYWRkQWR2ZXJ0aXNlbWVudENsaWNrSGFuZGxlciIsImFkdmVydGlzZW1lbnRJZCIsInN0cmluZ2lmeSIsImNhbXBhaWduSWQiLCJjbGlja0hhbmRsZXIiLCJtb3VzZU92ZXJIYW5kbGVyIiwiYWRkUGljdG9IYW5kbGVycyJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsRUFBQUMsR0FDQSxpQkFBQUMsU0FBQSxvQkFBQUMsT0FBQUYsSUFDQSxtQkFBQUcsUUFBQUEsT0FBQUMsSUFBQUQsT0FBQUgsR0FDQUEsSUFIQSxDQUlBSyxFQUFBLFdBQUEsYUFLQSxTQUFBQyxFQUFBQyxHQUNBLElBQUFDLEVBQUFILEtBQUFHLFlBQ0EsT0FBQUgsS0FBQUksS0FDQSxTQUFBQyxHQUNBLE9BQUFGLEVBQUFHLFFBQUFKLEtBQUFFLEtBQUEsV0FDQSxPQUFBQyxLQUdBLFNBQUFFLEdBQ0EsT0FBQUosRUFBQUcsUUFBQUosS0FBQUUsS0FBQSxXQUNBLE9BQUFELEVBQUFLLE9BQUFELE9BUUEsSUFBQUUsRUFBQUMsV0FFQSxTQUFBQyxLQWFBLFNBQUFDLEVBQUFDLEdBQ0EsS0FBQWIsZ0JBQUFZLEdBQ0EsTUFBQSxJQUFBRSxVQUFBLHdDQUNBLEdBQUEsbUJBQUFELEVBQUEsTUFBQSxJQUFBQyxVQUFBLGtCQUVBZCxLQUFBZSxPQUFBLEVBRUFmLEtBQUFnQixVQUFBLEVBRUFoQixLQUFBaUIsWUFBQUMsRUFFQWxCLEtBQUFtQixXQUFBLEdB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QS9CLEVBQUFYLEVBQUEyQyxFQUFBQyxHQUVBL1QsU0FBQUMsZUFBQSxZQUFBNlIsRUFBQVksY0FBQXhCLDBCQUNBN00saUJBQUEsUUFBQXlQLEdBR0E5VCxTQUFBQyxlQUFBLGNBQUE2UixFQUFBWSxjQUFBeEIsMEJBQ0E3TSxpQkFBQSxZQUFBMFAsR0FxR0FDLENBQUFsQyxFQUFBWCxFQUNBLFdBQ0FGLEVBQUFhLEVBQUFZLGNBQUF4Qix5QkFBQUMsSUFDQSxXQUNBRixFQUFBYSxFQUFBWSxjQUFBeEIseUJBQUFDLEdBQUEsT0FVQWpULEVBdE9BLENBeU9BQSxZQUFBIiwiZmlsZSI6InByb3hpc3RvcmUubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcblx0dHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gZmFjdG9yeSgpIDpcblx0dHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcblx0KGZhY3RvcnkoKSk7XG59KHRoaXMsIChmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBAdGhpcyB7UHJvbWlzZX1cbiAqL1xuZnVuY3Rpb24gZmluYWxseUNvbnN0cnVjdG9yKGNhbGxiYWNrKSB7XG4gIHZhciBjb25zdHJ1Y3RvciA9IHRoaXMuY29uc3RydWN0b3I7XG4gIHJldHVybiB0aGlzLnRoZW4oXG4gICAgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiBjb25zdHJ1Y3Rvci5yZXNvbHZlKGNhbGxiYWNrKCkpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgICByZXR1cm4gY29uc3RydWN0b3IucmVzb2x2ZShjYWxsYmFjaygpKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY29uc3RydWN0b3IucmVqZWN0KHJlYXNvbik7XG4gICAgICB9KTtcbiAgICB9XG4gICk7XG59XG5cbi8vIFN0b3JlIHNldFRpbWVvdXQgcmVmZXJlbmNlIHNvIHByb21pc2UtcG9seWZpbGwgd2lsbCBiZSB1bmFmZmVjdGVkIGJ5XG4vLyBvdGhlciBjb2RlIG1vZGlmeWluZyBzZXRUaW1lb3V0IChsaWtlIHNpbm9uLnVzZUZha2VUaW1lcnMoKSlcbnZhciBzZXRUaW1lb3V0RnVuYyA9IHNldFRpbWVvdXQ7XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG4vLyBQb2x5ZmlsbCBmb3IgRnVuY3Rpb24ucHJvdG90eXBlLmJpbmRcbmZ1bmN0aW9uIGJpbmQoZm4sIHRoaXNBcmcpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIGZuLmFwcGx5KHRoaXNBcmcsIGFyZ3VtZW50cyk7XG4gIH07XG59XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICovXG5mdW5jdGlvbiBQcm9taXNlKGZuKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBQcm9taXNlKSlcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdQcm9taXNlcyBtdXN0IGJlIGNvbnN0cnVjdGVkIHZpYSBuZXcnKTtcbiAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykgdGhyb3cgbmV3IFR5cGVFcnJvcignbm90IGEgZnVuY3Rpb24nKTtcbiAgLyoqIEB0eXBlIHshbnVtYmVyfSAqL1xuICB0aGlzLl9zdGF0ZSA9IDA7XG4gIC8qKiBAdHlwZSB7IWJvb2xlYW59ICovXG4gIHRoaXMuX2hhbmRsZWQgPSBmYWxzZTtcbiAgLyoqIEB0eXBlIHtQcm9taXNlfHVuZGVmaW5lZH0gKi9cbiAgdGhpcy5fdmFsdWUgPSB1bmRlZmluZWQ7XG4gIC8qKiBAdHlwZSB7IUFycmF5PCFGdW5jdGlvbj59ICovXG4gIHRoaXMuX2RlZmVycmVkcyA9IFtdO1xuXG4gIGRvUmVzb2x2ZShmbiwgdGhpcyk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZShzZWxmLCBkZWZlcnJlZCkge1xuICB3aGlsZSAoc2VsZi5fc3RhdGUgPT09IDMpIHtcbiAgICBzZWxmID0gc2VsZi5fdmFsdWU7XG4gIH1cbiAgaWYgKHNlbGYuX3N0YXRlID09PSAwKSB7XG4gICAgc2VsZi5fZGVmZXJyZWRzLnB1c2goZGVmZXJyZWQpO1xuICAgIHJldHVybjtcbiAgfVxuICBzZWxmLl9oYW5kbGVkID0gdHJ1ZTtcbiAgUHJvbWlzZS5faW1tZWRpYXRlRm4oZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNiID0gc2VsZi5fc3RhdGUgPT09IDEgPyBkZWZlcnJlZC5vbkZ1bGZpbGxlZCA6IGRlZmVycmVkLm9uUmVqZWN0ZWQ7XG4gICAgaWYgKGNiID09PSBudWxsKSB7XG4gICAgICAoc2VsZi5fc3RhdGUgPT09IDEgPyByZXNvbHZlIDogcmVqZWN0KShkZWZlcnJlZC5wcm9taXNlLCBzZWxmLl92YWx1ZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciByZXQ7XG4gICAgdHJ5IHtcbiAgICAgIHJldCA9IGNiKHNlbGYuX3ZhbHVlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZWplY3QoZGVmZXJyZWQucHJvbWlzZSwgZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHJlc29sdmUoZGVmZXJyZWQucHJvbWlzZSwgcmV0KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHJlc29sdmUoc2VsZiwgbmV3VmFsdWUpIHtcbiAgdHJ5IHtcbiAgICAvLyBQcm9taXNlIFJlc29sdXRpb24gUHJvY2VkdXJlOiBodHRwczovL2dpdGh1Yi5jb20vcHJvbWlzZXMtYXBsdXMvcHJvbWlzZXMtc3BlYyN0aGUtcHJvbWlzZS1yZXNvbHV0aW9uLXByb2NlZHVyZVxuICAgIGlmIChuZXdWYWx1ZSA9PT0gc2VsZilcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0EgcHJvbWlzZSBjYW5ub3QgYmUgcmVzb2x2ZWQgd2l0aCBpdHNlbGYuJyk7XG4gICAgaWYgKFxuICAgICAgbmV3VmFsdWUgJiZcbiAgICAgICh0eXBlb2YgbmV3VmFsdWUgPT09ICdvYmplY3QnIHx8IHR5cGVvZiBuZXdWYWx1ZSA9PT0gJ2Z1bmN0aW9uJylcbiAgICApIHtcbiAgICAgIHZhciB0aGVuID0gbmV3VmFsdWUudGhlbjtcbiAgICAgIGlmIChuZXdWYWx1ZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgc2VsZi5fc3RhdGUgPSAzO1xuICAgICAgICBzZWxmLl92YWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICBmaW5hbGUoc2VsZik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgZG9SZXNvbHZlKGJpbmQodGhlbiwgbmV3VmFsdWUpLCBzZWxmKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICBzZWxmLl9zdGF0ZSA9IDE7XG4gICAgc2VsZi5fdmFsdWUgPSBuZXdWYWx1ZTtcbiAgICBmaW5hbGUoc2VsZik7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZWplY3Qoc2VsZiwgZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVqZWN0KHNlbGYsIG5ld1ZhbHVlKSB7XG4gIHNlbGYuX3N0YXRlID0gMjtcbiAgc2VsZi5fdmFsdWUgPSBuZXdWYWx1ZTtcbiAgZmluYWxlKHNlbGYpO1xufVxuXG5mdW5jdGlvbiBmaW5hbGUoc2VsZikge1xuICBpZiAoc2VsZi5fc3RhdGUgPT09IDIgJiYgc2VsZi5fZGVmZXJyZWRzLmxlbmd0aCA9PT0gMCkge1xuICAgIFByb21pc2UuX2ltbWVkaWF0ZUZuKGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCFzZWxmLl9oYW5kbGVkKSB7XG4gICAgICAgIFByb21pc2UuX3VuaGFuZGxlZFJlamVjdGlvbkZuKHNlbGYuX3ZhbHVlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBzZWxmLl9kZWZlcnJlZHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICBoYW5kbGUoc2VsZiwgc2VsZi5fZGVmZXJyZWRzW2ldKTtcbiAgfVxuICBzZWxmLl9kZWZlcnJlZHMgPSBudWxsO1xufVxuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBIYW5kbGVyKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCBwcm9taXNlKSB7XG4gIHRoaXMub25GdWxmaWxsZWQgPSB0eXBlb2Ygb25GdWxmaWxsZWQgPT09ICdmdW5jdGlvbicgPyBvbkZ1bGZpbGxlZCA6IG51bGw7XG4gIHRoaXMub25SZWplY3RlZCA9IHR5cGVvZiBvblJlamVjdGVkID09PSAnZnVuY3Rpb24nID8gb25SZWplY3RlZCA6IG51bGw7XG4gIHRoaXMucHJvbWlzZSA9IHByb21pc2U7XG59XG5cbi8qKlxuICogVGFrZSBhIHBvdGVudGlhbGx5IG1pc2JlaGF2aW5nIHJlc29sdmVyIGZ1bmN0aW9uIGFuZCBtYWtlIHN1cmVcbiAqIG9uRnVsZmlsbGVkIGFuZCBvblJlamVjdGVkIGFyZSBvbmx5IGNhbGxlZCBvbmNlLlxuICpcbiAqIE1ha2VzIG5vIGd1YXJhbnRlZXMgYWJvdXQgYXN5bmNocm9ueS5cbiAqL1xuZnVuY3Rpb24gZG9SZXNvbHZlKGZuLCBzZWxmKSB7XG4gIHZhciBkb25lID0gZmFsc2U7XG4gIHRyeSB7XG4gICAgZm4oXG4gICAgICBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBpZiAoZG9uZSkgcmV0dXJuO1xuICAgICAgICBkb25lID0gdHJ1ZTtcbiAgICAgICAgcmVzb2x2ZShzZWxmLCB2YWx1ZSk7XG4gICAgICB9LFxuICAgICAgZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgICAgIGlmIChkb25lKSByZXR1cm47XG4gICAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgICByZWplY3Qoc2VsZiwgcmVhc29uKTtcbiAgICAgIH1cbiAgICApO1xuICB9IGNhdGNoIChleCkge1xuICAgIGlmIChkb25lKSByZXR1cm47XG4gICAgZG9uZSA9IHRydWU7XG4gICAgcmVqZWN0KHNlbGYsIGV4KTtcbiAgfVxufVxuXG5Qcm9taXNlLnByb3RvdHlwZVsnY2F0Y2gnXSA9IGZ1bmN0aW9uKG9uUmVqZWN0ZWQpIHtcbiAgcmV0dXJuIHRoaXMudGhlbihudWxsLCBvblJlamVjdGVkKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLnRoZW4gPSBmdW5jdGlvbihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCkge1xuICAvLyBAdHMtaWdub3JlXG4gIHZhciBwcm9tID0gbmV3IHRoaXMuY29uc3RydWN0b3Iobm9vcCk7XG5cbiAgaGFuZGxlKHRoaXMsIG5ldyBIYW5kbGVyKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCBwcm9tKSk7XG4gIHJldHVybiBwcm9tO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGVbJ2ZpbmFsbHknXSA9IGZpbmFsbHlDb25zdHJ1Y3RvcjtcblxuUHJvbWlzZS5hbGwgPSBmdW5jdGlvbihhcnIpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgIGlmICghYXJyIHx8IHR5cGVvZiBhcnIubGVuZ3RoID09PSAndW5kZWZpbmVkJylcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Byb21pc2UuYWxsIGFjY2VwdHMgYW4gYXJyYXknKTtcbiAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFycik7XG4gICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSByZXR1cm4gcmVzb2x2ZShbXSk7XG4gICAgdmFyIHJlbWFpbmluZyA9IGFyZ3MubGVuZ3RoO1xuXG4gICAgZnVuY3Rpb24gcmVzKGksIHZhbCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKHZhbCAmJiAodHlwZW9mIHZhbCA9PT0gJ29iamVjdCcgfHwgdHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJykpIHtcbiAgICAgICAgICB2YXIgdGhlbiA9IHZhbC50aGVuO1xuICAgICAgICAgIGlmICh0eXBlb2YgdGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhlbi5jYWxsKFxuICAgICAgICAgICAgICB2YWwsXG4gICAgICAgICAgICAgIGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICAgICAgICAgIHJlcyhpLCB2YWwpO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICByZWplY3RcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGFyZ3NbaV0gPSB2YWw7XG4gICAgICAgIGlmICgtLXJlbWFpbmluZyA9PT0gMCkge1xuICAgICAgICAgIHJlc29sdmUoYXJncyk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgIHJlamVjdChleCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICByZXMoaSwgYXJnc1tpXSk7XG4gICAgfVxuICB9KTtcbn07XG5cblByb21pc2UucmVzb2x2ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlLmNvbnN0cnVjdG9yID09PSBQcm9taXNlKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpIHtcbiAgICByZXNvbHZlKHZhbHVlKTtcbiAgfSk7XG59O1xuXG5Qcm9taXNlLnJlamVjdCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICByZWplY3QodmFsdWUpO1xuICB9KTtcbn07XG5cblByb21pc2UucmFjZSA9IGZ1bmN0aW9uKHZhbHVlcykge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHZhbHVlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgdmFsdWVzW2ldLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICB9XG4gIH0pO1xufTtcblxuLy8gVXNlIHBvbHlmaWxsIGZvciBzZXRJbW1lZGlhdGUgZm9yIHBlcmZvcm1hbmNlIGdhaW5zXG5Qcm9taXNlLl9pbW1lZGlhdGVGbiA9XG4gICh0eXBlb2Ygc2V0SW1tZWRpYXRlID09PSAnZnVuY3Rpb24nICYmXG4gICAgZnVuY3Rpb24oZm4pIHtcbiAgICAgIHNldEltbWVkaWF0ZShmbik7XG4gICAgfSkgfHxcbiAgZnVuY3Rpb24oZm4pIHtcbiAgICBzZXRUaW1lb3V0RnVuYyhmbiwgMCk7XG4gIH07XG5cblByb21pc2UuX3VuaGFuZGxlZFJlamVjdGlvbkZuID0gZnVuY3Rpb24gX3VuaGFuZGxlZFJlamVjdGlvbkZuKGVycikge1xuICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIGNvbnNvbGUpIHtcbiAgICBjb25zb2xlLndhcm4oJ1Bvc3NpYmxlIFVuaGFuZGxlZCBQcm9taXNlIFJlamVjdGlvbjonLCBlcnIpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcbiAgfVxufTtcblxuLyoqIEBzdXBwcmVzcyB7dW5kZWZpbmVkVmFyc30gKi9cbnZhciBnbG9iYWxOUyA9IChmdW5jdGlvbigpIHtcbiAgLy8gdGhlIG9ubHkgcmVsaWFibGUgbWVhbnMgdG8gZ2V0IHRoZSBnbG9iYWwgb2JqZWN0IGlzXG4gIC8vIGBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpYFxuICAvLyBIb3dldmVyLCB0aGlzIGNhdXNlcyBDU1AgdmlvbGF0aW9ucyBpbiBDaHJvbWUgYXBwcy5cbiAgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBzZWxmO1xuICB9XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiB3aW5kb3c7XG4gIH1cbiAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIGdsb2JhbDtcbiAgfVxuICB0aHJvdyBuZXcgRXJyb3IoJ3VuYWJsZSB0byBsb2NhdGUgZ2xvYmFsIG9iamVjdCcpO1xufSkoKTtcblxuaWYgKCEoJ1Byb21pc2UnIGluIGdsb2JhbE5TKSkge1xuICBnbG9iYWxOU1snUHJvbWlzZSddID0gUHJvbWlzZTtcbn0gZWxzZSBpZiAoIWdsb2JhbE5TLlByb21pc2UucHJvdG90eXBlWydmaW5hbGx5J10pIHtcbiAgZ2xvYmFsTlMuUHJvbWlzZS5wcm90b3R5cGVbJ2ZpbmFsbHknXSA9IGZpbmFsbHlDb25zdHJ1Y3Rvcjtcbn1cblxufSkpKTtcbiIsIi8qIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAgKi9cbi8qIEdlb2hhc2ggZW5jb2RpbmcvZGVjb2RpbmcgYW5kIGFzc29jaWF0ZWQgZnVuY3Rpb25zICAgKGMpIENocmlzIFZlbmVzcyAyMDE0LTIwMTYgLyBNSVQgTGljZW5jZSAgKi9cbi8qIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAgKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5cbi8qKlxuICogR2VvaGFzaCBlbmNvZGUsIGRlY29kZSwgYm91bmRzLCBuZWlnaGJvdXJzLlxuICpcbiAqIEBuYW1lc3BhY2VcbiAqL1xudmFyIEdlb2hhc2ggPSB7fTtcblxuLyogKEdlb2hhc2gtc3BlY2lmaWMpIEJhc2UzMiBtYXAgKi9cbkdlb2hhc2guYmFzZTMyID0gJzAxMjM0NTY3ODliY2RlZmdoamttbnBxcnN0dXZ3eHl6JztcblxuLyoqXG4gKiBFbmNvZGVzIGxhdGl0dWRlL2xvbmdpdHVkZSB0byBnZW9oYXNoLCBlaXRoZXIgdG8gc3BlY2lmaWVkIHByZWNpc2lvbiBvciB0byBhdXRvbWF0aWNhbGx5XG4gKiBldmFsdWF0ZWQgcHJlY2lzaW9uLlxuICpcbiAqIEBwYXJhbSAgIHtudW1iZXJ9IGxhdCAtIExhdGl0dWRlIGluIGRlZ3JlZXMuXG4gKiBAcGFyYW0gICB7bnVtYmVyfSBsb24gLSBMb25naXR1ZGUgaW4gZGVncmVlcy5cbiAqIEBwYXJhbSAgIHtudW1iZXJ9IFtwcmVjaXNpb25dIC0gTnVtYmVyIG9mIGNoYXJhY3RlcnMgaW4gcmVzdWx0aW5nIGdlb2hhc2guXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBHZW9oYXNoIG9mIHN1cHBsaWVkIGxhdGl0dWRlL2xvbmdpdHVkZS5cbiAqIEB0aHJvd3MgIEludmFsaWQgZ2VvaGFzaC5cbiAqXG4gKiBAZXhhbXBsZVxuICogICAgIHZhciBnZW9oYXNoID0gR2VvaGFzaC5lbmNvZGUoNTIuMjA1LCAwLjExOSwgNyk7IC8vIGdlb2hhc2g6ICd1MTIwZnh3J1xuICovXG5HZW9oYXNoLmVuY29kZSA9IGZ1bmN0aW9uKGxhdCwgbG9uLCBwcmVjaXNpb24pIHtcbiAgICAvLyBpbmZlciBwcmVjaXNpb24/XG4gICAgaWYgKHR5cGVvZiBwcmVjaXNpb24gPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgLy8gcmVmaW5lIGdlb2hhc2ggdW50aWwgaXQgbWF0Y2hlcyBwcmVjaXNpb24gb2Ygc3VwcGxpZWQgbGF0L2xvblxuICAgICAgICBmb3IgKHZhciBwPTE7IHA8PTEyOyBwKyspIHtcbiAgICAgICAgICAgIHZhciBoYXNoID0gR2VvaGFzaC5lbmNvZGUobGF0LCBsb24sIHApO1xuICAgICAgICAgICAgdmFyIHBvc24gPSBHZW9oYXNoLmRlY29kZShoYXNoKTtcbiAgICAgICAgICAgIGlmIChwb3NuLmxhdD09bGF0ICYmIHBvc24ubG9uPT1sb24pIHJldHVybiBoYXNoO1xuICAgICAgICB9XG4gICAgICAgIHByZWNpc2lvbiA9IDEyOyAvLyBzZXQgdG8gbWF4aW11bVxuICAgIH1cblxuICAgIGxhdCA9IE51bWJlcihsYXQpO1xuICAgIGxvbiA9IE51bWJlcihsb24pO1xuICAgIHByZWNpc2lvbiA9IE51bWJlcihwcmVjaXNpb24pO1xuXG4gICAgaWYgKGlzTmFOKGxhdCkgfHwgaXNOYU4obG9uKSB8fCBpc05hTihwcmVjaXNpb24pKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgZ2VvaGFzaCcpO1xuXG4gICAgdmFyIGlkeCA9IDA7IC8vIGluZGV4IGludG8gYmFzZTMyIG1hcFxuICAgIHZhciBiaXQgPSAwOyAvLyBlYWNoIGNoYXIgaG9sZHMgNSBiaXRzXG4gICAgdmFyIGV2ZW5CaXQgPSB0cnVlO1xuICAgIHZhciBnZW9oYXNoID0gJyc7XG5cbiAgICB2YXIgbGF0TWluID0gIC05MCwgbGF0TWF4ID0gIDkwO1xuICAgIHZhciBsb25NaW4gPSAtMTgwLCBsb25NYXggPSAxODA7XG5cbiAgICB3aGlsZSAoZ2VvaGFzaC5sZW5ndGggPCBwcmVjaXNpb24pIHtcbiAgICAgICAgaWYgKGV2ZW5CaXQpIHtcbiAgICAgICAgICAgIC8vIGJpc2VjdCBFLVcgbG9uZ2l0dWRlXG4gICAgICAgICAgICB2YXIgbG9uTWlkID0gKGxvbk1pbiArIGxvbk1heCkgLyAyO1xuICAgICAgICAgICAgaWYgKGxvbiA+PSBsb25NaWQpIHtcbiAgICAgICAgICAgICAgICBpZHggPSBpZHgqMiArIDE7XG4gICAgICAgICAgICAgICAgbG9uTWluID0gbG9uTWlkO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZHggPSBpZHgqMjtcbiAgICAgICAgICAgICAgICBsb25NYXggPSBsb25NaWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBiaXNlY3QgTi1TIGxhdGl0dWRlXG4gICAgICAgICAgICB2YXIgbGF0TWlkID0gKGxhdE1pbiArIGxhdE1heCkgLyAyO1xuICAgICAgICAgICAgaWYgKGxhdCA+PSBsYXRNaWQpIHtcbiAgICAgICAgICAgICAgICBpZHggPSBpZHgqMiArIDE7XG4gICAgICAgICAgICAgICAgbGF0TWluID0gbGF0TWlkO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZHggPSBpZHgqMjtcbiAgICAgICAgICAgICAgICBsYXRNYXggPSBsYXRNaWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZXZlbkJpdCA9ICFldmVuQml0O1xuXG4gICAgICAgIGlmICgrK2JpdCA9PSA1KSB7XG4gICAgICAgICAgICAvLyA1IGJpdHMgZ2l2ZXMgdXMgYSBjaGFyYWN0ZXI6IGFwcGVuZCBpdCBhbmQgc3RhcnQgb3ZlclxuICAgICAgICAgICAgZ2VvaGFzaCArPSBHZW9oYXNoLmJhc2UzMi5jaGFyQXQoaWR4KTtcbiAgICAgICAgICAgIGJpdCA9IDA7XG4gICAgICAgICAgICBpZHggPSAwO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGdlb2hhc2g7XG59O1xuXG5cbi8qKlxuICogRGVjb2RlIGdlb2hhc2ggdG8gbGF0aXR1ZGUvbG9uZ2l0dWRlIChsb2NhdGlvbiBpcyBhcHByb3hpbWF0ZSBjZW50cmUgb2YgZ2VvaGFzaCBjZWxsLFxuICogICAgIHRvIHJlYXNvbmFibGUgcHJlY2lzaW9uKS5cbiAqXG4gKiBAcGFyYW0gICB7c3RyaW5nfSBnZW9oYXNoIC0gR2VvaGFzaCBzdHJpbmcgdG8gYmUgY29udmVydGVkIHRvIGxhdGl0dWRlL2xvbmdpdHVkZS5cbiAqIEByZXR1cm5zIHt7bGF0Om51bWJlciwgbG9uOm51bWJlcn19IChDZW50ZXIgb2YpIGdlb2hhc2hlZCBsb2NhdGlvbi5cbiAqIEB0aHJvd3MgIEludmFsaWQgZ2VvaGFzaC5cbiAqXG4gKiBAZXhhbXBsZVxuICogICAgIHZhciBsYXRsb24gPSBHZW9oYXNoLmRlY29kZSgndTEyMGZ4dycpOyAvLyBsYXRsb246IHsgbGF0OiA1Mi4yMDUsIGxvbjogMC4xMTg4IH1cbiAqL1xuR2VvaGFzaC5kZWNvZGUgPSBmdW5jdGlvbihnZW9oYXNoKSB7XG5cbiAgICB2YXIgYm91bmRzID0gR2VvaGFzaC5ib3VuZHMoZ2VvaGFzaCk7IC8vIDwtLSB0aGUgaGFyZCB3b3JrXG4gICAgLy8gbm93IGp1c3QgZGV0ZXJtaW5lIHRoZSBjZW50cmUgb2YgdGhlIGNlbGwuLi5cblxuICAgIHZhciBsYXRNaW4gPSBib3VuZHMuc3cubGF0LCBsb25NaW4gPSBib3VuZHMuc3cubG9uO1xuICAgIHZhciBsYXRNYXggPSBib3VuZHMubmUubGF0LCBsb25NYXggPSBib3VuZHMubmUubG9uO1xuXG4gICAgLy8gY2VsbCBjZW50cmVcbiAgICB2YXIgbGF0ID0gKGxhdE1pbiArIGxhdE1heCkvMjtcbiAgICB2YXIgbG9uID0gKGxvbk1pbiArIGxvbk1heCkvMjtcblxuICAgIC8vIHJvdW5kIHRvIGNsb3NlIHRvIGNlbnRyZSB3aXRob3V0IGV4Y2Vzc2l2ZSBwcmVjaXNpb246IOKMijItbG9nMTAozpTCsCnijIsgZGVjaW1hbCBwbGFjZXNcbiAgICBsYXQgPSBsYXQudG9GaXhlZChNYXRoLmZsb29yKDItTWF0aC5sb2cobGF0TWF4LWxhdE1pbikvTWF0aC5MTjEwKSk7XG4gICAgbG9uID0gbG9uLnRvRml4ZWQoTWF0aC5mbG9vcigyLU1hdGgubG9nKGxvbk1heC1sb25NaW4pL01hdGguTE4xMCkpO1xuXG4gICAgcmV0dXJuIHsgbGF0OiBOdW1iZXIobGF0KSwgbG9uOiBOdW1iZXIobG9uKSB9O1xufTtcblxuXG4vKipcbiAqIFJldHVybnMgU1cvTkUgbGF0aXR1ZGUvbG9uZ2l0dWRlIGJvdW5kcyBvZiBzcGVjaWZpZWQgZ2VvaGFzaC5cbiAqXG4gKiBAcGFyYW0gICB7c3RyaW5nfSBnZW9oYXNoIC0gQ2VsbCB0aGF0IGJvdW5kcyBhcmUgcmVxdWlyZWQgb2YuXG4gKiBAcmV0dXJucyB7e3N3OiB7bGF0OiBudW1iZXIsIGxvbjogbnVtYmVyfSwgbmU6IHtsYXQ6IG51bWJlciwgbG9uOiBudW1iZXJ9fX1cbiAqIEB0aHJvd3MgIEludmFsaWQgZ2VvaGFzaC5cbiAqL1xuR2VvaGFzaC5ib3VuZHMgPSBmdW5jdGlvbihnZW9oYXNoKSB7XG4gICAgaWYgKGdlb2hhc2gubGVuZ3RoID09PSAwKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgZ2VvaGFzaCcpO1xuXG4gICAgZ2VvaGFzaCA9IGdlb2hhc2gudG9Mb3dlckNhc2UoKTtcblxuICAgIHZhciBldmVuQml0ID0gdHJ1ZTtcbiAgICB2YXIgbGF0TWluID0gIC05MCwgbGF0TWF4ID0gIDkwO1xuICAgIHZhciBsb25NaW4gPSAtMTgwLCBsb25NYXggPSAxODA7XG5cbiAgICBmb3IgKHZhciBpPTA7IGk8Z2VvaGFzaC5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgY2hyID0gZ2VvaGFzaC5jaGFyQXQoaSk7XG4gICAgICAgIHZhciBpZHggPSBHZW9oYXNoLmJhc2UzMi5pbmRleE9mKGNocik7XG4gICAgICAgIGlmIChpZHggPT0gLTEpIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBnZW9oYXNoJyk7XG5cbiAgICAgICAgZm9yICh2YXIgbj00OyBuPj0wOyBuLS0pIHtcbiAgICAgICAgICAgIHZhciBiaXROID0gaWR4ID4+IG4gJiAxO1xuICAgICAgICAgICAgaWYgKGV2ZW5CaXQpIHtcbiAgICAgICAgICAgICAgICAvLyBsb25naXR1ZGVcbiAgICAgICAgICAgICAgICB2YXIgbG9uTWlkID0gKGxvbk1pbitsb25NYXgpIC8gMjtcbiAgICAgICAgICAgICAgICBpZiAoYml0TiA9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvbk1pbiA9IGxvbk1pZDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsb25NYXggPSBsb25NaWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBsYXRpdHVkZVxuICAgICAgICAgICAgICAgIHZhciBsYXRNaWQgPSAobGF0TWluK2xhdE1heCkgLyAyO1xuICAgICAgICAgICAgICAgIGlmIChiaXROID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgbGF0TWluID0gbGF0TWlkO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxhdE1heCA9IGxhdE1pZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBldmVuQml0ID0gIWV2ZW5CaXQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgYm91bmRzID0ge1xuICAgICAgICBzdzogeyBsYXQ6IGxhdE1pbiwgbG9uOiBsb25NaW4gfSxcbiAgICAgICAgbmU6IHsgbGF0OiBsYXRNYXgsIGxvbjogbG9uTWF4IH0sXG4gICAgfTtcblxuICAgIHJldHVybiBib3VuZHM7XG59O1xuXG5cbi8qKlxuICogRGV0ZXJtaW5lcyBhZGphY2VudCBjZWxsIGluIGdpdmVuIGRpcmVjdGlvbi5cbiAqXG4gKiBAcGFyYW0gICBnZW9oYXNoIC0gQ2VsbCB0byB3aGljaCBhZGphY2VudCBjZWxsIGlzIHJlcXVpcmVkLlxuICogQHBhcmFtICAgZGlyZWN0aW9uIC0gRGlyZWN0aW9uIGZyb20gZ2VvaGFzaCAoTi9TL0UvVykuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBHZW9jb2RlIG9mIGFkamFjZW50IGNlbGwuXG4gKiBAdGhyb3dzICBJbnZhbGlkIGdlb2hhc2guXG4gKi9cbkdlb2hhc2guYWRqYWNlbnQgPSBmdW5jdGlvbihnZW9oYXNoLCBkaXJlY3Rpb24pIHtcbiAgICAvLyBiYXNlZCBvbiBnaXRodWIuY29tL2RhdmV0cm95L2dlb2hhc2gtanNcblxuICAgIGdlb2hhc2ggPSBnZW9oYXNoLnRvTG93ZXJDYXNlKCk7XG4gICAgZGlyZWN0aW9uID0gZGlyZWN0aW9uLnRvTG93ZXJDYXNlKCk7XG5cbiAgICBpZiAoZ2VvaGFzaC5sZW5ndGggPT09IDApIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBnZW9oYXNoJyk7XG4gICAgaWYgKCduc2V3Jy5pbmRleE9mKGRpcmVjdGlvbikgPT0gLTEpIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBkaXJlY3Rpb24nKTtcblxuICAgIHZhciBuZWlnaGJvdXIgPSB7XG4gICAgICAgIG46IFsgJ3AwcjIxNDM2eDh6YjlkY2Y1aDdram5tcWVzZ3V0d3Z5JywgJ2JjMDFmZzQ1MjM4OTY3ZGV1dmhqeXpucGttc3Rxcnd4JyBdLFxuICAgICAgICBzOiBbICcxNDM2NWg3azlkY2Zlc2d1am5tcXAwcjJ0d3Z5eDh6YicsICcyMzg5NjdkZWJjMDFmZzQ1a21zdHFyd3h1dmhqeXpucCcgXSxcbiAgICAgICAgZTogWyAnYmMwMWZnNDUyMzg5NjdkZXV2aGp5em5wa21zdHFyd3gnLCAncDByMjE0MzZ4OHpiOWRjZjVoN2tqbm1xZXNndXR3dnknIF0sXG4gICAgICAgIHc6IFsgJzIzODk2N2RlYmMwMWZnNDVrbXN0cXJ3eHV2aGp5em5wJywgJzE0MzY1aDdrOWRjZmVzZ3Vqbm1xcDByMnR3dnl4OHpiJyBdLFxuICAgIH07XG4gICAgdmFyIGJvcmRlciA9IHtcbiAgICAgICAgbjogWyAncHJ4eicsICAgICAnYmNmZ3V2eXonIF0sXG4gICAgICAgIHM6IFsgJzAyOGInLCAgICAgJzAxNDVoam5wJyBdLFxuICAgICAgICBlOiBbICdiY2ZndXZ5eicsICdwcnh6JyAgICAgXSxcbiAgICAgICAgdzogWyAnMDE0NWhqbnAnLCAnMDI4YicgICAgIF0sXG4gICAgfTtcblxuICAgIHZhciBsYXN0Q2ggPSBnZW9oYXNoLnNsaWNlKC0xKTsgICAgLy8gbGFzdCBjaGFyYWN0ZXIgb2YgaGFzaFxuICAgIHZhciBwYXJlbnQgPSBnZW9oYXNoLnNsaWNlKDAsIC0xKTsgLy8gaGFzaCB3aXRob3V0IGxhc3QgY2hhcmFjdGVyXG5cbiAgICB2YXIgdHlwZSA9IGdlb2hhc2gubGVuZ3RoICUgMjtcblxuICAgIC8vIGNoZWNrIGZvciBlZGdlLWNhc2VzIHdoaWNoIGRvbid0IHNoYXJlIGNvbW1vbiBwcmVmaXhcbiAgICBpZiAoYm9yZGVyW2RpcmVjdGlvbl1bdHlwZV0uaW5kZXhPZihsYXN0Q2gpICE9IC0xICYmIHBhcmVudCAhPT0gJycpIHtcbiAgICAgICAgcGFyZW50ID0gR2VvaGFzaC5hZGphY2VudChwYXJlbnQsIGRpcmVjdGlvbik7XG4gICAgfVxuXG4gICAgLy8gYXBwZW5kIGxldHRlciBmb3IgZGlyZWN0aW9uIHRvIHBhcmVudFxuICAgIHJldHVybiBwYXJlbnQgKyBHZW9oYXNoLmJhc2UzMi5jaGFyQXQobmVpZ2hib3VyW2RpcmVjdGlvbl1bdHlwZV0uaW5kZXhPZihsYXN0Q2gpKTtcbn07XG5cblxuLyoqXG4gKiBSZXR1cm5zIGFsbCA4IGFkamFjZW50IGNlbGxzIHRvIHNwZWNpZmllZCBnZW9oYXNoLlxuICpcbiAqIEBwYXJhbSAgIHtzdHJpbmd9IGdlb2hhc2ggLSBHZW9oYXNoIG5laWdoYm91cnMgYXJlIHJlcXVpcmVkIG9mLlxuICogQHJldHVybnMge3tuLG5lLGUsc2Uscyxzdyx3LG53OiBzdHJpbmd9fVxuICogQHRocm93cyAgSW52YWxpZCBnZW9oYXNoLlxuICovXG5HZW9oYXNoLm5laWdoYm91cnMgPSBmdW5jdGlvbihnZW9oYXNoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgJ24nOiAgR2VvaGFzaC5hZGphY2VudChnZW9oYXNoLCAnbicpLFxuICAgICAgICAnbmUnOiBHZW9oYXNoLmFkamFjZW50KEdlb2hhc2guYWRqYWNlbnQoZ2VvaGFzaCwgJ24nKSwgJ2UnKSxcbiAgICAgICAgJ2UnOiAgR2VvaGFzaC5hZGphY2VudChnZW9oYXNoLCAnZScpLFxuICAgICAgICAnc2UnOiBHZW9oYXNoLmFkamFjZW50KEdlb2hhc2guYWRqYWNlbnQoZ2VvaGFzaCwgJ3MnKSwgJ2UnKSxcbiAgICAgICAgJ3MnOiAgR2VvaGFzaC5hZGphY2VudChnZW9oYXNoLCAncycpLFxuICAgICAgICAnc3cnOiBHZW9oYXNoLmFkamFjZW50KEdlb2hhc2guYWRqYWNlbnQoZ2VvaGFzaCwgJ3MnKSwgJ3cnKSxcbiAgICAgICAgJ3cnOiAgR2VvaGFzaC5hZGphY2VudChnZW9oYXNoLCAndycpLFxuICAgICAgICAnbncnOiBHZW9oYXNoLmFkamFjZW50KEdlb2hhc2guYWRqYWNlbnQoZ2VvaGFzaCwgJ24nKSwgJ3cnKSxcbiAgICB9O1xufTtcblxuXG4vKiAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gICovXG5pZiAodHlwZW9mIG1vZHVsZSAhPSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykgbW9kdWxlLmV4cG9ydHMgPSBHZW9oYXNoOyAvLyBDb21tb25KUywgbm9kZS5qc1xuIiwiKGZ1bmN0aW9uIChQcm94aXN0b3JlKSB7XHJcbiAgICB2YXIgbWVzc2FnZXMgPSB7XHJcbiAgICAgICAgZnI6IHtcclxuICAgICAgICAgICAgRlJBOiBcIkZyYW5jZVwiLFxyXG4gICAgICAgICAgICBCRUw6IFwiQmVsZ2lxdWVcIixcclxuICAgICAgICAgICAgRVNQOiBcIkVzcGFnbmVcIixcclxuICAgICAgICAgICAgVU5LTk9XTl9QT1NJVElPTjogXCJQb3NpdGlvbiBpbmNvbm51ZVwiLFxyXG4gICAgICAgICAgICBERVNDX0lQX0RJU1FVQUxJRklFRDogXCJTZWxvbiB2b3RyZSBJUCBkaXNxdWFsaWZpw6llXCIsXHJcbiAgICAgICAgICAgIERFU0NfVU5TSEFSRUQ6IFwiUG9zaXRpb24gbm9uIHBhcnRhZ8OpZVwiLFxyXG4gICAgICAgICAgICBERVNDX0lQX1FVQUxJRklFRDogXCJTZWxvbiB2b3RyZSBJUCBxdWFsaWZpw6llXCIsXHJcbiAgICAgICAgICAgIERFU0NfSFRNTDU6IFwiU2Vsb24gbGEgcG9zaXRpb24gZGUgdm90cmUgYXBwYXJlaWxcIixcclxuICAgICAgICAgICAgREVTQ19NQU5VQUw6IFwiU2Vsb24gdm90cmUgcG9zaXRpb24gZW5jb2TDqWUgbWFudWVsbGVtZW50XCIsXHJcbiAgICAgICAgICAgIFJFTE9DQVRJT046IFwiPGJ1dHRvbiBjbGFzcz1cXFwicHhzLWxpbmtcXFwiPlJhZnJhJmljaXJjO2NoaXNzZXo8L2J1dHRvbj4gb3UgPGJ1dHRvbiBjbGFzcz1cXFwicHhzLWxpbmtcXFwiPm1vZGlmaWV6IHZvdHJlIHBvc2l0aW9uPC9idXR0b24+XCIsXHJcbiAgICAgICAgICAgIE1PUkVfSU5GTzogXCJQbHVzIGQnaW5mb3NcIixcclxuICAgICAgICAgICAgUE9TSVRJT05fQkxPQ0tFRDogJ1ZvdHJlIG5hdmlnYXRldXIgYmxvcXVlIGFjdHVlbGxlbWVudCBsYSBsb2NhbGlzYXRpb24uJyxcclxuICAgICAgICAgICAgQ0xPU0U6ICdGZXJtZXInLFxyXG4gICAgICAgICAgICBERVRBSUw6ICdEw6l0YWlsJyxcclxuICAgICAgICAgICAgUkVGVVNFX0dFT0xPQzogJ05lIHBsdXMgw6p0cmUgbG9jYWxpc8OpJyxcclxuICAgICAgICAgICAgQkVfR0VPTE9DOiAnw4p0cmUgbG9jYWxpc8OpJyxcclxuICAgICAgICAgICAgTk9UX1NVUFBPUlRFRDogJ1ZvdHJlIG5hdmlnYXRldXIgblxcJ2VzdCBwYXMgc3VwcG9ydMOpJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbmw6IHtcclxuICAgICAgICAgICAgRlJBOiBcIkZyYW5rcmlqa1wiLFxyXG4gICAgICAgICAgICBCRUw6IFwiQmVsZ2nDq1wiLFxyXG4gICAgICAgICAgICBFU1A6IFwiU3BhbmplXCIsXHJcbiAgICAgICAgICAgIFVOS05PV05fUE9TSVRJT046IFwiT25iZWtlbmRlIHBvc2l0aWVcIixcclxuICAgICAgICAgICAgREVTQ19JUF9ESVNRVUFMSUZJRUQ6IFwiVm9sZ2VucyB1dyBnZWRpc2t3YWxpZmljZWVyZCBJUFwiLFxyXG4gICAgICAgICAgICBERVNDX0lQX1FVQUxJRklFRDogXCJWb2xnZW5zIHV3IGdla3dhbGlmaWNlZXJkIElQXCIsXHJcbiAgICAgICAgICAgIERFU0NfVU5TSEFSRUQ6IFwibmlldCBnZWRlZWxkZSBsb2thbGlzYXRpZVwiLFxyXG4gICAgICAgICAgICBERVNDX0hUTUw1OiBcIlZvbGdlbnMgZGUgbG9rYWxpc2F0aWUgdmFuIHV3IHRvZXN0ZWxcIixcclxuICAgICAgICAgICAgREVTQ19NQU5VQUw6IFwiVm9sZ2VucyBkZSBsb2thbGlzYXRpZSBkYXQgdXcgbWFudWVlbCBoZWVmdCBnZWNvZGVlcmRlXCIsXHJcbiAgICAgICAgICAgIFJFTE9DQVRJT046IFwiPGJ1dHRvbiBjbGFzcz1cXFwicHhzLWxpbmtcXFwiPlVwZGF0ZTwvYnV0dG9uPiBvZiA8YnV0dG9uIGNsYXNzPVxcXCJweHMtbGlua1xcXCI+dmVyYW5kZXIgdXcgbG9rYWxpc2F0aWU8L2J1dHRvbj5cIixcclxuICAgICAgICAgICAgTU9SRV9JTkZPOiBcIk1lZXIgaW5mb1wiLFxyXG4gICAgICAgICAgICBQT1NJVElPTl9CTE9DS0VEOiAnVXcgbmF2aWdhdG9yIGJsb2trZWVydCBtb21lbnRlZWwgZGUgbG9rYWxpc2F0aWUuJyxcclxuICAgICAgICAgICAgQ0xPU0U6ICdTbHVpdGVuJyxcclxuICAgICAgICAgICAgREVUQUlMOiAnRGV0YWlsJyxcclxuICAgICAgICAgICAgUkVGVVNFX0dFT0xPQzogJ0lrIHdpbCBuaWV0IGdlbG9rYWxpc2VlcmQgemlqbicsXHJcbiAgICAgICAgICAgIEJFX0dFT0xPQzogJ0lrIHdpbCBnZWxva2FsaXNlZXJkIHppam4nLFxyXG4gICAgICAgICAgICBOT1RfU1VQUE9SVEVEOiAnVXcgYnJvd3NlciBpcyBuaWV0IGNvbXBhdGliZWwgbWV0IG9uemUgc3lzdGVtJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZXM6IHtcclxuICAgICAgICAgICAgRlJBOiBcIkZyYW5jaWFcIixcclxuICAgICAgICAgICAgQkVMOiBcIkLDqWxnaWNhXCIsXHJcbiAgICAgICAgICAgIEVTUDogXCJFc3Bhw7FhXCIsXHJcbiAgICAgICAgICAgIFVOS05PV05fUE9TSVRJT046IFwiUG9zaWNpw7NuIGRlc2Nvbm9jaWRhXCIsXHJcbiAgICAgICAgICAgIERFU0NfSVBfRElTUVVBTElGSUVEOiBcIlNlZ8O6biBzdSBJUCBkZXNjYWxpZmljYWRhXCIsXHJcbiAgICAgICAgICAgIERFU0NfSVBfUVVBTElGSUVEOiBcIlNlZ8O6biBzdSBJUCBjYWxpZmljYWRhXCIsXHJcbiAgICAgICAgICAgIERFU0NfSFRNTDU6IFwiU2Vnw7puIGxhIHBvc2ljacOzbiBkZSBzdSBkaXNwb3NpdGl2b1wiLFxyXG4gICAgICAgICAgICBERVNDX01BTlVBTDogXCJTZWfDum4gc3UgcG9zaWNpw7NuIGNvZGlmaWNhZGEgbWFudWFsbWVudGVcIixcclxuICAgICAgICAgICAgREVTQ19VTlNIQVJFRDogXCJQb3NpdGlvbiBub24gcGFydGFnw6llXCIsXHJcbiAgICAgICAgICAgIFJFTE9DQVRJT046IFwiPGJ1dHRvbiBjbGFzcz1cXFwicHhzLWxpbmtcXFwiPlJlZnJlc2NhcjwvYnV0dG9uPiBvIDxidXR0b24gY2xhc3M9XFxcInB4cy1saW5rXFxcIj5tb2RpZmljYXIgc3UgcG9zaWNpw7NuPC9idXR0b24+XCIsXHJcbiAgICAgICAgICAgIE1PUkVfSU5GTzogXCJNw6FzIGluZm9ybWFjacOzblwiLFxyXG4gICAgICAgICAgICBQT1NJVElPTl9CTE9DS0VEOiAnVHUgbmF2ZWdhZG9yIGVzdMOhIGFjdHVhbG1lbnRlIGJsb3F1ZWFuZG8gbGEgbG9jYWxpemFjacOzbi4nLFxyXG4gICAgICAgICAgICBDTE9TRTogJ0NlcmNhJyxcclxuICAgICAgICAgICAgREVUQUlMOiAnRGV0YWxsZScsXHJcbiAgICAgICAgICAgIFJFRlVTRV9HRU9MT0M6ICcnLFxyXG4gICAgICAgICAgICBCRV9HRU9MT0M6ICcnLFxyXG4gICAgICAgICAgICBOT1RfU1VQUE9SVEVEOiAnJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW46IHtcclxuICAgICAgICAgICAgRlJBOiBcIkZyYW5jZVwiLFxyXG4gICAgICAgICAgICBCRUw6IFwiQmVsZ2l1bVwiLFxyXG4gICAgICAgICAgICBFU1A6IFwiU3BhaW5cIixcclxuICAgICAgICAgICAgVU5LTk9XTl9QT1NJVElPTjogXCJVbmtub3duIHBvc2l0aW9uXCIsXHJcbiAgICAgICAgICAgIERFU0NfSVBfRElTUVVBTElGSUVEOiBcIkJhc2VkIG9uIHlvdXIgZGlzcXVhbGlmaWVkIElQXCIsXHJcbiAgICAgICAgICAgIERFU0NfSVBfUVVBTElGSUVEOiBcIkZyb20geW91ciBxdWFsaWZpZWQgSVBcIixcclxuICAgICAgICAgICAgREVTQ19VTlNIQVJFRDogXCJVbnNoYXJlZCBsb2NhdGlvblwiLFxyXG4gICAgICAgICAgICBERVNDX0hUTUw1OiBcIkZyb20geW91ciBkZXZpY2UgcG9zaXRpb25cIixcclxuICAgICAgICAgICAgREVTQ19NQU5VQUw6IFwiRnJvbSB5b3VyIG1hbnVhbGx5IGVuY29kZWQgbG9jYXRpb25cIixcclxuICAgICAgICAgICAgUkVMT0NBVElPTjogXCI8YnV0dG9uIGNsYXNzPVxcXCJweHMtbGlua1xcXCI+UmVmcmVzaDwvYnV0dG9uPiBvciA8YnV0dG9uIGNsYXNzPVxcXCJweHMtbGlua1xcXCI+dXBkYXRlIHlvdXIgbG9jYXRpb248L2J1dHRvbj5cIixcclxuICAgICAgICAgICAgTU9SRV9JTkZPOiBcIk1vcmUgaW5mb1wiLFxyXG4gICAgICAgICAgICBQT1NJVElPTl9CTE9DS0VEOiAnWW91ciBicm93c2VyIGlzIGN1cnJlbnRseSBibG9ja2luZyB0aGUgcG9zaXRpb24uJyxcclxuICAgICAgICAgICAgQ0xPU0U6ICdDbG9zZScsXHJcbiAgICAgICAgICAgIERFVEFJTDogJ0RldGFpbCcsXHJcbiAgICAgICAgICAgIFJFRlVTRV9HRU9MT0M6ICdEb27igJl0IGJlIGxvY2F0ZWQnLFxyXG4gICAgICAgICAgICBCRV9HRU9MT0M6ICdCZSBsb2NhdGVkJyxcclxuICAgICAgICAgICAgTk9UX1NVUFBPUlRFRDogJ1lvdXIgbmF2aWdhdG9yIGlzIG5vdCBzdXBwb3J0ZWQnXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcblxyXG4gICAgZnVuY3Rpb24gZGlzcGxheU5vbmUoY29udGFpbmVyKSB7XHJcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbWVzc2FnZShrZXksIGRlZmF1bHRWYWx1ZSkge1xyXG4gICAgICAgIHZhciBsYW5ndWFnZSA9IFByb3hpc3RvcmUuY29uZmlnKCkubGFuZ3VhZ2U7XHJcbiAgICAgICAgaWYgKCFtZXNzYWdlc1tsYW5ndWFnZV0pIGxhbmd1YWdlID0gXCJlblwiO1xyXG4gICAgICAgIHJldHVybiBtZXNzYWdlc1tsYW5ndWFnZV1ba2V5XSB8fCBkZWZhdWx0VmFsdWUgfHwgXCJcIjtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlV2lkZ2V0KHBhcmVudEVsZW1lbnRJZCkge1xyXG4gICAgICAgIHZhciB1bnRyYWNrTGluayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidW50cmFja1wiKTtcclxuICAgICAgICB2YXIgd2lkZ2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocGFyZW50RWxlbWVudElkKTtcclxuICAgICAgICBpZiAod2lkZ2V0ID09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaW5mZXJyZWRDbGFzc05hbWUoKSB7XHJcbiAgICAgICAgICAgIHZhciB0aGVtZUNsYXNzTmFtZXMgPSB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWU7XHJcbiAgICAgICAgICAgIHZhciBpdGVtcyA9IHRoZW1lQ2xhc3NOYW1lcy5zcGxpdChcIi5cIik7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBpdGVtcy5sZW5ndGggPj0gMiA/IGl0ZW1zW2l0ZW1zLmxlbmd0aCAtIDJdICsgXCItXCIgKyBpdGVtc1tpdGVtcy5sZW5ndGggLSAxXSA6IGl0ZW1zWzBdO1xyXG4gICAgICAgICAgICByZXR1cm4gXCJweHMtY3VzdG9tLVwiICsgcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHRoZW1lTmFtZSA9IGZ1bmN0aW9uICh0aGVtZUNsYXNzTmFtZXMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoZW1lQ2xhc3NOYW1lcztcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBpc01vYmlsZSgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0FuZHJvaWR8KGFuZHJvaWR8YmJcXGQrfG1lZWdvKS4rbW9iaWxlfGF2YW50Z298YmFkYVxcL3xibGFja2JlcnJ5fGJsYXplcnxib2x0fGNsZGN8Y29tcGFsfGRvcmlzfGVsYWluZXxmZW5uZWN8Z29icm93c2VyfGhpcHRvcHxodGN8aHVhd2VpfGllbW9iaWxlfGlwKGhvbmV8b2R8YWQpfGlyaXN8a2luZGxlfGxnZSB8bHVtaWF8bm9raWF8bWFlbW98bWlifG1pZHB8bWluaW1vfG1tcHxtb2RlbC1vcmFuZ2V8bmV0ZnJvbnR8bmV4dXMgXFxkK3xvcGVyYSBtKG9ifGluKWl8cGFsbSggb3MpP3xwaG9uZXxwKGl4aXxyZSlcXC98cGxheWJvb2t8cGx1Y2tlcnxwb2NrZXR8cHNwfHFueHxzZW1jLWJyb3dzZXJ8c2VyaWVzKDR8NikwfFNpbGt8c2t5ZmlyZXxzeW1iKGlhbnxpYW5vc3xvcyl8dGVhc2hhcmt8dGVsZWNhfHRyZW98dXBcXC4oYnJvd3NlcnxsaW5rKXx1emFyZHx3YXB8d2luZG93cyAoY2V8cGhvbmUpfHhkYXx4aWluby9pKSAhPT0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNldFNob3J0TW9iaWxlTW9kZSgpIHtcclxuICAgICAgICAgICAgaWYgKGlzTW9iaWxlKCkpIHtcclxuICAgICAgICAgICAgICAgIHdpZGdldC5pbm5lckhUTUwgPSB3aWRnZXQuaW5uZXJIVE1MLnJlcGxhY2UoJ3B4cy13aWRnZXQnLCAncHhzLXdpZGdldCBweHMtbWluaScpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB2YXIgY291bnRyeUVsZW1lbnRJZCA9IHBhcmVudEVsZW1lbnRJZCArIFwiLWNvdW50cnlcIjtcclxuICAgICAgICB2YXIgbG9jYXRpb25FbGVtZW50SWQgPSBwYXJlbnRFbGVtZW50SWQgKyBcIi1sb2NhdGlvblwiO1xyXG4gICAgICAgIHZhciBkZXNjcmlwdGlvbkVsZW1lbnRJZCA9IHBhcmVudEVsZW1lbnRJZCArIFwiLWRlc2NyXCI7XHJcbiAgICAgICAgdmFyIHJlbG9jYXRpb25FbGVtZW50SWQgPSBwYXJlbnRFbGVtZW50SWQgKyBcIi1yZWxvY1wiO1xyXG4gICAgICAgIHZhciBtb3JlSW5mb0VsZW1lbnRJZCA9IHBhcmVudEVsZW1lbnRJZCArIFwiLW1vcmVcIjtcclxuICAgICAgICB2YXIgbW9kYWxFbGVtZW50SWQgPSBwYXJlbnRFbGVtZW50SWQgKyBcIi1tb2RhbFwiO1xyXG4gICAgICAgIHZhciBtb2RhbElGcmFtZUVsZW1lbnRJZCA9IHBhcmVudEVsZW1lbnRJZCArIFwiLW1vZGFsLWlmcmFtZVwiO1xyXG4gICAgICAgIHZhciBjdXN0b21DbGFzc05hbWUgPSBQcm94aXN0b3JlLmNvbmZpZygpLmN1c3RvbUNsYXNzTmFtZSB8fCBpbmZlcnJlZENsYXNzTmFtZSgpO1xyXG4gICAgICAgIHZhciBub3RpZmljYXRpb25Ub29sYmFySWQgPSBcInB4LXRvb2xiYXJcIjtcclxuICAgICAgICBpZiAoISFQcm94aXN0b3JlLmNvbmZpZygpLmRhcmtUaGVtZSkge1xyXG4gICAgICAgICAgICBjdXN0b21DbGFzc05hbWUgKz0gXCIgcHhzLXRoZW1lLWRhcmtcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhlbWVOYW1lKGN1c3RvbUNsYXNzTmFtZSk7XHJcblxyXG4gICAgICAgIHZhciBsYXRlc3RQb3NpdGlvbiwgbGF0ZXN0U2hvd01hcmtlcjtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2V0Q291bnRyeShjb3VudHJ5KSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvdW50cnlFbGVtZW50SWQpLnRleHRDb250ZW50ID0gY291bnRyeTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNldExvY2F0aW9uKGxvY2F0aW9uKSB7XHJcbiAgICAgICAgICAgIHZhciBub2RlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxvY2F0aW9uRWxlbWVudElkKS5jaGlsZE5vZGVzO1xyXG4gICAgICAgICAgICBub2Rlc1tub2Rlcy5sZW5ndGggLSAxXS5ub2RlVmFsdWUgPSBsb2NhdGlvbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNldERlc2NyaXB0aW9uKGRlc2NyaXB0aW9uKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRlc2NyaXB0aW9uRWxlbWVudElkKS50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNldFJlbG9jYXRpb24ocmVsb2NhdGlvbikge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChyZWxvY2F0aW9uRWxlbWVudElkKS5pbm5lckhUTUwgPSByZWxvY2F0aW9uO1xyXG4gICAgICAgICAgICAvLyBNdXN0IGF0dGFjaCB0aGUgY2xpY2sgZXZlcnkgdGltZSB0aGUgaW5uZXJIVE1MIGlzIGNoYW5nZWRcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocmVsb2NhdGlvbkVsZW1lbnRJZClcclxuICAgICAgICAgICAgICAgIC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJ1dHRvblwiKVswXVxyXG4gICAgICAgICAgICAgICAgLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFqYXggPSBuZXcgUHJveGlzdG9yZS5BamF4KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IFByb3hpc3RvcmUuY29uZmlnKCkuYXBpUm9vdFZlcnNpb25lZFVybCArIFwiL2Nvb2tpZS9nZW9cIjtcclxuICAgICAgICAgICAgICAgICAgICBhamF4LmRlbGV0ZSh1cmwpLnRoZW4oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUHJveGlzdG9yZS5lbS5wdWJsaXNoKFByb3hpc3RvcmUuZW0uR0VPTE9DQVRJT05fUkVRVUVTVEVELCB7fSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbXNnID0gbWVzc2FnZSgnUkVGVVNFX0dFT0xPQycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVudHJhY2tMaW5rID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1bnRyYWNrXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50cmFja0xpbmsuaW5uZXJIVE1MID0gbXNnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaWNvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdweHMtZG90Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpY29ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uc1tpXS5jbGFzc05hbWUgKz0gJyBweHMtdHVybic7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdweC10b29sYmFyJykuY2xhc3NOYW1lICs9ICdjYW5TaG93JztcclxuICAgICAgICAgICAgICAgICAgICBQcm94aXN0b3JlLmVtLnB1Ymxpc2goUHJveGlzdG9yZS5lbS5HRU9MT0NBVElPTl9SRVFVRVNURUQsIHsgZm9yY2VIdG1sNTogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocmVsb2NhdGlvbkVsZW1lbnRJZClcclxuICAgICAgICAgICAgICAgIC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJ1dHRvblwiKVsxXVxyXG4gICAgICAgICAgICAgICAgLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyp2YXIgYWpheCA9IG5ldyBQcm94aXN0b3JlLkFqYXgoKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gUHJveGlzdG9yZS5jb25maWcoKS5hcGlSb290VmVyc2lvbmVkVXJsICsgXCIvY29va2llL2dlb1wiO1xyXG4gICAgICAgICAgICAgICAgICAgIGFqYXguZGVsZXRlKHVybCkudGhlbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQcm94aXN0b3JlLmVtLnB1Ymxpc2goUHJveGlzdG9yZS5lbS5HRU9MT0NBVElPTl9SRVFVRVNURUQsIHttYW51YWw6IHRydWV9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtc2cgPSBtZXNzYWdlKCdSRUZVU0VfR0VPTE9DJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdW50cmFja0xpbmsgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVudHJhY2tcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRyYWNrTGluay5pbm5lckhUTUwgPSBtc2c7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pOyovXHJcbiAgICAgICAgICAgICAgICAgICAgUHJveGlzdG9yZS5lbS5wdWJsaXNoKFByb3hpc3RvcmUuZW0uR0VPTE9DQVRJT05fUkVRVUVTVEVELCB7fSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHB4X2lmcmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG1vZGFsSUZyYW1lRWxlbWVudElkKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3JjID0gUHJveGlzdG9yZS5jb25maWcoKS5hcGlSb290ICsgXCIvYXNzZXRzL2h0bWwvZ2VvbG9jYXRpb24uaHRtbD9sYW5ndWFnZT1cIiArIFByb3hpc3RvcmUuY29uZmlnKCkubGFuZ3VhZ2UgKyBcIiZnb29nbGVBcGlLZXk9XCIgKyBQcm94aXN0b3JlLmNvbmZpZygpLmdvb2dsZUFwaUtleSArIFwiJmFwaVJvb3Q9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoUHJveGlzdG9yZS5jb25maWcoKS5hcGlSb290KTtcclxuICAgICAgICAgICAgICAgICAgICBweF9pZnJhbWUuc2V0QXR0cmlidXRlKCdzcmMnLCBzcmMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG1vZGFsRWxlbWVudElkKTtcclxuICAgICAgICAgICAgICAgICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICAgICAgICAgICAgICAgIC8qc2V0Rm9jdXNPbklucHV0KCk7Ki9cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2V0UmVmdXNlR2VvbG9jKHJlZnVzZUdlb2xvYykge1xyXG4gICAgICAgICAgICB2YXIgdW50cmFja0xpbmsgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVudHJhY2tcIik7XHJcbiAgICAgICAgICAgIHVudHJhY2tMaW5rLmlubmVySFRNTCA9IHJlZnVzZUdlb2xvYztcclxuICAgICAgICAgICAgdW50cmFja0xpbmsub25jbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRleHRDb250ZW50ID09PSBtZXNzYWdlKCdSRUZVU0VfR0VPTE9DJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBQcm94aXN0b3JlLmVtLnB1Ymxpc2goUHJveGlzdG9yZS5lbS5HRU9MT0NBVElPTl9SRUZVU0VEKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbXNnID0gbWVzc2FnZSgnQkVfR0VPTE9DJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdW50cmFja0xpbmsuaW5uZXJIVE1MID0gbXNnO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYWpheCA9IG5ldyBQcm94aXN0b3JlLkFqYXgoKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gUHJveGlzdG9yZS5jb25maWcoKS5hcGlSb290VmVyc2lvbmVkVXJsICsgXCIvY29va2llL2dlb1wiO1xyXG4gICAgICAgICAgICAgICAgICAgIGFqYXguZGVsZXRlKHVybCkudGhlbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQcm94aXN0b3JlLmVtLnB1Ymxpc2goUHJveGlzdG9yZS5lbS5HRU9MT0NBVElPTl9SRVFVRVNURUQsIHt9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtc2cgPSBtZXNzYWdlKCdSRUZVU0VfR0VPTE9DJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRyYWNrTGluay5pbm5lckhUTUwgPSBtc2c7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHByZXBhcmVNb2RhbCgpIHtcclxuICAgICAgICAgICAgLy8gR2V0IHRoZSBtb2RhbFxyXG4gICAgICAgICAgICB2YXIgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChtb2RhbEVsZW1lbnRJZCk7XHJcbiAgICAgICAgICAgIC8vIEdldCB0aGUgPHNwYW4+IGVsZW1lbnQgdGhhdCBjbG9zZXMgdGhlIG1vZGFsXHJcbiAgICAgICAgICAgIG1vZGFsLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJweHMtbW9kYWwtY2xvc2VcIilbMF0ub25jbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICAgICAgICAgIFByb3hpc3RvcmUuZW0ucHVibGlzaChQcm94aXN0b3JlLmVtLkdFT0xPQ0FUSU9OX1JFUVVFU1RFRCwge30pXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvLyBXaGVuIHRoZSB1c2VyIGNsaWNrcyBhbnl3aGVyZSBvdXRzaWRlIG9mIHRoZSBtb2RhbCwgY2xvc2UgaXRcclxuICAgICAgICAgICAgd2luZG93Lm9uY2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5Jyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSBtb2RhbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICAgICAgICAgICAgICBQcm94aXN0b3JlLmVtLnB1Ymxpc2goUHJveGlzdG9yZS5lbS5HRU9MT0NBVElPTl9SRVFVRVNURUQsIHt9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gaUZyYW1lTG9hZGVkKCkge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobW9kYWxJRnJhbWVFbGVtZW50SWQpLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGlGcmFtZUxvYWRlZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobGF0ZXN0UG9zaXRpb24gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZU1hcENlbnRlcihsYXRlc3RQb3NpdGlvbiwgbGF0ZXN0U2hvd01hcmtlcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG1vZGFsSUZyYW1lRWxlbWVudElkKS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBpRnJhbWVMb2FkZWQsIGZhbHNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgbWFwIGNlbnRlcmluZyBpbiB0aGUgaUZyYW1lIHdoZW4gdGhlIHBvc2l0aW9uIGhhcyBjaGFuZ2VkXHJcbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlTWFwQ2VudGVyKHBvc2l0aW9uLCBzaG93TWFya2VyKSB7IC8vIHtsYXQsIGxvbn0sIHRydWUvZmFsc2VcclxuICAgICAgICAgICAgbGF0ZXN0UG9zaXRpb24gPSBwb3NpdGlvbjtcclxuICAgICAgICAgICAgbGF0ZXN0U2hvd01hcmtlciA9IHNob3dNYXJrZXI7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2VUb0lGcmFtZShcInVwZGF0ZS1tYXAtY2VudGVyXCIsIHsgcG9zaXRpb246IHBvc2l0aW9uLCBzaG93TWFya2VyOiBzaG93TWFya2VyIH0pO1xyXG4gICAgICAgICAgICB9LCAyMDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU2V0IHRoZSBmb2N1cyBvbiB0aGUgaW5wdXQgZmllbGQgb2YgdGhlIGlGcmFtZVxyXG4gICAgICAgIGZ1bmN0aW9uIHNldEZvY3VzT25JbnB1dCgpIHtcclxuICAgICAgICAgICAgcG9zdE1lc3NhZ2VUb0lGcmFtZShcInNldC1mb2N1cy1vbi1pbnB1dFwiLCBudWxsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHBvc3RNZXNzYWdlVG9JRnJhbWUodHlwZSwgZGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgbW9kYWxJRnJhbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChtb2RhbElGcmFtZUVsZW1lbnRJZCk7XHJcbiAgICAgICAgICAgIHZhciBpRnJhbWVXaW5kb3cgPSBtb2RhbElGcmFtZS5jb250ZW50V2luZG93O1xyXG4gICAgICAgICAgICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xyXG4gICAgICAgICAgICBpRnJhbWVXaW5kb3cucG9zdE1lc3NhZ2UoeyB0eXBlOiB0eXBlLCBkYXRhOiBkYXRhIH0sICcqJywgW2NoYW5uZWwucG9ydDJdKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNldE1vcmVJbmZvKG1vcmVJbmZvKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG1vcmVJbmZvRWxlbWVudElkKS50ZXh0Q29udGVudCA9IG1vcmVJbmZvO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIG5vdGlmaWNhdGlvbkJhcjtcclxuICAgICAgICB2YXIgdGltZU91dEhhbmxkZXI7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNldE5vdGlmaWNhdGlvbkJhcigpIHtcclxuICAgICAgICAgICAgbm90aWZpY2F0aW9uQmFyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobm90aWZpY2F0aW9uVG9vbGJhcklkKTtcclxuICAgICAgICAgICAgdmFyIGNsb3NlQmFyQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3B4LXRvb2xiYXItbWVudScpLmNoaWxkcmVuWzBdO1xyXG4gICAgICAgICAgICBjbG9zZUJhckJ0bi5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uQmFyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvbkJhci5vbm1vdXNlb3ZlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hpbGRyZW5bMl0uc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lT3V0SGFubGRlcik7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvbkJhci5vbm1vdXNlb3V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGlsZHJlblsyXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgdGltZU91dEhhbmxkZXIgPSBzZXRUaW1lb3V0KGhpZGVOb3RpZmljYXRpb24sIDIwMDApO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlTm90aWZpY2F0aW9uQmFyKGdlbG9jQmxvY2ssIGRldGFpbCwgY2xvc2UpIHtcclxuICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChub3RpZmljYXRpb25Ub29sYmFySWQpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbm90aWZpY2F0aW9uRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBub3RpZmljYXRpb25EaXYuc2V0QXR0cmlidXRlKCdpZCcsIG5vdGlmaWNhdGlvblRvb2xiYXJJZCk7XHJcbiAgICAgICAgICAgICAgICBub3RpZmljYXRpb25EaXYuc2V0QXR0cmlidXRlKCdjbGFzcycsICdweHMtc2xpZGVPdXRSaWdodCcpO1xyXG4gICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uRGl2LmlubmVySFRNTCA9XHJcbiAgICAgICAgICAgICAgICAgICAgJyAgICA8P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJpc28tODg1OS0xXCI/PlxcbicgK1xyXG4gICAgICAgICAgICAgICAgICAgICcgICAgPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPlxcbicgK1xyXG4gICAgICAgICAgICAgICAgICAgICcgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIgdmVyc2lvbj1cIjEuMVwiIGlkPVwiQ2FwYV8xXCIgeD1cIjBweFwiIHk9XCIwcHhcIiB2aWV3Qm94PVwiMTIwIC0yMjAgMTAwIDczMFwiIHdpZHRoPVwiNjBweFwiIGhlaWdodD1cIjQ1cHhcIj5cXG4nICtcclxuICAgICAgICAgICAgICAgICAgICAnICAgICAgICA8Zz5cXG4nICtcclxuICAgICAgICAgICAgICAgICAgICAnICAgICAgICAgICAgPGc+XFxuJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgICAgICAgICA8cGF0aCBkPVwiTTQ2Ny44MTksNDMxLjg1MWwtMzYuNjUxLTYxLjA1NmMtMTYuODk2LTI4LjE4MS0yNS44MzUtNjAuNDM3LTI1LjgzNS05My4zMTJWMjI0ICAgIGMwLTgyLjMyNS02Ny4wMDgtMTQ5LjMzMy0xNDkuMzMzLTE0OS4zMzNTMTA2LjY2NywxNDEuNjc1LDEwNi42NjcsMjI0djUzLjQ4M2MwLDMyLjg3NS04LjkzOSw2NS4xMzEtMjUuODM1LDkzLjMxMiAgICBsLTM2LjY1MSw2MS4wNTZjLTEuOTg0LDMuMjg1LTIuMDI3LDcuNDAzLTAuMTQ5LDEwLjczMWMxLjg5OSwzLjM0OSw1LjQ2MSw1LjQxOSw5LjMwMSw1LjQxOWg0MDUuMzMzICAgIGMzLjg0LDAsNy40MDMtMi4wNjksOS4zMDEtNS40MTlDNDY5Ljg0NSw0MzkuMjUzLDQ2OS44MDMsNDM1LjEzNiw0NjcuODE5LDQzMS44NTF6IE03Mi4xNzEsNDI2LjY2N2wyNi45NDQtNDQuOTA3ICAgIEMxMTguMDE2LDM1MC4yNzIsMTI4LDMxNC4yMTksMTI4LDI3Ny40ODNWMjI0YzAtNzAuNTkyLDU3LjQwOC0xMjgsMTI4LTEyOHMxMjgsNTcuNDA4LDEyOCwxMjh2NTMuNDgzICAgIGMwLDM2LjczNiw5Ljk4NCw3Mi43ODksMjguODY0LDEwNC4yNzdsMjYuOTY1LDQ0LjkwN0g3Mi4xNzF6XCIgZmlsbD1cIiM5MURDNUFcIi8+XFxuJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgICAgIDwvZz5cXG4nICtcclxuICAgICAgICAgICAgICAgICAgICAnICAgICAgICA8L2c+XFxuJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgPGc+XFxuJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgICAgIDxnPlxcbicgK1xyXG4gICAgICAgICAgICAgICAgICAgICcgICAgICAgICAgICAgICAgPHBhdGggZD1cIk0yNTYsMGMtMjMuNTMxLDAtNDIuNjY3LDE5LjEzNi00Mi42NjcsNDIuNjY3djQyLjY2N0MyMTMuMzMzLDkxLjIyMSwyMTguMTEyLDk2LDIyNCw5NnMxMC42NjctNC43NzksMTAuNjY3LTEwLjY2NyAgICBWNDIuNjY3YzAtMTEuNzc2LDkuNTU3LTIxLjMzMywyMS4zMzMtMjEuMzMzczIxLjMzMyw5LjU1NywyMS4zMzMsMjEuMzMzdjQyLjY2N0MyNzcuMzMzLDkxLjIyMSwyODIuMTEyLDk2LDI4OCw5NiAgICBzMTAuNjY3LTQuNzc5LDEwLjY2Ny0xMC42NjdWNDIuNjY3QzI5OC42NjcsMTkuMTM2LDI3OS41MzEsMCwyNTYsMHpcIiBmaWxsPVwiIzkxREM1QVwiLz5cXG4nICtcclxuICAgICAgICAgICAgICAgICAgICAnICAgICAgICAgICAgPC9nPlxcbicgK1xyXG4gICAgICAgICAgICAgICAgICAgICcgICAgICAgIDwvZz5cXG4nICtcclxuICAgICAgICAgICAgICAgICAgICAnICAgICAgICA8Zz5cXG4nICtcclxuICAgICAgICAgICAgICAgICAgICAnICAgICAgICAgICAgPGc+XFxuJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgICAgICAgICA8cGF0aCBkPVwiTTMwMi4xNjUsNDMxLjkzNmMtMy4wMDgtNS4wNzctOS41MTUtNi43NDEtMTQuNjEzLTMuODE5Yy01LjA5OSwyLjk4Ny02LjgwNSw5LjUzNi0zLjgxOSwxNC42MTMgICAgYzIuNzczLDQuNzE1LDQuMjg4LDEwLjM2OCw0LjI4OCwxNS45MzZjMCwxNy42NDMtMTQuMzU3LDMyLTMyLDMyYy0xNy42NDMsMC0zMi0xNC4zNTctMzItMzJjMC01LjU2OCwxLjUxNS0xMS4yMjEsNC4yODgtMTUuOTM2ICAgIGMyLjk2NS01LjA5OSwxLjI1OS0xMS42MjctMy44MTktMTQuNjEzYy01LjE0MS0yLjkyMy0xMS42MjctMS4yNTktMTQuNjEzLDMuODE5Yy00LjcxNSw4LjA2NC03LjIxMSwxNy4zMDEtNy4yMTEsMjYuNzMxICAgIEMyMDIuNjY3LDQ4OC4wODUsMjI2LjU4MSw1MTIsMjU2LDUxMnM1My4zMzMtMjMuOTE1LDUzLjM3Ni01My4zMzNDMzA5LjM3Niw0NDkuMjM3LDMwNi44OCw0NDAsMzAyLjE2NSw0MzEuOTM2elwiIGZpbGw9XCIjOTFEQzVBXCIvPlxcbicgK1xyXG4gICAgICAgICAgICAgICAgICAgICcgICAgICAgICAgICA8L2c+XFxuJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgPC9nPlxcbicgK1xyXG4gICAgICAgICAgICAgICAgICAgICcgICAgPC9zdmc+XFxuJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJyAgICA8cD4nICsgZ2Vsb2NCbG9jayArICc8L3A+XFxuJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJyAgICA8dWwgaWQ9XCJweC10b29sYmFyLW1lbnVcIj5cXG4nICtcclxuICAgICAgICAgICAgICAgICAgICAnICAgICAgICA8bGk+JyArIGNsb3NlICsgJzwvbGk+XFxuJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJyA8bGk+PGEgaHJlZj1cImh0dHBzOi8vd3d3LnByb3hpc3RvcmUuY29tL2dlb2xvY2F0aW9uP2xhbmc9JyArIFByb3hpc3RvcmUuY29uZmlnKCkubGFuZ3VhZ2UgKyAnXCIgdGFyZ2V0PVwiX2JsYW5rXCIgPicgKyBkZXRhaWwgKyAnPC9hPjwvbGk+XFxuJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJyAgICA8L3VsPlxcbicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChub3RpZmljYXRpb25EaXYpO1xyXG4gICAgICAgICAgICAgICAgc2V0Tm90aWZpY2F0aW9uQmFyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzaG93Tm90aWZpY2F0aW9uKCkge1xyXG4gICAgICAgICAgICBub3RpZmljYXRpb25CYXIuY2xhc3NMaXN0LnJlbW92ZShcInB4cy1zbGlkZU91dFJpZ2h0Y2FuU2hvd1wiKTtcclxuICAgICAgICAgICAgbm90aWZpY2F0aW9uQmFyLmNsYXNzTmFtZSArPSAncHhzLXNsaWRlT3V0UmlnaHQnO1xyXG4gICAgICAgICAgICB0aW1lT3V0SGFubGRlciA9IHNldFRpbWVvdXQoaGlkZU5vdGlmaWNhdGlvbiwgNTAwMCk7XHJcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvbkJhci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG4gICAgICAgICAgICBub3RpZmljYXRpb25CYXIuY2xhc3NMaXN0LnJlcGxhY2UoJ3B4cy1zbGlkZU91dFJpZ2h0JywgJ3B4cy1zbGlkZUluUmlnaHQnKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBmdW5jdGlvbiBoaWRlTm90aWZpY2F0aW9uKCkge1xyXG4gICAgICAgICAgICBub3RpZmljYXRpb25CYXIuY2xhc3NMaXN0LnJlcGxhY2UoJ3B4cy1zbGlkZUluUmlnaHQnLCAncHhzLXNsaWRlT3V0UmlnaHQnKTtcclxuICAgICAgICAgICAgc2V0VGltZW91dChkaXNwbGF5Tm9uZShub3RpZmljYXRpb25CYXIpLCAxMDAwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNldEljb25DbGFzcyhjbHMpIHtcclxuICAgICAgICAgICAgdmFyIHBhdGhzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobG9jYXRpb25FbGVtZW50SWQpXHJcbiAgICAgICAgICAgICAgICAuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJkaXZcIilbMF1cclxuICAgICAgICAgICAgICAgIC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInN2Z1wiKVswXVxyXG4gICAgICAgICAgICAgICAgLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiZ1wiKVswXVxyXG4gICAgICAgICAgICAgICAgLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiZ1wiKVswXVxyXG4gICAgICAgICAgICAgICAgLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwicGF0aFwiKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXRocy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgcGF0aHNbaV0uc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgY2xzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2VuZENvb2tpZVV2KCkge1xyXG4gICAgICAgICAgICB2YXIgYWpheCA9IG5ldyBQcm94aXN0b3JlLkFqYXgoKTtcclxuICAgICAgICAgICAgYWpheC5nZXQoJy8vYWJzLnByb3hpc3RvcmUuY29tL2Nvb2tpZS9yZWFkLXV2JykudGhlbihmdW5jdGlvbiAocmVzcCkge1xyXG4gICAgICAgICAgICAgICAgLy9UQVBBRFxyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnNlZCA9IEpTT04ucGFyc2UocmVzcCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFyc2VkLnVpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVyaSA9ICcvL3BpeGVsLnRhcGFkLmNvbS9pZHN5bmMvZXgvcmVjZWl2ZT9wYXJ0bmVyX2lkPTMxNjkmcGFydG5lcl9kZXZpY2VfaWQ9JyArIHBhcnNlZC51aTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgd2lkZ2V0Tm9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3B4cy1tb2RhbCcpWzBdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIklNR1wiKTtcclxuICAgICAgICAgICAgICAgICAgICBpbWcuc2V0QXR0cmlidXRlKCdzcmMnLCB1cmkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGltZy5zdHlsZS53aWR0aCA9ICcxcHgnO1xyXG4gICAgICAgICAgICAgICAgICAgIGltZy5zdHlsZS5oZWlnaHQgPSAnMXB4JztcclxuICAgICAgICAgICAgICAgICAgICB3aWRnZXROb2RlLmFwcGVuZENoaWxkKGltZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vU0lSREFUQVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBweF9pZnJhbWVfc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHB4X2lmcmFtZV9zdHlsZS50ZXh0Q29udGVudD0gJyNweF9mcmFtZV9zaXJfZGF0YSB7ZGlzcGxheTogbm9uZTt9JztcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHB4X2lmcmFtZV9zdHlsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHB4X2lmcmFtZV9zaXJkYXRhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcHhfaWZyYW1lX3NpcmRhdGEuc2V0QXR0cmlidXRlKCdpZCcsICdweF9mcmFtZV9zaXJfZGF0YScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHB4X2lmcmFtZV9zaXJkYXRhLnNldEF0dHJpYnV0ZSgnc3JjJywgJy8vYWJzLnByb3hpc3RvcmUuY29tL3NpcmRhdGEvc2VnbWVudHMuaHRtbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocHhfaWZyYW1lX3NpcmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3aWRnZXQuaW5uZXJIVE1MID0gZ2V0V2lkZ2V0SFRNTCgpO1xyXG4gICAgICAgIGlmIChQcm94aXN0b3JlLmNvbmZpZygpLmNvbnNlbnRTdHJpbmcgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIHNldExvY2F0aW9uKG1lc3NhZ2UoXCJVTktOT1dOX1BPU0lUSU9OXCIpKTtcclxuICAgICAgICAgICAgc2V0RGVzY3JpcHRpb24obWVzc2FnZShcIkRFU0NfSVBfRElTUVVBTElGSUVEXCIpKTtcclxuICAgICAgICAgICAgc2V0SWNvbkNsYXNzKFwicHhzLWlwLWRpc3F1YWxpZmllZFwiKTtcclxuICAgICAgICAgICAgdmFyIHB4c19zZXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHhzLXNlcCcpO1xyXG4gICAgICAgICAgICBweHNfc2VwLmZvckVhY2goZnVuY3Rpb24gKGVsZSkge1xyXG4gICAgICAgICAgICAgICAgZWxlLnRleHRDb250ZW50ID0gJyc7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSBlbHNlIGlmIChQcm94aXN0b3JlLmlzU2FmYXJpKCkpIHtcclxuICAgICAgICAgICAgc2V0TG9jYXRpb24obWVzc2FnZShcIlVOS05PV05fUE9TSVRJT05cIikpO1xyXG4gICAgICAgICAgICBzZXREZXNjcmlwdGlvbihtZXNzYWdlKFwiTk9UX1NVUFBPUlRFRFwiKSk7XHJcbiAgICAgICAgICAgIHNldEljb25DbGFzcyhcInB4cy1pcC1kaXNxdWFsaWZpZWRcIik7XHJcbiAgICAgICAgICAgIHZhciBweHNfc2VwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnB4cy1zZXAnKTtcclxuICAgICAgICAgICAgcHhzX3NlcC5mb3JFYWNoKGZ1bmN0aW9uIChlbGUpIHtcclxuICAgICAgICAgICAgICAgIGVsZS50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICBzZW5kQ29va2llVXYoKTtcclxuXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldFdpZGdldEhUTUwoKSB7XHJcbiAgICAgICAgICAgIHZhciB3aWRnZXRIVE1MID0gXCI8ZGl2IGNsYXNzPVxcXCJweHMtd2lkZ2V0IFwiICsgY3VzdG9tQ2xhc3NOYW1lICsgXCJcXFwiPiBcIiArXHJcbiAgICAgICAgICAgICAgICBcIjxkaXYgaWQ9XFxcIlwiICsgbW9kYWxFbGVtZW50SWQgKyBcIlxcXCIgY2xhc3M9XFxcInB4cy1tb2RhbFxcXCI+XFxuXCIgK1xyXG4gICAgICAgICAgICAgICAgXCIgIDxkaXYgY2xhc3M9XFxcInB4cy1tb2RhbC1jb250ZW50XFxcIj5cXG5cIiArXHJcbiAgICAgICAgICAgICAgICBcIjxzcGFuIGNsYXNzPVxcXCJweHMtbW9kYWwtY2xvc2VcXFwiPlxcblwiICtcclxuICAgICAgICAgICAgICAgICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgdmVyc2lvbj1cIjEuMVwiIHdpZHRoPVwiNDhweFwiIGhlaWdodD1cIjQ4cHhcIj5cXG4nICtcclxuICAgICAgICAgICAgICAgICc8ZyBpZD1cInN1cmZhY2UxXCI+XFxuJyArXHJcbiAgICAgICAgICAgICAgICAnPHBhdGggc3R5bGU9XCIgXCIgZD1cIk0gMTkuMjgxMjUgNS4yODEyNSBMIDkgMTUuNTYyNSBMIDQuNzE4NzUgMTEuMjgxMjUgTCAzLjI4MTI1IDEyLjcxODc1IEwgOC4yODEyNSAxNy43MTg3NSBMIDkgMTguNDA2MjUgTCA5LjcxODc1IDE3LjcxODc1IEwgMjAuNzE4NzUgNi43MTg3NSBaIFwiLz5cXG4nICtcclxuICAgICAgICAgICAgICAgICc8L2c+XFxuJyArXHJcbiAgICAgICAgICAgICAgICAnPC9zdmc+XFxuJyArXHJcbiAgICAgICAgICAgICAgICBcIjwvc3Bhbj5cXG5cIiArXHJcbiAgICAgICAgICAgICAgICBcIiAgICA8aWZyYW1lIGFsbG93PVxcXCJnZW9sb2NhdGlvbiAqO1xcXCIgaWQ9XFxcIlwiICsgbW9kYWxJRnJhbWVFbGVtZW50SWQgKyBcIlxcXCIgd2lkdGg9XFxcIjEwMCVcXFwiIGhlaWdodD1cXFwiNTAwcHhcXFwiIHNjcm9sbGluZz1cXFwibm9cXFwiIGZyYW1lQm9yZGVyPVxcXCIwXFxcIiA+PC9pZnJhbWU+XFxuXCIgK1xyXG4gICAgICAgICAgICAgICAgLy8gIFwiICAgIDxpZnJhbWUgYWxsb3c9XFxcImdlb2xvY2F0aW9uICo7XFxcIiBpZD1cXFwiXCIgKyBtb2RhbElGcmFtZUVsZW1lbnRJZCArIFwiXFxcIiB3aWR0aD1cXFwiMTAwJVxcXCIgaGVpZ2h0PVxcXCI1MDBweFxcXCIgc2Nyb2xsaW5nPVxcXCJub1xcXCIgZnJhbWVCb3JkZXI9XFxcIjBcXFwiIHNyYz1cXFwiXCIgKyAnaHR0cDovL2xvY2FsaG9zdC9nZW9sb2NhdGlvbi5odG1sP2xhbmd1YWdlPScrICBQcm94aXN0b3JlLmNvbmZpZygpLmxhbmd1YWdlICsgXCImZ29vZ2xlQXBpS2V5PVwiICsgUHJveGlzdG9yZS5jb25maWcoKS5nb29nbGVBcGlLZXkgKyAgXCJcXFwiPjwvaWZyYW1lPlxcblwiICtcclxuICAgICAgICAgICAgICAgIFwiICA8L2Rpdj5cXG5cIiArXHJcbiAgICAgICAgICAgICAgICBcIjwvZGl2PlwiICtcclxuXHJcbiAgICAgICAgICAgICAgICBcIjxzcGFuIGlkPVxcXCJcIiArIGNvdW50cnlFbGVtZW50SWQgKyBcIlxcXCIgY2xhc3M9XFxcInB4cy1jb3VudHJ5XFxcIj48L3NwYW4+XFxuXCIgK1xyXG4gICAgICAgICAgICAgICAgXCIgICAgPGRpdiBjbGFzcz1cXFwicHhzLWNvbnRhaW5lclxcXCI+XFxuXCIgK1xyXG4gICAgICAgICAgICAgICAgXCIgICAgICAgICAgICAgICAgPHNwYW4gaWQ9XFxcIlwiICsgbG9jYXRpb25FbGVtZW50SWQgKyBcIlxcXCIgY2xhc3M9XFxcInB4cy1sb2NhdGlvblxcXCI+XFxuXCIgK1xyXG4gICAgICAgICAgICAgICAgXCIgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcInB4cy1kb3QgcHhzLXR1cm5cXFwiPlxcblwiICtcclxuICAgICAgICAgICAgICAgIFwiICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyB3aWR0aD1cXFwiMjBcXFwiIGhlaWdodD1cXFwiMjBcXFwiIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgdmlld0JveD1cXFwiMCAwIDMwMy42OCA0NjkuMjJcXFwiPlxcblwiICtcclxuICAgICAgICAgICAgICAgIFwiICAgICAgICAgICAgICAgICAgICAgICAgICAgPGcgY2xhc3M9XFxcIkNhbHF1ZV8yXFxcIiBkYXRhLW5hbWU9XFxcIkNhbHF1ZSAyXFxcIj5cXG5cIiArXHJcbiAgICAgICAgICAgICAgICBcIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGcgY2xhc3M9XFxcIkxheWVyXzFcXFwiIGRhdGEtbmFtZT1cXFwiTGF5ZXIgMVxcXCI+XFxuXCIgK1xyXG4gICAgICAgICAgICAgICAgXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBjbGFzcz1cXFwicHhzLWlwXFxcIiBkPVxcXCJNMTUxLjgzLDQ2OS4yMmExMywxMywwLDAsMS0xMi42OC0xMEw5OS40MywyOTQuMzZhMTUxLjEsMTUxLjEsMCwwLDEtMTcuMjYtNy42MSwxNDguNDIsMTQ4LjQyLDAsMCwxLTIyLjU1LTE0LjMxLDE1MS44MywxNTEuODMsMCwxLDEsMTk5LjU5LTIyOCwxNTIuMDYsMTUyLjA2LDAsMCwxLDM4LjA5LDE1MSwxNTQuNDIsMTU0LjQyLDAsMCwxLTguOSwyMi43NiwxNTIuNzksMTUyLjc5LDAsMCwxLTg0LjE2LDc2LjFMMTY0LjUxLDQ1OS4yNUExMywxMywwLDAsMSwxNTEuODMsNDY5LjIyWm0wLTQ0MUExMjMuNjksMTIzLjY5LDAsMCwwLDk1LjE0LDI2MS43YTEyNS44NSwxMjUuODUsMCwwLDAsMjAuMzMsOC4zLDE0LjA4LDE0LjA4LDAsMCwxLDkuNDMsOS41NGwyNi45MywxMTEuOCwyNi43OC0xMTEuMTVjMC0uMDYuMTktLjcyLjItLjc4YTEzLDEzLDAsMCwxLDguODktOS4yNiwxMjMuNDMsMTIzLjQzLDAsMCwwLDg3Ljc0LTExNy42YzAtLjI0LDAtLjQ3LDAtLjcxczAtLjQ4LDAtLjcyQTEyMy42NSwxMjMuNjUsMCwwLDAsMTUxLjgzLDI4LjIyWlxcXCJcXG5cIiArXHJcbiAgICAgICAgICAgICAgICBcIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XFxuXCIgK1xyXG4gICAgICAgICAgICAgICAgXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBjbGFzcz1cXFwicHhzLWlwXFxcIiBkPVxcXCJNMTUxLjgzLDIwNy4xNmE1Niw1NiwwLDEsMSw1Ni01NS45NUE1Niw1NiwwLDAsMSwxNTEuODMsMjA3LjE2Wm0wLTg1LjgyYTI5Ljg3LDI5Ljg3LDAsMSwwLDI5Ljg3LDI5Ljg3QTI5LjksMjkuOSwwLDAsMCwxNTEuODMsMTIxLjM0WlxcXCJcXG5cIiArXHJcbiAgICAgICAgICAgICAgICBcIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XFxuXCIgK1xyXG4gICAgICAgICAgICAgICAgXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz5cXG5cIiArXHJcbiAgICAgICAgICAgICAgICBcIiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+XFxuXCIgK1xyXG4gICAgICAgICAgICAgICAgXCIgICAgICAgICAgICAgICAgICAgICAgICA8L3N2Zz5cXG5cIiArXHJcbiAgICAgICAgICAgICAgICBcIiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuXCIgK1xyXG4gICAgICAgICAgICAgICAgXCIgICAgICAgICAgICAgICAgPC9zcGFuPlxcblwiICtcclxuICAgICAgICAgICAgICAgIFwiICAgICAgICA8c3BhbiBjbGFzcz1cXFwicHhzLXNlcFxcXCI+LTwvc3Bhbj5cXG5cIiArXHJcbiAgICAgICAgICAgICAgICBcIiAgICAgICAgPHNwYW4gaWQ9XFxcIlwiICsgZGVzY3JpcHRpb25FbGVtZW50SWQgKyBcIlxcXCIgY2xhc3M9XFxcInB4cy1kZXNjXFxcIj48L3NwYW4+XFxuXCIgK1xyXG4gICAgICAgICAgICAgICAgXCIgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJweHMtc2VwXFxcIj4tPC9zcGFuPlxcblwiICtcclxuICAgICAgICAgICAgICAgIFwiICAgICAgICA8c3BhbiBpZD1cXFwiXCIgKyByZWxvY2F0aW9uRWxlbWVudElkICsgXCJcXFwiIGNsYXNzPVxcXCJweHMtcmVsb2NcXFwiPjwvc3Bhbj5cXG5cIiArXHJcbiAgICAgICAgICAgICAgICBcIiAgICAgICAgPHNwYW4gY2xhc3M9XFxcInB4cy1zZXBcXFwiPi08L3NwYW4+XFxuXCIgKyBcIlwiO1xyXG4gICAgICAgICAgICB3aWRnZXRIVE1MICs9IFwiPGEgaWQ9XFxcInVudHJhY2tcXFwiIGNsYXNzPVxcXCJweHMtbGlua1xcXCIgdGFyZ2V0PVxcXCJfYmxhbmtcXFwiPjxcXGE+IDxzcGFuIGNsYXNzPVxcXCJweHMtc2VwXFxcIj4tPC9zcGFuPlxcblwiO1xyXG4gICAgICAgICAgICBpZiAoUHJveGlzdG9yZS5jb25maWcoKS5iYWNrTGluaykge1xyXG4gICAgICAgICAgICAgICAgd2lkZ2V0SFRNTCArPSBcIjxhIGhyZWY9XFxcIlwiICsgUHJveGlzdG9yZS5jb25maWcoKS5iYWNrTGluayArIFwiXFxcIiBjbGFzcz1cXFwicHhzLWxpbmtcXFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIiBpZD1cXFwiXCIgKyBtb3JlSW5mb0VsZW1lbnRJZCArIFwiXFxcIiBjbGFzcz1cXFwicHhzLW1vcmVcXFwiPjwvYT5cXG5cIjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHdpZGdldEhUTUwgKz0gXCI8YSBocmVmPVxcXCIvL3Byb3hpc3RvcmUuY29tL2dlb2xvY2F0aW9uP2xhbmc9XCIgKyBQcm94aXN0b3JlLmNvbmZpZygpLmxhbmd1YWdlICsgXCJcXFwiIGNsYXNzPVxcXCJweHMtbGlua1xcXCIgdGFyZ2V0PVxcXCJfYmxhbmtcXFwiIGlkPVxcXCJcIiArIG1vcmVJbmZvRWxlbWVudElkICsgXCJcXFwiIGNsYXNzPVxcXCJweHMtbW9yZVxcXCI+PC9hPlxcblwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHdpZGdldEhUTUwgKz0gXCIgICAgPC9kaXY+XCI7XHJcbiAgICAgICAgICAgIFwiPC9kaXY+XCI7XHJcbiAgICAgICAgICAgIHJldHVybiB3aWRnZXRIVE1MO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKFByb3hpc3RvcmUuY29uZmlnKCkuc2hvcnRXaWRnZXRJZHMuaW5kZXhPZihwYXJlbnRFbGVtZW50SWQpID4gLTEpIHtcclxuICAgICAgICAgICAgc2V0U2hvcnRNb2JpbGVNb2RlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcmVwYXJlTW9kYWwoKTtcclxuXHJcbiAgICAgICAgUHJveGlzdG9yZS5lbS5zdWJzY3JpYmUoUHJveGlzdG9yZS5lbS5HRU9MT0NBVElPTl9DSEFOR0VELCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIGNvdW50cnkgPSBtZXNzYWdlKGV2ZW50LmNvdW50cnlJc28zLCBldmVudC5jb3VudHJ5KTtcclxuICAgICAgICAgICAgdmFyIGxvY2F0aW9uID0gKGV2ZW50LnBvc3RhbENvZGUgfHwgXCJcIikgKyBcIiBcIiArIChldmVudC5sb2NhbGl0eSB8fCBcIlwiKTtcclxuICAgICAgICAgICAgdmFyIGRlc2NyaXB0aW9uID0gXCJcIjtcclxuICAgICAgICAgICAgdmFyIHJlbG9jYXRpb24gPSBtZXNzYWdlKFwiUkVMT0NBVElPTlwiKTtcclxuICAgICAgICAgICAgdmFyIGdlbG9jQmxvY2sgPSBtZXNzYWdlKCdQT1NJVElPTl9CTE9DS0VEJyk7XHJcbiAgICAgICAgICAgIHZhciBkZXRhaWwgPSBtZXNzYWdlKCdERVRBSUwnKTtcclxuICAgICAgICAgICAgdmFyIGNsb3NlID0gbWVzc2FnZSgnQ0xPU0UnKTtcclxuICAgICAgICAgICAgdmFyIG1vcmVJbmZvID0gbWVzc2FnZShcIk1PUkVfSU5GT1wiKTtcclxuICAgICAgICAgICAgdmFyIHVudHJhY2tNc2c7XHJcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IG51bGw7XHJcbiAgICAgICAgICAgIHZhciBzaG93TWFya2VyID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHZhciBpY29ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3B4cy10dXJuJyk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaWNvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGljb25zW2ldLmNsYXNzTmFtZSA9ICdweHMtZG90JztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIVByb3hpc3RvcmUuY29uZmlnKCkuY29uc2VudFN0cmluZykge1xyXG4gICAgICAgICAgICAgICAgbG9jYXRpb24gPSBtZXNzYWdlKFwiVU5LTk9XTl9QT1NJVElPTlwiKTtcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gbWVzc2FnZShcIkRFU0NfSVBfRElTUVVBTElGSUVEXCIpO1xyXG4gICAgICAgICAgICAgICAgc2V0SWNvbkNsYXNzKFwicHhzLWlwLWRpc3F1YWxpZmllZFwiKTtcclxuICAgICAgICAgICAgICAgIHVudHJhY2tNc2cgPSBtZXNzYWdlKCdSRUZVU0VfR0VPTE9DJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQudHlwZSA9PT0gXCJJUFwiKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoISFldmVudC5kaXNxdWFsaWZpZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbiA9IG1lc3NhZ2UoXCJVTktOT1dOX1BPU0lUSU9OXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gbWVzc2FnZShcIkRFU0NfSVBfRElTUVVBTElGSUVEXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldEljb25DbGFzcyhcInB4cy1pcC1kaXNxdWFsaWZpZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdW50cmFja01zZyA9IG1lc3NhZ2UoJ1JFRlVTRV9HRU9MT0MnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gPSBtZXNzYWdlKFwiREVTQ19JUF9RVUFMSUZJRURcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0SWNvbkNsYXNzKFwicHhzLWlwLXF1YWxpZmllZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IGV2ZW50LnBvc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIHVudHJhY2tNc2cgPSBtZXNzYWdlKCdSRUZVU0VfR0VPTE9DJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd01hcmtlciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQudHlwZSA9PT0gXCJIVE1MNVwiKSB7XHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiA9IG1lc3NhZ2UoXCJERVNDX0hUTUw1XCIpO1xyXG4gICAgICAgICAgICAgICAgc2V0SWNvbkNsYXNzKFwicHhzLWh0bWw1XCIpO1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb24gPSBldmVudC5wb3NpdGlvbjtcclxuICAgICAgICAgICAgICAgIHNob3dNYXJrZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdW50cmFja01zZyA9IG1lc3NhZ2UoJ1JFRlVTRV9HRU9MT0MnKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC50eXBlID09PSBcIk1BTlVBTFwiKSB7XHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiA9IG1lc3NhZ2UoXCJERVNDX01BTlVBTFwiKTtcclxuICAgICAgICAgICAgICAgIHNldEljb25DbGFzcyhcInB4cy1tYW51YWxcIik7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IGV2ZW50LnBvc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgc2hvd01hcmtlciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB1bnRyYWNrTXNnID0gbWVzc2FnZSgnUkVGVVNFX0dFT0xPQycpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LnR5cGUgPT09ICdVTlRSQUNLJykge1xyXG4gICAgICAgICAgICAgICAgbG9jYXRpb24gPSBtZXNzYWdlKFwiREVTQ19VTlNIQVJFRFwiKTtcclxuICAgICAgICAgICAgICAgIHNldEljb25DbGFzcyhcInB4cy11bmtub3duXCIpO1xyXG4gICAgICAgICAgICAgICAgdW50cmFja01zZyA9IG1lc3NhZ2UoJ0JFX0dFT0xPQycpO1xyXG4gICAgICAgICAgICAgICAgc2hvd01hcmtlciA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbG9jYXRpb24gPSBtZXNzYWdlKFwiVU5LTk9XTl9QT1NJVElPTlwiKTtcclxuICAgICAgICAgICAgICAgIHNldEljb25DbGFzcyhcInB4cy11bmtub3duXCIpO1xyXG4gICAgICAgICAgICAgICAgdW50cmFja01zZyA9IG1lc3NhZ2UoJ1JFRlVTRV9HRU9MT0MnKTtcclxuICAgICAgICAgICAgICAgIHNob3dNYXJrZXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRDb3VudHJ5KGNvdW50cnkpO1xyXG4gICAgICAgICAgICBzZXRMb2NhdGlvbihsb2NhdGlvbik7XHJcbiAgICAgICAgICAgIHNldERlc2NyaXB0aW9uKGRlc2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgc2V0UmVsb2NhdGlvbihyZWxvY2F0aW9uKTtcclxuICAgICAgICAgICAgc2V0UmVmdXNlR2VvbG9jKHVudHJhY2tNc2cpO1xyXG4gICAgICAgICAgICBzZXRNb3JlSW5mbyhtb3JlSW5mbyk7XHJcbiAgICAgICAgICAgIHVwZGF0ZU1hcENlbnRlcihwb3NpdGlvbiwgc2hvd01hcmtlcik7XHJcbiAgICAgICAgICAgIGNyZWF0ZU5vdGlmaWNhdGlvbkJhcihnZWxvY0Jsb2NrLCBkZXRhaWwsIGNsb3NlKTtcclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIFByb3hpc3RvcmUuZW0uc3Vic2NyaWJlKFByb3hpc3RvcmUuZW0uR0VPTE9DQVRJT05fRVJST1IsIGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICBQcm94aXN0b3JlLmxvZyhcImdlb2xvY2F0aW9uIGVycm9yOlwiLCBlcnJvcik7XHJcbiAgICAgICAgICAgIGlmICghbm90aWZpY2F0aW9uQmFyKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICBpZiAobm90aWZpY2F0aW9uQmFyLnN0eWxlLmRpc3BsYXkgIT09ICdmbGV4JyAmJiBub3RpZmljYXRpb25CYXIuY2xhc3NOYW1lID09PSAncHhzLXNsaWRlT3V0UmlnaHRjYW5TaG93Jykge1xyXG4gICAgICAgICAgICAgICAgc2hvd05vdGlmaWNhdGlvbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBXaWRnZXQocGFyZW50RWxlbWVudElkKSB7XHJcbiAgICAgICAgY3JlYXRlV2lkZ2V0KHBhcmVudEVsZW1lbnRJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlV2lkZ2V0cygpIHtcclxuICAgICAgICBpZiAoUHJveGlzdG9yZS5jb25maWcoKS53aWRnZXRJZHMgJiYgKEFycmF5LmlzQXJyYXkoUHJveGlzdG9yZS5jb25maWcoKS53aWRnZXRJZHMpIHx8IFByb3hpc3RvcmUuY29uZmlnKCkud2lkZ2V0SWRzIGluc3RhbmNlb2YgU3RyaW5nIHx8IHR5cGVvZiBQcm94aXN0b3JlLmNvbmZpZygpLndpZGdldElkcyA9PT0gJ3N0cmluZycpICYmIFByb3hpc3RvcmUuY29uZmlnKCkud2lkZ2V0SWRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgUHJveGlzdG9yZS5oYXNDb25zZW50KCkudGhlbihmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXJlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KFByb3hpc3RvcmUuY29uZmlnKCkud2lkZ2V0SWRzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBQcm94aXN0b3JlLmNvbmZpZygpLndpZGdldElkcy5mb3JFYWNoKGZ1bmN0aW9uICh3aWRnZXRJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFdpZGdldCh3aWRnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBXaWRnZXQoUHJveGlzdG9yZS5jb25maWcoKS53aWRnZXRJZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgUHJveGlzdG9yZS5jb25maWcoKS5jb25zZW50U3RyaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIFByb3hpc3RvcmUuY29uZmlnKCkuZ2VvTG9jYXRpb25DYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBQcm94aXN0b3JlLmVtLnN1YnNjcmliZShQcm94aXN0b3JlLmVtLkdFT0xPQ0FUSU9OX0NIQU5HRUQsIGZ1bmN0aW9uIChldikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHB4X3ppcCA9ICcnLCBweF9kaXN0cmljdCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXYuYXJlYXMuZm9yRWFjaChmdW5jdGlvbiAoYXJlYSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcmVhLmxhYmVsID09ICdQT1NUQUwgQ09ERScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHhfemlwID0gYXJlYS5jb2RlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXJlYS5sYWJlbC5tYXRjaCgnTklTU3xJUklTJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHhfZGlzdHJpY3QgPSBhcmVhLmNvZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbG9jYXRpb25SZXN0cmljdGVkID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBldi50eXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibG9jYWxpdHlcIjogZXYubG9jYWxpdHksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJwb3N0YWxDb2RlXCI6IGV2LnBvc3RhbENvZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjb3VudHJ5SXNvMlwiOiBldi5jb3VudHJ5SXNvMixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNvdW50cnlJc28zXCI6IGV2LmNvdW50cnlJc28zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY291bnRyeVwiOiBldi5jb3VudHJ5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZGlzcXVhbGlmaWVkXCI6IGV2LmRpc3F1YWxpZmllZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInB4X2NvdW50cnlcIjogZXYuY291bnRyeUlzbzIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJweF9jaXR5XCI6IGV2LmxvY2FsaXR5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicHhfemlwXCI6IHB4X3ppcCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInB4X2Rpc3RyaWN0XCI6IHB4X2Rpc3RyaWN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUHJveGlzdG9yZS5jb25maWcoKS5nZW9Mb2NhdGlvbkNhbGxiYWNrKGxvY2F0aW9uUmVzdHJpY3RlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIVByb3hpc3RvcmUuY29uZmlnKCkudmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBQcm94aXN0b3JlLmVtLnB1Ymxpc2goUHJveGlzdG9yZS5lbS5HRU9MT0NBVElPTl9SRVFVRVNURUQsIHt9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShQcm94aXN0b3JlLmNvbmZpZygpLndpZGdldElkcykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgUHJveGlzdG9yZS5jb25maWcoKS53aWRnZXRJZHMuZm9yRWFjaChmdW5jdGlvbiAod2lkZ2V0SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBXaWRnZXQod2lkZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgV2lkZ2V0KFByb3hpc3RvcmUuY29uZmlnKCkud2lkZ2V0SWRzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgUHJveGlzdG9yZS5lbS5wdWJsaXNoKFByb3hpc3RvcmUuZW0uR0VPTE9DQVRJT05fUkVRVUVTVEVELCB7fSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBPdmVycmlkZSB0aGUgY29uZmlnIG1ldGhvZCB0byBnZXQgYSBjaGFuY2UgdG8gaW5pdGlhbGl6ZSB3aWRnZXRzXHJcbiAgICAgKiBAdHlwZSB7Y29uZmlnfCp9XHJcbiAgICAgKi9cclxuICAgIC8qIHN0YXJ0LWhpZGUtZm9yLXRlc3RpbmcgKi9cclxuICAgIHZhciBvdmVycmlkZGVuQ29uZmlnID0gUHJveGlzdG9yZS5jb25maWc7XHJcbiAgICBQcm94aXN0b3JlLmNvbmZpZyA9IGZ1bmN0aW9uIChjZmcpIHtcclxuICAgICAgICB2YXIgYyA9IG92ZXJyaWRkZW5Db25maWcoY2ZnKTtcclxuICAgICAgICBpZiAoY2ZnKSB7XHJcbiAgICAgICAgICAgIGNyZWF0ZVdpZGdldHMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGM7XHJcbiAgICB9O1xyXG4gICAgLyogZW5kLWhpZGUtZm9yLXRlc3RpbmcgKi9cclxuXHJcbiAgICAvKiBzdGFydC1oaWRlLWZvci1wcm9kICovXHJcbiAgICBQcm94aXN0b3JlLmNyZWF0ZVdpZGdldHMgPSBjcmVhdGVXaWRnZXRzO1xyXG4gICAgLyogZW5kLWhpZGUtZm9yLXByb2QgKi9cclxuXHJcbiAgICByZXR1cm4gUHJveGlzdG9yZTtcclxuXHJcbn0oUHJveGlzdG9yZSB8fCB7fSkpO1xyXG4iLCIvKipcclxuICogUHJveGlzdG9yZSBnZW9sb2NhdGlvbiBBUElcclxuICovXHJcbnZhciBQcm94aXN0b3JlID0gKGZ1bmN0aW9uIChQcm94aXN0b3JlKSB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFdmVudCBzZW50IHdoZW4gdGhlIGdlbyBsb2NhdGlvbiBoYXMgZmluaXNoZWQgc3VjY2Vzc2Z1bGx5XHJcbiAgICAgKi9cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShQcm94aXN0b3JlLmVtLCBcIkdFT0xPQ0FUSU9OX0NIQU5HRURcIiwge1xyXG4gICAgICAgIHZhbHVlOiBcIkdFT0xPQ0FUSU9OX0NIQU5HRURcIixcclxuICAgICAgICB3cml0YWJsZTogZmFsc2UsXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlXHJcbiAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEV2ZW50IHNlbnQgd2hlbiB0aGUgZ2VvIGxvY2F0aW9uIGhhcyBmYWlsZWRcclxuICAgICAqL1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFByb3hpc3RvcmUuZW0sIFwiR0VPTE9DQVRJT05fRVJST1JcIiwge1xyXG4gICAgICAgIHZhbHVlOiBcIkdFT0xPQ0FUSU9OX0VSUk9SXCIsXHJcbiAgICAgICAgd3JpdGFibGU6IGZhbHNlLFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZVxyXG4gICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFdmVudCBzZW50IHdoZW4gYSBnZW8gbG9jYXRpb24gaXMgcmVxdWVzdGVkLlxyXG4gICAgICovXHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUHJveGlzdG9yZS5lbSwgXCJHRU9MT0NBVElPTl9SRVFVRVNURURcIiwge1xyXG4gICAgICAgIHZhbHVlOiBcIkdFT0xPQ0FUSU9OX1JFUVVFU1RFRFwiLFxyXG4gICAgICAgIHdyaXRhYmxlOiBmYWxzZSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2VcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIEV2ZW50IHNlbnQgd2hlbiBhIGdlbyBsb2NhdGlvbiBpcyByZXF1ZXN0ZWQuXHJcbiAgICAgKi9cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShQcm94aXN0b3JlLmVtLCBcIkdFT0xPQ0FUSU9OX1JFRlVTRURcIiwge1xyXG4gICAgICAgIHZhbHVlOiBcIkdFT0xPQ0FUSU9OX1JFRlVTRURcIixcclxuICAgICAgICB3cml0YWJsZTogZmFsc2UsXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlXHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgYWpheCA9IG5ldyBQcm94aXN0b3JlLkFqYXgoKTtcclxuXHJcbiAgICBmdW5jdGlvbiBMb2NhdGlvbih0eXBlLCBsb2NhbGl0eSwgcG9zdGFsQ29kZSwgY291bnRyeUlzbzIsIGNvdW50cnlJc28zLCBjb3VudHJ5LCBnZW9IYXNoLCBkaXNxdWFsaWZpZWQsIGFyZWFzKSB7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgICAgICB0aGlzLmxvY2FsaXR5ID0gbG9jYWxpdHk7XHJcbiAgICAgICAgdGhpcy5wb3N0YWxDb2RlID0gcG9zdGFsQ29kZTtcclxuICAgICAgICB0aGlzLmNvdW50cnlJc28yID0gY291bnRyeUlzbzI7XHJcbiAgICAgICAgdGhpcy5jb3VudHJ5SXNvMyA9IGNvdW50cnlJc28zO1xyXG4gICAgICAgIHRoaXMuY291bnRyeSA9IGNvdW50cnk7XHJcbiAgICAgICAgdGhpcy5kaXNxdWFsaWZpZWQgPSBkaXNxdWFsaWZpZWQ7XHJcbiAgICAgICAgaWYgKGdlb0hhc2gpIHtcclxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbiA9IEdlb2hhc2guZGVjb2RlKGdlb0hhc2gpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFyZWFzID0gYXJlYXM7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBHZW8oKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVHJpZ2dlcnMgYW4gSFRNTDUgZ2VvIGxvY2F0aW9uIGlmIHRoZSBuYXZpZ2F0b3IgYWxsb3dzIGl0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGZvcmNlSHRtbDUgaWYgdHJ1ZSwgZGVsZXRlIGFsbCBjb29raWVzIHdpdGggaGlnaGVyIHByaW9yaXR5IHRoYW4gSFRNTDUgKE1BTlVBTClcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaHRtbDVHZW9sb2NhdGlvbihmb3JjZUh0bWw1KSB7XHJcbiAgICAgICAgICAgIGlmKG5hdmlnYXRvciAmJiBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24oXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZUNvb2tpZUh0bWw1KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhdGl0dWRlOiBwb3NpdGlvbi5jb29yZHMubGF0aXR1ZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb25naXR1ZGU6IHBvc2l0aW9uLmNvb3Jkcy5sb25naXR1ZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2N1cmFjeTogcG9zaXRpb24uY29vcmRzLmFjY3VyYWN5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGh0bWw1Q29va2llVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlb2xvY2F0aW9uQ2hhbmdlZChKU09OLnBhcnNlKGh0bWw1Q29va2llVmFsdWUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIWZvcmNlSHRtbDUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVDb29raWVNYW51YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9sb2NhdGlvbkVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlQ29va2llUmVmdXNhbEh0bWw1KCkudGhlbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlcnIpIHsgZ2VvbG9jYXRpb25FcnJvcihlcnIpIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbG9jYXRpb25FcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IG1heGltdW1BZ2U6IDEwICogNjAgKiAxMDAwLCB0aW1lb3V0OiA2MDAwMCwgZW5hYmxlSGlnaEFjY3VyYWN5OiBmYWxzZSB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogTGlzdGVuIHRvIGdlbyBsb2NhdGlvbiByZXF1ZXN0IGV2ZW50c1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogTUFOVUFMIGdlbyBsb2NhdGlvblxyXG4gICAgICAgICAqIFByb3hpc3RvcmUuZW0ucHVibGlzaChQcm94aXN0b3JlLmVtLkdFT0xPQ0FUSU9OX1JFUVVFU1RFRCwgeyBsYXRpdHVkZTogNTUsIGxvbmdpdHVkZTogMiB9KVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSFRNTDUgYXV0b21hdGljXHJcbiAgICAgICAgICogUHJveGlzdG9yZS5lbS5wdWJsaXNoKFByb3hpc3RvcmUuZW0uR0VPTE9DQVRJT05fUkVRVUVTVEVELCB7ICB9KVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogSFRNTDUgd2l0aCBkZWxldGlvbiBvZiBNQU5VQUwgY29va2llXHJcbiAgICAgICAgICogUHJveGlzdG9yZS5lbS5wdWJsaXNoKFByb3hpc3RvcmUuZW0uR0VPTE9DQVRJT05fUkVRVUVTVEVELCB7IGZvcmNlSHRtbDUgOiB0cnVlIH0pXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBTb21lIGJyb3dzZXJzIChtYWlubHkgU2FmYXJpKSBwcm9tcHRzIHRoZSB1c2VyIGFueXRpbWUgdGhlIGh0bWw1IGdlb2xvY2F0aW9uIGlzIHRyaWdnZXJlZCwgdW5sZXNzIHRoZSB1c2Vyc1xyXG4gICAgICAgICAqIGV4cGxpY2l0bHkgYWdyZWUgdG8gc2hhcmUgaGlzIGxvY2F0aW9uIGZvciBhIHByZWRlZmluZWQgcGVyaW9kICgxIGRheSBmb3Igc2FmYXJpKS5cclxuICAgICAgICAgKiBJbiBvcmRlciB0byBhdm9pZCB0aGUgSFRNTDUgcG9wdXAgZGlhbG9nLCBpZiB0aGUgdXNlciBhbHJlYWR5IGhhdmUgYW4gSFRNTDUgY29va2llLCB3ZSBkbyBub3QgdHJpZ2dlciB0aGUgSFRNTDVcclxuICAgICAgICAgKiBnZW9sb2NhdGlvbi4gSXQgd2lsbCBiZSBhdXRvbWF0aWNhbGx5IHRyaWdnZXJlZCB3aGVuIHRoZSBjb29raWUgZXhwaXJlcyBvciBpZiBmb3JjZUh0bWw1IGZsYWcgaXMgdHJ1ZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIElmIHRoZSBIVE1MNSBnZW8gbG9jYXRpb24gaGFzIGJlZW4gZGlzYWJsZWQgdmlhIFByb3hpc3RvcmUuY29uZmlnKCB7IGRpc2FibGVIdG1sNUdlb0xvY2F0aW9uOiB0cnVlIH0pLCB0aGVuIHRoZVxyXG4gICAgICAgICAqIElQIGZhbGxiYWNrIGdlbyBsb2NhdGlvbiBpcyB1c2VkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFByb3hpc3RvcmUuZW0uc3Vic2NyaWJlKFByb3hpc3RvcmUuZW0uR0VPTE9DQVRJT05fUkVRVUVTVEVELCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoUHJveGlzdG9yZS5pc1NhZmFyaSgpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5sYXRpdHVkZSAmJiBkYXRhLmxvbmdpdHVkZSkge1xyXG4gICAgICAgICAgICAgICAgY3JlYXRlQ29va2llTWFudWFsKGRhdGEpLnRoZW4oZnVuY3Rpb24gKG1hbnVhbENvb2tpZVZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2VvbG9jYXRpb25DaGFuZ2VkKEpTT04ucGFyc2UobWFudWFsQ29va2llVmFsdWUpKTtcclxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGdlb2xvY2F0aW9uRXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoISFkYXRhLmZvcmNlSHRtbDUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBVc2VyIGV4cGxpY2l0bHkgY2xpY2tlZCBvbiBXaWRnZXQncyByZWZyZXNoIGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgIGh0bWw1R2VvbG9jYXRpb24oZGF0YS5mb3JjZUh0bWw1KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZCgpLnRoZW4oZnVuY3Rpb24gKGNvb2tpZVZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb29raWUgPSBKU09OLnBhcnNlKGNvb2tpZVZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvb2tpZS5nZW9Db29raWVUeXBlID09PSAndW50cmFjaycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFByb3hpc3RvcmUuZW0ucHVibGlzaChQcm94aXN0b3JlLmVtLkdFT0xPQ0FUSU9OX1JFRlVTRUQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdlb2xvY2F0aW9uQ2hhbmdlZChjb29raWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIVByb3hpc3RvcmUuY29uZmlnKCkuZGlzYWJsZUh0bWw1R2VvTG9jYXRpb24gJiYgIWNvb2tpZS5odG1sNVJlZnVzYWwgJiYgY29va2llLmdlb0Nvb2tpZVR5cGUgPT09ICdJUCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWw1R2VvbG9jYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnZW9sb2NhdGlvbkVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBQcm94aXN0b3JlLmVtLnN1YnNjcmliZShQcm94aXN0b3JlLmVtLkdFT0xPQ0FUSU9OX0NIQU5HRUQsIGZ1bmN0aW9uIChsb2MpIHtcclxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobG9jLmFyZWFzKSAmJiBsb2MuYXJlYXMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxvYy5hcmVhcy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0xvYyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiBsb2MudHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2xvY2FsaXR5JzogbG9jLmxvY2FsaXR5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAncG9zdGFsQ29kZSc6IGxvYy5wb3N0YWxDb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnY291bnRyeUlzbzInOiBsb2MuY291bnRyeUlzbzIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdjb3VudHJ5SXNvMyc6IGxvYy5jb3VudHJ5SXNvMyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2NvdW50cnknOiBsb2MuY291bnRyeSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2Rpc3F1YWxpZmllZCc6IGxvYy5kaXNxdWFsaWZpZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdhcmVhcyc6IGxvYy5hcmVhc1tsb2MuYXJlYXMubGVuZ3RoIC0gMV1cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZWZlcnJlciA9IGxvY2F0aW9uLmhvc3RuYW1lLnJlcGxhY2UoJ3d3dy4nLCAnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9ICdodHRwczovL2Ficy5wcm94aXN0b3JlLmNvbS9mci92My93aWRnZXQvY3VzdG9taXphdGlvbj9yZWZlcmVyPScgKyByZWZlcnJlcjtcclxuICAgICAgICAgICAgICAgICAgICBhamF4LmdldCh1cmwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBKU09OLnBhcnNlKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnNlbmRUb1NpcmRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRHZW9sb2NUb1NpckRhdGEobmV3TG9jKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQcm94aXN0b3JlLmxvZygnRXJyb3InLCBlcnIubWVzc2FnZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIFByb3hpc3RvcmUuZW0uc3Vic2NyaWJlKFByb3hpc3RvcmUuZW0uR0VPTE9DQVRJT05fUkVGVVNFRCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBhamF4LmdldCgnaHR0cHM6Ly9hYnMucHJveGlzdG9yZS5jb20vdjMvY29va2llL2dlby91bnRyYWNrJykudGhlbihcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gSlNPTi5wYXJzZShyZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAndHlwZSc6IHJlc3BvbnNlLmdlb0Nvb2tpZVR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdsb2NhbGl0eSc6IHJlc3BvbnNlLmxvY2FsaXR5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAncG9zdGFsQ29kZSc6IHJlc3BvbnNlLnBvc3RhbENvZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdjb3VudHJ5SXNvMic6IHJlc3BvbnNlLmNvdW50cnlJc28yLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnY291bnRyeUlzbzMnOiByZXNwb25zZS5jb3VudHJ5SXNvMyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2NvdW50cnknOiByZXNwb25zZS5jb3VudHJ5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGlzcXVhbGlmaWVkJzogcmVzcG9uc2UuZGlzcXVhbGlmaWVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnYXJlYXMnOiByZXNwb25zZS5hcmVhc1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgUHJveGlzdG9yZS5lbS5wdWJsaXNoKFByb3hpc3RvcmUuZW0uR0VPTE9DQVRJT05fQ0hBTkdFRCwgbG9jKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBnZW9sb2NhdGlvbkVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2YXIgc2VuZEdlb2xvY1RvU2lyRGF0YSA9IGZ1bmN0aW9uIChsb2MpIHtcclxuICAgICAgICAgICAgdmFyIGdldENvdW50cnlTSSA9IGZ1bmN0aW9uIChjb3VudHJ5Q29kZSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChjb3VudHJ5Q29kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2JlJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcxJztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdmcic6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnMic7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZXMnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJzMnO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnNCc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciBzZXJ2aWNlID0gJ0dTLmQnO1xyXG4gICAgICAgICAgICB2YXIgY29uZmlnID0ge1xyXG4gICAgICAgICAgICAgICAgY21wOiAwLFxyXG4gICAgICAgICAgICAgICAgcGE6IFwiMjI1MDlcIixcclxuICAgICAgICAgICAgICAgIHNpOiBnZXRDb3VudHJ5U0kobG9jLmNvdW50cnlJc28yLnRvTG93ZXJDYXNlKCkpLFxyXG4gICAgICAgICAgICAgICAgdWZfcG9zdGFsX2NvZGU6IGxvYy5wb3N0YWxDb2RlLCAvKiAxMjM0NSAqL1xyXG4gICAgICAgICAgICAgICAgdXNlcl9jb3VudHJ5OiBsb2MuY291bnRyeUlzbzIudG9Mb3dlckNhc2UoKSwgLyogZnIsIGJlLCAuLi4gKi9cclxuICAgICAgICAgICAgICAgIHVzZXJfY2l0eTogbG9jLmxvY2FsaXR5LCAvKiBwYXJpcywgLi4uICovXHJcbiAgICAgICAgICAgICAgICB1c2VyX2xhdDogXCJcIiwgLyogNDguODYyNzI1ICovXHJcbiAgICAgICAgICAgICAgICB1c2VyX2xvbmc6IFwiXCIsIC8qIDIuMjg3NTkyICovXHJcbiAgICAgICAgICAgICAgICB1c2VyX2lyaXM6IFwiXCIsIC8qIDAxMjYyMDEwMSAqL1xyXG4gICAgICAgICAgICAgICAgdXNlcl9uaXM5OiBcIlwiLCAvKiA/ICovXHJcbiAgICAgICAgICAgICAgICBjdXN0b21fc2VnbWVudDogXCJcIiwgLyogc2VnbWVudCBpZCAqL1xyXG4gICAgICAgICAgICAgICAgcmFuZDogKG5ldyBEYXRlKCkpLmdldFRpbWUoKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBpZiAobG9jLmFyZWFzLmxhYmVsID09PSBcIklSSVMgQ09ERVwiKSB7XHJcbiAgICAgICAgICAgICAgICBjb25maWcudXNlcl9pcmlzID0gbG9jLmFyZWFzLmNvZGU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobG9jLmFyZWFzLmxhYmVsID09PSBcIk5JU1MgQ09ERVwiKSB7XHJcbiAgICAgICAgICAgICAgICBjb25maWcudXNlcl9uaXM5ID0gbG9jLmFyZWFzLmNvZGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGNvbmZpZ1BhcmFtcyA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKHZhciB2IGluIGNvbmZpZykge1xyXG4gICAgICAgICAgICAgICAgY29uZmlnUGFyYW1zLnB1c2godiArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChjb25maWdbdl0pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgc2RkYW5KUyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG4gICAgICAgICAgICBzZGRhbkpTLmFzeW5jID0gdHJ1ZTtcclxuICAgICAgICAgICAgc2RkYW5KUy50eXBlID0gXCJ0ZXh0L2phdmFzY3JpcHRcIjtcclxuICAgICAgICAgICAgc2RkYW5KUy5zcmMgPSAnaHR0cHM6Ly9qcy5zZGRhbi5jb20vJyArIHNlcnZpY2UgKyAnPycgKyBjb25maWdQYXJhbXMuam9pbignJicpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdLmFwcGVuZENoaWxkKHNkZGFuSlMpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYSByZWZ1c2FsSFRNTDUgY29va2llXHJcbiAgICAgICAgICogQHBhcmFtIHBhcmFtcyB7IGxhdGl0dWRlOiAxLCBsb25naXR1ZGU6IDEsIGFjY3VyYWN5OiAxLCBmb3JjZUh0bWw1OiB0cnVlL2ZhbHNlIH1cclxuICAgICAgICAgKiBAcmV0dXJucyBhIFByb21pc2VcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVDb29raWVSZWZ1c2FsSHRtbDUoKSB7XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSBQcm94aXN0b3JlLmNvbmZpZygpLmFwaVJvb3RWZXJzaW9uZWRVcmwgKyBcIi9jb29raWUvZ2VvL2h0bWw1LXJlZnVzYWxcIjtcclxuICAgICAgICAgICAgcmV0dXJuIGFqYXguZ2V0KHVybCk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYSBIVE1MNSBjb29raWVcclxuICAgICAgICAgKiBAcGFyYW0gcGFyYW1zIHsgbGF0aXR1ZGU6IDEsIGxvbmdpdHVkZTogMSwgYWNjdXJhY3k6IDEsIGZvcmNlSHRtbDU6IHRydWUvZmFsc2UgfVxyXG4gICAgICAgICAqIEByZXR1cm5zIGEgUHJvbWlzZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUNvb2tpZUh0bWw1KHBhcmFtcykge1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gUHJveGlzdG9yZS5jb25maWcoKS5hcGlSb290VmVyc2lvbmVkVXJsICsgXCIvY29va2llL2dlby9odG1sNT9cIjtcclxuICAgICAgICAgICAgT2JqZWN0LmtleXMocGFyYW1zKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICB1cmwgKz0gbmFtZSArIFwiPVwiICsgcGFyYW1zW25hbWVdICsgXCImXCI7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB1cmwgKz0gXCIxPTFcIjtcclxuICAgICAgICAgICAgcmV0dXJuIGFqYXgucG9zdCh1cmwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhIG1hbnVhbCBjb29raWVcclxuICAgICAgICAgKiBAcGFyYW0gcGFyYW1zIHsgbGF0aXR1ZGU6IDEsIGxvbmdpdHVkZTogMSwgYWNjdXJhY3k6IDEsIGNvdW50cnk6IGNvdW50cnksIGNvdW50cnljb2RlMjogY291bnRyeUNvZGUyLCBsb2NhbGl0eTogbG9jYWxpdHksIHBvc3RhbENvZGU6IHBvc3RhbENvZGUgfVxyXG4gICAgICAgICAqIEBwYXJhbSBsb25naXR1ZGVcclxuICAgICAgICAgKiBAcmV0dXJucyBhIFByb21pc2VcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlQ29va2llTWFudWFsKHBhcmFtcykge1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gUHJveGlzdG9yZS5jb25maWcoKS5hcGlSb290VmVyc2lvbmVkVXJsICsgXCIvY29va2llL2dlby9tYW51YWw/XCI7XHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHBhcmFtcykuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICAgICAgdXJsICs9IG5hbWUgKyBcIj1cIiArIHBhcmFtc1tuYW1lXSArIFwiJlwiO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdXJsICs9IFwiMT0xXCI7XHJcbiAgICAgICAgICAgIHJldHVybiBhamF4LnBvc3QodXJsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlYWRzIHRoZSBiZXN0IGdlbyBjb29raWUuXHJcbiAgICAgICAgICogV2FybmluZyEgVGhpcyBpcyB1c2VkIGJ5IHRoZSB3aWRnZXQsIGFuZCB0aHVzIHRoZSBzZXJ2ZXIgQVBJIGlzIGJsb2NrZWQgYnkgZGVmYXVsdC4gT25seSB0aGUgcmVmZXJyZXJzIHByZXNlbnQgaW4gdGhlIHdoaXRlbGlzdCBjYW4gcXVlcnkgaXQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIGEgUHJvbWlzZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHJlYWQoKSB7XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSBQcm94aXN0b3JlLmNvbmZpZygpLmFwaVJvb3RWZXJzaW9uZWRVcmwgKyBcIi93aWRnZXQvZ2VvXCI7XHJcbiAgICAgICAgICAgIHJldHVybiBhamF4LmdldCh1cmwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGVsZXRlcyB0aGUgTUFOVUFMIGdlbyBjb29raWUuXHJcbiAgICAgICAgICogQHJldHVybiBhIFByb21pc2VcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBkZWxldGVDb29raWVNYW51YWwoKSB7XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSBQcm94aXN0b3JlLmNvbmZpZygpLmFwaVJvb3RWZXJzaW9uZWRVcmwgKyBcIi9jb29raWUvZ2VvL21hbnVhbFwiO1xyXG4gICAgICAgICAgICByZXR1cm4gYWpheC5kZWxldGUodXJsKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBOb3RpZmllcyB0aGF0IGdlbyBsb2NhdGlvbiBoYXMgY2hhbmdlZFxyXG4gICAgICAgICAqIEBwYXJhbSBjb29raWVcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBnZW9sb2NhdGlvbkNoYW5nZWQoY29va2llKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFRPRE8gLSBQWFAtMzAwIEZpbHRlciBwdWJsaXNoZWQgZGF0YVxyXG4gICAgICAgICAgICB2YXIgbG9jYXRpb24gPSBuZXcgTG9jYXRpb24oXHJcbiAgICAgICAgICAgICAgICBjb29raWUuZ2VvQ29va2llVHlwZSxcclxuICAgICAgICAgICAgICAgIGNvb2tpZS5sb2NhbGl0eSxcclxuICAgICAgICAgICAgICAgIGNvb2tpZS5wb3N0YWxDb2RlLFxyXG4gICAgICAgICAgICAgICAgY29va2llLmNvdW50cnlJc28yLFxyXG4gICAgICAgICAgICAgICAgY29va2llLmNvdW50cnlJc28zLFxyXG4gICAgICAgICAgICAgICAgY29va2llLmNvdW50cnksXHJcbiAgICAgICAgICAgICAgICBjb29raWUuZ2VvSGFzaCxcclxuICAgICAgICAgICAgICAgIGNvb2tpZS5kaXNxdWFsaWZpZWQsXHJcbiAgICAgICAgICAgICAgICBjb29raWUuYXJlYXNcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgUHJveGlzdG9yZS5lbS5wdWJsaXNoKFByb3hpc3RvcmUuZW0uR0VPTE9DQVRJT05fQ0hBTkdFRCwgbG9jYXRpb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogTm90aWZpZXMgdGhhdCBnZW8gbG9jYXRpb24gZmFpbGVkXHJcbiAgICAgICAgICogQHBhcmFtIGVycm9yXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gZ2VvbG9jYXRpb25FcnJvcihlcnJvcikge1xyXG4gICAgICAgICAgICBQcm94aXN0b3JlLmVtLnB1Ymxpc2goUHJveGlzdG9yZS5lbS5HRU9MT0NBVElPTl9FUlJPUiwgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG5ldyBHZW8oKTtcclxuXHJcbiAgICByZXR1cm4gUHJveGlzdG9yZTtcclxuXHJcbn0oUHJveGlzdG9yZSB8fCB7fSkpO1xyXG4iLCIvKipcclxuICogQXR0YWNoIGFuIEFqYXggQ2xhc3MgdG8gdGhlIFByb3hpc3RvcmUgbmFtZXNwYWNlLlxyXG4gKlxyXG4gKiBHRVQsUE9TVCwgUFVUIGFuZCBERUxFVEUgYXJlIGN1cnJlbnRseSBpbXBsZW1lbnRlZC5cclxuICpcclxuICogQWxsIG1ldGhvZHMgcmV0dXJuIFByb21pc2UgYW5kIGd1YXJhbnRlZSB0aGF0IGNvb2tpZXMgd2lsbCBiZSBzZW50LlxyXG4gKiBIVFRQIHN0YXR1cyBjb2RlIGluIHRoZSByYW5nZSAyMDAtMjk5IHdpbGwgYmUgY29uc2lkZXJlZCBhcyBzdWNjZXNzZnVsLlxyXG4gKi9cclxudmFyIFByb3hpc3RvcmUgPSAoZnVuY3Rpb24gKFByb3hpc3RvcmUpIHtcclxuXHJcbiAgICBmdW5jdGlvbiBBamF4KCkge1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBhamF4KHVybCwgbWV0aG9kLCBkYXRhKSB7XHJcbiAgICAgICAgICAgIFByb3hpc3RvcmUubG9nKFwiQUpBWCAtXCIsIG1ldGhvZCwgdXJsLCBkYXRhIHx8IFwiXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0LnJlYWR5U3RhdGUgPT09IFhNTEh0dHBSZXF1ZXN0LkRPTkUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzID49IDIwMCAmJiByZXF1ZXN0LnN0YXR1cyA8IDMwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXF1ZXN0LnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoRXJyb3IocmVxdWVzdC5zdGF0dXNUZXh0KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChFcnJvcihcIk5ldHdvcmsgRXJyb3JcIikpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3Qud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3Qub3BlbihtZXRob2QsIHVybCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0LnNlbmQoZGF0YSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5nZXQgPSBmdW5jdGlvbih1cmwpIHsgcmV0dXJuIGFqYXgodXJsLCBcIkdFVFwiKTsgfTtcclxuICAgICAgICB0aGlzLnBvc3QgPSBmdW5jdGlvbih1cmwsIGRhdGEpIHsgcmV0dXJuIGFqYXgodXJsLCBcIlBPU1RcIiwgZGF0YSk7IH07XHJcbiAgICAgICAgdGhpcy5wdXQgPSBmdW5jdGlvbih1cmwsIGRhdGEpIHsgcmV0dXJuIGFqYXgodXJsLCBcIlBVVFwiLCBkYXRhKTsgfTtcclxuICAgICAgICB0aGlzLmRlbGV0ZSA9IGZ1bmN0aW9uKHVybCwgZGF0YSkgeyByZXR1cm4gYWpheCh1cmwsIFwiREVMRVRFXCIsIGRhdGEpOyB9O1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBQcm94aXN0b3JlLkFqYXggPSBBamF4O1xyXG5cclxuICAgIHJldHVybiBQcm94aXN0b3JlXHJcblxyXG59KFByb3hpc3RvcmUgfHwge30pKTsiLCIvKipcclxuICogQXR0YWNoIGEgZ2xvYmFsIGV2ZW50IG1hbmFnZXIgdG8gdGhlIFByb3hpc3RvcmUgbmFtZXNwYWNlLlxyXG4gKlxyXG4gKiB2YXIgaGFuZGxlciA9ICBmdW5jdGlvbihldmVudCkgeyBjb25zb2xlLmxvZyhcImV2ZW50XCIsIGV2ZW50KX07XHJcbiAqIFByb3hpc3RvcmUuZW0uc3Vic2NyaWJlKFwiRVZFTlQxXCIsIGhhbmRsZXIpO1xyXG4gKiBQcm94aXN0b3JlLmVtLnB1Ymxpc2goXCJFVkVOVDFcIiwgeyBcImFcIjogXCJiXCJ9KVxyXG4gKiBQcm94aXN0b3JlLmVtLnVuc3Vic2NyaWJlKFwiRVZFTlQxXCIsIGhhbmRsZXIpO1xyXG4gKi9cclxudmFyIFByb3hpc3RvcmUgPSAoZnVuY3Rpb24gKFByb3hpc3RvcmUpIHtcclxuXHJcbiAgICBmdW5jdGlvbiBFdmVudE1hbmFnZXIoKSB7XHJcbiAgICAgICAgdmFyIGV2ZW50cyA9IHt9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBQdWJsaXNoIGFuIGV2ZW50XHJcbiAgICAgICAgICogQHBhcmFtIG5hbWUgdGhlIGV2ZW50J3MgbmFtZVxyXG4gICAgICAgICAqIEBwYXJhbSBkYXRhIHRoZSBldmVudCdzIGRhdGFcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnB1Ymxpc2ggPSBmdW5jdGlvbihuYW1lLCBkYXRhKSB7XHJcbiAgICAgICAgICAgIHZhciBoYW5kbGVycyA9IGV2ZW50c1tuYW1lXTtcclxuICAgICAgICAgICAgaWYoISFoYW5kbGVycyA9PT0gZmFsc2UpIHJldHVybjtcclxuICAgICAgICAgICAgaGFuZGxlcnMuZm9yRWFjaChmdW5jdGlvbihoYW5kbGVyKSB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgZGF0YSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFN1YnNjcmliZSBhIGhhbmRsZXIgZm9yIGEgc3BlY2lmaWMgdHlwZSBvZiBldmVudFxyXG4gICAgICAgICAqIEBwYXJhbSBuYW1lIHRoZSBldmVudCdzIG5hbWVcclxuICAgICAgICAgKiBAcGFyYW0gaGFuZGxlciB0aGUgZXZlbnQncyBoYW5kbGVyXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5zdWJzY3JpYmUgPSBmdW5jdGlvbihuYW1lLCBoYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHZhciBoYW5kbGVycyA9IGV2ZW50c1tuYW1lXTtcclxuICAgICAgICAgICAgaWYoISFoYW5kbGVycyA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIGhhbmRsZXJzID0gZXZlbnRzW25hbWVdID0gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGhhbmRsZXJJZHggPSBoYW5kbGVycy5pbmRleE9mKGhhbmRsZXIpO1xyXG4gICAgICAgICAgICBpZiAoaGFuZGxlcklkeCA9PT0gLTEpIGhhbmRsZXJzLnB1c2goaGFuZGxlcik7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVW5zdWJzY3JpYmUgYSBoYW5kbGVyIGZvciBhIHNwZWNpZmljIHR5cGUgb2YgZXZlbnRcclxuICAgICAgICAgKiBAcGFyYW0gbmFtZSB0aGUgZXZlbnQncyBuYW1lXHJcbiAgICAgICAgICogQHBhcmFtIGhhbmRsZXIgdGhlIGV2ZW50J3MgaGFuZGxlclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUgPSBmdW5jdGlvbihuYW1lLCBoYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHZhciBoYW5kbGVycyA9IGV2ZW50c1tuYW1lXTtcclxuICAgICAgICAgICAgaWYoISFoYW5kbGVycyA9PT0gZmFsc2UpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIHZhciBoYW5kbGVySWR4ID0gaGFuZGxlcnMuaW5kZXhPZihoYW5kbGVyKTtcclxuICAgICAgICAgICAgaWYgKGhhbmRsZXJJZHggIT09IC0xKSBoYW5kbGVycy5zcGxpY2UoaGFuZGxlcklkeCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgUHJveGlzdG9yZS5lbSA9IG5ldyBFdmVudE1hbmFnZXIoKTtcclxuXHJcbiAgICByZXR1cm4gUHJveGlzdG9yZVxyXG5cclxufShQcm94aXN0b3JlIHx8IHt9KSk7IiwidmFyIFByb3hpc3RvcmUgPSAoZnVuY3Rpb24gKFByb3hpc3RvcmUpIHtcclxuXHJcbiAgICAvL1BvbHlmaWxsXHJcbiAgICBpZiAodHlwZW9mIE9iamVjdC5hc3NpZ24gIT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIC8vIE11c3QgYmUgd3JpdGFibGU6IHRydWUsIGVudW1lcmFibGU6IGZhbHNlLCBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoT2JqZWN0LCBcImFzc2lnblwiLCB7XHJcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhc3NpZ24odGFyZ2V0LCB2YXJBcmdzKSB7IC8vIC5sZW5ndGggb2YgZnVuY3Rpb24gaXMgMlxyXG4gICAgICAgICAgICAgICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldCA9PSBudWxsKSB7IC8vIFR5cGVFcnJvciBpZiB1bmRlZmluZWQgb3IgbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIHRvID0gT2JqZWN0KHRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDE7IGluZGV4IDwgYXJndW1lbnRzLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXh0U291cmNlID0gYXJndW1lbnRzW2luZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dFNvdXJjZSAhPSBudWxsKSB7IC8vIFNraXAgb3ZlciBpZiB1bmRlZmluZWQgb3IgbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuZXh0S2V5IGluIG5leHRTb3VyY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEF2b2lkIGJ1Z3Mgd2hlbiBoYXNPd25Qcm9wZXJ0eSBpcyBzaGFkb3dlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuZXh0U291cmNlLCBuZXh0S2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvW25leHRLZXldID0gbmV4dFNvdXJjZVtuZXh0S2V5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB0bztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBfZGVmYXVsdHMgPSB7XHJcbiAgICAgICAgYXBpUm9vdDogXCIvL2Ficy5wcm94aXN0b3JlLmNvbVwiLFxyXG4gICAgICAgIGFwaVZlcnNpb246IFwidjNcIixcclxuICAgICAgICBsYW5ndWFnZTogXCJmclwiLFxyXG4gICAgICAgIGRpc2FibGVIdG1sNUdlb0xvY2F0aW9uOiBmYWxzZSxcclxuICAgICAgICBnb29nbGVBcGlLZXk6IFwiQUl6YVN5RFhwTDJPRHYzXzcteDBXaGlQbXNwQkVuSGRJUmxCV284XCIsXHJcbiAgICAgICAgZ2VvTG9jYXRpb25DYWxsYmFjazogbmV3IGZ1bmN0aW9uIChldmVudCkgeyB9LFxyXG4gICAgICAgIGRhcmtUaGVtZTogZmFsc2UsXHJcbiAgICAgICAgY3VzdG9tQ2xhc3NOYW1lOiBudWxsLFxyXG4gICAgICAgIHdpZGdldElkczogW10sXHJcbiAgICAgICAgc2hvcnRXaWRnZXRJZHM6IFtdLFxyXG4gICAgICAgIHZlcmJvc2U6IGZhbHNlLFxyXG4gICAgICAgIGJhY2tMaW5rOiAnJyxcclxuICAgICAgICB2aXNpYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbnNlbnRTdHJpbmc6IGZhbHNlXHJcbiAgICB9O1xyXG4gICAgX2RlZmF1bHRzLmFwaVJvb3RVcmwgPSBfZGVmYXVsdHMuYXBpUm9vdCArIFwiL1wiICsgX2RlZmF1bHRzLmxhbmd1YWdlO1xyXG4gICAgX2RlZmF1bHRzLmFwaVJvb3RWZXJzaW9uZWRVcmwgPSBfZGVmYXVsdHMuYXBpUm9vdFVybCArIFwiL1wiICsgX2RlZmF1bHRzLmFwaVZlcnNpb247XHJcblxyXG4gICAgdmFyIF9jb25maWcgPSBPYmplY3QuYXNzaWduKHt9LCBfZGVmYXVsdHMpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3RhcnQgUHJveGlzdG9yZSBlbmdpbmUgd2l0aCB0aGUgZ2l2ZW4gY29uZmlndXJhdGlvbi5cclxuICAgICAqIEFsbCBtaXNzaW5nIGNvbmZpZ3VyYXRpb24gd2lsbCBnZXQgZGVmYXVsdHMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGNmZ1xyXG4gICAgICogQHJldHVybiB0aGUgY29uZmlndXJhdGlvbiBjb21wbGV0ZWQgd2l0aCBkZWZhdWx0cyBmb3IgbWlzc2luZyB2YWx1ZXNcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gY29uZmlnKGNmZykge1xyXG4gICAgICAgIGlmIChjZmcpIHtcclxuICAgICAgICAgICAgLy8gQ2FsbGVkIG9ubHkgb25jZSBkdXJpbmcgaW5pdGlhbGl6YXRpb24gb2YgUHJveGlzdG9yZSBlbmdpbmVcclxuICAgICAgICAgICAgX2NvbmZpZyA9IE9iamVjdC5hc3NpZ24oX2NvbmZpZywgY2ZnKTtcclxuICAgICAgICAgICAgaWYgKCFfY29uZmlnLmxhbmd1YWdlLm1hdGNoKFwiZnJ8bmx8ZXNcIikpIHtcclxuICAgICAgICAgICAgICAgIF9jb25maWcuYXBpUm9vdFVybCA9IF9jb25maWcuYXBpUm9vdCArIFwiL1wiICsgX2RlZmF1bHRzLmxhbmd1YWdlO1xyXG4gICAgICAgICAgICAgICAgX2NvbmZpZy5hcGlSb290VmVyc2lvbmVkVXJsID0gX2NvbmZpZy5hcGlSb290VXJsICsgXCIvXCIgKyBfY29uZmlnLmFwaVZlcnNpb247XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfY29uZmlnLmFwaVJvb3RVcmwgPSBfY29uZmlnLmFwaVJvb3QgKyBcIi9cIiArIF9jb25maWcubGFuZ3VhZ2U7XHJcbiAgICAgICAgICAgICAgICBfY29uZmlnLmFwaVJvb3RWZXJzaW9uZWRVcmwgPSBfY29uZmlnLmFwaVJvb3RVcmwgKyBcIi9cIiArIF9jb25maWcuYXBpVmVyc2lvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gX2NvbmZpZztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnNvbGUgbG9nIHRoYXQgY2FuIGJlIGRpc2FibGVkIHdpdGggdGhlIGNvbmZpZyB2YXJpYWJsZSAgIHsgdmVyYm9zZSA6IGZhbHNlIH1cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gbG9nKCkge1xyXG4gICAgICAgIGlmIChfY29uZmlnLnZlcmJvc2UpIHtcclxuICAgICAgICAgICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICBhcmdzLnNwbGljZSgwLCAwLCBcIlBST1hJU1RPUkUgLVwiKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cuYXBwbHkodGhpcywgYXJncyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGlzQWxsb3dlZFRvV3JpdGVDb29raWVzKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgKF9fY21wKSAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF9fY21wKCdnZXRWZW5kb3JDb25zZW50cycsIG51bGwsIGZ1bmN0aW9uIChyZXNwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwLnZlbmRvckNvbnNlbnRzWyc0MTgnXSA9PT0gdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBpc1NhZmFyaSgpIHtcclxuICAgICAgcmV0dXJuIG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignU2FmYXJpJykgIT0gLTEgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdDaHJvbWUnKSA9PT0gLTE7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIFByb3hpc3RvcmUuY29uZmlnID0gY29uZmlnO1xyXG4gICAgUHJveGlzdG9yZS5sb2cgPSBsb2c7XHJcbiAgICBQcm94aXN0b3JlLmhhc0NvbnNlbnQgPSBpc0FsbG93ZWRUb1dyaXRlQ29va2llcztcclxuICAgIFByb3hpc3RvcmUuaXNTYWZhcmkgPSBpc1NhZmFyaTtcclxuXHJcbiAgICByZXR1cm4gUHJveGlzdG9yZTtcclxufSkoUHJveGlzdG9yZSB8fCB7fSk7XHJcbiIsInZhciBQcm94aXN0b3JlID0gKGZ1bmN0aW9uIChQcm94aXN0b3JlKSB7XHJcblxyXG4gICAgZnVuY3Rpb24gbG9hZENTUyhocmVmKSB7XHJcbiAgICAgICAgdmFyIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaW5rJyk7XHJcbiAgICAgICAgdmFyIGhlYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcclxuICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZShcInJlbFwiLCBcInN0eWxlc2hlZXRcIik7XHJcbiAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dC9jc3NcIik7XHJcbiAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIGhyZWYpO1xyXG4gICAgICAgIGhlYWQuaW5zZXJ0QmVmb3JlKGxpbmssIGhlYWQuZmlyc3RDaGlsZCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0UGl4ZWxDb3VudGVyRGl2KHB1Ymxpc2hlclNwb3RJZCwgYm94SWQpIHtcclxuICAgICAgICB2YXIgYm94UG9zaXRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChib3hJZCk7XHJcbiAgICAgICAgdmFyIHBpeGVsQ291bnRlckRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHMtcGl4ZWxDb3VudGVyLVwiICsgcHVibGlzaGVyU3BvdElkKTtcclxuXHJcbiAgICAgICAgaWYgKHBpeGVsQ291bnRlckRpdiA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBwaXhlbENvdW50ZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICB2YXIgcGl4ZWxDb3VudGVyX2Rpdl9pZCA9IGNyZWF0ZUF0dHJpYnV0ZShcImlkXCIsIFwicHMtcGl4ZWxDb3VudGVyLVwiICsgcHVibGlzaGVyU3BvdElkKTtcclxuICAgICAgICAgICAgcGl4ZWxDb3VudGVyRGl2LnNldEF0dHJpYnV0ZU5vZGUocGl4ZWxDb3VudGVyX2Rpdl9pZCk7XHJcbiAgICAgICAgICAgIHZhciBwaXhlbENvdW50ZXJfZGl2X2NsYXNzID0gY3JlYXRlQXR0cmlidXRlKFwiY2xhc3NcIiwgXCJwcy1waXhlbENvdW50ZXJcIik7XHJcbiAgICAgICAgICAgIHBpeGVsQ291bnRlckRpdi5zZXRBdHRyaWJ1dGVOb2RlKHBpeGVsQ291bnRlcl9kaXZfY2xhc3MpO1xyXG4gICAgICAgICAgICB2YXIgcGl4ZWxDb3VudGVyX2Rpdl9zdHlsZSA9IGNyZWF0ZUF0dHJpYnV0ZShcInN0eWxlXCIsIFwiZGlzcGxheTpub25lXCIpO1xyXG4gICAgICAgICAgICBwaXhlbENvdW50ZXJEaXYuc2V0QXR0cmlidXRlTm9kZShwaXhlbENvdW50ZXJfZGl2X3N0eWxlKTtcclxuICAgICAgICAgICAgYm94UG9zaXRpb24uYXBwZW5kQ2hpbGQocGl4ZWxDb3VudGVyRGl2KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBwaXhlbENvdW50ZXJEaXY7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYWRkUGl4ZWxDb3VudGVySW1nKHBpeGVsQ291bnRlckRpdiwgcGl4ZWxDb3VudGVySW1nVXJsKSB7XHJcbiAgICAgICAgaWYgKHBpeGVsQ291bnRlckltZ1VybC5zZWFyY2goJ1xcXFw/JykgPT09IC0xKSB7XHJcbiAgICAgICAgICAgIHBpeGVsQ291bnRlckltZ1VybCA9IHBpeGVsQ291bnRlckltZ1VybCArICc/cHNfdj0nICsgbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcGl4ZWxDb3VudGVySW1nVXJsID0gcGl4ZWxDb3VudGVySW1nVXJsICsgJyZwc192PScgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBwaXhlbENvdW50ZXJfaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICAgICAgICB2YXIgcGl4ZWxDb3VudGVyX2ltZ19zcmMgPSBjcmVhdGVBdHRyaWJ1dGUoXCJzcmNcIiwgcGl4ZWxDb3VudGVySW1nVXJsKTtcclxuICAgICAgICBwaXhlbENvdW50ZXJfaW1nLnNldEF0dHJpYnV0ZU5vZGUocGl4ZWxDb3VudGVyX2ltZ19zcmMpO1xyXG4gICAgICAgIHBpeGVsQ291bnRlckRpdi5hcHBlbmRDaGlsZChwaXhlbENvdW50ZXJfaW1nKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVBdHRyaWJ1dGUobmFtZSwgdmFsdWUpIHtcclxuICAgICAgICB2YXIgYXR0cmlidXRlID0gZG9jdW1lbnQuY3JlYXRlQXR0cmlidXRlKG5hbWUpO1xyXG4gICAgICAgIGF0dHJpYnV0ZS52YWx1ZSA9IHZhbHVlO1xyXG5cclxuICAgICAgICByZXR1cm4gYXR0cmlidXRlO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gYWRkUGl4ZWxDb3VudGVyKHB1Ymxpc2hlclNwb3RJZCwgYm94SWQsIHBpeGVsQ291bnRlckltZ1VybHMpIHtcclxuICAgICAgICB2YXIgcGl4ZWxDb3VudGVyRGl2ID0gZ2V0UGl4ZWxDb3VudGVyRGl2KHB1Ymxpc2hlclNwb3RJZCwgYm94SWQpO1xyXG5cclxuICAgICAgICBpZiAocGl4ZWxDb3VudGVySW1nVXJscy5jb25zdHJ1Y3RvciAhPT0gQXJyYXkpIHtcclxuICAgICAgICAgICAgYWRkUGl4ZWxDb3VudGVySW1nKHBpeGVsQ291bnRlckRpdiwgcGl4ZWxDb3VudGVySW1nVXJscyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IHBpeGVsQ291bnRlckltZ1VybHMubGVuZ3RoOyBpLS07KSB7XHJcbiAgICAgICAgICAgICAgICBhZGRQaXhlbENvdW50ZXJJbWcocGl4ZWxDb3VudGVyRGl2LCBwaXhlbENvdW50ZXJJbWdVcmxzW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gdXBkYXRlQWQocHVibGlzaGVyU3BvdFJlZmVyZW5jZUlkLCBib3hJZCwgYWR2ZXJ0aXNlbWVudCwgc3VyZmVyRGF0YSkge1xyXG4gICAgICAgIHZhciBib3hQb3NpdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJveElkKTtcclxuICAgICAgICBjbGVhckludGVydmFsKHdpbmRvd1sncHNfaW50ZXJ2YWxfJyArIHB1Ymxpc2hlclNwb3RSZWZlcmVuY2VJZF0pO1xyXG4gICAgICAgIGJveFBvc2l0aW9uLnN0eWxlLndpZHRoID0gYWR2ZXJ0aXNlbWVudC53aWR0aCArIFwicHhcIjtcclxuICAgICAgICBib3hQb3NpdGlvbi5zdHlsZS5oZWlnaHQgPSBhZHZlcnRpc2VtZW50LmhlaWdodCArIFwicHhcIjtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBzLWFkLWltZy1cIiArIHB1Ymxpc2hlclNwb3RSZWZlcmVuY2VJZCkuc3JjID0gYWR2ZXJ0aXNlbWVudC51cmxWaXN1YWxzWzBdO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHMtYWQtXCIgKyBwdWJsaXNoZXJTcG90UmVmZXJlbmNlSWQpLmhyZWYgPSBhZHZlcnRpc2VtZW50LnVybFJlZGlyZWN0aW9uO1xyXG5cclxuICAgICAgICBpZiAoYWR2ZXJ0aXNlbWVudC51cmxWaXN1YWxzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgd2luZG93Wydwc192aXN1YWxJZHhfJyArIHB1Ymxpc2hlclNwb3RSZWZlcmVuY2VJZF0gPSAxO1xyXG4gICAgICAgICAgICB3aW5kb3dbJ3BzX2ludGVydmFsXycgKyBwdWJsaXNoZXJTcG90UmVmZXJlbmNlSWRdID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcy1hZC1pbWctXCIgKyBwdWJsaXNoZXJTcG90UmVmZXJlbmNlSWQpLnNyYyA9IGFkdmVydGlzZW1lbnQudXJsVmlzdWFsc1t3aW5kb3dbJ3BzX3Zpc3VhbElkeF8nICsgcHVibGlzaGVyU3BvdFJlZmVyZW5jZUlkXV07XHJcbiAgICAgICAgICAgICAgICB3aW5kb3dbJ3BzX3Zpc3VhbElkeF8nICsgcHVibGlzaGVyU3BvdFJlZmVyZW5jZUlkXSA9ICh3aW5kb3dbJ3BzX3Zpc3VhbElkeF8nICsgcHVibGlzaGVyU3BvdFJlZmVyZW5jZUlkXSArIDEpICUgYWR2ZXJ0aXNlbWVudC51cmxWaXN1YWxzLmxlbmd0aDtcclxuICAgICAgICAgICAgfSwgNTAwMCk7XHJcbiAgICAgICAgICAgIC8vIFRPRE86IGV4dGVybmFsaXplIGRlbGF5IC0gR2V0IGEgZGVsYXkgcGVyIGltYWdlP1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWFkdmVydGlzZW1lbnQudXJsUGl4ZWxDb3VudGVycykgYWR2ZXJ0aXNlbWVudC51cmxQaXhlbENvdW50ZXJzID0gW1wiXCJdO1xyXG4gICAgICAgIGlmIChhZHZlcnRpc2VtZW50LnVybFBpeGVsQ291bnRlcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBhZGRQaXhlbENvdW50ZXIoYWRkUGl4ZWxDb3VudGVyLCBib3hJZCwgYWR2ZXJ0aXNlbWVudC51cmxQaXhlbENvdW50ZXJzKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzdGFydEluZm9ib3hUcmFuc2l0aW9uKHB1Ymxpc2hlclNwb3RSZWZlcmVuY2VJZCkge1xyXG4gICAgICAgIHZhciBwaWN0byA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHMtcGljdG8tXCIgKyBwdWJsaXNoZXJTcG90UmVmZXJlbmNlSWQpO1xyXG4gICAgICAgIHdpbmRvd1tcInBzX2luZm9ib3hUaW1lb3V0X1wiICsgcHVibGlzaGVyU3BvdFJlZmVyZW5jZUlkXSA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBwaWN0by5jbGljaygpO1xyXG4gICAgICAgICAgICB3aW5kb3dbXCJwc19pbmZvYm94VGltZW91dF9cIiArIHB1Ymxpc2hlclNwb3RSZWZlcmVuY2VJZF0gPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHBpY3RvLmNsaWNrKCk7XHJcbiAgICAgICAgICAgIH0sIDQwMDApO1xyXG4gICAgICAgIH0sIDEwMDApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRXZlbnQgdG8gcmVnaXN0ZXIgYWR2ZXJ0aXNlbWVudCBjbGljayBvbiBwcm94aXN0b3JlIGJhY2tlbmRcclxuICAgICAqIEBwYXJhbSBoYW5kbGVyXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGFkZEFkdmVydGlzZW1lbnRDbGlja0hhbmRsZXIoYWR2ZXJ0aXNlbWVudCwgaGFuZGxlcikge1xyXG4gICAgICAgIHZhciBhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHMtYWQtXCIgKyBhZHZlcnRpc2VtZW50LnB1Ymxpc2hlclNwb3QucHVibGlzaGVyU3BvdFJlZmVyZW5jZUlkKTtcclxuICAgICAgICBhZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRXZlbnRzIHRvIG9wZW4vY2xvc2UgdGhlIGluZm9ib3hcclxuICAgICAqIEBwYXJhbSBhZHZlcnRpc2VtZW50XHJcbiAgICAgKiBAcGFyYW0gaW5mb0JveE9yaWVudGF0aW9uXHJcbiAgICAgKiBAcGFyYW0gY2xpY2tIYW5kbGVyXHJcbiAgICAgKiBAcGFyYW0gbW91c2VPdmVySGFuZGxlclxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBhZGRQaWN0b0hhbmRsZXJzKGFkdmVydGlzZW1lbnQsIGluZm9Cb3hPcmllbnRhdGlvbiwgY2xpY2tIYW5kbGVyLCBtb3VzZU92ZXJIYW5kbGVyKSB7XHJcbiAgICAgICAgLy8gRXZlbnQgdG8gb3Blbi9jbG9zZSB0aGUgaW5mb2JveFxyXG4gICAgICAgIHZhciBwaWN0byA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHMtcGljdG8tXCIgKyBhZHZlcnRpc2VtZW50LnB1Ymxpc2hlclNwb3QucHVibGlzaGVyU3BvdFJlZmVyZW5jZUlkKTtcclxuICAgICAgICBwaWN0by5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrSGFuZGxlcik7XHJcblxyXG4gICAgICAgIC8vIEV2ZW50IHRvIHJlb3BlbiB0aGUgY2xvc2luZyBpbmZvYm94XHJcbiAgICAgICAgdmFyIGluZm9Cb3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBzLWluZm9ib3gtXCIgKyBhZHZlcnRpc2VtZW50LnB1Ymxpc2hlclNwb3QucHVibGlzaGVyU3BvdFJlZmVyZW5jZUlkKTtcclxuICAgICAgICBpbmZvQm94LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIG1vdXNlT3ZlckhhbmRsZXIpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBtYW5hZ2VJbmZvQm94KHB1Ymxpc2hlclNwb3RSZWZlcmVuY2VJZCwgaW5mb0JveE9yaWVudGF0aW9uLCBmb3JjZUV4cGFuZCkge1xyXG4gICAgICAgIGNsZWFyVGltZW91dCh3aW5kb3dbXCJwc19pbmZvYm94VGltZW91dF9cIiArIHB1Ymxpc2hlclNwb3RSZWZlcmVuY2VJZF0pO1xyXG4gICAgICAgIHZhciBpbmZvQm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcy1pbmZvYm94LVwiICsgcHVibGlzaGVyU3BvdFJlZmVyZW5jZUlkKTtcclxuXHJcbiAgICAgICAgaWYgKGluZm9Cb3hPcmllbnRhdGlvbiA9PT0gJ2hvcml6b250YWwnKSB7XHJcbiAgICAgICAgICAgIC8vIEhvcml6b250YWwgaW5mb0JveFxyXG4gICAgICAgICAgICBpbmZvQm94LnN0eWxlLndpZHRoID0gaW5mb0JveC5jbGllbnRXaWR0aCA9PT0gMCB8fCBmb3JjZUV4cGFuZCA/IFwiMjUwcHhcIiA6IDA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gVmVydGljYWwgaW5mb0JveFxyXG4gICAgICAgICAgICBpbmZvQm94LnN0eWxlLndpZHRoID0gaW5mb0JveC5jbGllbnRXaWR0aCA9PT0gMCB8fCBmb3JjZUV4cGFuZCA/IFwiMTE2cHhcIiA6IDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBpbmplY3RNYXJrdXAob3B0aW9ucykge1xyXG4gICAgICAgIHZhciBib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKVswXSB8fCBkb2N1bWVudC5ib2R5O1xyXG4gICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBkaXYuaW5uZXJIVE1MID0gJzxkaXYgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDBweDsgdG9wOiAwcHg7IHZpc2liaWxpdHk6IGhpZGRlbjtcIj48aW1nIHNyYz1cIicgKyBvcHRpb25zLnZpZXdVcmwgKyAnXCIgYm9yZGVyPVwiMFwiIHdpZHRoPVwiMVwiIGhlaWdodD1cIjFcIiBhbHQ9XCJcIiBzdHlsZT1cImRpc3BsYXk6bm9uZVwiPjwvZGl2PidcclxuICAgICAgICBib2R5LmFwcGVuZENoaWxkKGRpdik7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIFByb3hpc3RvcmUuYWR2ZXJ0aXNlbWVudEJveCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIGFqYXggPSBuZXcgUHJveGlzdG9yZS5BamF4KCk7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMudmlld1VybCkge1xyXG4gICAgICAgICAgICBpZiAoKG9wdGlvbnMudmlld01ldGhvZCB8fCAnR0VUJykgPT09ICdHRVQnKSB7XHJcbiAgICAgICAgICAgICAgICBpbmplY3RNYXJrdXAob3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhamF4LnB1dChvcHRpb25zLnZpZXdVcmwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFByb3hpc3RvcmUuYm94KG9wdGlvbnMuYWR2ZXJ0aXNlbWVudCwgbnVsbCwgb3B0aW9ucy5ib3hJZCwgbnVsbCwgYWpheCwgb3B0aW9ucy5pc0hUTUw1KTsgXHJcbiAgICB9XHJcblxyXG5cclxuICAgIFByb3hpc3RvcmUuYm94ID0gZnVuY3Rpb24gKGFkdmVydGlzZW1lbnQsIGRlYWxJZCwgYm94SWQsIHZpZXdQdXRVcmwsIHB4QWpheCkge1xyXG4gICAgICAgIHZhciBhamF4ID0gcHhBamF4IHx8IG5ldyBQcm94aXN0b3JlLkFqYXgoKTtcclxuXHJcbiAgICAgICAgaWYgKGRlYWxJZCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBhamF4LnB1dChQcm94aXN0b3JlLmNvbmZpZygpLmFwaVJvb3RWZXJzaW9uZWRVcmwgKyBcIi9ydGIvcHJlYmlkL3ZpZXdlZD9kZWFsSWQ9XCIgKyBkZWFsSWQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodmlld1B1dFVybCkge1xyXG4gICAgICAgICAgICBhamF4LnB1dCh2aWV3UHV0VXJsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxvYWRDU1MoUHJveGlzdG9yZS5jb25maWcoKS5hcGlSb290ICsgXCIvYXNzZXRzL2Nzcy9wcm94aXN0b3JlLm1pbi5jc3NcIik7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGhhc0hUTUxFeHRlbnRpb24odXJsKSB7XHJcbiAgICAgICAgICAgIHZhciBzdGFydCA9IHVybC5sYXN0SW5kZXhPZignLicpICsgMTtcclxuICAgICAgICAgICAgcmV0dXJuIHVybC5zdWJzdHIoc3RhcnQsIHVybC5sZW5ndGgpID09PSAnaHRtbCc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBwdWJsaXNoZXJTcG90UmVmZXJlbmNlSWQgPSBhZHZlcnRpc2VtZW50LnB1Ymxpc2hlclNwb3QucHVibGlzaGVyU3BvdFJlZmVyZW5jZUlkO1xyXG4gICAgICAgIHZhciBpbmZvQm94T3JpZW50YXRpb24gPSBcImhvcml6b250YWxcIjtcclxuICAgICAgICBpZiAoaGFzSFRNTEV4dGVudGlvbihhZHZlcnRpc2VtZW50LnVybFZpc3VhbHNbMF0pKSB7XHJcbiAgICAgICAgICAgIHZhciAkcHNfYm94X2NvZGUgPSAnPGlmcmFtZSBpZD1cImlubGluZUZyYW1lRXhhbXBsZVwiJytcclxuICAgICAgICAgICAgJ3RpdGxlPVwidGl0bGVFeGFtcGxlXCInK1xyXG4gICAgICAgICAgICAnd2lkdGg9XCInK2FkdmVydGlzZW1lbnQud2lkdGgrJ1wiJytcclxuICAgICAgICAgICAgJ2hlaWdodD1cIicrYWR2ZXJ0aXNlbWVudC5oZWlnaHQrJ1wiJytcclxuICAgICAgICAgICAgJ3NyYz1cIicrYWR2ZXJ0aXNlbWVudC51cmxWaXN1YWxzWzBdKydcIicrXHJcbiAgICAgICAgICAgICc8L2lmcmFtZT4nO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChib3hJZCkuaW5uZXJIVE1MID0gJHBzX2JveF9jb2RlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciAkcHNfYm94X2NvZGUgPSBcIlwiICtcclxuICAgICAgICAgICAgXCI8c3BhbiBpZD0ncHMtcGljdG8tXCIgKyBwdWJsaXNoZXJTcG90UmVmZXJlbmNlSWQgKyBcIicgY2xhc3M9J3BzLXBpY3RvIFwiICsgaW5mb0JveE9yaWVudGF0aW9uICsgXCInPlwiICtcclxuICAgICAgICAgICAgXCIgICA8c3ZnIHZpZXdCb3g9JzAgMCAxNTAwIDE1MDAnIHdpZHRoPScwJz48cGF0aCBkPSdNNzUwLDE1MDBhNDEuNyw0MS43LDAsMCwxLTQwLjUzLTMxLjg4TDU4Mi40Nyw5NDFhNDgzLjA2LDQ4My4wNiwwLDAsMS01NS4xOS0yNC4zMyw0NzMuNzQsNDczLjc0LDAsMCwxLTcyLjA5LTQ1Ljc3QzMzNC4xMiw3NzguMjksMjY0LjYxLDYzNy43NiwyNjQuNjEsNDg1LjM5YzAtMTI5LjczLDUwLjQ5LTI1MS42MywxNDIuMTYtMzQzLjI1UzYyMC40LDAsNzUwLDBzMjUxLjUsNTAuNDcsMzQzLjI2LDE0Mi4xNCwxNDIuMTYsMjEzLjU5LDE0Mi4xNiwzNDMuMjVBNDg2LjE0LDQ4Ni4xNCwwLDAsMSwxMjE1LDYyNSw0ODYsNDg2LDAsMCwxLDkxNy41LDk0MWwtMTI3LDUyNy4xMUE0MS43MSw0MS43MSwwLDAsMSw3NTAsMTUwMFpNNzUwLDkwLjIyYy0xMDUuNDksMC0yMDQuNzEsNDEuMTItMjc5LjM3LDExNS43N1MzNTQuODgsMzc5LjkyLDM1NC44OCw0ODUuMzljMCwxMjQsNTYuNTksMjM4LjQ0LDE1NS4yNCwzMTMuOTFhMzkwLjc2LDM5MC43NiwwLDAsMCwxMjMuNjEsNjMuODJjMTQuMDUsNC4zMiwyNi42OCwxNi4yNCwzMC4xNiwzMC41Mkw3NTAsMTI1MWw4NS41OS0zNTUuMzJjMC0uMi42MS0yLjMzLjY1LTIuNTFhNDEuNjMsNDEuNjMsMCwwLDEsMjguNDItMjkuNjJjMTA1LjY1LTMyLjQ2LDE5Mi44NS0xMDcuMTQsMjQwLjc2LTIwNS4zNEE0MDAuMzYsNDAwLjM2LDAsMCwwLDExMjguNTYsNTk5YTM5Ni4zNSwzOTYuMzUsMCwwLDAsMTYuNTgtMTExLjMyYzAtLjc3LS4wNy0xLjUyLS4wNy0yLjI4czAtMS41MS4wNy0yLjI4QTM5Mi40LDM5Mi40LDAsMCwwLDEwMjkuMzksMjA2Qzk1NC43MSwxMzEuMzQsODU1LjQ5LDkwLjIyLDc1MCw5MC4yMlonLz48cGF0aCBkPSdNNzUwLDY2Mi4yNWMtOTguNjEsMC0xNzguODQtODAuMjQtMTc4Ljg0LTE3OC44N1M2NTEuMzcsMzA0LjUxLDc1MCwzMDQuNTFzMTc4Ljg5LDgwLjI0LDE3OC44OSwxNzguODdTODQ4LjYxLDY2Mi4yNSw3NTAsNjYyLjI1Wm0wLTI3NC4zNWE5NS40OCw5NS40OCwwLDEsMCw5NS40OSw5NS40OUE5NS41OCw5NS41OCwwLDAsMCw3NTAsMzg3Ljg5WicvPjwvc3ZnPlwiICtcclxuICAgICAgICAgICAgXCI8L3NwYW4+XCIgK1xyXG5cclxuICAgICAgICAgICAgXCI8c3BhbiBpZD0ncHMtaW5mb2JveC1cIiArIHB1Ymxpc2hlclNwb3RSZWZlcmVuY2VJZCArIFwiJyBjbGFzcz0ncHMtaW5mb2JveCBcIiArIGluZm9Cb3hPcmllbnRhdGlvbiArIFwiJz5cIiArXHJcbiAgICAgICAgICAgIFwiICAgPHNwYW4gY2xhc3M9J3BzLWxvY2F0aW9uIFwiICsgaW5mb0JveE9yaWVudGF0aW9uICsgXCInPlwiICtcclxuICAgICAgICAgICAgXCIgICAgICAgPHN2ZyB2aWV3Qm94PScwIDAgMTA5LjMyIDEwOS4zMicgd2lkdGg9JzAnPjxwYXRoIGQ9J00xMDguMTQsMS4xOGE0LDQsMCwwLDAtNC40NS0uODRMMi40MSw0NC41QTQsNCwwLDAsMCwyLjksNTJMNDUsNjQuMzRsMTIuMjksNDIuMDhhNCw0LDAsMCwwLDMuNjEsMi44OWguMjZhNCw0LDAsMCwwLDMuNjktMi40MUwxMDksNS42M0E0LDQsMCwwLDAsMTA4LjE0LDEuMThaJy8+PC9zdmc+XCIgK1xyXG4gICAgICAgICAgICBcIiAgICAgICA8YSBjbGFzcz0ncHMtY2l0eSBcIiArIGluZm9Cb3hPcmllbnRhdGlvbiArIFwiJyBocmVmPSdcIiArIGFkdmVydGlzZW1lbnQucmVsb2NhbGlzYXRpb25VcmwgKyBcIicgdGFyZ2V0PSdfYmxhbmsnPlwiICsgYWR2ZXJ0aXNlbWVudC5zdXJmZXJDaXR5TmFtZSArIFwiPC9hPlwiICtcclxuICAgICAgICAgICAgXCIgICA8L3NwYW4+XCIgK1xyXG5cclxuICAgICAgICAgICAgXCIgICA8c3BhbiBjbGFzcz0ncHMtYWN0aW9ucyBcIiArIGluZm9Cb3hPcmllbnRhdGlvbiArIFwiJz5cIiArXHJcblxyXG4gICAgICAgICAgICAvLyBUT0RPOiA/bXVsdGlwbGUgYWR2ZXJ0aXNlbWVudD9cclxuXHJcbiAgICAgICAgICAgIFwiICAgICAgIDxhIGlkPSdwcy1zdG9yZS1cIiArIHB1Ymxpc2hlclNwb3RSZWZlcmVuY2VJZCArIFwiJyBjbGFzcz0ncHMtc3RvcmUgXCIgKyBpbmZvQm94T3JpZW50YXRpb24gKyBcIicgdGFyZ2V0PSdfYmxhbmsnPlwiICtcclxuICAgICAgICAgICAgXCIgICAgICAgICAgIDxzdmcgdmlld0JveD0nMCAwIDUyNS4xNiA1MjUuMTYnIHdpZHRoPScwJz48cGF0aCBkPSdNNTE3LjQ3LDI0NC4wNywyODEuMDksNy42OGEyNi4xMiwyNi4xMiwwLDAsMC0zNywwTDcuNjgsMjQ0LjA3YTI2LjEyLDI2LjEyLDAsMCwwLDAsMzdMMjQ0LjA5LDUxNy40N2EyNi4xMiwyNi4xMiwwLDAsMCwzNywwTDUxNy40OSwyODEuMDdDNTI3LjcxLDI3MS4xNSw1MjcuNzEsMjU0LjUyLDUxNy40NywyNDQuMDdaTTMxNSwzMjguMzVWMjYyLjY5SDIwOS44OXY3OC44NEgxNTcuMzlWMjM2LjQ1YTI2LjM0LDI2LjM0LDAsMCwxLDI2LjI0LTI2LjI2SDMxNVYxNDQuNTVsOTEuOSw5MS45WicvPjwvc3ZnPlwiICtcclxuICAgICAgICAgICAgXCIgICAgICAgPC9hPlwiICtcclxuICAgICAgICAgICAgXCIgICA8L3NwYW4+XCIgK1xyXG4gICAgICAgICAgICBcIjwvc3Bhbj5cIiArXHJcblxyXG4gICAgICAgICAgICBcIjxhIGlkPSdwcy1hZC1cIiArIHB1Ymxpc2hlclNwb3RSZWZlcmVuY2VJZCArIFwiJyBjbGFzcz0ncHMtYWQgXCIgKyBpbmZvQm94T3JpZW50YXRpb24gKyBcIicgdGFyZ2V0PSdfYmxhbmsnPlwiICtcclxuICAgICAgICAgICAgXCIgICA8aW1nIGlkPSdwcy1hZC1pbWctXCIgKyBwdWJsaXNoZXJTcG90UmVmZXJlbmNlSWQgKyBcIicgY2xhc3M9J3BzLWFkLWltZyBcIiArIGluZm9Cb3hPcmllbnRhdGlvbiArIFwiJz5cIiArXHJcbiAgICAgICAgICAgIFwiPC9hPlwiO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChib3hJZCkuaW5uZXJIVE1MID0gJHBzX2JveF9jb2RlO1xyXG4gICAgICAgICAgICB1cGRhdGVBZChwdWJsaXNoZXJTcG90UmVmZXJlbmNlSWQsIGJveElkLCBhZHZlcnRpc2VtZW50LCB7Z2VvVHlwZTogXCJcIiwgbGF0aXR1ZGU6IDAsIGxvbmdpdHVkZTogMH0pO1xyXG4gICAgICAgICAgICBzdGFydEluZm9ib3hUcmFuc2l0aW9uKHB1Ymxpc2hlclNwb3RSZWZlcmVuY2VJZCk7XHJcbiAgICBcclxuICAgICAgICAgICAgYWRkQWR2ZXJ0aXNlbWVudENsaWNrSGFuZGxlcihhZHZlcnRpc2VtZW50LCBmdW5jdGlvbiAoKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGFqYXgucHV0KFByb3hpc3RvcmUuY29uZmlnKCkuYXBpUm9vdFVybCArICBcIi90YWdzL2NsaWNrL1wiICsgYWR2ZXJ0aXNlbWVudC5hZHZlcnRpc2VtZW50SWQsIEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJwdWJsaXNoZXJTcG90UmVmZXJlbmNlSWRcIjogYWR2ZXJ0aXNlbWVudC5wdWJsaXNoZXJTcG90LnB1Ymxpc2hlclNwb3RSZWZlcmVuY2VJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjYW1wYWlnbklkXCI6IGFkdmVydGlzZW1lbnQuY2FtcGFpZ25JZFxyXG4gICAgICAgICAgICAgICAgICAgIH0pLCBcImFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLThcIlxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGFkZFBpY3RvSGFuZGxlcnMoYWR2ZXJ0aXNlbWVudCwgaW5mb0JveE9yaWVudGF0aW9uLFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hbmFnZUluZm9Cb3goYWR2ZXJ0aXNlbWVudC5wdWJsaXNoZXJTcG90LnB1Ymxpc2hlclNwb3RSZWZlcmVuY2VJZCwgaW5mb0JveE9yaWVudGF0aW9uKTtcclxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBtYW5hZ2VJbmZvQm94KGFkdmVydGlzZW1lbnQucHVibGlzaGVyU3BvdC5wdWJsaXNoZXJTcG90UmVmZXJlbmNlSWQsIGluZm9Cb3hPcmllbnRhdGlvbiwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcblxyXG5cclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIFByb3hpc3RvcmVcclxuXHJcblxyXG59KFByb3hpc3RvcmUgfHwge30pKTtcclxuXHJcblxyXG5cclxuIl19
