/********** https://www.aufeminin.com/reloaded/static/preconcat_%2Freloaded%2Fstatic%2FFront%2FVendor%2Fpubsub%2F1.6.0%2Fpubsub-singleton.js.202002281736.js**********/

/** https://www.aufeminin.com/reloaded/static/Front/Vendor/pubsub/1.6.0/pubsub-singleton.js?v=202002281736 **/
(function(root,factory){'use strict';if(root.PubSub)return;var PubSub={};root.PubSub=PubSub;var define=root.define;factory(PubSub);if(typeof define==='function'&&define.amd){define(function(){return PubSub;});}else if(typeof exports==='object'){if(module!==undefined&&module.exports){exports=module.exports=PubSub;}
exports.PubSub=PubSub;module.exports=exports=PubSub;}}((typeof window==='object'&&window)||this,function(PubSub){'use strict';var messages={},lastUid=-1;function hasKeys(obj){var key;for(key in obj){if(obj.hasOwnProperty(key)){return true;}}
return false;}
function throwException(ex){return function reThrowException(){throw ex;};}
function callSubscriberWithDelayedExceptions(subscriber,message,data){try{subscriber(message,data);}catch(ex){setTimeout(throwException(ex),0);}}
function callSubscriberWithImmediateExceptions(subscriber,message,data){subscriber(message,data);}
function deliverMessage(originalMessage,matchedMessage,data,immediateExceptions){var subscribers=messages[matchedMessage],callSubscriber=immediateExceptions?callSubscriberWithImmediateExceptions:callSubscriberWithDelayedExceptions,s;if(!messages.hasOwnProperty(matchedMessage)){return;}
for(s in subscribers){if(subscribers.hasOwnProperty(s)){callSubscriber(subscribers[s],originalMessage,data);}}}
function createDeliveryFunction(message,data,immediateExceptions){return function deliverNamespaced(){var topic=String(message),position=topic.lastIndexOf('.');deliverMessage(message,message,data,immediateExceptions);while(position!==-1){topic=topic.substr(0,position);position=topic.lastIndexOf('.');deliverMessage(message,topic,data,immediateExceptions);}};}
function messageHasSubscribers(message){var topic=String(message),found=Boolean(messages.hasOwnProperty(topic)&&hasKeys(messages[topic])),position=topic.lastIndexOf('.');while(!found&&position!==-1){topic=topic.substr(0,position);position=topic.lastIndexOf('.');found=Boolean(messages.hasOwnProperty(topic)&&hasKeys(messages[topic]));}
return found;}
function publish(message,data,sync,immediateExceptions){var deliver=createDeliveryFunction(message,data,immediateExceptions),hasSubscribers=messageHasSubscribers(message);if(!hasSubscribers){return false;}
if(sync===true){deliver();}else{setTimeout(deliver,0);}
return true;}
PubSub.publish=function(message,data){return publish(message,data,false,PubSub.immediateExceptions);};PubSub.publishSync=function(message,data){return publish(message,data,true,PubSub.immediateExceptions);};PubSub.subscribe=function(message,func){if(typeof func!=='function'){return false;}
if(!messages.hasOwnProperty(message)){messages[message]={};}
var token='uid_'+String(++lastUid);messages[message][token]=func;return token;};PubSub.subscribeOnce=function(message,func){var token=PubSub.subscribe(message,function(){PubSub.unsubscribe(token);func.apply(this,arguments);});return PubSub;};PubSub.clearAllSubscriptions=function clearAllSubscriptions(){messages={};};PubSub.clearSubscriptions=function clearSubscriptions(topic){var m;for(m in messages){if(messages.hasOwnProperty(m)&&m.indexOf(topic)===0){delete messages[m];}}};PubSub.unsubscribe=function(value){var descendantTopicExists=function(topic){var m;for(m in messages){if(messages.hasOwnProperty(m)&&m.indexOf(topic)===0){return true;}}
return false;},isTopic=typeof value==='string'&&(messages.hasOwnProperty(value)||descendantTopicExists(value)),isToken=!isTopic&&typeof value==='string',isFunction=typeof value==='function',result=false,m,message,t;if(isTopic){PubSub.clearSubscriptions(value);return;}
for(m in messages){if(messages.hasOwnProperty(m)){message=messages[m];if(isToken&&message[value]){delete message[value];result=value;break;}
if(isFunction){for(t in message){if(message.hasOwnProperty(t)&&message[t]===value){delete message[t];result=true;}}}}}
return result;};}));




/********** https://www.aufeminin.com/reloaded/static/preconcat_%2Freloaded%2Fstatic%2FFront%2FVendor%2Fbowser%2Fbowser.min.js.202002281736.js**********/

/** https://www.aufeminin.com/reloaded/static/Front/Vendor/bowser/bowser.min.js?v=202002281736 **/
/*!
 * Bowser - a browser detector
 * https://github.com/ded/bowser
 * MIT License | (c) Dustin Diaz 2015
 */
!function(e,t,n){typeof module!="undefined"&&module.exports?module.exports=n():typeof define=="function"&&define.amd?define(t,n):e[t]=n()}(this,"bowser",function(){function t(t){function n(e){var n=t.match(e);return n&&n.length>1&&n[1]||""}function r(e){var n=t.match(e);return n&&n.length>1&&n[2]||""}function C(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return undefined}}var i=n(/(ipod|iphone|ipad)/i).toLowerCase(),o=/like android/i.test(t),u=!o&&/android/i.test(t),a=/nexus\s*[0-6]\s*/i.test(t),f=!a&&/nexus\s*[0-9]+/i.test(t),l=/CrOS/.test(t),c=/silk/i.test(t),h=/sailfish/i.test(t),p=/tizen/i.test(t),d=/(web|hpw)(o|0)s/i.test(t),v=/windows phone/i.test(t),m=/SamsungBrowser/i.test(t),g=!v&&/windows/i.test(t),y=!i&&!c&&/macintosh/i.test(t),b=!u&&!h&&!p&&!d&&/linux/i.test(t),w=r(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),E=n(/version\/(\d+(\.\d+)?)/i),S=/tablet/i.test(t)&&!/tablet pc/i.test(t),x=!S&&/[^-]mobi/i.test(t),T=/xbox/i.test(t),N;/opera/i.test(t)?N={name:"Opera",opera:e,version:E||n(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(t)?N={name:"Opera",opera:e,version:n(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||E}:/SamsungBrowser/i.test(t)?N={name:"Samsung Internet for Android",samsungBrowser:e,version:E||n(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/Whale/i.test(t)?N={name:"NAVER Whale browser",whale:e,version:n(/(?:whale)[\s\/](\d+(?:\.\d+)+)/i)}:/MZBrowser/i.test(t)?N={name:"MZ Browser",mzbrowser:e,version:n(/(?:MZBrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/coast/i.test(t)?N={name:"Opera Coast",coast:e,version:E||n(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/focus/i.test(t)?N={name:"Focus",focus:e,version:n(/(?:focus)[\s\/](\d+(?:\.\d+)+)/i)}:/yabrowser/i.test(t)?N={name:"Yandex Browser",yandexbrowser:e,version:E||n(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(t)?N={name:"UC Browser",ucbrowser:e,version:n(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(t)?N={name:"Maxthon",maxthon:e,version:n(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(t)?N={name:"Epiphany",epiphany:e,version:n(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(t)?N={name:"Puffin",puffin:e,version:n(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(t)?N={name:"Sleipnir",sleipnir:e,version:n(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(t)?N={name:"K-Meleon",kMeleon:e,version:n(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:v?(N={name:"Windows Phone",osname:"Windows Phone",windowsphone:e},w?(N.msedge=e,N.version=w):(N.msie=e,N.version=n(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(t)?N={name:"Internet Explorer",msie:e,version:n(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:l?N={name:"Chrome",osname:"Chrome OS",chromeos:e,chromeBook:e,chrome:e,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(t)?N={name:"Microsoft Edge",msedge:e,version:w}:/vivaldi/i.test(t)?N={name:"Vivaldi",vivaldi:e,version:n(/vivaldi\/(\d+(\.\d+)?)/i)||E}:h?N={name:"Sailfish",osname:"Sailfish OS",sailfish:e,version:n(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(t)?N={name:"SeaMonkey",seamonkey:e,version:n(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(t)?(N={name:"Firefox",firefox:e,version:n(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(t)&&(N.firefoxos=e,N.osname="Firefox OS")):c?N={name:"Amazon Silk",silk:e,version:n(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(t)?N={name:"PhantomJS",phantom:e,version:n(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(t)?N={name:"SlimerJS",slimer:e,version:n(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(t)||/rim\stablet/i.test(t)?N={name:"BlackBerry",osname:"BlackBerry OS",blackberry:e,version:E||n(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:d?(N={name:"WebOS",osname:"WebOS",webos:e,version:E||n(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(t)&&(N.touchpad=e)):/bada/i.test(t)?N={name:"Bada",osname:"Bada",bada:e,version:n(/dolfin\/(\d+(\.\d+)?)/i)}:p?N={name:"Tizen",osname:"Tizen",tizen:e,version:n(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||E}:/qupzilla/i.test(t)?N={name:"QupZilla",qupzilla:e,version:n(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||E}:/chromium/i.test(t)?N={name:"Chromium",chromium:e,version:n(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||E}:/chrome|crios|crmo/i.test(t)?N={name:"Chrome",chrome:e,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:u?N={name:"Android",version:E}:/safari|applewebkit/i.test(t)?(N={name:"Safari",safari:e},E&&(N.version=E)):i?(N={name:i=="iphone"?"iPhone":i=="ipad"?"iPad":"iPod"},E&&(N.version=E)):/googlebot/i.test(t)?N={name:"Googlebot",googlebot:e,version:n(/googlebot\/(\d+(\.\d+))/i)||E}:N={name:n(/^(.*)\/(.*) /),version:r(/^(.*)\/(.*) /)},!N.msedge&&/(apple)?webkit/i.test(t)?(/(apple)?webkit\/537\.36/i.test(t)?(N.name=N.name||"Blink",N.blink=e):(N.name=N.name||"Webkit",N.webkit=e),!N.version&&E&&(N.version=E)):!N.opera&&/gecko\//i.test(t)&&(N.name=N.name||"Gecko",N.gecko=e,N.version=N.version||n(/gecko\/(\d+(\.\d+)?)/i)),!N.windowsphone&&(u||N.silk)?(N.android=e,N.osname="Android"):!N.windowsphone&&i?(N[i]=e,N.ios=e,N.osname="iOS"):y?(N.mac=e,N.osname="macOS"):T?(N.xbox=e,N.osname="Xbox"):g?(N.windows=e,N.osname="Windows"):b&&(N.linux=e,N.osname="Linux");var k="";N.windows?k=C(n(/Windows ((NT|XP)( \d\d?.\d)?)/i)):N.windowsphone?k=n(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):N.mac?(k=n(/Mac OS X (\d+([_\.\s]\d+)*)/i),k=k.replace(/[_\s]/g,".")):i?(k=n(/os (\d+([_\s]\d+)*) like mac os x/i),k=k.replace(/[_\s]/g,".")):u?k=n(/android[ \/-](\d+(\.\d+)*)/i):N.webos?k=n(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):N.blackberry?k=n(/rim\stablet\sos\s(\d+(\.\d+)*)/i):N.bada?k=n(/bada\/(\d+(\.\d+)*)/i):N.tizen&&(k=n(/tizen[\/\s](\d+(\.\d+)*)/i)),k&&(N.osversion=k);var L=!N.windows&&k.split(".")[0];if(S||f||i=="ipad"||u&&(L==3||L>=4&&!x)||N.silk)N.tablet=e;else if(x||i=="iphone"||i=="ipod"||u||a||N.blackberry||N.webos||N.bada)N.mobile=e;return N.msedge||N.msie&&N.version>=10||N.yandexbrowser&&N.version>=15||N.vivaldi&&N.version>=1||N.chrome&&N.version>=20||N.samsungBrowser&&N.version>=4||N.whale&&s([N.version,"1.0"])===1||N.mzbrowser&&s([N.version,"6.0"])===1||N.focus&&s([N.version,"1.0"])===1||N.firefox&&N.version>=20||N.safari&&N.version>=6||N.opera&&N.version>=10||N.ios&&N.osversion&&N.osversion.split(".")[0]>=6||N.blackberry&&N.version>=10.1||N.chromium&&N.version>=20?N.a=e:N.msie&&N.version<10||N.chrome&&N.version<20||N.firefox&&N.version<20||N.safari&&N.version<6||N.opera&&N.version<10||N.ios&&N.osversion&&N.osversion.split(".")[0]<6||N.chromium&&N.version<20?N.c=e:N.x=e,N}function r(e){return e.split(".").length}function i(e,t){var n=[],r;if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r++)n.push(t(e[r]));return n}function s(e){var t=Math.max(r(e[0]),r(e[1])),n=i(e,function(e){var n=t-r(e);return e+=(new Array(n+1)).join(".0"),i(e.split("."),function(e){return(new Array(20-e.length)).join("0")+e}).reverse()});while(--t>=0){if(n[0][t]>n[1][t])return 1;if(n[0][t]!==n[1][t])return-1;if(t===0)return 0}}function o(e,r,i){var o=n;typeof r=="string"&&(i=r,r=void 0),r===void 0&&(r=!1),i&&(o=t(i));var u=""+o.version;for(var a in e)if(e.hasOwnProperty(a)&&o[a]){if(typeof e[a]!="string")throw new Error("Browser version in the minVersion map should be a string: "+a+": "+String(e));return s([u,e[a]])<0}return r}function u(e,t,n){return!o(e,t,n)}var e=!0,n=t(typeof navigator!="undefined"?navigator.userAgent||"":"");return n.test=function(e){for(var t=0;t<e.length;++t){var r=e[t];if(typeof r=="string"&&r in n)return!0}return!1},n.isUnsupportedBrowser=o,n.compareVersions=s,n.check=u,n._detect=t,n.detect=t,n})




/********** https://www.aufeminin.com/reloaded/static/preconcat_%2Freloaded%2Fstatic%2FFront%2FVendor%2Fauf%2Fglobal_common_top.js.202002281736.js**********/

/** https://www.aufeminin.com/reloaded/static/Front/Vendor/auf/global_common_top.js?v=202002281736 **/
function af_getHashParams(){var hashParams={};var e,a=/\+/g,r=/([^&;=]+)=?([^&;]*)/g,d=function(s){return decodeURIComponent(s.replace(a,' '));},q=window.location.hash.substring(1);while(e=r.exec(q)){hashParams[d(e[1])]=d(e[2]);}
return hashParams;}
function af_isEmpty(obj){for(var prop in obj){if(obj.hasOwnProperty(prop))
return false;}
return true;}
function af_getCookie(name){var i,x,y;var cookiesTab=document.cookie.split(';');for(i=0;i<cookiesTab.length;i++){x=cookiesTab[i].substr(0,cookiesTab[i].indexOf('='));y=cookiesTab[i].substr(cookiesTab[i].indexOf('=')+1);x=x.replace(/^\s+|\s+$/g,'');if(x=='afperso'||x=='afpperso'){var j,a,cookiesValuesTab=y.split('&');for(j=0;j<cookiesValuesTab.length;j++){a=cookiesValuesTab[j].substr(0,cookiesValuesTab[j].indexOf('='));if(a==name){return unescape(cookiesValuesTab[j].substr(cookiesValuesTab[j].indexOf('=')+1));}}}else if(x==name){return y;}}
return'';}
function af_setCookie(name,value,minutes){minutes=minutes||15;var date=new Date();date.setTime(date.getTime()+minutes*60*1000);document.cookie=name+'='+encodeURIComponent(value)+'; expires='+date.toUTCString()+'; domain='+location.hostname.substr(location.hostname.indexOf('.'))+'; path=/';}
function af_setSessionCookie(name,value){af_setCookie(name,value,15);}
function af_setPermCookie(name,value){af_setCookie(name,value,365*24*60);}
function af_cleanCookie(name){af_setCookie(name,'',-1);}
function af_guid(){return Date.now()+''+Math.floor(Math.random()*1000);}
function af_bind(o,m){var args=[];for(var i=2;i<arguments.length;++i){args.push(arguments[i]);}
return function(){var tmp=args.slice(0,args.length);for(var i=0;i<arguments.length;++i){tmp.push(arguments[i]);}
return m.apply(o,tmp);};}
function af_push(object,path,varName,value){var subpaths=path.split('.');if(subpaths.length>0){if(typeof object[subpaths[0]]=='undefined'){object[subpaths[0]]={};}
var context=object[subpaths[0]];for(i=1;i<subpaths.length;i++){if(typeof context[subpaths[i]]=='undefined'){context[subpaths[i]]={};}else{context=context[subpaths[i]];}}
context[varName]=value;}}
function af_clone(obj){if(obj===null||typeof obj!=='object'){return obj;}
var temp=obj.constructor();for(var key in obj){temp[key]=af_clone(obj[key]);}
return temp;}
function af_addEvent(elt,event,listener,capture){if(elt&&elt.addEventListener){elt.addEventListener(event,listener,capture);return true;}else if(elt&&elt.attachEvent){return elt.attachEvent('on'+event,listener);}else if(elt){var oldListener=elt['on'+event];elt['on'+event]=function(e){if(oldListener){oldListener(e);}
return listener(e);};return oldListener;}}
function af_windowSize(){var i=window,e=document.documentElement,b=document.body;var w=(i.innerWidth?i.innerWidth:(e&&e.clientWidth?e.clientWidth:(b&&b.clientWidth?b.clientWidth:0)));var h=(i.innerHeight?i.innerHeight:(e&&e.clientHeight?e.clientHeight:(b&&b.clientHeight?b.clientHeight:0)));var l=(i.pageXOffset?i.pageXOffset:(e&&e.scrollLeft?e.scrollLeft:(b&&b.scrollLeft?b.scrollLeft:0)));var t=(i.pageYOffset?i.pageYOffset:(e&&e.scrollTop?e.scrollTop:(b&&b.scrollTop?b.scrollTop:0)));return{l:l,t:t,r:l+w,b:t+h,w:w,h:h};}
function af_findPos(o){if(!o||o==document.body){return{l:0,t:0};}
var l=0,t=0,b=document.body,w=o.offsetWidth,h=o.offsetHeight;if(o.offsetParent){l=o.offsetLeft-o.scrollLeft;t=o.offsetTop-o.scrollTop;while(o=o.offsetParent){l+=o.offsetLeft-(o!=b?o.scrollLeft:0);t+=o.offsetTop-(o!=b?o.scrollTop:0);}}
return{l:l,t:t,r:l+w,b:t+h,w:w,h:h};}
var af_cssUtils=(function(){var _has3d,_cssTransform;function _can3d(){if(typeof _has3d!=='undefined')return _has3d;if(!window.getComputedStyle){return false;}
var el=document.createElement('p'),has3d,transforms={'webkitTransform':'-webkit-transform','OTransform':'-o-transform','msTransform':'-ms-transform','MozTransform':'-moz-transform','transform':'transform'};document.body.insertBefore(el,null);for(var t in transforms){if(el.style[t]!==undefined){el.style[t]='translate3d(1px,1px,1px)';has3d=window.getComputedStyle(el).getPropertyValue(transforms[t]);}}
document.body.removeChild(el);_has3d=(has3d!==undefined&&has3d.length>0&&has3d!=='none');return _has3d;}
function _getTransformProp(){if(typeof _cssTransform!=='undefined')return _cssTransform;var prefixes='transform webkitTransform mozTransform oTransform msTransform'.split(' '),i=0;while(_cssTransform===undefined){_cssTransform=document.createElement('div').style[prefixes[i]]!==undefined?prefixes[i]:undefined;i++;}
return _cssTransform;}
function translate(elt,tx,ty,tz,cb){if(!elt)return;var styleProp=_getTransformProp();if(styleProp){var styleValue;if(_can3d()){styleValue='translate3d('+tx+', '+ty+', '+tz+')';}else{styleValue='translate('+tx+', '+ty+')';}
window.requestAnimationFrame(function(){elt.style[styleProp]=styleValue;if(typeof cb==='function'){cb();}});}else{afLogger.logError('CSS transform functions not supported');return;}}
function getTranslateProps(elem){var transArr=[];if(!window.getComputedStyle){return;}
var style=getComputedStyle(elem),transform=style.transform||style.webkitTransform||style.mozTransform||style.msTransform,mat=transform.match(/^matrix3d\((.+)\)$/);if(mat){return parseFloat(mat[1].split(', ')[13]);}
mat=transform.match(/^matrix\((.+)\)$/);mat?transArr.push(parseFloat(mat[1].split(', ')[4])):transArr.push(0);mat?transArr.push(parseFloat(mat[1].split(', ')[5])):transArr.push(0);return transArr;}
return{translate:translate,getTranslateProps:getTranslateProps};})();function af_percentInViewport(el){if(!el){return 0;}
var rect=el.getBoundingClientRect();var wSize=af_windowSize();var visibleHeight=rect.height;var visibleWidth=rect.width;var totalSize=visibleHeight*visibleWidth;if(rect.top<0&&rect.bottom>0){visibleHeight+=rect.top;}
if(rect.bottom>wSize.h&&rect.top<wSize.h){visibleHeight+=(wSize.h-rect.bottom);}
if((Math.max(rect.top,rect.bottom)<0)||(Math.min(rect.bottom,rect.top)>wSize.h)){visibleHeight=0;}
if(rect.left<0&&rect.right>0){visibleWidth+=rect.left;}
if(rect.right>wSize.w&&rect.left<wSize.w){visibleWidth+=(wSize.w-rect.right);}
if((Math.max(rect.left,rect.right)<0)||(Math.min(rect.left,rect.right)>wSize.w)){visibleWidth=0;}
return((visibleHeight*visibleWidth)/totalSize);}
function af_isInViewport(el,percent){if(!el){return false;}
if(typeof percent!=='number'){percent=1;}
return(af_percentInViewport(el)>=percent);}
var _isIOS;function af_isIOS(){if(typeof _isIOS==='undefined'){_isIOS=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)!==null;}
return _isIOS;}
function af_findAncestor(el,cls){while((el=el.parentElement)&&!el.classList.contains(cls));return el;}
var af_userAgent=(function(){var _isMobile=false;var _isTablet=false;var _regexMobile=/(ipod|blackberry|phone|mobile|opera mini|pda|symbian|3ds|nokia|ericsson|alcatel)/gi;var _regexTabletSmall=/(pad|lenovo|tab|GT-P5210|GT-P5110|Nexus 7|GT-N8010|GT-P3110)/gi;var _regexTablet=/(pad|tab|android)/gi;var _initialized=false;function _init(){if(_initialized)return;_initialized=true;if(navigator.userAgent.match(_regexMobile)){if(navigator.userAgent.match(_regexTabletSmall)){_isTablet=true;}else{_isMobile=true;}}else if(navigator.userAgent.match(_regexTablet)&&!navigator.userAgent.match(/(pc)/gi)){_isTablet=true;}}
function isMobile(){_init();return _isMobile;}
function isTablet(){_init();return _isTablet;}
return{isMobile:isMobile,isTablet:isTablet};})();function af_isMobile(){return af_userAgent.isMobile();}
function af_isTablet(){return af_userAgent.isTablet();}
function af_refreshAds(formatIds,extraTarget,delay,pageId,forceMasterFlag,resetTimestamp,tagId){window.afLogger.logError('af_refreshAds should not be used','ads');if(window.afAd&&typeof afAd.refreshAds==='function'){return afAd.refreshAds({delay:delay,extraTarget:extraTarget,formatIds:formatIds,tagId:tagId});}}
function afAd_removeFromFormatIds(format){if(sas_formatIds){if(sas_formatIds.indexOf(format)===0){sas_formatIds=sas_formatIds.replace(format+',','');sas_formatIds=sas_formatIds.replace(format,'');}else{sas_formatIds=sas_formatIds.replace(','+format,'');sas_formatIds=sas_formatIds.replace(format,'');}}
if(window.afAd){for(var i in afAd.placeholders){if(afAd.placeholders[i].formatId===format){delete afAd.placeholders[i];}}}}




/********** https://www.aufeminin.com/reloaded/static/preconcat_%2Freloaded%2Fstatic%2FFront%2FVendor%2Fauf%2FafLogger.js.202002281736.js**********/

/** https://www.aufeminin.com/reloaded/static/Front/Vendor/auf/afLogger.js?v=202002281736 **/
var Aflog=window.Aflog||{};Aflog.Queue=(function(){var queue=function(){};queue.prototype={constructor:queue,push:function(){for(var i=0;i<arguments.length;i++)try{if(typeof arguments[i]==='function')arguments[i]();}catch(e){if(window.afLogger)afLogger.logError('Auflog command queue error: '+e);}}};return queue;})();Aflog.Logger=Aflog.Logger||(function(){var EXTERNAL_DOMAINS_REGEXP=/onmeda|netmums|itsrosy|livingly|lonny|mabelandmoxie|stylebistro|zimbio|lesnumeriques|cnetfrance|beaute-test|gamekult|zdnet|programmez|paroledemamans|avisdemamans|paroledesagesfemmes/i;var EXTERNAL_DOMAINS_REGEXP2=/doctissimo/i;var ERROR_SAMPLE_RATE=10;var logger=function(options){this.initLogger(options);this.initLogs();};var REALTIME_SAMPLE_RATE=0;var REALTIME_ENDPOINT='https://europe-west1-realtime-logging-228816.cloudfunctions.net/realtime-logs';var REALTIME_MAXQUEUE=20;var REALTIME_TIMEOUT=2000;var REALTIME_LOGGING_HEADER_BIDDING_MAPPING={'content_type':'datalayer.pageInfo.contentType','site':'datalayer.siteInfo.platform','segment':'datalayer.userInfo.segment','device':'datalayer.userInfo.device','browser':'#UA_BROWSER#','browser_version':'#UA_BROWSER_VER#','os':'#UA_OS#','os_version':'#UA_OS_VER#','account':'headerBidding.account','adserver':'headerBidding.adserver','bidder':'headerBidding.bidder','cpm':'headerBidding.cpm','format':'headerBidding.format','size':'headerBidding.size','target':'headerBidding.target','ad_unit_path':'headerBidding.ad_unit_path','line_item_id':'headerBidding.line_item_id','campaign_id':'headerBidding.campaign_id','creative_id':'headerBidding.creative_id',};var REALTIME_LOGGING_VIDEO_MAPPING={'content_type':'datalayer.pageInfo.contentType','site':'datalayer.siteInfo.platform','segment':'datalayer.userInfo.segment','device':'datalayer.userInfo.device','browser':'#UA_BROWSER#','browser_version':'#UA_BROWSER_VER#','os':'#UA_OS#','os_version':'#UA_OS_VER#','ad_id':'ad.adId','ad_system':'ad.adSystem','creative_id':'ad.creativeId','wrapper_ad_ids':'ad.wrapperAdIds','wrapper_ad_systems':'ad.wrapperAdSystems','wrapper_creative_ids':'ad.wrapperCreativeIds','account':'headerBidding.account','bidder':'headerBidding.bidder','cpm':'headerBidding.cpmRaw','format':'headerBidding.format','size':'headerBidding.size','event':'event','adplayer_name':'adPlayer.name','player_context':'player.context','player_video_id':'player.videoId','player_position':'player.position','player_version':'player.version','target':'target','video_duration':'video.duration','video_file':'video.file','video_position':'video.position','execution_time':'execution_time'};logger.prototype={constructor:logger,initQueue:function(){var _old_queue=window.aflogQueue;window.aflogQueue=new Aflog.Queue();window.aflogQueue.push.apply(window.aflogQueue,_old_queue);},verbose:{},browser:null,browserVersion:null,os:null,osVersion:null,realtimeLogs:{},realtimeTimer:null,realtimeLogTime:null,initLogger:function(data){this.datalayer=(data&&data.datalayer?data.datalayer:(window.af_dataLayer?af_dataLayer[0]:null));this.analyticsInit();this.initContext();},initLogs:function(){this.logs={console:{}};},setVerbose:function(category,enabled){if(!category){this.logError('Failed activating verbose - missing category');return;}
var key=category.toLowerCase()+'_verbose';this.verbose[category]=(enabled||this.getConfig(key)!=false?'1':'0');localStorage.setItem(key,this.verbose[category]);},setDataLayer:function(datalayer){this.datalayer=datalayer;},logConsole:function(log,logType,category){if(!window.console){return;}
if(category&&this.getConfig(category.toLowerCase()+'_verbose')==false){return;}
logType=logType||'log';if(typeof log==='object'){logType='table';}else if(typeof log==='string'&&category){log='['+category+'] '+log;}
if(logType==='table'){console.table(log);}else if(logType==='count'){console.count(log);}else{console[logType].apply(console,[log]);}},logError:function(message,category,consoleOnly){this.logConsole((category?'['+category+'] ':'')+message,'error');if(consoleOnly||ERROR_SAMPLE_RATE&&Math.floor(Math.random()*100)>ERROR_SAMPLE_RATE){return;}
var hostnameArr=location.hostname.split('.');hostnameArr.shift();var cleanedHostname=hostnameArr.join('.');var domain='www.'+cleanedHostname;if(EXTERNAL_DOMAINS_REGEXP.test(location.hostname))domain='aufeminin.'+cleanedHostname;if(EXTERNAL_DOMAINS_REGEXP2.test(location.hostname))domain='dfp.'+cleanedHostname;var img=new Image();img.src='https://'+domain+'/reloaded/errpix.php'
+'?s='+100/ERROR_SAMPLE_RATE
+'&d='+encodeURIComponent(message.split('').reverse().join(''))
+'&t='+Math.round(Math.random()*99999)
+(category?'&c='+encodeURIComponent(category):'');},logAnalytics:function(logType,logs,applySampling){if(!(logs instanceof Array)){logs=[logs];}
if(logs.length<1){return;}
var datalayer=this.getFilteredDatalayer();var sessionData=this.getSessionData();for(var i=0,l=logs.length;i<l;i++){logs[i].sessionData=sessionData;logs[i].datalayer=datalayer;logs[i].url=window.location.href;}
this.realtimeLog(logType,logs,applySampling);},logLoad:function(){this.loadLog();},getSessionData:function(){if(!window.afSession){this.logError('Failed retrieving session data');return;}
return{visitor:afSession.getVisitorId(),session:afSession.getSessionId(),pageview:afSession.getPageviewId(),wave:afSession.getWaveId(),rank:afSession.getRankId(),};},getFilteredDatalayer:function(){var filteredDatalayer={};if(this.datalayer){if(this.datalayer.userInfo){filteredDatalayer.userInfo={du:this.datalayer.userInfo.du,device:this.datalayer.userInfo.device,adblocker:this.datalayer.userInfo.adblocker?true:false,screenResolution:this.datalayer.userInfo.screenResolution,segment:this.datalayer.userInfo.segment};filteredDatalayer.vuid=this.datalayer.userInfo.vuid;}
if(this.datalayer.pageInfo){filteredDatalayer.pageInfo={version:this.datalayer.pageInfo.version,contentType:this.datalayer.pageInfo.contentType,section:this.datalayer.pageInfo.section,subsection:this.datalayer.pageInfo.subsection,tag:this.datalayer.pageInfo.tag,category:this.datalayer.pageInfo.category,ads:this.datalayer.pageInfo.ads};}
if(this.datalayer.campaignInfo){filteredDatalayer.campaignInfo={utmSource:this.datalayer.campaignInfo.utmSource,utmCampaign:this.datalayer.campaignInfo.utmCampaign,utmMedium:this.datalayer.campaignInfo.utmMedium,paid:this.datalayer.campaignInfo.paid?true:false};}
if(this.datalayer.siteInfo){filteredDatalayer.siteInfo={platform:this.datalayer.siteInfo.platform,isMobile:this.datalayer.siteInfo.isMobile};}}
if(Object.keys(filteredDatalayer).length===0){filteredDatalayer={siteInfo:{platform:document.domain}};}
return filteredDatalayer;},analyticsInit:function(){if(!window.PubSub)return;var that=this;PubSub.subscribe('datalayer.ready',function(){that.analyticsLog();});PubSub.subscribe('tracking.call',function(){that.analyticsLog();});},analyticsLog:function(){if(!this.datalayer)return;this.logAnalytics('ANALYTICS',{},true,true);},realtimeLog:function(logType,logs,applySampling){if((applySampling&&REALTIME_SAMPLE_RATE&&Math.floor(Math.random()*100)>REALTIME_SAMPLE_RATE)||(logType!=='HEADER_BIDDING_RENDER'&&logType.indexOf('VIDEO_LOG')===-1)){return;}
for(var i=0,l=logs.length;i<l;i++){var formattedLog=this.getFormattedRealtimeLog(logType,logs[i]);if(typeof formattedLog!=='undefined'){if(!this.realtimeLogs.hasOwnProperty(logType)){this.realtimeLogs[logType]=[];}
this.realtimeLogs[logType].push(formattedLog);}}
var nbLogs=0;for(var type in this.realtimeLogs){nbLogs+=this.realtimeLogs[type].length;}
if(nbLogs>REALTIME_MAXQUEUE){this.realtimeBulkPost();}else{var that=this;this.realtimeTimer=window.setTimeout(function(){that.realtimeBulkPost();},REALTIME_TIMEOUT);}},loadLog:function(){return this.sendRequest('GET','https://europe-west1-realtime-logging-228816.cloudfunctions.net/load-test',{},{});},realtimeBulkPost:function(){var payload=[];for(var logType in this.realtimeLogs){if(this.realtimeLogs[logType].length>0){payload.push({logtype:logType,logs:this.realtimeLogs[logType]});}}
this.realtimeLogs={};window.clearTimeout(this.realtimeTimer);if(payload.length>0){this.logConsole('Sending logs',false,'realtime');this.logConsole(payload,logType,'realtime');var endpoint=REALTIME_ENDPOINT;var headers=[{header:'Content-Type',value:'application/json'}];return this.sendRequest('POST',endpoint,headers,payload);}},sendRequest:function(method,endpoint,headers,payload){var request=window.XDomainRequest?new XDomainRequest():new XMLHttpRequest();request.open(method,endpoint,true);if(!window.XDomainRequest){for(var i=0,l=headers.length;i<l;i++){request.setRequestHeader(headers[i].header,headers[i].value);}}
return request.send(JSON.stringify(payload));},getConfig:function(key){if(!this.hashs){this.hashs=this.getLocationHash();}
return this.hashs[key]||window.localStorage&&localStorage.getItem(key)||'';},getLocationHash:function(){var hashParams={};var e,a=/\+/g,r=/([^&;=]+)=?([^&;]*)/g,d=function(s){return decodeURIComponent(s.replace(a,' '));},q=window.location.hash.substring(1);while(e=r.exec(q)){hashParams[d(e[1])]=d(e[2]);}
return hashParams;},initContext:function(){var bowser=window.bowser||{};this.browser=bowser.name;this.browserVersion=bowser.version;this.os=bowser.osname;this.osversion=bowser.osversion;this.realtimeLoggingPlaceholders={'#UA_BROWSER#':this.browser,'#UA_BROWSER_VER#':this.browserVersion,'#UA_OS#':this.os,'#UA_OS_VER#':this.osversion};},realtimeLoggingMapping:{'HEADER_BIDDING':REALTIME_LOGGING_HEADER_BIDDING_MAPPING,'HEADER_BIDDING_BOOKED':REALTIME_LOGGING_HEADER_BIDDING_MAPPING,'HEADER_BIDDING_RENDER':REALTIME_LOGGING_HEADER_BIDDING_MAPPING,'VIDEO_ERROR':REALTIME_LOGGING_VIDEO_MAPPING,'VIDEO_LOG':REALTIME_LOGGING_VIDEO_MAPPING,},getFormattedRealtimeLog:function(logType,log){var formattedLog={};if(this.realtimeLoggingMapping.hasOwnProperty(logType)){var mapping=this.realtimeLoggingMapping[logType];for(var key in mapping){if(mapping.hasOwnProperty(key)){var value=mapping[key];if(this.realtimeLoggingPlaceholders.hasOwnProperty(value)){formattedLog[key]=this.realtimeLoggingPlaceholders[value];}else{var path=value.split('.');for(var i=0;i<path.length;i++){if(formattedLog.hasOwnProperty(key)&&formattedLog[key].hasOwnProperty(path[i])){formattedLog[key]=formattedLog[key][path[i]];}else if(!formattedLog.hasOwnProperty(key)&&log.hasOwnProperty(path[i])){formattedLog[key]=log[path[i]];}else{formattedLog[key]=null;break;}}}}}}else{return;}
return formattedLog;}};return logger;})();




/********** https://www.aufeminin.com/reloaded/static/preconcat_%2Freloaded%2Fstatic%2FFront%2FVendor%2Fauf%2FafSession.js.202002281736.js**********/

/** https://www.aufeminin.com/reloaded/static/Front/Vendor/auf/afSession.js?v=202002281736 **/
var AufSession=window.AufSession||(function(){var COOKIE_NAME='af_session';var SESSION_TTL_MINUTES=30;var session=function(){if(!window.JSON)return;this.init();};session.prototype={constructor:session,init:function(){var rawCookie=af_getCookie(COOKIE_NAME);if(!rawCookie){this.cookie={visitorId:this.getGuid(),sessionId:1,sessionStartTime:this.getTime(),sessionUtm:this.getUtmFromUrl(),pageviewId:1,waveId:0,rankId:0};this.save();}else{this.cookie=JSON.parse(decodeURIComponent(rawCookie));if(typeof this.cookie.rankId==='undefined'){this.cookie.rankId=this.cookie.waveId;}
this.updatePageview();}},save:function(){this.updateAdTargetingKeywords();af_setPermCookie(COOKIE_NAME,JSON.stringify(this.cookie));},getVisitorId:function(){return this.cookie.visitorId;},getSessionId:function(){return this.cookie.sessionId;},getPageviewId:function(){return this.cookie.pageviewId;},getWaveId:function(){return this.cookie.waveId;},getRankId:function(){return this.cookie.rankId;},getUtm:function(){return{source:this.getUtmSource(),medium:this.getUtmMedium(),campaign:this.getUtmCampaign()};},getSegment:function(){if(typeof afForcedSegment!=='undefined'){return parseInt(afForcedSegment);}
var visitorId=this.getVisitorId();if(typeof visitorId==='undefined'){if(window.afLogger)afLogger.logError('visitorId is not defined');return Math.floor(Math.random()*10);}
var segment=parseInt(visitorId.slice(-1));if(isNaN(segment)){if(window.afLogger)afLogger.logError('segment is NaN');return Math.floor(Math.random()*10);}
return segment;},getUtmQuerystring:function(){var keywords=this.getUtm();var arr=[];for(var key in keywords){if(keywords[key]){arr.push('utm_'+key+'='+keywords[key]);}}
return arr.join('&');},getUtmSource:function(){return this.cookie.sessionUtm&&this.cookie.sessionUtm.source?this.cookie.sessionUtm.source:'';},getUtmMedium:function(){return this.cookie.sessionUtm&&this.cookie.sessionUtm.medium?this.cookie.sessionUtm.medium:'';},getUtmCampaign:function(){return this.cookie.sessionUtm&&this.cookie.sessionUtm.campaign?this.cookie.sessionUtm.campaign:'';},isPaid:function(){return this.getUtmMedium()==='cpc';},updateSession:function(){if(this.isSessionExpired()){this.newSession();this.newPageview(true);this.newWave(true);this.newRank(true);}
this.cookie.sessionStartTime=this.getTime();this.save();},updatePageview:function(){this.newPageview();this.newWave(true);this.updateSession();},updateWave:function(){this.newWave();this.newRank();this.updateSession();},isSessionExpired:function(){var now=new Date();var sessionStartDateString=new Date(this.cookie.sessionStartTime).toDateString();var sessionEndTime=this.cookie.sessionStartTime+SESSION_TTL_MINUTES*60*1000;var utmFromUrl=this.getUtmFromUrl();return(now.getTime()>sessionEndTime||now.toDateString()!==sessionStartDateString||utmFromUrl&&((utmFromUrl.source&&utmFromUrl.source!==this.getUtmSource())||(utmFromUrl.medium&&utmFromUrl.medium!==this.getUtmMedium())||(utmFromUrl.campaign&&utmFromUrl.campaign!==this.getUtmCampaign())));},newSession:function(){this.cookie.sessionId=(this.cookie.sessionId>=1000?1:(this.cookie.sessionId+1)%1000);this.cookie.sessionUtm=this.getUtmFromUrl();},newPageview:function(reset){this.cookie.pageviewId=((reset||this.cookie.pageviewId>=1000)?1:(this.cookie.pageviewId+1)%1000);},newWave:function(reset){this.cookie.waveId=((reset||this.cookie.waveId>=1000)?0:(this.cookie.waveId+1)%1000);},newRank:function(reset){this.cookie.rankId=((reset||this.cookie.rankId>=1000)?0:(this.cookie.rankId+1)%1000);},getAdTargetingKeywords:function(){return{'visitor':this.getVisitorId(),'session':this.getSessionId(),'pageview':this.getPageviewId(),'wave':this.getWaveId(),'rank':this.getRankId(),'utm_source':this.getUtmSource(),'utm_medium':this.getUtmMedium(),'utm_campaign':this.getUtmCampaign(),'segment':this.getSegment()+'s'};},getAdTargetingKeywordsFormatted:function(){var keywords=this.getAdTargetingKeywords();var arr=[];for(var key in keywords){if(keywords[key]){arr.push(key+'='+keywords[key]);}}
return';'+arr.join(';')+';';},updateAdTargetingKeywords:function(){window.afAdQueue=window.afAdQueue||[];window.afAdQueue.push(function(){var keywords=this.getAdTargetingKeywords();window.sas_target=window.sas_target||'';for(var key in keywords){afAd.updateKeyword(key,keywords[key]);}}.bind(this));},getTime:function(){return(new Date()).getTime();},getGuid:function(){return Date.now().toString()+Math.floor(Math.random()*1000).toString();},getUtmFromUrl:function(){var hash=document.location.hash.substring(1);var querystring=document.location.search.substring(1);var combination=querystring+'&'+hash;if(querystring||hash){var combinationArray=combination.replace(/&|#/g,'|').split('|');var utm={};for(var i=0,l=combinationArray.length;i<l;i++){var combinationValue=combinationArray[i].split('=');var key=combinationValue[0];var value=combinationValue[1];if(key&&value){var qmPos=value.indexOf('?');if(qmPos>=0){value=value.substr(0,qmPos);}
switch(key){case'utm_source':utm.source=value;break;case'utm_medium':utm.medium=value;break;case'utm_campaign':utm.campaign=value;break;}}}
return utm;}
return null;},debug:function(){console.table(this);}};return session;})();




/********** https://www.aufeminin.com/reloaded/static/preconcat_%2Freloaded%2Fstatic%2FFront%2FVendor%2Fauf%2Fga.js.202002281736.js**********/

/** https://www.aufeminin.com/reloaded/static/Front/Vendor/auf/ga.js?v=202002281736 **/
function af_ua_trackEvent(category,action,opt_label,opt_value,opt_noninteraction,prefix,sampling){if(category=='AF_Album'&&action=='go')return;if(category=='AF_Album'&&action=='prev')return;if(category=='AF_Album'&&action=='next')return;if(typeof sampling!=='undefined'&&Math.floor((Math.random()*100))>sampling){return;}
var opt_label=opt_label||'',opt_value=opt_value||0,opt_noninteraction=opt_noninteraction||false,prefix=prefix||'';if(typeof m_dataLayer!='undefined'){m_dataLayer.push({'event':'UA-Event','uaEventCategory':category,'uaEventAction':action,'uaEventLibelle':opt_label,'uaEventValue':opt_value,'uaEventNonInt':opt_noninteraction});}else if(typeof af_dataLayer!='undefined'){af_dataLayer.push({'event':'UA - Event','eventCategory':category,'eventAction':action,'eventLabel':opt_label,'eventValue':opt_value,'eventNonInt':opt_noninteraction});}else if(typeof _gaq!='undefined'){if((prefix!='')&&(prefix.substr(-1)!='.'))prefix+='.';_gaq.push([prefix+'_trackEvent',category,action,opt_label,opt_value,opt_noninteraction]);}};function af_ua_trackVirtualPV(url){if(typeof m_dataLayer!='undefined'){m_dataLayer.push({'event':'UA-VirtualPageView','virtualPageURL':url});}else if(typeof af_dataLayer!='undefined'){af_dataLayer.push({'event':'VirtualPageView','virtualPageURL':url});}else if(typeof _gaq!='undefined'){_gaq.push(['_trackPageview',url]);}};function uaAddVirtualPageView(url){m_dataLayer.push({'event':'UA-VirtualPageView','virtualPageURL':url});}
function uaAddEvent(category,action,libelle,value,opt_noninteraction){if(typeof m_dataLayer!='undefined'){m_dataLayer.push({'event':'UA-Event','uaEventCategory':category,'uaEventAction':action,'uaEventLibelle':libelle,'uaEventValue':value,'uaEventNonInt':opt_noninteraction});}}
function recordOutboundLinkGA(link,category,action){uaAddEvent(category,action,link,undefined,1);}
function recordInternalLinkGA(category,action,link){uaAddEvent(category,action,link,undefined,1);}
function recordInternalLinkGAWithParam(category,action,link,val,nointeraction){uaAddEvent(category,action,link,val,nointeraction);}
function ga_trackOutboundLink(event){try{var event=event||window.event;if(event.button!=2){var el=event.srcElement||event.target;while(el&&(typeof el.tagName=='undefined'||el.tagName.toLowerCase()!='a'||!el.href))el=el.parentNode;if(el&&el.href){if(el.href.indexOf(document.domain)==-1&&(/^(https?:)?\/\//).test(el.href)){af_gaqTrackEvent("Outbound Link",el.href,document.location.pathname+document.location.search);if(typeof(OPS_GA_account)!='undefined')
af_gaqTrackEvent("Outbound Link",el.href,document.location.pathname+document.location.search,'',false,'ops');if(!el.target||el.target.match(/^_(self|parent|top)$/i)){setTimeout(function(){document.location.href=el.href;}.bind(el),100);event.preventDefault?event.preventDefault():event.returnValue=false;}}}}}catch(e){afLogger.logError('Unable to track outbound link');}}




/********** https://www.aufeminin.com/reloaded/static/preconcat_%2Freloaded%2Fstatic%2FFront%2FVendor%2Fauf%2FafPageSpeedLogger.js.202002281736.js**********/

/** https://www.aufeminin.com/reloaded/static/Front/Vendor/auf/afPageSpeedLogger.js?v=202002281736 **/
var AfPageSpeedLogger=(function(){var SAMPLE_RATE_ANALYTICS=100;var logger=function(){return;this.initLogger();this.initListeners();};logger.prototype={initLogger:function(){this.logger=window.afLogger;},initListeners:function(){var that=this;af_addEvent(window,'load',function(){setTimeout(function(){if(window.performance){var timing=window.performance.timing;var pageLoadTime=(timing.loadEventEnd-timing.navigationStart)/1000;var redirectTime=(timing.redirectEnd-timing.redirectStart)/1000;var dnsTime=(timing.domainLookupEnd-timing.domainLookupStart)/1000;var connectTime=(timing.connectEnd-timing.connectStart)/1000;var requestTime=(timing.responseStart-timing.requestStart)/1000;var responseTime=(timing.responseEnd-timing.responseStart)/1000;var renderTime=(timing.domComplete-timing.domLoading)/1000;if(pageLoadTime<=0){return;}
that.logEvent({connectTime:connectTime,dnsTime:dnsTime,pageLoadTime:pageLoadTime,redirectTime:redirectTime,renderTime:renderTime,responseTime:responseTime,requestTime:requestTime});}},0);});},logAnalytics:function(message,data){if(SAMPLE_RATE_ANALYTICS&&Math.floor((Math.random()*100))>SAMPLE_RATE_ANALYTICS){return;}
this.logger.logAnalytics(message,{pageSpeed:data},false);},logEvent:function(data){this.logAnalytics('PAGESPEED',data);}};return logger;})();




/********** https://www.aufeminin.com/reloaded/static/preconcat_%2Freloaded%2Fstatic%2FFront%2FVendor%2Fauf%2FafAdblock.js.202002281736.js**********/

/** https://www.aufeminin.com/reloaded/static/Front/Vendor/auf/afAdblock.js?v=202002281736 **/
if(!window.afAdblock){var afAdblock=(function(){return{run:false,status:'N/A',init:function(){if(this.run){return;}
this.run=true;this.detect();},updateStatus:function(status){this.status=status;PubSub.publish('ad.block.detect',{status:status});},detect:function(){var that=this;var adsbox=document.createElement('div');adsbox.innerHTML='&nbsp;';adsbox.style.position='absolute';adsbox.style.top='-1000px';adsbox.className='adsbox';document.body.appendChild(adsbox);setTimeout(function(){var status=(adsbox.offsetHeight===0);that.updateStatus(status);},100);}};})();}




/********** https://www.aufeminin.com/reloaded/static/preconcat_%2Freloaded%2Fstatic%2FFront%2FVendor%2Fpolyfill%2Fclasslist.js.202002281736.js**********/

/** https://www.aufeminin.com/reloaded/static/Front/Vendor/polyfill/classlist.js?v=202002281736 **/
/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */
if("document"in window.self){if(!("classList"in document.createElement("_"))||document.createElementNS&&!("classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))){(function(view){"use strict";if(!('Element'in view))return;var
classListProp="classList",protoProp="prototype",elemCtrProto=view.Element[protoProp],objCtr=Object,strTrim=String[protoProp].trim||function(){return this.replace(/^\s+|\s+$/g,"");},arrIndexOf=Array[protoProp].indexOf||function(item){var
i=0,len=this.length;for(;i<len;i++){if(i in this&&this[i]===item){return i;}}
return-1;},DOMEx=function(type,message){this.name=type;this.code=DOMException[type];this.message=message;},checkTokenAndGetIndex=function(classList,token){if(token===""){throw new DOMEx("SYNTAX_ERR","An invalid or illegal string was specified");}
if(/\s/.test(token)){throw new DOMEx("INVALID_CHARACTER_ERR","String contains an invalid character");}
return arrIndexOf.call(classList,token);},ClassList=function(elem){var
trimmedClasses=strTrim.call(elem.getAttribute("class")||""),classes=trimmedClasses?trimmedClasses.split(/\s+/):[],i=0,len=classes.length;for(;i<len;i++){this.push(classes[i]);}
this._updateClassName=function(){elem.setAttribute("class",this.toString());};},classListProto=ClassList[protoProp]=[],classListGetter=function(){return new ClassList(this);};DOMEx[protoProp]=Error[protoProp];classListProto.item=function(i){return this[i]||null;};classListProto.contains=function(token){token+="";return checkTokenAndGetIndex(this,token)!==-1;};classListProto.add=function(){var
tokens=arguments,i=0,l=tokens.length,token,updated=false;do{token=tokens[i]+"";if(checkTokenAndGetIndex(this,token)===-1){this.push(token);updated=true;}}
while(++i<l);if(updated){this._updateClassName();}};classListProto.remove=function(){var
tokens=arguments,i=0,l=tokens.length,token,updated=false,index;do{token=tokens[i]+"";index=checkTokenAndGetIndex(this,token);while(index!==-1){this.splice(index,1);updated=true;index=checkTokenAndGetIndex(this,token);}}
while(++i<l);if(updated){this._updateClassName();}};classListProto.toggle=function(token,force){token+="";var
result=this.contains(token),method=result?force!==true&&"remove":force!==false&&"add";if(method){this[method](token);}
if(force===true||force===false){return force;}else{return!result;}};classListProto.toString=function(){return this.join(" ");};if(objCtr.defineProperty){var classListPropDesc={get:classListGetter,enumerable:true,configurable:true};try{objCtr.defineProperty(elemCtrProto,classListProp,classListPropDesc);}catch(ex){if(ex.number===undefined||ex.number===-0x7FF5EC54){classListPropDesc.enumerable=false;objCtr.defineProperty(elemCtrProto,classListProp,classListPropDesc);}}}else if(objCtr[protoProp].__defineGetter__){elemCtrProto.__defineGetter__(classListProp,classListGetter);}}(window.self));}
(function(){"use strict";var testElement=document.createElement("_");testElement.classList.add("c1","c2");if(!testElement.classList.contains("c2")){var createMethod=function(method){var original=DOMTokenList.prototype[method];DOMTokenList.prototype[method]=function(token){var i,len=arguments.length;for(i=0;i<len;i++){token=arguments[i];original.call(this,token);}};};createMethod('add');createMethod('remove');}
testElement.classList.toggle("c3",false);if(testElement.classList.contains("c3")){var _toggle=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(token,force){if(1 in arguments&&!this.contains(token)===!force){return force;}else{return _toggle.call(this,token);}};}
testElement=null;}());}




/********** https://www.aufeminin.com/reloaded/static/preconcat_%2Freloaded%2Fstatic%2FFront%2FVendor%2Fhandlebars%2Fhandlebars.js.202002281736.js**********/

/** https://www.aufeminin.com/reloaded/static/Front/Vendor/handlebars/handlebars.js?v=202002281736 **/
!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.Handlebars=b():a.Handlebars=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){var a=r();return a.compile=function(b,c){return k.compile(b,c,a)},a.precompile=function(b,c){return k.precompile(b,c,a)},a.AST=i["default"],a.Compiler=k.Compiler,a.JavaScriptCompiler=m["default"],a.Parser=j.parser,a.parse=j.parse,a}b.__esModule=!0;var f=c(1),g=d(f),h=c(19),i=d(h),j=c(20),k=c(25),l=c(26),m=d(l),n=c(23),o=d(n),p=c(18),q=d(p),r=g["default"].create,s=e();s.create=e,q["default"](s),s.Visitor=o["default"],s["default"]=s,b["default"]=s,a.exports=b["default"]},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(){var a=new h.HandlebarsEnvironment;return n.extend(a,h),a.SafeString=j["default"],a.Exception=l["default"],a.Utils=n,a.escapeExpression=n.escapeExpression,a.VM=p,a.template=function(b){return p.template(b,a)},a}b.__esModule=!0;var g=c(2),h=e(g),i=c(16),j=d(i),k=c(4),l=d(k),m=c(3),n=e(m),o=c(17),p=e(o),q=c(18),r=d(q),s=f();s.create=f,r["default"](s),s["default"]=s,b["default"]=s,a.exports=b["default"]},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b,c){this.helpers=a||{},this.partials=b||{},this.decorators=c||{},i.registerDefaultHelpers(this),j.registerDefaultDecorators(this)}b.__esModule=!0,b.HandlebarsEnvironment=e;var f=c(3),g=c(4),h=d(g),i=c(5),j=c(13),k=c(15),l=d(k),m="4.0.10";b.VERSION=m;var n=7;b.COMPILER_REVISION=n;var o={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};b.REVISION_CHANGES=o;var p="[object Object]";e.prototype={constructor:e,logger:l["default"],log:l["default"].log,registerHelper:function(a,b){if(f.toString.call(a)===p){if(b)throw new h["default"]("Arg not supported with multiple helpers");f.extend(this.helpers,a)}else this.helpers[a]=b},unregisterHelper:function(a){delete this.helpers[a]},registerPartial:function(a,b){if(f.toString.call(a)===p)f.extend(this.partials,a);else{if("undefined"==typeof b)throw new h["default"]('Attempting to register a partial called "'+a+'" as undefined');this.partials[a]=b}},unregisterPartial:function(a){delete this.partials[a]},registerDecorator:function(a,b){if(f.toString.call(a)===p){if(b)throw new h["default"]("Arg not supported with multiple decorators");f.extend(this.decorators,a)}else this.decorators[a]=b},unregisterDecorator:function(a){delete this.decorators[a]}};var q=l["default"].log;b.log=q,b.createFrame=f.createFrame,b.logger=l["default"]},function(a,b){"use strict";function c(a){return i[a]}function d(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],c)&&(a[c]=arguments[b][c]);return a}function e(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1}function f(a){if("string"!=typeof a){if(a&&a.toHTML)return a.toHTML();if(null==a)return"";if(!a)return a+"";a=""+a}return k.test(a)?a.replace(j,c):a}function g(a){return!a&&0!==a||!(!n(a)||0!==a.length)}function h(a){var b=d({},a);return b._parent=a,b}b.__esModule=!0,b.extend=d,b.indexOf=e,b.escapeExpression=f,b.isEmpty=g,b.createFrame=h;var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},j=/[&<>"'`=]/g,k=/[&<>"'`=]/,l=Object.prototype.toString;b.toString=l;var m=function(a){return"function"==typeof a};m(/x/)&&(b.isFunction=m=function(a){return"function"==typeof a&&"[object Function]"===l.call(a)}),b.isFunction=m;var n=Array.isArray||function(a){return!(!a||"object"!=typeof a)&&"[object Array]"===l.call(a)};b.isArray=n},function(a,b){"use strict";function c(a,b){var e=b&&b.loc,f=void 0,g=void 0;e&&(f=e.start.line,g=e.start.column,a+=" - "+f+":"+g);for(var h=Error.prototype.constructor.call(this,a),i=0;i<d.length;i++)this[d[i]]=h[d[i]];Error.captureStackTrace&&Error.captureStackTrace(this,c);try{e&&(this.lineNumber=f,Object.defineProperty?Object.defineProperty(this,"column",{value:g,enumerable:!0}):this.column=g)}catch(j){}}b.__esModule=!0;var d=["description","fileName","lineNumber","message","name","number","stack"];c.prototype=new Error,b["default"]=c,a.exports=b["default"]},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){g["default"](a),i["default"](a),k["default"](a),m["default"](a),o["default"](a),q["default"](a),s["default"](a)}b.__esModule=!0,b.registerDefaultHelpers=e;var f=c(6),g=d(f),h=c(7),i=d(h),j=c(8),k=d(j),l=c(9),m=d(l),n=c(10),o=d(n),p=c(11),q=d(p),r=c(12),s=d(r)},function(a,b,c){"use strict";b.__esModule=!0;var d=c(3);b["default"]=function(a){a.registerHelper("blockHelperMissing",function(b,c){var e=c.inverse,f=c.fn;return b===!0?f(this):b===!1||null==b?e(this):d.isArray(b)?b.length>0?a.helpers.each(b,c):e(this):f(b,c)})},a.exports=b["default"]},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}b.__esModule=!0;var e=c(3),f=c(4),g=d(f);b["default"]=function(a){a.registerHelper("each",function(a,b){function c(b,c,e){j&&(j.key=b,j.index=c,j.first=0===c,j.last=!!e),i+=d(a[b],{data:j,blockParams:[a[b],b]})}if(!b)throw new g["default"]("Must pass iterator to #each");var d=b.fn,f=b.inverse,h=0,i="",j=void 0;if(e.isFunction(a)&&(a=a.call(this)),b.data&&(j=e.createFrame(b.data)),a&&"object"==typeof a)if(e.isArray(a))for(var k=a.length;h<k;h++)h in a&&c(h,h,h===a.length-1);else{var l=void 0;for(var m in a)a.hasOwnProperty(m)&&(void 0!==l&&c(l,h-1),l=m,h++);void 0!==l&&c(l,h-1,!0)}return 0===h&&(i=f(this)),i})},a.exports=b["default"]},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}b.__esModule=!0;var e=c(4),f=d(e);b["default"]=function(a){a.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new f["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')})},a.exports=b["default"]},function(a,b,c){"use strict";b.__esModule=!0;var d=c(3);b["default"]=function(a){a.registerHelper("if",function(a,b){return d.isFunction(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||d.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})})},a.exports=b["default"]},function(a,b){"use strict";b.__esModule=!0,b["default"]=function(a){a.registerHelper("log",function(){for(var b=[void 0],c=arguments[arguments.length-1],d=0;d<arguments.length-1;d++)b.push(arguments[d]);var e=1;null!=c.hash.level?e=c.hash.level:c.data&&null!=c.data.level&&(e=c.data.level),b[0]=e,a.log.apply(a,b)})},a.exports=b["default"]},function(a,b){"use strict";b.__esModule=!0,b["default"]=function(a){a.registerHelper("lookup",function(a,b){return a&&a[b]})},a.exports=b["default"]},function(a,b,c){"use strict";b.__esModule=!0;var d=c(3);b["default"]=function(a){a.registerHelper("with",function(a,b){d.isFunction(a)&&(a=a.call(this));var c=b.fn;if(d.isEmpty(a))return b.inverse(this);var e=b.data;return c(a,{data:e,blockParams:[a]})})},a.exports=b["default"]},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){g["default"](a)}b.__esModule=!0,b.registerDefaultDecorators=e;var f=c(14),g=d(f)},function(a,b,c){"use strict";b.__esModule=!0;var d=c(3);b["default"]=function(a){a.registerDecorator("inline",function(a,b,c,e){var f=a;return b.partials||(b.partials={},f=function(e,f){var g=c.partials;c.partials=d.extend({},g,b.partials);var h=a(e,f);return c.partials=g,h}),b.partials[e.args[0]]=e.fn,f})},a.exports=b["default"]},function(a,b,c){"use strict";b.__esModule=!0;var d=c(3),e={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(a){if("string"==typeof a){var b=d.indexOf(e.methodMap,a.toLowerCase());a=b>=0?b:parseInt(a,10)}return a},log:function(a){if(a=e.lookupLevel(a),"undefined"!=typeof console&&e.lookupLevel(e.level)<=a){var b=e.methodMap[a];console[b]||(b="log");for(var c=arguments.length,d=Array(c>1?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];console[b].apply(console,d)}}};b["default"]=e,a.exports=b["default"]},function(a,b){"use strict";function c(a){this.string=a}b.__esModule=!0,c.prototype.toString=c.prototype.toHTML=function(){return""+this.string},b["default"]=c,a.exports=b["default"]},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(a){var b=a&&a[0]||1,c=r.COMPILER_REVISION;if(b!==c){if(b<c){var d=r.REVISION_CHANGES[c],e=r.REVISION_CHANGES[b];throw new q["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new q["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function g(a,b){function c(c,d,e){e.hash&&(d=o.extend({},d,e.hash)),c=b.VM.resolvePartial.call(this,c,d,e);var f=b.VM.invokePartial.call(this,c,d,e);if(null==f&&b.compile&&(e.partials[e.name]=b.compile(c,a.compilerOptions,b),f=e.partials[e.name](d,e)),null!=f){if(e.indent){for(var g=f.split("\n"),h=0,i=g.length;h<i&&(g[h]||h+1!==i);h++)g[h]=e.indent+g[h];f=g.join("\n")}return f}throw new q["default"]("The partial "+e.name+" could not be compiled when running in runtime-only mode")}function d(b){function c(b){return""+a.main(f,b,f.helpers,f.partials,g,i,h)}var d=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],g=d.data;e(d),!d.partial&&a.useData&&(g=l(b,g));var h=void 0,i=a.useBlockParams?[]:void 0;return a.useDepths&&(h=d.depths?b!=d.depths[0]?[b].concat(d.depths):d.depths:[b]),(c=m(a.main,c,f,d.depths||[],g,i))(b,d)}function e(c){c.partial?(f.helpers=c.helpers,f.partials=c.partials,f.decorators=c.decorators):(f.helpers=f.merge(c.helpers,b.helpers),a.usePartial&&(f.partials=f.merge(c.partials,b.partials)),(a.usePartial||a.useDecorators)&&(f.decorators=f.merge(c.decorators,b.decorators)))}if(!b)throw new q["default"]("No environment passed to template");if(!a||!a.main)throw new q["default"]("Unknown template object: "+typeof a);a.main.decorator=a.main_d,b.VM.checkRevision(a.compiler);var f={strict:function(a,b){if(!(b in a))throw new q["default"]('"'+b+'" not defined in '+a);return a[b]},lookup:function(a,b){for(var c=a.length,d=0;d<c;d++)if(a[d]&&null!=a[d][b])return a[d][b]},lambda:function(a,b){return"function"==typeof a?a.call(b):a},escapeExpression:o.escapeExpression,invokePartial:c,fn:function(b){var c=a[b];return c.decorator=a[b+"_d"],c},programs:[],program:function(a,b,c,d,e){var f=this.programs[a],g=this.fn(a);return b||e||d||c?f=h(this,a,g,b,c,d,e):f||(f=this.programs[a]=h(this,a,g)),f},data:function(a,b){for(;a&&b--;)a=a._parent;return a},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c=o.extend({},b,a)),c},nullContext:Object.seal({}),noop:b.VM.noop,compilerInfo:a.compiler};return d.isTop=!0,d}function h(a,b,c,d,e,f,g){function h(b){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],h=g;return!g||b==g[0]||b===a.nullContext&&null===g[0]||(h=[b].concat(g)),c(a,b,a.helpers,a.partials,e.data||d,f&&[e.blockParams].concat(f),h)}return h=m(c,h,a,g,d,f),h.program=b,h.depth=g?g.length:0,h.blockParams=e||0,h}function i(a,b,c){return a?a.call||c.name||(c.name=a,a=c.partials[a]):a="@partial-block"===c.name?c.data["partial-block"]:c.partials[c.name],a}function j(a,b,c){var d=c.data&&c.data["partial-block"];c.partial=!0;var e=void 0;if(c.fn&&c.fn!==k&&!function(){c.data=r.createFrame(c.data);var a=c.fn;e=c.data["partial-block"]=function(b){var c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return c.data=r.createFrame(c.data),c.data["partial-block"]=d,a(b,c)},a.partials&&(c.partials=o.extend({},c.partials,a.partials))}(),void 0===a&&e&&(a=e),void 0===a)throw new q["default"]("The partial "+c.name+" could not be found");if(a instanceof Function)return a(b,c)}function k(){return""}function l(a,b){return b&&"root"in b||(b=b?r.createFrame(b):{},b.root=a),b}function m(a,b,c,d,e,f){if(a.decorator){var g={};b=a.decorator(b,g,c,d&&d[0],e,f,d),o.extend(b,g)}return b}b.__esModule=!0,b.checkRevision=f,b.template=g,b.wrapProgram=h,b.resolvePartial=i,b.invokePartial=j,b.noop=k;var n=c(3),o=e(n),p=c(4),q=d(p),r=c(2)},function(a,b){(function(c){"use strict";b.__esModule=!0,b["default"]=function(a){var b="undefined"!=typeof c?c:window,d=b.Handlebars;a.noConflict=function(){return b.Handlebars===a&&(b.Handlebars=d),a}},a.exports=b["default"]}).call(b,function(){return this}())},function(a,b){"use strict";b.__esModule=!0;var c={helpers:{helperExpression:function(a){return"SubExpression"===a.type||("MustacheStatement"===a.type||"BlockStatement"===a.type)&&!!(a.params&&a.params.length||a.hash)},scopedId:function(a){return /^\.|this\b/.test(a.original)},simpleId:function(a){return 1===a.parts.length&&!c.helpers.scopedId(a)&&!a.depth}}};b["default"]=c,a.exports=b["default"]},function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if("Program"===a.type)return a;h["default"].yy=n,n.locInfo=function(a){return new n.SourceLocation(b&&b.srcName,a)};var c=new j["default"](b);return c.accept(h["default"].parse(a))}b.__esModule=!0,b.parse=f;var g=c(21),h=e(g),i=c(22),j=e(i),k=c(24),l=d(k),m=c(3);b.parser=h["default"];var n={};m.extend(n,l)},function(a,b){"use strict";b.__esModule=!0;var c=function(){function a(){this.yy={}}var b=function(a,b,c,d){for(c=c||{},d=a.length;d--;c[a[d]]=b);return c},c=[2,46],d=[1,20],e=[5,14,15,19,29,34,39,44,47,48,51,55,60],f=[1,35],g=[1,28],h=[1,29],i=[1,30],j=[1,31],k=[1,32],l=[1,34],m=[14,15,19,29,34,39,44,47,48,51,55,60],n=[14,15,19,29,34,44,47,48,51,55,60],o=[1,44],p=[14,15,19,29,34,47,48,51,55,60],q=[33,65,72,80,81,82,83,84,85],r=[23,33,54,65,68,72,75,80,81,82,83,84,85],s=[1,51],t=[23,33,54,65,68,72,75,80,81,82,83,84,85,87],u=[2,45],v=[54,65,72,80,81,82,83,84,85],w=[1,58],x=[1,59],y=[15,18],z=[1,67],A=[33,65,72,75,80,81,82,83,84,85],B=[23,65,72,80,81,82,83,84,85],C=[1,79],D=[65,68,72,80,81,82,83,84,85],E=[33,75],F=[23,33,54,68,72,75],G=[1,109],H=[1,121],I=[72,77],J={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition_plus0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,1],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(a,b,c,d,e,f,g){var h=f.length-1;switch(e){case 1:return f[h-1];case 2:this.$=d.prepareProgram(f[h]);break;case 3:case 4:case 5:case 6:case 7:case 8:case 20:case 27:case 28:case 33:case 34:case 40:case 41:this.$=f[h];break;case 9:this.$={type:"CommentStatement",value:d.stripComment(f[h]),strip:d.stripFlags(f[h],f[h]),loc:d.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:f[h],value:f[h],loc:d.locInfo(this._$)};break;case 11:this.$=d.prepareRawBlock(f[h-2],f[h-1],f[h],this._$);break;case 12:this.$={path:f[h-3],params:f[h-2],hash:f[h-1]};break;case 13:this.$=d.prepareBlock(f[h-3],f[h-2],f[h-1],f[h],!1,this._$);break;case 14:this.$=d.prepareBlock(f[h-3],f[h-2],f[h-1],f[h],!0,this._$);break;case 15:this.$={open:f[h-5],path:f[h-4],params:f[h-3],hash:f[h-2],blockParams:f[h-1],strip:d.stripFlags(f[h-5],f[h])};break;case 16:case 17:this.$={path:f[h-4],params:f[h-3],hash:f[h-2],blockParams:f[h-1],strip:d.stripFlags(f[h-5],f[h])};break;case 18:this.$={strip:d.stripFlags(f[h-1],f[h-1]),program:f[h]};break;case 19:var i=d.prepareBlock(f[h-2],f[h-1],f[h],f[h],!1,this._$),j=d.prepareProgram([i],f[h-1].loc);j.chained=!0,this.$={strip:f[h-2].strip,program:j,chain:!0};break;case 21:this.$={path:f[h-1],strip:d.stripFlags(f[h-2],f[h])};break;case 22:case 23:this.$=d.prepareMustache(f[h-3],f[h-2],f[h-1],f[h-4],d.stripFlags(f[h-4],f[h]),this._$);break;case 24:this.$={type:"PartialStatement",name:f[h-3],params:f[h-2],hash:f[h-1],indent:"",strip:d.stripFlags(f[h-4],f[h]),loc:d.locInfo(this._$)};break;case 25:this.$=d.preparePartialBlock(f[h-2],f[h-1],f[h],this._$);break;case 26:this.$={path:f[h-3],params:f[h-2],hash:f[h-1],strip:d.stripFlags(f[h-4],f[h])};break;case 29:this.$={type:"SubExpression",path:f[h-3],params:f[h-2],hash:f[h-1],loc:d.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:f[h],loc:d.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:d.id(f[h-2]),value:f[h],loc:d.locInfo(this._$)};break;case 32:this.$=d.id(f[h-1]);break;case 35:this.$={type:"StringLiteral",value:f[h],original:f[h],loc:d.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(f[h]),original:Number(f[h]),loc:d.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===f[h],original:"true"===f[h],loc:d.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:d.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:d.locInfo(this._$)};break;case 42:this.$=d.preparePath(!0,f[h],this._$);break;case 43:this.$=d.preparePath(!1,f[h],this._$);break;case 44:f[h-2].push({part:d.id(f[h]),original:f[h],separator:f[h-1]}),this.$=f[h-2];break;case 45:this.$=[{part:d.id(f[h]),original:f[h]}];break;case 46:case 50:case 58:case 64:case 70:case 78:case 82:case 86:case 90:case 94:this.$=[];break;case 47:case 49:case 51:case 59:case 65:case 71:case 79:case 83:case 87:case 91:case 95:case 99:case 101:f[h-1].push(f[h]);break;case 48:case 98:case 100:this.$=[f[h]]}},table:[b([5,14,15,19,29,34,48,51,55,60],c,{3:1,4:2,6:3}),{1:[3]},{5:[1,4]},b([5,39,44,47],[2,2],{7:5,8:6,9:7,10:8,11:9,12:10,13:11,24:15,27:16,16:17,59:19,14:[1,12],15:d,19:[1,23],29:[1,21],34:[1,22],48:[1,13],51:[1,14],55:[1,18],60:[1,24]}),{1:[2,1]},b(e,[2,47]),b(e,[2,3]),b(e,[2,4]),b(e,[2,5]),b(e,[2,6]),b(e,[2,7]),b(e,[2,8]),b(e,[2,9]),{20:25,72:f,78:26,79:27,80:g,81:h,82:i,83:j,84:k,85:l,86:33},{20:36,72:f,78:26,79:27,80:g,81:h,82:i,83:j,84:k,85:l,86:33},b(m,c,{6:3,4:37}),b(n,c,{6:3,4:38}),{13:40,15:d,17:39},{20:42,56:41,64:43,65:o,72:f,78:26,79:27,80:g,81:h,82:i,83:j,84:k,85:l,86:33},b(p,c,{6:3,4:45}),b([5,14,15,18,19,29,34,39,44,47,48,51,55,60],[2,10]),{20:46,72:f,78:26,79:27,80:g,81:h,82:i,83:j,84:k,85:l,86:33},{20:47,72:f,78:26,79:27,80:g,81:h,82:i,83:j,84:k,85:l,86:33},{20:48,72:f,78:26,79:27,80:g,81:h,82:i,83:j,84:k,85:l,86:33},{20:42,56:49,64:43,65:o,72:f,78:26,79:27,80:g,81:h,82:i,83:j,84:k,85:l,86:33},b(q,[2,78],{49:50}),b(r,[2,33]),b(r,[2,34]),b(r,[2,35]),b(r,[2,36]),b(r,[2,37]),b(r,[2,38]),b(r,[2,39]),b(r,[2,43],{87:s}),{72:f,86:52},b(t,u),b(v,[2,82],{52:53}),{25:54,38:56,39:w,43:57,44:x,45:55,47:[2,54]},{28:60,43:61,44:x,47:[2,56]},{13:63,15:d,18:[1,62]},b(y,[2,48]),b(q,[2,86],{57:64}),b(q,[2,40]),b(q,[2,41]),{20:65,72:f,78:26,79:27,80:g,81:h,82:i,83:j,84:k,85:l,86:33},{26:66,47:z},b(A,[2,58],{30:68}),b(A,[2,64],{35:69}),b(B,[2,50],{21:70}),b(q,[2,90],{61:71}),{20:75,33:[2,80],50:72,63:73,64:76,65:o,69:74,70:77,71:78,72:C,78:26,79:27,80:g,81:h,82:i,83:j,84:k,85:l,86:33},{72:[1,80]},b(r,[2,42],{87:s}),{20:75,53:81,54:[2,84],63:82,64:76,65:o,69:83,70:77,71:78,72:C,78:26,79:27,80:g,81:h,82:i,83:j,84:k,85:l,86:33},{26:84,47:z},{47:[2,55]},b(m,c,{6:3,4:85}),{47:[2,20]},{20:86,72:f,78:26,79:27,80:g,81:h,82:i,83:j,84:k,85:l,86:33},b(p,c,{6:3,4:87}),{26:88,47:z},{47:[2,57]},b(e,[2,11]),b(y,[2,49]),{20:75,33:[2,88],58:89,63:90,64:76,65:o,69:91,70:77,71:78,72:C,78:26,79:27,80:g,81:h,82:i,83:j,84:k,85:l,86:33},b(D,[2,94],{66:92}),b(e,[2,25]),{20:93,72:f,78:26,79:27,80:g,81:h,82:i,83:j,84:k,85:l,86:33},b(E,[2,60],{78:26,79:27,86:33,20:75,64:76,70:77,71:78,31:94,63:95,69:96,65:o,72:C,80:g,81:h,82:i,83:j,84:k,85:l}),b(E,[2,66],{78:26,79:27,86:33,20:75,64:76,70:77,71:78,36:97,63:98,69:99,65:o,72:C,80:g,81:h,82:i,83:j,84:k,85:l}),{20:75,22:100,23:[2,52],63:101,64:76,65:o,69:102,70:77,71:78,72:C,78:26,79:27,80:g,81:h,82:i,83:j,84:k,85:l,86:33},{20:75,33:[2,92],62:103,63:104,64:76,65:o,69:105,70:77,71:78,72:C,78:26,79:27,80:g,81:h,82:i,83:j,84:k,85:l,86:33},{33:[1,106]},b(q,[2,79]),{33:[2,81]},b(r,[2,27]),b(r,[2,28]),b([23,33,54,68,75],[2,30],{71:107,72:[1,108]}),b(F,[2,98]),b(t,u,{73:G}),b(t,[2,44]),{54:[1,110]},b(v,[2,83]),{54:[2,85]},b(e,[2,13]),{38:56,39:w,43:57,44:x,45:112,46:111,47:[2,76]},b(A,[2,70],{40:113}),{47:[2,18]},b(e,[2,14]),{33:[1,114]},b(q,[2,87]),{33:[2,89]},{20:75,63:116,64:76,65:o,67:115,68:[2,96],69:117,70:77,71:78,72:C,78:26,79:27,80:g,81:h,82:i,83:j,84:k,85:l,86:33},{33:[1,118]},{32:119,33:[2,62],74:120,75:H},b(A,[2,59]),b(E,[2,61]),{33:[2,68],37:122,74:123,75:H},b(A,[2,65]),b(E,[2,67]),{23:[1,124]},b(B,[2,51]),{23:[2,53]},{33:[1,125]},b(q,[2,91]),{33:[2,93]},b(e,[2,22]),b(F,[2,99]),{73:G},{20:75,63:126,64:76,65:o,72:f,78:26,79:27,80:g,81:h,82:i,83:j,84:k,85:l,86:33},b(e,[2,23]),{47:[2,19]},{47:[2,77]},b(E,[2,72],{78:26,79:27,86:33,20:75,64:76,70:77,71:78,41:127,63:128,69:129,65:o,72:C,80:g,81:h,82:i,83:j,84:k,85:l}),b(e,[2,24]),{68:[1,130]},b(D,[2,95]),{68:[2,97]},b(e,[2,21]),{33:[1,131]},{33:[2,63]},{72:[1,133],76:132},{33:[1,134]},{33:[2,69]},{15:[2,12]},b(p,[2,26]),b(F,[2,31]),{33:[2,74],42:135,74:136,75:H},b(A,[2,71]),b(E,[2,73]),b(r,[2,29]),b(m,[2,15]),{72:[1,138],77:[1,137]},b(I,[2,100]),b(n,[2,16]),{33:[1,139]},{33:[2,75]},{33:[2,32]},b(I,[2,101]),b(m,[2,17])],defaultActions:{4:[2,1],55:[2,55],57:[2,20],61:[2,57],74:[2,81],83:[2,85],87:[2,18],91:[2,89],102:[2,53],105:[2,93],111:[2,19],112:[2,77],117:[2,97],120:[2,63],123:[2,69],124:[2,12],136:[2,75],137:[2,32]},parseError:function(a,b){if(!b.recoverable){var c=function(a,b){this.message=a,this.hash=b};throw c.prototype=new Error,new c(a,b)}this.trace(a)},parse:function(a){var b=this,c=[0],d=[null],e=[],f=this.table,g="",h=0,i=0,j=0,k=2,l=1,m=e.slice.call(arguments,1),n=Object.create(this.lexer),o={yy:{}};for(var p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(o.yy[p]=this.yy[p]);n.setInput(a,o.yy),o.yy.lexer=n,o.yy.parser=this,"undefined"==typeof n.yylloc&&(n.yylloc={});var q=n.yylloc;e.push(q);var r=n.options&&n.options.ranges;"function"==typeof o.yy.parseError?this.parseError=o.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var s,t,u,v,w,x,y,z,A,B=function(){var a;return a=n.lex()||l,"number"!=typeof a&&(a=b.symbols_[a]||a),a},C={};;){if(u=c[c.length-1],this.defaultActions[u]?v=this.defaultActions[u]:(null!==s&&"undefined"!=typeof s||(s=B()),v=f[u]&&f[u][s]),"undefined"==typeof v||!v.length||!v[0]){var D="";A=[];for(x in f[u])this.terminals_[x]&&x>k&&A.push("'"+this.terminals_[x]+"'");D=n.showPosition?"Parse error on line "+(h+1)+":\n"+n.showPosition()+"\nExpecting "+A.join(", ")+", got '"+(this.terminals_[s]||s)+"'":"Parse error on line "+(h+1)+": Unexpected "+(s==l?"end of input":"'"+(this.terminals_[s]||s)+"'"),this.parseError(D,{text:n.match,token:this.terminals_[s]||s,line:n.yylineno,loc:q,expected:A})}if(v[0]instanceof Array&&v.length>1)throw new Error("Parse Error: multiple actions possible at state: "+u+", token: "+s);switch(v[0]){case 1:c.push(s),d.push(n.yytext),e.push(n.yylloc),c.push(v[1]),s=null,t?(s=t,t=null):(i=n.yyleng,g=n.yytext,h=n.yylineno,q=n.yylloc,j>0&&j--);break;case 2:if(y=this.productions_[v[1]][1],C.$=d[d.length-y],C._$={first_line:e[e.length-(y||1)].first_line,last_line:e[e.length-1].last_line,first_column:e[e.length-(y||1)].first_column,last_column:e[e.length-1].last_column},r&&(C._$.range=[e[e.length-(y||1)].range[0],e[e.length-1].range[1]]),w=this.performAction.apply(C,[g,i,h,o.yy,v[1],d,e].concat(m)),"undefined"!=typeof w)return w;y&&(c=c.slice(0,-1*y*2),d=d.slice(0,-1*y),e=e.slice(0,-1*y)),c.push(this.productions_[v[1]][0]),d.push(C.$),e.push(C._$),z=f[c[c.length-2]][c[c.length-1]],c.push(z);break;case 3:return!0}}return!0}},K=function(){var a={EOF:1,parseError:function(a,b){if(!this.yy.parser)throw new Error(a);this.yy.parser.parseError(a,b)},setInput:function(a,b){return this.yy=b||this.yy||{},this._input=a,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a;var b=a.match(/(?:\r\n?|\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b),this.offset-=b;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),c.length-1&&(this.yylineno-=c.length-1);var e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-b]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=new Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},test_match:function(a,b){var c,d,e;if(this.options.backtrack_lexer&&(e={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(e.yylloc.range=this.yylloc.range.slice(0))),d=a[0].match(/(?:\r\n?|\n).*/g),d&&(this.yylineno+=d.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:d?d[d.length-1].length-d[d.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+a[0].length},this.yytext+=a[0],this.match+=a[0],this.matches=a,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(a[0].length),this.matched+=a[0],c=this.performAction.call(this,this.yy,this,b,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),c)return c;if(this._backtrack){for(var f in e)this[f]=e[f];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d;this._more||(this.yytext="",this.match="");for(var e=this._currentRules(),f=0;f<e.length;f++)if(c=this._input.match(this.rules[e[f]]),c&&(!b||c[0].length>b[0].length)){if(b=c,d=f,this.options.backtrack_lexer){if(a=this.test_match(c,e[f]),a!==!1)return a;if(this._backtrack){b=!1;continue}return!1}if(!this.options.flex)break}return b?(a=this.test_match(b,e[d]),a!==!1&&a):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){var a=this.conditionStack.length-1;return a>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(a){return a=this.conditionStack.length-1-Math.abs(a||0),a>=0?this.conditionStack[a]:"INITIAL"},pushState:function(a){this.begin(a)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(a,b,c,d){function e(a,c){return b.yytext=b.yytext.substr(a,b.yyleng-c)}switch(c){case 0:if("\\\\"===b.yytext.slice(-2)?(e(0,1),this.begin("mu")):"\\"===b.yytext.slice(-1)?(e(0,1),this.begin("emu")):this.begin("mu"),b.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(b.yytext=b.yytext.substr(5,b.yyleng-9),18);case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:return this.popState(),44;case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(b.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:return 72;case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return b.yytext=e(1,2).replace(/\\"/g,'"'),80;case 32:return b.yytext=e(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:return 82;case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return b.yytext=b.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}};return a}();return J.lexer=K,a.prototype=J,J.Parser=a,new a}();b["default"]=c,a.exports=b["default"]},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=a}function f(a,b,c){void 0===b&&(b=a.length);var d=a[b-1],e=a[b-2];return d?"ContentStatement"===d.type?(e||!c?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(d.original):void 0:c}function g(a,b,c){void 0===b&&(b=-1);var d=a[b+1],e=a[b+2];return d?"ContentStatement"===d.type?(e||!c?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(d.original):void 0:c}function h(a,b,c){var d=a[null==b?0:b+1];if(d&&"ContentStatement"===d.type&&(c||!d.rightStripped)){var e=d.value;d.value=d.value.replace(c?/^\s+/:/^[ \t]*\r?\n?/,""),d.rightStripped=d.value!==e}}function i(a,b,c){var d=a[null==b?a.length-1:b-1];if(d&&"ContentStatement"===d.type&&(c||!d.leftStripped)){var e=d.value;return d.value=d.value.replace(c?/\s+$/:/[ \t]+$/,""),d.leftStripped=d.value!==e,d.leftStripped}}b.__esModule=!0;var j=c(23),k=d(j);e.prototype=new k["default"],e.prototype.Program=function(a){var b=!this.options.ignoreStandalone,c=!this.isRootSeen;this.isRootSeen=!0;for(var d=a.body,e=0,j=d.length;e<j;e++){var k=d[e],l=this.accept(k);if(l){var m=f(d,e,c),n=g(d,e,c),o=l.openStandalone&&m,p=l.closeStandalone&&n,q=l.inlineStandalone&&m&&n;l.close&&h(d,e,!0),l.open&&i(d,e,!0),b&&q&&(h(d,e),i(d,e)&&"PartialStatement"===k.type&&(k.indent=/([ \t]+$)/.exec(d[e-1].original)[1])),b&&o&&(h((k.program||k.inverse).body),i(d,e)),b&&p&&(h(d,e),i((k.inverse||k.program).body))}}return a},e.prototype.BlockStatement=e.prototype.DecoratorBlock=e.prototype.PartialBlockStatement=function(a){this.accept(a.program),this.accept(a.inverse);var b=a.program||a.inverse,c=a.program&&a.inverse,d=c,e=c;if(c&&c.chained)for(d=c.body[0].program;e.chained;)e=e.body[e.body.length-1].program;var j={open:a.openStrip.open,close:a.closeStrip.close,openStandalone:g(b.body),closeStandalone:f((d||b).body)};if(a.openStrip.close&&h(b.body,null,!0),c){var k=a.inverseStrip;k.open&&i(b.body,null,!0),k.close&&h(d.body,null,!0),a.closeStrip.open&&i(e.body,null,!0),!this.options.ignoreStandalone&&f(b.body)&&g(d.body)&&(i(b.body),h(d.body))}else a.closeStrip.open&&i(b.body,null,!0);return j},e.prototype.Decorator=e.prototype.MustacheStatement=function(a){return a.strip},e.prototype.PartialStatement=e.prototype.CommentStatement=function(a){var b=a.strip||{};return{inlineStandalone:!0,open:b.open,close:b.close}},b["default"]=e,a.exports=b["default"]},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){this.parents=[]}function f(a){this.acceptRequired(a,"path"),this.acceptArray(a.params),this.acceptKey(a,"hash")}function g(a){f.call(this,a),this.acceptKey(a,"program"),this.acceptKey(a,"inverse")}function h(a){this.acceptRequired(a,"name"),this.acceptArray(a.params),this.acceptKey(a,"hash")}b.__esModule=!0;var i=c(4),j=d(i);e.prototype={constructor:e,mutating:!1,acceptKey:function(a,b){var c=this.accept(a[b]);if(this.mutating){if(c&&!e.prototype[c.type])throw new j["default"]('Unexpected node type "'+c.type+'" found when accepting '+b+" on "+a.type);a[b]=c}},acceptRequired:function(a,b){if(this.acceptKey(a,b),!a[b])throw new j["default"](a.type+" requires "+b)},acceptArray:function(a){for(var b=0,c=a.length;b<c;b++)this.acceptKey(a,b),a[b]||(a.splice(b,1),b--,c--)},accept:function(a){if(a){if(!this[a.type])throw new j["default"]("Unknown type: "+a.type,a);this.current&&this.parents.unshift(this.current),this.current=a;var b=this[a.type](a);return this.current=this.parents.shift(),!this.mutating||b?b:b!==!1?a:void 0}},Program:function(a){this.acceptArray(a.body)},MustacheStatement:f,Decorator:f,BlockStatement:g,DecoratorBlock:g,PartialStatement:h,PartialBlockStatement:function(a){h.call(this,a),this.acceptKey(a,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:f,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(a){this.acceptArray(a.pairs)},HashPair:function(a){this.acceptRequired(a,"value")}},b["default"]=e,a.exports=b["default"]},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(b=b.path?b.path.original:b,a.path.original!==b){var c={loc:a.path.loc};throw new q["default"](a.path.original+" doesn't match "+b,c)}}function f(a,b){this.source=a,this.start={line:b.first_line,column:b.first_column},this.end={line:b.last_line,column:b.last_column}}function g(a){return /^\[.*\]$/.test(a)?a.substr(1,a.length-2):a}function h(a,b){return{open:"~"===a.charAt(2),close:"~"===b.charAt(b.length-3)}}function i(a){return a.replace(/^\{\{~?\!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function j(a,b,c){c=this.locInfo(c);for(var d=a?"@":"",e=[],f=0,g=0,h=b.length;g<h;g++){var i=b[g].part,j=b[g].original!==i;if(d+=(b[g].separator||"")+i,j||".."!==i&&"."!==i&&"this"!==i)e.push(i);else{if(e.length>0)throw new q["default"]("Invalid path: "+d,{loc:c});".."===i&&f++}}return{type:"PathExpression",data:a,depth:f,parts:e,original:d,loc:c}}function k(a,b,c,d,e,f){var g=d.charAt(3)||d.charAt(2),h="{"!==g&&"&"!==g,i=/\*/.test(d);return{type:i?"Decorator":"MustacheStatement",path:a,params:b,hash:c,escaped:h,strip:e,loc:this.locInfo(f)}}function l(a,b,c,d){e(a,c),d=this.locInfo(d);var f={type:"Program",body:b,strip:{},loc:d};return{type:"BlockStatement",path:a.path,params:a.params,hash:a.hash,program:f,openStrip:{},inverseStrip:{},closeStrip:{},loc:d}}function m(a,b,c,d,f,g){d&&d.path&&e(a,d);var h=/\*/.test(a.open);b.blockParams=a.blockParams;var i=void 0,j=void 0;if(c){if(h)throw new q["default"]("Unexpected inverse block on decorator",c);c.chain&&(c.program.body[0].closeStrip=d.strip),j=c.strip,i=c.program}return f&&(f=i,i=b,b=f),{type:h?"DecoratorBlock":"BlockStatement",path:a.path,params:a.params,hash:a.hash,program:b,inverse:i,openStrip:a.strip,inverseStrip:j,closeStrip:d&&d.strip,loc:this.locInfo(g)}}function n(a,b){if(!b&&a.length){var c=a[0].loc,d=a[a.length-1].loc;c&&d&&(b={source:c.source,start:{line:c.start.line,column:c.start.column},end:{line:d.end.line,column:d.end.column}})}return{type:"Program",body:a,strip:{},loc:b}}function o(a,b,c,d){return e(a,c),{type:"PartialBlockStatement",name:a.path,params:a.params,hash:a.hash,program:b,openStrip:a.strip,closeStrip:c&&c.strip,loc:this.locInfo(d)}}b.__esModule=!0,b.SourceLocation=f,b.id=g,b.stripFlags=h,b.stripComment=i,b.preparePath=j,b.prepareMustache=k,b.prepareRawBlock=l,b.prepareBlock=m,b.prepareProgram=n,b.preparePartialBlock=o;var p=c(4),q=d(p)},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){}function f(a,b,c){void 0===b&&(b={}),h(a,b);var d=i(a,b,c);return(new c.JavaScriptCompiler).compile(d,b)}function g(a,b,c){function d(){var d=i(a,b,c),e=(new c.JavaScriptCompiler).compile(d,b,void 0,!0);return c.template(e)}void 0===b&&(b={}),b=n.extend({},b),h(a,b);var e=void 0;return function(a,b){return e||(e=d()),e.call(this,a,b)}}function h(a,b){if(null==a||"string"!=typeof a&&"Program"!==a.type)throw new m["default"]("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+a);if(b.trackIds||b.stringParams)throw new m["default"]("TrackIds and stringParams are no longer supported. See Github #1145");"data"in b||(b.data=!0),b.compat&&(b.useDepths=!0)}function i(a,b,c){var d=c.parse(a,b);return(new c.Compiler).compile(d,b)}function j(a,b){if(a===b)return!0;if(n.isArray(a)&&n.isArray(b)&&a.length===b.length){for(var c=0;c<a.length;c++)if(!j(a[c],b[c]))return!1;return!0}}function k(a){if(!a.path.parts){var b=a.path;a.path={type:"PathExpression",data:!1,depth:0,parts:[b.original+""],original:b.original+"",loc:b.loc}}}b.__esModule=!0,b.Compiler=e,b.precompile=f,b.compile=g;var l=c(4),m=d(l),n=c(3),o=c(19),p=d(o),q=[].slice;e.prototype={compiler:e,equals:function(a){var b=this.opcodes.length;if(a.opcodes.length!==b)return!1;for(var c=0;c<b;c++){var d=this.opcodes[c],e=a.opcodes[c];if(d.opcode!==e.opcode||!j(d.args,e.args))return!1}b=this.children.length;for(var c=0;c<b;c++)if(!this.children[c].equals(a.children[c]))return!1;return!0},guid:0,compile:function(a,b){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=b,b.blockParams=b.blockParams||[];var c=b.knownHelpers;if(b.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0,lookup:!0},c)for(var d in c)d in c&&(this.options.knownHelpers[d]=c[d]);return this.accept(a)},compileProgram:function(a){var b=new this.compiler,c=b.compile(a,this.options),d=this.guid++;return this.usePartial=this.usePartial||c.usePartial,this.children[d]=c,this.useDepths=this.useDepths||c.useDepths,d},accept:function(a){if(!this[a.type])throw new m["default"]("Unknown type: "+a.type,a);this.sourceNode.unshift(a);var b=this[a.type](a);return this.sourceNode.shift(),b},Program:function(a){this.options.blockParams.unshift(a.blockParams);for(var b=a.body,c=b.length,d=0;d<c;d++)this.accept(b[d]);return this.options.blockParams.shift(),this.isSimple=1===c,this.blockParams=a.blockParams?a.blockParams.length:0,this},BlockStatement:function(a){k(a);var b=a.program,c=a.inverse;b=b&&this.compileProgram(b),c=c&&this.compileProgram(c);var d=this.classifySexpr(a);"helper"===d?this.helperSexpr(a,b,c):"simple"===d?(this.simpleSexpr(a),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("emptyHash"),this.opcode("blockValue",a.path.original)):(this.ambiguousSexpr(a,b,c),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(a){var b=a.program&&this.compileProgram(a.program),c=this.setupFullMustacheParams(a,b,void 0),d=a.path;this.useDecorators=!0,this.opcode("registerDecorator",c.length,d.original)},PartialStatement:function(a){this.usePartial=!0;var b=a.program;b&&(b=this.compileProgram(a.program));var c=a.params;if(c.length>1)throw new m["default"]("Unsupported number of partial arguments: "+c.length,a);c.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):c.push({type:"PathExpression",parts:[],depth:0}));var d=a.name.original,e="SubExpression"===a.name.type;e&&this.accept(a.name),this.setupFullMustacheParams(a,b,void 0,!0);var f=a.indent||"";this.options.preventIndent&&f&&(this.opcode("appendContent",f),f=""),this.opcode("invokePartial",e,d,f),this.opcode("append")},PartialBlockStatement:function(a){this.PartialStatement(a)},MustacheStatement:function(a){this.SubExpression(a),a.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(a){this.DecoratorBlock(a)},ContentStatement:function(a){a.value&&this.opcode("appendContent",a.value)},CommentStatement:function(){},SubExpression:function(a){k(a);var b=this.classifySexpr(a);"simple"===b?this.simpleSexpr(a):"helper"===b?this.helperSexpr(a):this.ambiguousSexpr(a)},ambiguousSexpr:function(a,b,c){var d=a.path,e=d.parts[0],f=null!=b||null!=c;this.opcode("getContext",d.depth),this.opcode("pushProgram",b),this.opcode("pushProgram",c),d.strict=!0,this.accept(d),this.opcode("invokeAmbiguous",e,f)},simpleSexpr:function(a){var b=a.path;b.strict=!0,this.accept(b),this.opcode("resolvePossibleLambda")},helperSexpr:function(a,b,c){var d=this.setupFullMustacheParams(a,b,c),e=a.path,f=e.parts[0];if(this.options.knownHelpers[f])this.opcode("invokeKnownHelper",d.length,f);else{if(this.options.knownHelpersOnly)throw new m["default"]("You specified knownHelpersOnly, but used the unknown helper "+f,a);e.strict=!0,e.falsy=!0,this.accept(e),this.opcode("invokeHelper",d.length,e.original,p["default"].helpers.simpleId(e))}},PathExpression:function(a){this.addDepth(a.depth),this.opcode("getContext",a.depth);var b=a.parts[0],c=p["default"].helpers.scopedId(a),d=!a.depth&&!c&&this.blockParamIndex(b);d?this.opcode("lookupBlockParam",d,a.parts):b?a.data?(this.options.data=!0,this.opcode("lookupData",a.depth,a.parts,a.strict)):this.opcode("lookupOnContext",a.parts,a.falsy,a.strict,c):this.opcode("pushContext")},StringLiteral:function(a){this.opcode("pushString",a.value)},NumberLiteral:function(a){this.opcode("pushLiteral",a.value)},BooleanLiteral:function(a){this.opcode("pushLiteral",a.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(a){var b=a.pairs,c=0,d=b.length;for(this.opcode("pushHash");c<d;c++)this.pushParam(b[c].value);for(;c--;)this.opcode("assignToHash",b[c].key);this.opcode("popHash")},opcode:function(a){this.opcodes.push({opcode:a,args:q.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(a){a&&(this.useDepths=!0)},classifySexpr:function(a){var b=p["default"].helpers.simpleId(a.path),c=b&&!!this.blockParamIndex(a.path.parts[0]),d=!c&&p["default"].helpers.helperExpression(a),e=!c&&(d||b);if(e&&!d){var f=a.path.parts[0],g=this.options;g.knownHelpers[f]?d=!0:g.knownHelpersOnly&&(e=!1)}return d?"helper":e?"ambiguous":"simple"},pushParams:function(a){for(var b=0,c=a.length;b<c;b++)this.pushParam(a[b])},pushParam:function(a){this.accept(a)},setupFullMustacheParams:function(a,b,c,d){var e=a.params;return this.pushParams(e),this.opcode("pushProgram",b),this.opcode("pushProgram",c),a.hash?this.accept(a.hash):this.opcode("emptyHash",d),e},blockParamIndex:function(a){for(var b=0,c=this.options.blockParams.length;b<c;b++){var d=this.options.blockParams[b],e=d&&n.indexOf(d,a);if(d&&e>=0)return[b,e]}}}},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){this.value=a}function f(){}function g(a,b,c,d){var e=b.popStack(),f=0,g=c.length;for(a&&g--;f<g;f++)e=b.nameLookup(e,c[f],d);return a?[b.aliasable("container.strict"),"(",e,", ",b.quotedString(c[f]),")"]:e}b.__esModule=!0;var h=c(2),i=c(4),j=d(i),k=c(3),l=c(27),m=d(l);f.prototype={nameLookup:function(a,b){return f.isValidJavaScriptVariableName(b)?[a,".",b]:[a,"[",JSON.stringify(b),"]"]},depthedLookup:function(a){return[this.aliasable("container.lookup"),'(depths, "',a,'")']},compilerInfo:function(){var a=h.COMPILER_REVISION,b=h.REVISION_CHANGES[a];return[a,b]},appendToBuffer:function(a,b,c){return k.isArray(a)||(a=[a]),a=this.source.wrap(a,b),this.environment.isSimple?["return ",a,";"]:c?["buffer += ",a,";"]:(a.appendToBuffer=!0,a)},initializeBuffer:function(){return this.quotedString("")},compile:function(a,b,c,d){this.environment=a,this.options=b,this.precompile=!d,this.name=this.environment.name,this.isChild=!!c,this.context=c||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(a,b),this.useDepths=this.useDepths||a.useDepths||a.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||a.useBlockParams;var e=a.opcodes,f=void 0,g=void 0,h=void 0,i=void 0;for(h=0,i=e.length;h<i;h++)f=e[h],this.source.currentLocation=f.loc,g=g||f.loc,this[f.opcode].apply(this,f.args);if(this.source.currentLocation=g,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new j["default"]("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend("var decorators = container.decorators;\n"),this.decorators.push("return fn;"),d?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var k=this.createFunctionContext(d);if(this.isChild)return k;var l={compiler:this.compilerInfo(),main:k};this.decorators&&(l.main_d=this.decorators,l.useDecorators=!0);var m=this.context,n=m.programs,o=m.decorators;for(h=0,i=n.length;h<i;h++)n[h]&&(l[h]=n[h],o[h]&&(l[h+"_d"]=o[h],l.useDecorators=!0));return this.environment.usePartial&&(l.usePartial=!0),this.options.data&&(l.useData=!0),this.useDepths&&(l.useDepths=!0),this.useBlockParams&&(l.useBlockParams=!0),this.options.compat&&(l.compat=!0),d?l.compilerOptions=this.options:(l.compiler=JSON.stringify(l.compiler),this.source.currentLocation={start:{line:1,column:0}},l=this.objectLiteral(l),b.srcName?(l=l.toStringWithSourceMap({file:b.destName}),l.map=l.map&&l.map.toString()):l=l.toString()),l},preamble:function(){this.lastContext=0,this.source=new m["default"](this.options.srcName),this.decorators=new m["default"](this.options.srcName)},createFunctionContext:function(a){var b="",c=this.stackVars.concat(this.registers.list);c.length>0&&(b+=", "+c.join(", "));var d=0;for(var e in this.aliases){var f=this.aliases[e];this.aliases.hasOwnProperty(e)&&f.children&&f.referenceCount>1&&(b+=", alias"+ ++d+"="+e,f.children[0]="alias"+d)}var g=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&g.push("blockParams"),this.useDepths&&g.push("depths");var h=this.mergeSource(b);return a?(g.push(h),Function.apply(this,g)):this.source.wrap(["function(",g.join(","),") {\n  ",h,"}"])},mergeSource:function(a){var b=this.environment.isSimple,c=!this.forceBuffer,d=void 0,e=void 0,f=void 0,g=void 0;return this.source.each(function(a){a.appendToBuffer?(f?a.prepend("  + "):f=a,g=a):(f&&(e?f.prepend("buffer += "):d=!0,g.add(";"),f=g=void 0),e=!0,b||(c=!1))}),c?f?(f.prepend("return "),g.add(";")):e||this.source.push('return "";'):(a+=", buffer = "+(d?"":this.initializeBuffer()),f?(f.prepend("return buffer + "),g.add(";")):this.source.push("return buffer;")),a&&this.source.prepend("var "+a.substring(2)+(d?"":";\n")),this.source.merge()},blockValue:function(a){var b=this.aliasable("helpers.blockHelperMissing"),c=[this.contextName(0)];this.setupHelperArgs(a,0,c);var d=this.popStack();c.splice(1,0,d),this.push(this.source.functionCall(b,"call",c))},ambiguousBlockValue:function(){var a=this.aliasable("helpers.blockHelperMissing"),b=[this.contextName(0)];this.setupHelperArgs("",0,b,!0),this.flushInline();var c=this.topStack();b.splice(1,0,c),this.pushSource(["if (!",this.lastHelper,") { ",c," = ",this.source.functionCall(a,"call",b),"}"])},appendContent:function(a){this.pendingContent?a=this.pendingContent+a:this.pendingLocation=this.source.currentLocation,this.pendingContent=a},append:function(){if(this.isInline())this.replaceStack(function(a){return[" != null ? ",a,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var a=this.popStack();this.pushSource(["if (",a," != null) { ",this.appendToBuffer(a,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(a){this.lastContext=a},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(a,b,c,d){var e=0;d||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(a[e++])),this.resolvePath("context",a,e,b,c)},lookupBlockParam:function(a,b){this.useBlockParams=!0,this.push(["blockParams[",a[0],"][",a[1],"]"]),this.resolvePath("context",b,1)},lookupData:function(a,b,c){a?this.pushStackLiteral("container.data(data, "+a+")"):this.pushStackLiteral("data"),this.resolvePath("data",b,0,!0,c)},resolvePath:function(a,b,c,d,e){var f=this;if(this.options.strict||this.options.assumeObjects)return void this.push(g(this.options.strict&&e,this,b,a));for(var h=b.length;c<h;c++)this.replaceStack(function(e){var g=f.nameLookup(e,b[c],a);return d?[" && ",g]:[" != null ? ",g," : ",e]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},emptyHash:function(a){this.pushStackLiteral(a?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{}}},popHash:function(){var a=this.hash;this.hash=this.hashes.pop(),this.push(this.objectLiteral(a.values))},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){null!=a?this.pushStackLiteral(this.programExpression(a)):this.pushStackLiteral(null)},registerDecorator:function(a,b){var c=this.nameLookup("decorators",b,"decorator"),d=this.setupHelperArgs(b,a);this.decorators.push(["fn = ",this.decorators.functionCall(c,"",["fn","props","container",d])," || fn;"])},invokeHelper:function(a,b,c){var d=this.popStack(),e=this.setupHelper(a,b),f=c?[e.name," || "]:"",g=["("].concat(f,d);this.options.strict||g.push(" || ",this.aliasable("helpers.helperMissing")),g.push(")"),this.push(this.source.functionCall(g,"call",e.callParams))},invokeKnownHelper:function(a,b){var c=this.setupHelper(a,b);this.push(this.source.functionCall(c.name,"call",c.callParams))},invokeAmbiguous:function(a,b){this.useRegister("helper");var c=this.popStack();this.emptyHash();var d=this.setupHelper(0,a,b),e=this.lastHelper=this.nameLookup("helpers",a,"helper"),f=["(","(helper = ",e," || ",c,")"];this.options.strict||(f[0]="(helper = ",f.push(" != null ? helper : ",this.aliasable("helpers.helperMissing"))),this.push(["(",f,d.paramsInit?["),(",d.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",d.callParams)," : helper))"])},invokePartial:function(a,b,c){var d=[],e=this.setupParams(b,1,d);a&&(b=this.popStack(),delete e.name),c&&(e.indent=JSON.stringify(c)),e.helpers="helpers",e.partials="partials",e.decorators="container.decorators",a?d.unshift(b):d.unshift(this.nameLookup("partials",b,"partial")),this.options.compat&&(e.depths="depths"),e=this.objectLiteral(e),d.push(e),this.push(this.source.functionCall("container.invokePartial","",d))},assignToHash:function(a){this.hash.values[a]=this.popStack()},compiler:f,compileChildren:function(a,b){for(var c=a.children,d=void 0,e=void 0,f=0,g=c.length;f<g;f++){d=c[f],e=new this.compiler;var h=this.matchExistingProgram(d);if(null==h){this.context.programs.push("");var i=this.context.programs.length;d.index=i,d.name="program"+i,this.context.programs[i]=e.compile(d,b,this.context,!this.precompile),this.context.decorators[i]=e.decorators,this.context.environments[i]=d,this.useDepths=this.useDepths||e.useDepths,this.useBlockParams=this.useBlockParams||e.useBlockParams,d.useDepths=this.useDepths,d.useBlockParams=this.useBlockParams}else d.index=h.index,d.name="program"+h.index,this.useDepths=this.useDepths||h.useDepths,this.useBlockParams=this.useBlockParams||h.useBlockParams}},matchExistingProgram:function(a){for(var b=0,c=this.context.environments.length;b<c;b++){var d=this.context.environments[b];if(d&&d.equals(a))return d}},programExpression:function(a){var b=this.environment.children[a],c=[b.index,"data",b.blockParams];return(this.useBlockParams||this.useDepths)&&c.push("blockParams"),this.useDepths&&c.push("depths"),"container.program("+c.join(", ")+")"},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},push:function(a){return a instanceof e||(a=this.source.wrap(a)),this.inlineStack.push(a),a},pushStackLiteral:function(a){this.push(new e(a))},pushSource:function(a){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),a&&this.source.push(a)},replaceStack:function(a){var b=["("],c=void 0,d=void 0,f=void 0;if(!this.isInline())throw new j["default"]("replaceStack on non-inline");var g=this.popStack(!0);if(g instanceof e)c=[g.value],b=["(",c],f=!0;else{d=!0;var h=this.incrStack();b=["((",this.push(h)," = ",g,")"],c=this.topStack()}var i=a.call(this,c);f||this.popStack(),d&&this.stackSlot--,this.push(b.concat(i,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var a=this.inlineStack;this.inlineStack=[];for(var b=0,c=a.length;b<c;b++){var d=a[b];if(d instanceof e)this.compileStack.push(d);else{var f=this.incrStack();this.pushSource([f," = ",d,";"]),this.compileStack.push(f)}}},isInline:function(){return this.inlineStack.length},popStack:function(a){var b=this.isInline(),c=(b?this.inlineStack:this.compileStack).pop();if(!a&&c instanceof e)return c.value;if(!b){if(!this.stackSlot)throw new j["default"]("Invalid stack pop");this.stackSlot--}return c},topStack:function(){var a=this.isInline()?this.inlineStack:this.compileStack,b=a[a.length-1];return b instanceof e?b.value:b},contextName:function(a){return this.useDepths&&a?"depths["+a+"]":"depth"+a},quotedString:function(a){return this.source.quotedString(a)},objectLiteral:function(a){return this.source.objectLiteral(a)},aliasable:function(a){var b=this.aliases[a];return b?(b.referenceCount++,b):(b=this.aliases[a]=this.source.wrap(a),b.aliasable=!0,b.referenceCount=1,b)},setupHelper:function(a,b,c){var d=[],e=this.setupHelperArgs(b,a,d,c),f=this.nameLookup("helpers",b,"helper"),g=this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})");return{params:d,paramsInit:e,name:f,callParams:[g].concat(d)}},setupParams:function(a,b,c){var d={},e=!c,f=void 0;e&&(c=[]),d.name=this.quotedString(a),d.hash=this.popStack();var g=this.popStack(),h=this.popStack();(h||g)&&(d.fn=h||"container.noop",d.inverse=g||"container.noop");for(var i=b;i--;)f=this.popStack(),c[i]=f;return e&&(d.args=this.source.generateArray(c)),this.options.data&&(d.data="data"),this.useBlockParams&&(d.blockParams="blockParams"),d},setupHelperArgs:function(a,b,c,d){var e=this.setupParams(a,b,c);return e=this.objectLiteral(e),d?(this.useRegister("options"),c.push("options"),["options=",e]):c?(c.push(e),""):e}},function(){for(var a="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),b=f.RESERVED_WORDS={},c=0,d=a.length;c<d;c++)b[a[c]]=!0}(),f.isValidJavaScriptVariableName=function(a){return!f.RESERVED_WORDS[a]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(a)},b["default"]=f,a.exports=b["default"]},function(a,b,c){"use strict";function d(a,b,c){if(f.isArray(a)){for(var d=[],e=0,g=a.length;e<g;e++)d.push(b.wrap(a[e],c));return d}return"boolean"==typeof a||"number"==typeof a?a+"":a}function e(a){this.srcFile=a,this.source=[]}b.__esModule=!0;var f=c(3),g=void 0;try{}catch(h){}g||(g=function(a,b,c,d){this.src="",d&&this.add(d)},g.prototype={add:function(a){f.isArray(a)&&(a=a.join("")),this.src+=a},prepend:function(a){f.isArray(a)&&(a=a.join("")),this.src=a+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),e.prototype={isEmpty:function(){return!this.source.length},prepend:function(a,b){this.source.unshift(this.wrap(a,b))},push:function(a,b){this.source.push(this.wrap(a,b))},merge:function(){var a=this.empty();return this.each(function(b){a.add(["  ",b,"\n"])}),a},each:function(a){for(var b=0,c=this.source.length;b<c;b++)a(this.source[b])},empty:function(){var a=this.currentLocation||{start:{}};return new g(a.start.line,a.start.column,this.srcFile)},wrap:function(a){var b=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return a instanceof g?a:(a=d(a,this,b),new g(b.start.line,b.start.column,this.srcFile,a))},functionCall:function(a,b,c){return c=this.generateList(c),this.wrap([a,b?"."+b+"(":"(",c,")"])},quotedString:function(a){return'"'+(a+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(a){var b=[];for(var c in a)if(a.hasOwnProperty(c)){var e=d(a[c],this);"undefined"!==e&&b.push([this.quotedString(c),":",e])}var f=this.generateList(b);return f.prepend("{"),f.add("}"),f},generateList:function(a){for(var b=this.empty(),c=0,e=a.length;c<e;c++)c&&b.add(","),b.add(d(a[c],this));return b},generateArray:function(a){var b=this.generateList(a);return b.prepend("["),b.add("]"),b}},b["default"]=e,a.exports=b["default"]}])});




/********** https://www.aufeminin.com/reloaded/static/preconcat_%2Freloaded%2Fstatic%2FFront%2FVendor%2Fcomscore%2Fcomscore_streamsense.min.js.202002281736.js**********/

/** https://www.aufeminin.com/reloaded/static/Front/Vendor/comscore/comscore_streamsense.min.js?v=202002281736 **/
var ns_=ns_||{};ns_.PlatformAPIs=ns_.PlatformAPIs||{Standard:0,Trilithium:1,AppleTV:2,Chromecast:3},ns_.Utils=ns_.Utils||function(){return{uid:function(){var e=1;return function(){return+(new Date)+"_"+e++}}(),filter:function(e,t){var n={};for(var r in t)t.hasOwnProperty(r)&&e(t[r])&&(n[r]=t[r]);return n},extend:function(e){var t=arguments.length,n;e=e||{};for(var r=1;r<t;r++){n=arguments[r];if(!n)continue;for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])}return e},getString:function(e,t){var n=String(e);return e==null?t||"na":n},getLong:function(e,t){var n=Number(e);return e==null||isNaN(n)?t||0:n},getInteger:function(e,t){var n=Number(e);return e==null||isNaN(n)?t||0:n},getBoolean:function(e,t){var n=String(e).toLowerCase()=="true";return e==null?t||!1:n},isNotEmpty:function(e){return typeof e!="undefined"&&e!=null&&typeof e.length!="undefined"&&e.length>0},indexOf:function(e,t){var n=-1;return this.forEach(t,function(t,i){t==e&&(n=i)}),n},forEach:function(e,t,n){try{if(typeof t=="function"){n=typeof n!="undefined"?n:null;if(typeof e["length"]!="number"||typeof e[0]=="undefined"){var r=typeof e.__proto__!="undefined";for(var i in e)e.hasOwnProperty(i)&&(!r||r&&typeof e.__proto__[i]=="undefined")&&typeof e[i]!="function"&&t.call(n,e[i],i)}else for(var s=0,o=e.length;s<o;s++)t.call(n,e[s],s)}}catch(u){}},regionMatches:function(e,t,n,r,i){if(t<0||r<0||t+i>e.length||r+i>n.length)return!1;while(--i>=0){var s=e.charAt(t++),o=n.charAt(r++);if(s!=o)return!1}return!0},size:function(e){var t=0;for(var n in e)e.hasOwnProperty(n)&&t++;return t},log:function(e,t){if(typeof t!="undefined"&&t&&typeof console!="undefined"&&console){var n=new Date,r=n.getHours()+":"+n.getMinutes()+":"+n.getSeconds();console.log(r,e)}},isTrue:function(e){return typeof e=="undefined"?!1:typeof e=="string"?(e=e.toLowerCase(),e==="true"||e==="1"||e==="on"):!!e},toString:function(e){if(typeof e=="undefined")return"undefined";if(typeof e=="string")return e;if(Object.prototype.toString.call(e)==="[object Array]")return e.join(",");if(this.size(e)>0){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+":"+e[n]+";");return t}return e.toString()},exists:function(e){return typeof e!="undefined"&&e!=null},firstGreaterThan0:function(){for(var e=0,t=arguments.length;e<t;e++){var n=arguments[e];if(n>0)return n}return 0},cloneObject:function(e){if(null==e||"object"!=typeof e)return e;var t=function(){function e(){}function t(t){return typeof t=="object"?(e.prototype=t,new e):t}function r(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}function i(){this.copiedObjects=[];var e=this;this.recursiveDeepCopy=function(t){return e.deepCopy(t)},this.depth=0}function s(e,t){var n=new i;return t&&(n.maxDepth=t),n.deepCopy(e)}function o(e){return typeof window!="undefined"&&window&&window.Node?e instanceof Node:e===document?!0:typeof e.nodeType=="number"&&e.attributes&&e.childNodes&&e.cloneNode}var n=[];return r.prototype={constructor:r,canCopy:function(){return!1},create:function(e){},populate:function(e,t,n){}},i.prototype={constructor:i,maxDepth:256,cacheResult:function(e,t){this.copiedObjects.push([e,t])},getCachedResult:function(e){var t=this.copiedObjects,n=t.length;for(var r=0;r<n;r++)if(t[r][0]===e)return t[r][1];return undefined},deepCopy:function(e){if(e===null)return null;if(typeof e!="object")return e;var t=this.getCachedResult(e);if(t)return t;for(var r=0;r<n.length;r++){var i=n[r];if(i.canCopy(e))return this.applyDeepCopier(i,e)}throw new Error("Unable to clone the following object "+e)},applyDeepCopier:function(e,t){var n=e.create(t);this.cacheResult(t,n),this.depth++;if(this.depth>this.maxDepth)throw new Error("Maximum recursion depth exceeded.");return e.populate(this.recursiveDeepCopy,t,n),this.depth--,n}},s.DeepCopier=r,s.deepCopiers=n,s.register=function(e){e instanceof r||(e=new r(e)),n.unshift(e)},s.register({canCopy:function(){return!0},create:function(e){return e instanceof e.constructor?t(e.constructor.prototype):{}},populate:function(e,t,n){for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}}),s.register({canCopy:function(e){return e instanceof Array},create:function(e){return new e.constructor},populate:function(e,t,n){for(var r=0;r<t.length;r++)n.push(e(t[r]));return n}}),s.register({canCopy:function(e){return e instanceof Date},create:function(e){return new Date(e)}}),s.register({canCopy:function(e){return o(e)},create:function(e){return e===document?document:e.cloneNode(!1)},populate:function(e,t,n){if(t===document)return document;if(t.childNodes&&t.childNodes.length)for(var r=0;r<t.childNodes.length;r++){var i=e(t.childNodes[r]);n.appendChild(i)}}}),{deepCopy:s}}();return t.deepCopy(e)},safeGet:function(e,t){return t=this.exists(t)?t:"",this.exists(e)?e:t},getBrowserName:function(){if(typeof navigator=="undefined"||!navigator.hasOwnProperty("userAgent")||!navigator.hasOwnProperty("appName"))return"";var e=navigator.userAgent,t=navigator.appName,n,r;return(r=e.indexOf("Opera"))!=-1||(r=e.indexOf("OPR/"))!=-1?t="Opera":(r=e.indexOf("Android"))!=-1?t="Android":(r=e.indexOf("Chrome"))!=-1?t="Chrome":(r=e.indexOf("Safari"))!=-1?t="Safari":(r=e.indexOf("Firefox"))!=-1?t="Firefox":(r=e.indexOf("IEMobile"))!=-1?t="Internet Explorer Mobile":t=="Microsoft Internet Explorer"||t=="Netscape"?t="Internet Explorer":(n=e.lastIndexOf(" ")+1)<(r=e.lastIndexOf("/"))&&(t=e.substring(n,r),t.toLowerCase()==t.toUpperCase()&&(t=navigator.appName)),t},getBrowserFullVersion:function(){if(typeof navigator=="undefined"||!navigator.hasOwnProperty("userAgent")||!navigator.hasOwnProperty("appName")||!navigator.hasOwnProperty("appVersion"))return"";var e=navigator.userAgent,t=navigator.appName,n=""+parseFloat(navigator.appVersion),r,i,s,o;return(i=e.indexOf("Opera"))!=-1?(n=e.substring(i+6),(i=e.indexOf("Version"))!=-1&&(n=e.substring(i+8))):(i=e.indexOf("OPR/"))!=-1?n=e.substring(i+4):(i=e.indexOf("Android"))!=-1?n=e.substring(i+11):(i=e.indexOf("Chrome"))!=-1?n=e.substring(i+7):(i=e.indexOf("Safari"))!=-1?(n=e.substring(i+7),(i=e.indexOf("Version"))!=-1&&(n=e.substring(i+8))):(i=e.indexOf("Firefox"))!=-1?n=e.substring(i+8):t=="Microsoft Internet Explorer"?(o=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),o.exec(e)!=null&&(n=parseFloat(RegExp.$1))):t=="Netscape"?(o=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),o.exec(e)!=null&&(n=parseFloat(RegExp.$1))):e.lastIndexOf(" ")+1<(i=e.lastIndexOf("/"))&&(n=e.substring(i+1)),n=n.toString(),(s=n.indexOf(";"))!=-1&&(n=n.substring(0,s)),(s=n.indexOf(" "))!=-1&&(n=n.substring(0,s)),(s=n.indexOf(")"))!=-1&&(n=n.substring(0,s)),r=parseInt(""+n,10),isNaN(r)&&(n=""+parseFloat(navigator.appVersion)),n},browserAcceptsLargeURLs:function(){return typeof window!="undefined"?window.ActiveXObject===null||!0:!0}}}(),ns_.StreamSense=ns_.StreamSense||function(){function w(t,n){var r=t||"",i="undefined",s=y.comScore||y.sitestat||function(t){var n="comScore=",r=b.cookie,s="",o="indexOf",u="substring",a="length",f=e.browserAcceptsLargeURLs()?N.URL_LENGTH_LIMIT:N.RESTRICTED_URL_LENGTH_LIMIT,l,c="&ns_",h="&",d,v,m,g,w=y.encodeURIComponent||escape;if(r[o](n)+1)for(m=0,v=r.split(";"),g=v[a];m<g;m++)d=v[m][o](n),d+1&&(s=h+unescape(v[m][u](d+n[a])));t+=c+"_t="+ +(new Date)+c+"c="+(b.characterSet||b.defaultCharset||"")+s,t.length>f&&t.indexOf(h)>0&&(l=t.substr(0,f-8).lastIndexOf(h),t=(t.substring(0,l)+c+"cut="+w(t.substring(l+1))).substr(0,f)),p.httpGet(t),typeof ns_p===i&&(ns_p={src:t}),ns_p.lastMeasurement=t};if(typeof n!==i){var o=[],u=y.encodeURIComponent||escape;for(var a in n)n.hasOwnProperty(a)&&o.push(u(a)+"="+u(n[a]));/[\?\&]$/.test(r)||(r+="&"),r+=o.join("&")}return s(r)}function E(t,n){var r,i=y.encodeURIComponent||escape,s=[],o=N.LABELS_ORDER,u=t.split("?"),a=u[0],f=u[1],l=f.split("&");for(var c=0,h=l.length;c<h;c++){var p=l[c].split("="),d=unescape(p[0]),v=unescape(p[1]);d&&(n[d]=v)}var m={};for(var g=0,w=o.length;g<w;g++){var E=o[g];if(n.hasOwnProperty(E)){var S=n[E];typeof S!="undefined"&&S!=null&&(m[E]=!0,s.push(i(E)+"="+i(n[E])))}}for(var x in n)if(n.hasOwnProperty(x)){if(m[x])continue;var T=n[x];typeof T!="undefined"&&T!=null&&s.push(i(x)+"="+i(n[x]))}r=a+"?"+s.join("&"),r=r+(r.indexOf("&c8=")<0?"&c8="+i(b.title):"")+(r.indexOf("&c7=")<0?"&c7="+i(b.URL):"")+(r.indexOf("&c9=")<0?"&c9="+i(b.referrer):"");var C=e.browserAcceptsLargeURLs()?N.URL_LENGTH_LIMIT:N.RESTRICTED_URL_LENGTH_LIMIT;if(r.length>C&&r.indexOf("&")>0){var k=r.substr(0,C-8).lastIndexOf("&");r=(r.substring(0,k)+"&ns_cut="+i(r.substring(k+1))).substr(0,C)}return r}var e=ns_.Utils,t=function(){var t="cs_";return function(){var n=typeof localStorage!="undefined"?localStorage:{};e.extend(this,{get:function(e){return n[t+e]},set:function(e,r){n[t+e]=r},has:function(e){return t+e in n},remove:function(e){delete n[t+e]},clear:function(){for(var e in n)n.hasOwnProperty(e)&&delete n[e]}})}}(),n=function(){var t="cs_",n=function(){var n=this,r=typeof atv!="undefined"&&typeof atv.localStorage!="undefined"&&atv.localStorage||null;e.extend(this,{get:function(e){return r&&e&&r.getItem(t+e)||null},set:function(e,n){r&&e&&(r[t+e]=n)},has:function(e){return r&&e&&r.getItem(t+e)!=null||!1},remove:function(e){r&&e&&r.removeItem(t+e)},clear:function(){}})};return n}(),r=function(e,t){if(typeof Image!="undefined"){var n=new Image;n.onload=function(){t&&t(200),n=null},n.onerror=function(){t&&t(),n=null},n.src=e}},i=function(e,t){typeof XMLHttpRequest!="undefined"&&t&&typeof setTimeout!="undefined"&&setTimeout(t,0);var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){n.readyState===4&&(t&&t(n.status),n=null)},n.send()},s=function(e,t,n){typeof XMLHttpRequest!="undefined"&&n&&typeof setTimeout!="undefined"&&setTimeout(n,0);var r=new XMLHttpRequest;r.open("POST",e,!0),r.onreadystatechange=function(){r.readyState===4&&(n&&n(r.status),r=null)},r.send(t)},o=function(e,t){t&&typeof setTimeout!="undefined"&&setTimeout(t,0)},u=function(e,t,n){n&&typeof setTimeout!="undefined"&&setTimeout(n,0)},a=function(){function f(e){var t=r+e;s[t]="",o[t]=[]}function l(e,n){var i=r+e;s[i]+=u+t(n),o[i].push(n)}function c(n,a){var f=r+n,l=o[f];l.splice(e.indexOf(a,l),1);var c=[];for(var h=0,p=l.length;h<p;h++)c.push(t(l[h]));s[f]=c.join(u),delete s[i+n+a]}function h(e,t,n){s[i+e+t]=n}function p(e,t){return s[i+e+t]}var t=typeof encodeURIComponent!="undefined"?encodeURIComponent:escape,n=typeof decodeURIComponent!="undefined"?decodeURIComponent:unescape,r="cs_dir_",i="cs_file_",s=typeof localStorage!="undefined"?localStorage:{},o={},u="|";return{dir:function(e){var t=r+e,i=o[t];if(i)return i.slice();var a=s[t];if(a){a=a.split(u),i=[];for(var f=0,l=a.length;f<l;f++)a[f].length>0&&i.push(n(a[f]));return o[t]=i,i.slice()}return null},append:function(e,t,n){var r=a.read(e,t);r?r+=n:r=n,a.write(e,t,r)},write:function(t,n,r){var i=a.dir(t);i||(f(t),i=[]),e.indexOf(n,i)==-1&&l(t,n),h(t,n,r)},deleteFile:function(t,n){var r=a.dir(t);return r?e.indexOf(n,r)==-1?!1:(c(t,n),!0):!1},read:function(t,n){var r=a.dir(t);return r?e.indexOf(n,r)==-1?null:p(t,n):null}}}(),f=function(){return{dir:function(){return null},append:function(e,t,n){},write:function(e,t,n){},deleteFile:function(){return!1},read:function(){return null}}}(),l=function(e,t){typeof engine!="undefined"&&t&&typeof setTimeout!="undefined"&&setTimeout(t,0);var n=engine.createHttpClient(),r=n.createRequest("GET",e,null);r.start(),t&&setTimeout(t,0)},c=function(e,t){if(typeof atv!="undefined"&&typeof atv.setTimeout=="function"){typeof XMLHttpRequest!="undefined"&&t&&atv.setTimeout(t,0);var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){n.readyState===4&&(t&&t(n.status),n=null)},n.send()}},h=function(e,t,n){if(typeof atv!="undefined"&&typeof atv.setTimeout=="function"){typeof XMLHttpRequest!="undefined"&&n&&atv.setTimeout(n,0);var r=new XMLHttpRequest;r.open("POST",e,!0),r.onreadystatechange=function(){r.readyState===4&&(n&&n(r.status),r=null)},r.send(t)}},p=function(){return{PLATFORM:"generic",httpGet:r,httpPost:u,Storage:t,IO:f,getCrossPublisherId:function(){return null},getAppName:function(){return Constants.UNKNOWN_VALUE},getAppVersion:function(){return Constants.UNKNOWN_VALUE},getVisitorId:function(){return this.getDeviceName()+ +(new Date)+~~(Math.random()*1e3)},getVisitorIdSuffix:function(){return"72"},getDeviceName:function(){return""},getPlatformVersion:function(){return""},getPlatformName:function(){return"js"},getRuntimeName:function(){return""},getRuntimeVersion:function(){return""},getResolution:function(){return""},getLanguage:function(){return""},getPackageName:function(){return""},isConnectionAvailable:function(){return!0},isCompatible:function(){return!0},autoSelect:function(){},setPlatformAPI:function(){},isCrossPublisherIdChanged:function(){return!1},setTimeout:function(e,t,n){return setTimeout(e,t,n)},clearTimeout:function(e){return clearTimeout(e)},getDeviceArchitecture:function(){return Constants.UNKNOWN_VALUE},getConnectionType:function(){return Constants.UNKNOWN_VALUE},getDeviceJailBrokenFlag:function(){return Constants.UNKNOWN_VALUE}}}(),d=function(){function s(){return typeof engine!="undefined"&&typeof engine.stats!="undefined"}function o(){return e.isNotEmpty(engine.stats.device.id)?engine.stats.device.id:e.isNotEmpty(engine.stats.network.mac)?engine.stats.network.mac:null}function a(){if(n==null){var e=o();e!=null?(n=e,r="31",i=e):(n=+(new Date)+~~(Math.random()*1e3),r="72",i=null)}}var n=null,r=null,i=null;return{PLATFORM:"trilithium",httpGet:l,httpPost:u,Storage:t,IO:f,getCrossPublisherId:function(){return a(),i},getAppName:function(){return e.isNotEmpty(engine.stats.application.name)?engine.stats.application.name:Constants.UNKNOWN_VALUE},getAppVersion:function(){return e.isNotEmpty(engine.stats.application.version)?engine.stats.application.version:Constants.UNKNOWN_VALUE},getVisitorId:function(){return a(),n},getVisitorIdSuffix:function(){return r},getDeviceName:function(){return e.safeGet(engine.stats.device.platform,"")},getPlatformVersion:function(){return e.safeGet(engine.stats.device.version,"")},getPlatformName:function(){return"js"},getRuntimeName:function(){return"trilithium"},getRuntimeVersion:function(){return""},getResolution:function(){return typeof screen!="undefined"&&typeof screen.height!="undefined"&&typeof screen.width!="undefined"?screen.height+"x"+screen.width:""},getLanguage:function(){return""},getPackageName:function(){return""},isConnectionAvailable:function(){return!0},isCompatible:s}}(),v=function(){function s(){return typeof window=="undefined"&&typeof atv!="undefined"}function o(){t==null&&(typeof atv!="undefined"&&typeof atv.device!="undefined"&&atv.device.idForVendor?(t=e.safeGet(atv.device.idForVendor,""),r="62"):(t=+(new Date)+~~(Math.random()*1e3),r="72"),i=null)}var t=null,r=null,i=null;return{PLATFORM:"atv",httpGet:c,httpPost:h,Storage:n,IO:f,getCrossPublisherId:function(){return o(),i},getAppName:function(){return Constants.UNKNOWN_VALUE},getAppVersion:function(){return Constants.UNKNOWN_VALUE},getVisitorId:function(){return o(),t},getVisitorIdSuffix:function(){return r},getDeviceName:function(){return"Apple TV"},getPlatformVersion:function(){return typeof atv!="undefined"&&typeof atv.device!="undefined"&&e.safeGet(atv.device.softwareVersion,"")},getPlatformName:function(){return"js"},getRuntimeName:function(){return"atv"},getRuntimeVersion:function(){return typeof atv!="undefined"&&typeof atv.device!="undefined"&&e.safeGet(atv.device.softwareVersion,"")},getResolution:function(){return typeof atv.device!="undefined"&&typeof atv.device.screenFrame!="undefined"&&typeof atv.device.screenFrame.height!="undefined"&&typeof atv.device.screenFrame.width!="undefined"?atv.device.screenFrame.height+"x"+atv.device.screenFrame.width:""},getLanguage:function(){return typeof atv!="undefined"&&typeof atv.device!="undefined"&&e.safeGet(atv.device.language,"")},getPackageName:function(){return""},isConnectionAvailable:function(){return!0},setTimeout:function(e,t,n){return typeof atv!="undefined"&&typeof atv.setTimeout!="undefined"&&atv.setTimeout(e,t,n)},clearTimeout:function(e){return typeof atv!="undefined"&&typeof atv.clearTimeout!="undefined"&&atv.clearTimeout(e)},isCompatible:s}}(),m=function(){function n(){return typeof window!="undefined"&&typeof document!="undefined"}return{PLATFORM:"chromecast",httpGet:r,httpPost:s,Storage:t,IO:a,getCrossPublisherId:function(){return null},getAppName:function(){return typeof document!="undefined"&&document.title||Constants.UNKNOWN_VALUE},getAppVersion:function(){return Constants.UNKNOWN_VALUE},getVisitorId:function(){return+(new Date)+~~(Math.random()*1e3)},getVisitorIdSuffix:function(){return"72"},getDeviceName:function(){return"chromecast"},getPlatformVersion:function(){return"5"},getPlatformName:function(){return"js"},getRuntimeName:function(){return"html"},getRuntimeVersion:function(){return e.safeGet(e.getBrowserName()+" "+e.getBrowserFullVersion(),Constants.UNKNOWN_VALUE)},getResolution:function(){var t=typeof window!="undefined"&&e.exists(window.screen)&&e.exists(window.screen.availWidth)?window.screen.availWidth:0,n=typeof window!="undefined"&&e.exists(window.screen)&&e.exists(window.screen.availHeight)?window.screen.availHeight:0;return t>0&&n>0?t+"x"+n:""},getLanguage:function(){return typeof window!="undefined"&&e.exists(window.navigator)&&e.safeGet(window.navigator.language,"")||""},getPackageName:function(){return typeof castReceiverManager!="undefined"&&castReceiverManager.getApplicationData&&typeof castReceiverManager.getApplicationData=="function"&&castReceiverManager.getApplicationData().namespaces&&castReceiverManager.getApplicationData().namespaces[0]||""},isConnectionAvailable:function(){return typeof window!="undefined"&&e.exists(window.navigator)&&e.safeGet(window.navigator.onLine,!0)||!0},isCompatible:n,getConnectionType:function(){return Constants.UNKNOWN_VALUE}}}();p.autoSelect=function(){d.isCompatible()?ns_.Utils.extend(p,d):v.isCompatible()&&ns_.Utils.extend(p,v)},p.setPlatformAPI=function(t){var n=!1;switch(t){case ns_.PlatformAPIs.Trilithium:ns_.Utils.extend(p,d),n=!0;break;case ns_.PlatformAPIs.AppleTV:ns_.Utils.extend(p,v),n=!0;break;case ns_.PlatformAPIs.Chromecast:e.extend(p,m),n=!0}n&&(p.autoSelect=function(){})};var g=typeof window!="undefined"&&typeof document!="undefined",y,b;g?(y=window,b=document):(y={},b={location:{href:""},title:"",URL:"",referrer:"",cookie:""});var e=e||{};e.filterMap=function(t,n){for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r,n)==-1&&delete t[r]},e.getKeys=function(e,t){var n,r=[];for(n in e)(!t||t.test(n))&&e.hasOwnProperty(n)&&(r[r.length]=n);return r};var S=function(){var e=["play","pause","end","buffer","keep-alive","hb","custom","ad_play","ad_pause","ad_end","ad_click"];return{PLAY:0,PAUSE:1,END:2,BUFFER:3,KEEP_ALIVE:4,HEART_BEAT:5,CUSTOM:6,AD_PLAY:7,AD_PAUSE:8,AD_END:9,AD_CLICK:10,toString:function(t){return e[t]}}}(),x=function(){var e=[S.END,S.PLAY,S.PAUSE,S.BUFFER];return{IDLE:0,PLAYING:1,PAUSED:2,BUFFERING:3,toEventType:function(t){return e[t]}}}(),T={ADPLAY:S.AD_PLAY,ADPAUSE:S.AD_PAUSE,ADEND:S.AD_END,ADCLICK:S.AD_CLICK},N={STREAMSENSE_VERSION:"4.1505.18",DEFAULT_PLAYERNAME:"streamsense",DEFAULT_HEARTBEAT_INTERVAL:[{playingtime:6e4,interval:1e4},{playingtime:null,interval:6e4}],DEFAULT_KEEP_ALIVE_INTERVAL:12e5,DEFAULT_PAUSED_ON_BUFFERING_INTERVAL:500,C1_VALUE:"19",C10_VALUE:"js",NS_AP_C12M_VALUE:"1",NS_NC_VALUE:"1",PAGE_NAME_LABEL:"name",RESTRICTED_URL_LENGTH_LIMIT:2048,URL_LENGTH_LIMIT:4096,LABELS_ORDER:["c1","c2","ca2","cb2","cc2","cd2","ns_site","ca_ns_site","cb_ns_site","cc_ns_site","cd_ns_site","ns_vsite","ca_ns_vsite","cb_ns_vsite","cc_ns_vsite","cd_ns_vsite","ns_ap_an","ca_ns_ap_an","cb_ns_ap_an","cc_ns_ap_an","cd_ns_ap_an","ns_ap_pn","ns_ap_pv","c12","ca12","cb12","cc12","cd12","ns_ak","ns_ap_hw","name","ns_ap_ni","ns_ap_ec","ns_ap_ev","ns_ap_device","ns_ap_id","ns_ap_csf","ns_ap_bi","ns_ap_pfm","ns_ap_pfv","ns_ap_ver","ca_ns_ap_ver","cb_ns_ap_ver","cc_ns_ap_ver","cd_ns_ap_ver","ns_ap_sv","ns_ap_cv","ns_type","ca_ns_type","cb_ns_type","cc_ns_type","cd_ns_type","ns_radio","ns_nc","ns_ap_ui","ca_ns_ap_ui","cb_ns_ap_ui","cc_ns_ap_ui","cd_ns_ap_ui","ns_ap_gs","ns_st_sv","ns_st_pv","ns_st_it","ns_st_id","ns_st_ec","ns_st_sp","ns_st_sq","ns_st_cn","ns_st_ev","ns_st_po","ns_st_cl","ns_st_el","ns_st_pb","ns_st_hc","ns_st_mp","ca_ns_st_mp","cb_ns_st_mp","cc_ns_st_mp","cd_ns_st_mp","ns_st_mv","ca_ns_st_mv","cb_ns_st_mv","cc_ns_st_mv","cd_ns_st_mv","ns_st_pn","ns_st_tp","ns_st_pt","ns_st_pa","ns_st_ad","ns_st_li","ns_st_ci","ns_ap_jb","ns_ap_res","ns_ap_sd","ns_ap_po","ns_ap_ot","ns_ap_c12m","cs_c12u","ns_ap_install","ns_ap_updated","ns_ap_lastrun","ns_ap_cs","ns_ap_runs","ns_ap_usage","ns_ap_fg","ns_ap_ft","ns_ap_dft","ns_ap_bt","ns_ap_dbt","ns_ap_dit","ns_ap_as","ns_ap_das","ns_ap_it","ns_ap_uc","ns_ap_aus","ns_ap_daus","ns_ap_us","ns_ap_dus","ns_ap_ut","ns_ap_oc","ns_ap_uxc","ns_ap_uxs","ns_ap_lang","ns_ap_ar","ns_ap_miss","ns_ts","ns_st_ca","ns_st_cp","ns_st_er","ca_ns_st_er","cb_ns_st_er","cc_ns_st_er","cd_ns_st_er","ns_st_pe","ns_st_ui","ca_ns_st_ui","cb_ns_st_ui","cc_ns_st_ui","cd_ns_st_ui","ns_st_bc","ns_st_bt","ns_st_bp","ns_st_pc","ns_st_pp","ns_st_br","ns_st_ub","ns_st_vo","ns_st_ws","ns_st_pl","ns_st_pr","ns_st_ep","ns_st_ty","ns_st_ct","ns_st_cs","ns_st_ge","ns_st_st","ns_st_dt","ns_st_de","ns_st_pu","ns_st_cu","ns_st_fee","ns_ap_i1","ns_ap_i2","ns_ap_i3","ns_ap_i4","ns_ap_i5","ns_ap_i6","ns_ap_referrer","ns_clid","ns_campaign","ns_source","ns_mchannel","ns_linkname","ns_fee","gclid","utm_campaign","utm_source","utm_medium","utm_term","utm_content","c3","ca3","cb3","cc3","cd3","c4","ca4","cb4","cc4","cd4","c5","ca5","cb5","cc5","cd5","c6","ca6","cb6","cc6","cd6","c10","c11","c13","c14","c15","c16","c7","c8","c9","ns_ap_er"]},C=function(){return function(){function l(e,t){var n=t[e];n!=null&&(f[e]=n)}var t=this,n=0,r=0,i=0,s=0,o=0,u=0,a,f;e.extend(this,{reset:function(n){n!=null&&n.length>0?e.filterMap(f,n):f={},f.hasOwnProperty("ns_st_cl")||(f.ns_st_cl="0"),f.hasOwnProperty("ns_st_pn")||(f.ns_st_pn="1"),f.hasOwnProperty("ns_st_tp")||(f.ns_st_tp="1"),t.setPauses(0),t.setStarts(0),t.setBufferingTime(0),t.setBufferingTimestamp(-1),t.setPlaybackTime(0),t.setPlaybackTimestamp(-1)},setLabels:function(n,r){n!=null&&e.extend(f,n),t.setRegisters(f,r)},getLabels:function(){return f},setLabel:function(e,n){var r={};r[e]=n,t.setLabels(r,null)},getLabel:function(e){return f[e]},getClipId:function(){return(typeof a=="undefined"||a==null)&&t.setClipId("1"),a},setClipId:function(e){a=e},setRegisters:function(e,s){var u=e.ns_st_cn;u!=null&&(t.setClipId(u),delete e.ns_st_cn),u=e.ns_st_bt,u!=null&&(i=Number(u),delete e.ns_st_bt),l("ns_st_cl",e),l("ns_st_pn",e),l("ns_st_tp",e),l("ns_st_ub",e),l("ns_st_br",e);if(s==x.PLAYING||s==null)u=e.ns_st_sq,u!=null&&(r=Number(u),delete e.ns_st_sq);s!=x.BUFFERING&&(u=e.ns_st_pt,u!=null&&(o=Number(u),delete e.ns_st_pt));if(s==x.PAUSED||s==x.IDLE||s==null)u=e.ns_st_pc,u!=null&&(n=Number(u),delete e.ns_st_pc)},createLabels:function(i,s){var o=s||{};o.ns_st_cn=t.getClipId(),o.ns_st_bt=String(t.getBufferingTime());if(i==S.PLAY||i==null)o.ns_st_sq=String(r);if(i==S.PAUSE||i==S.END||i==S.KEEP_ALIVE||i==S.HEART_BEAT||i==null)o.ns_st_pt=String(t.getPlaybackTime()),o.ns_st_pc=String(n);return e.extend(o,t.getLabels()),o},incrementPauses:function(){n++},incrementStarts:function(){r++},getBufferingTime:function(){var e=i;return s>=0&&(e+=+(new Date)-s),e},setBufferingTime:function(e){i=e},getPlaybackTime:function(){var e=o;return u>=0&&(e+=+(new Date)-u),e},setPlaybackTime:function(e){o=e},getPlaybackTimestamp:function(){return u},setPlaybackTimestamp:function(e){u=e},getBufferingTimestamp:function(){return s},setBufferingTimestamp:function(e){s=e},getPauses:function(){return n},setPauses:function(e){n=e},getStarts:function(){return r},setStarts:function(e){r=e}}),f={},t.reset()}}(),k=function(){return function(){var t=this,n=null,r,i=0,s=0,o=0,u=0,a=0,f,l=0,c=!1;e.extend(this,{reset:function(n){n!=null&&n.length>0?e.filterMap(f,n):f={},t.setPlaylistId(+(new Date)+"_"+l),t.setBufferingTime(0),t.setPlaybackTime(0),t.setPauses(0),t.setStarts(0),t.setRebufferCount(0),c=!1},setLabels:function(n,r){n!=null&&e.extend(f,n),t.setRegisters(f,r)},getLabels:function(){return f},setLabel:function(e,n){var r={};r[e]=n,t.setLabels(r,null)},getLabel:function(e){return f[e]},getClip:function(){return n},getPlaylistId:function(){return r},setPlaylistId:function(e){r=e},setRegisters:function(e,t){var n=e.ns_st_sp;n!=null&&(i=Number(n),delete e.ns_st_sp),n=e.ns_st_bc,n!=null&&(o=Number(n),delete e.ns_st_bc),n=e.ns_st_bp,n!=null&&(u=Number(n),delete e.ns_st_bp),n=e.ns_st_id,n!=null&&(r=n,delete e.ns_st_id),t!=x.BUFFERING&&(n=e.ns_st_pa,n!=null&&(a=Number(n),delete e.ns_st_pa));if(t==x.PAUSED||t==x.IDLE||t==null)n=e.ns_st_pp,n!=null&&(s=Number(n),delete e.ns_st_pp)},createLabels:function(n,u){var a=u||{};a.ns_st_bp=String(t.getBufferingTime()),a.ns_st_sp=String(i),a.ns_st_id=String(r),o>0&&(a.ns_st_bc=String(o));if(n==S.PAUSE||n==S.END||n==S.KEEP_ALIVE||n==S.HEART_BEAT||n==null)a.ns_st_pa=String(t.getPlaybackTime()),a.ns_st_pp=String(s);if(n==S.PLAY||n==null)t.didFirstPlayOccurred()||(a.ns_st_pb="1",t.setFirstPlayOccurred(!0));return e.extend(a,t.getLabels()),a},incrementStarts:function(){i++},incrementPauses:function(){s++,n.incrementPauses()},setPlaylistCounter:function(e){l=e},incrementPlaylistCounter:function(){l++},addPlaybackTime:function(e){if(n.getPlaybackTimestamp()>=0){var r=e-n.getPlaybackTimestamp();n.setPlaybackTimestamp(-1),n.setPlaybackTime(n.getPlaybackTime()+r),t.setPlaybackTime(t.getPlaybackTime()+r)}},addBufferingTime:function(e){if(n.getBufferingTimestamp()>=0){var r=e-n.getBufferingTimestamp();n.setBufferingTimestamp(-1),n.setBufferingTime(n.getBufferingTime()+r),t.setBufferingTime(t.getBufferingTime()+r)}},getBufferingTime:function(){var e=u;return n.getBufferingTimestamp()>=0&&(e+=+(new Date)-n.getBufferingTimestamp()),e},setBufferingTime:function(e){u=e},getPlaybackTime:function(){var e=a;return n.getPlaybackTimestamp()>=0&&(e+=+(new Date)-n.getPlaybackTimestamp()),e},setPlaybackTime:function(e){a=e},getStarts:function(){return i},setStarts:function(e){i=e},getPauses:function(){return s},setPauses:function(e){s=e},getRebufferCount:function(){return o},incrementRebufferCount:function(){o++},setRebufferCount:function(e){o=e},didFirstPlayOccurred:function(){return c},setFirstPlayOccurred:function(e){c=e}}),n=new C,f={},t.reset()}}(),L=function(){var t=function(t,n,r){function q(e){var t=0;if(C!=null)for(var n=0;n<C.length;n++){var r=C[n],i=r.playingtime;if(!i||e<i){t=r.interval;break}}return t}function R(){X();var e=q(v.getClip().getPlaybackTime());if(e>0){var t=O>0?O:e;T=p.setTimeout(W,t)}O=0}function U(){X();var e=q(v.getClip().getPlaybackTime());O=e-v.getClip().getPlaybackTime()%e,T!=null&&X()}function z(){O=0,_=0,M=0}function W(){M++;var e=mt(S.HEART_BEAT,null);rt(e),O=0,R()}function X(){T!=null&&(p.clearTimeout(T),T=null)}function V(){J(),b=p.setTimeout($,L)}function $(){var e=mt(S.KEEP_ALIVE,null);rt(e),d++,V()}function J(){b!=null&&(p.clearTimeout(b),b=null)}function K(){G(),i.isPauseOnBufferingEnabled()&&at(x.PAUSED)&&(g=p.setTimeout(Q,A))}function Q(){if(P==x.PLAYING){v.incrementRebufferCount(),v.incrementPauses();var e=mt(S.PAUSE,null);rt(e),d++,P=x.PAUSED}}function G(){g!=null&&(p.clearTimeout(g),g=null)}function Y(e){return e==x.PLAYING||e==x.PAUSED}function Z(){l&&(p.clearTimeout(l),l=null)}function et(e){return e==S.PLAY?x.PLAYING:e==S.PAUSE?x.PAUSED:e==S.BUFFER?x.BUFFERING:e==S.END?x.IDLE:null}function tt(t,n,r){Z();if(r)l=p.setTimeout(function(e,t){return function(){tt(e,t)}}(t,n),r);else if(ct(t)){var i=pt(),s=a,o=lt(n),u=s>=0?o-s:0;ot(pt(),n),ut(t,n),dt(pt()),ht(t);for(var f=0,c=F.length;f<c;f++)F[f](i,t,n,u);nt(n),v.setRegisters(n,t),v.getClip().setRegisters(n,t);var m=mt(x.toEventType(t),n);e.extend(m,n),at(h)&&(rt(m),P=h,d++)}}function nt(e){var t=e.ns_st_mp;t!=null&&(H=t,delete e.ns_st_mp),t=e.ns_st_mv,t!=null&&(B=t,delete e.ns_st_mv),t=e.ns_st_ec,t!=null&&(d=Number(t),delete e.ns_st_ec)}function rt(e,t){t===undefined&&(t=!0),t&&st(e);var n=i.getPixelURL();if(m){if(!it()){var r=I.am,s=I.et,o=r.newApplicationMeasurement(m,s.HIDDEN,e,n);m.getQueue().offer(o)}}else n&&p.httpGet(E(n,e))}function it(){var e=m.getAppContext(),t=m.getSalt(),n=m.getPixelURL();return e==null||t==null||t.length==0||n==null||n.length==0}function st(t){j=mt(null),e.extend(j,t)}function ot(t,n){var r=lt(n);if(t==x.PLAYING)v.addPlaybackTime(r),U(),J();else if(t==x.BUFFERING)v.addBufferingTime(r),G();else if(t==x.IDLE){var i=e.getKeys(v.getClip().getLabels());v.getClip().reset(i)}}function ut(e,t){var n=lt(t);f=ft(t),e==x.PLAYING?(R(),V(),v.getClip().setPlaybackTimestamp(n),at(e)&&(v.getClip().incrementStarts(),v.getStarts()<1&&v.setStarts(1))):e==x.PAUSED?at(e)&&v.incrementPauses():e==x.BUFFERING?(v.getClip().setBufferingTimestamp(n),y&&K()):e==x.IDLE&&z()}function at(e){return e!=x.PAUSED&&e!=x.IDLE||P!=x.IDLE&&P!=null?e!=x.BUFFERING&&P!=e:!1}function ft(t){var n=-1;return t.hasOwnProperty("ns_st_po")&&(n=e.getInteger(t.ns_st_po)),n}function lt(e){var t=-1;return e.hasOwnProperty("ns_ts")&&(t=Number(e.ns_ts)),t}function ct(e){return e!=null&&pt()!=e}function ht(e){h=e,a=+(new Date)}function pt(){return h}function dt(e){c=e}function vt(){return c}function mt(){var t,n;arguments.length==1?(t=x.toEventType(h),n=arguments[0]):(t=arguments[0],n=arguments[1]);var r={};if(typeof document!="undefined"){var s=document;r.c7=s.URL,r.c8=s.title,r.c9=s.referrer}return n!=null&&e.extend(r,n),r.hasOwnProperty("ns_ts")||(r.ns_ts=String(+(new Date))),t!=null&&!r.hasOwnProperty("ns_st_ev")&&(r.ns_st_ev=S.toString(t)),e.extend(r,i.getLabels()),gt(t,r),v.createLabels(t,r),v.getClip().createLabels(t,r),r.hasOwnProperty("ns_st_mp")||(r.ns_st_mp=H),r.hasOwnProperty("ns_st_mv")||(r.ns_st_mv=B),r.hasOwnProperty("ns_st_ub")||(r.ns_st_ub="0"),r.hasOwnProperty("ns_st_br")||(r.ns_st_br="0"),r.hasOwnProperty("ns_st_pn")||(r.ns_st_pn="1"),r.hasOwnProperty("ns_st_tp")||(r.ns_st_tp="1"),r.hasOwnProperty("ns_st_it")||(r.ns_st_it="c"),r.ns_st_sv=N.STREAMSENSE_VERSION,r.ns_type="hidden",r}function gt(t,n){var r=n||{};r.ns_st_ec=String(d);if(!r.hasOwnProperty("ns_st_po")){var i=f,s=lt(r);if(t==S.PLAY||t==S.KEEP_ALIVE||t==S.HEART_BEAT||t==null&&h==x.PLAYING)i+=s-v.getClip().getPlaybackTimestamp();r.ns_st_po=e.getInteger(i)}return t==S.HEART_BEAT&&(r.ns_st_hc=String(M)),r}function yt(e){var t=lt(e);t<0&&(e.ns_ts=String(+(new Date)))}function bt(e,t,n){t=t||{},t.ns_st_ad=1,e>=S.AD_PLAY&&e<=S.AD_CLICK&&i.notify(e,t,n)}function wt(e,t){i.notify(S.CUSTOM,e,t)}var i=this,s=500,o,u=null,a=0,f=0,l,c,h,d=0,v=null,m,g,y=!0,b,T,C=N.DEFAULT_HEARTBEAT_INTERVAL,L=N.DEFAULT_KEEP_ALIVE_INTERVAL,A=N.DEFAULT_PAUSED_ON_BUFFERING_INTERVAL,O=0,M=0,_=0,D=!1,P,H,B,j,F,I={};r?p.setPlatformAPI(r):p.autoSelect(),e.extend(this,{reset:function(t){v.reset(t),v.setPlaylistCounter(0),v.setPlaylistId(+(new Date)+"_1"),v.getClip().reset(t),t!=null&&!t.isEmpty()?e.filterMap(o,t):o={},d=1,M=0,U(),z(),J(),G(),Z(),h=x.IDLE,c=null,a=-1,P=null,H=N.DEFAULT_PLAYERNAME,B=N.STREAMSENSE_VERSION,j=null},setPauseOnBufferingInterval:function(e){A=e},getPauseOnBufferingInterval:function(){return A},setKeepAliveInterval:function(e){L=e},getKeepAliveInterval:function(){return L},setHeartbeatIntervals:function(e){C=e},notify:function(){var t,n,r,o;n=arguments[0],arguments.length==3?(r=arguments[1],o=arguments[2]):(r={},o=arguments[1]);if(!S.toString(n))return;t=et(n);var u=e.extend({},r);yt(u),u.hasOwnProperty("ns_st_po")||(u.ns_st_po=e.getInteger(o).toString());if(n==S.PLAY||n==S.PAUSE||n==S.BUFFER||n==S.END)i.isThrottlingEnabled()&&Y(h)&&Y(t)&&(h!=x.PLAYING||t!=x.PAUSED||!!l)?tt(t,u,s):tt(t,u);else{var a=mt(n,u);e.extend(a,u),rt(a,!1),d++}},getLabels:function(){return o},getState:function(){return h},setLabels:function(e){for(var t in e)e.hasOwnProperty(t)&&i.setLabel(t,e[t])},getLabel:function(e){return o[e]},setLabel:function(e,t){t==null?delete o[e]:o[e]=t},setPixelURL:function(e){if(e==null||e.length==0)return null;var t=decodeURIComponent||unescape,n=e.indexOf("?");if(n>=0){if(n<e.length-1){var r=e.substring(n+1).split("&");for(var s=0,o=r.length;s<o;s++){var a=r[s],f=a.split("=");f.length==2?i.setLabel(f[0],t(f[1])):f.length==1&&i.setLabel(N.PAGE_NAME_LABEL,t(f[0]))}e=e.substring(0,n+1)}}else e+="?";return u=e,u},getPixelURL:function(){return u?u:typeof ns_p!="undefined"&&typeof ns_p.src=="string"?u=ns_p.src.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):typeof ns_pixelUrl=="string"?u=ns_pixelUrl.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):null},isPauseOnBufferingEnabled:function(){return y},setPauseOnBufferingEnabled:function(e){y=e},isThrottlingEnabled:function(){return D},setThrottlingEnabled:function(e){D=e},setThrottlingDelay:function(e){e&&e>0&&(s=e)},getThrottlingDelay:function(){return s},setClip:function(e,t){var n=!1;return h==x.IDLE&&(v.getClip().reset(),v.getClip().setLabels(e,null),t&&v.incrementStarts(),n=!0),n},setPlaylist:function(e){var t=!1;return h==x.IDLE&&(v.incrementPlaylistCounter(),v.reset(),v.getClip().reset(),v.setLabels(e,null),t=!0),t},importState:function(t){reset();var n=e.extend({},t);v.setRegisters(n,null),v.getClip().setRegisters(n,null),nt(n),d++},exportState:function(){return j},getVersion:function(){return N.STREAMSENSE_VERSION},addListener:function(e){F.push(e)},removeListener:function(t){F.splice(e.indexOf(t,F),1)},getClip:function(){return v.getClip()},getPlaylist:function(){return v},setHttpGet:function(e){typeof e=="function"&&(p.httpGet=e)},setHttpPost:function(e){typeof e=="function"&&(p.httpPost=e)}}),e.extend(this,{adNotify:bt,customNotify:wt,viewNotify:function(e,t){e=e||i.getPixelURL(),e&&w(e,t)}}),ns_.comScore&&(I=ns_.comScore.exports,m=I.c()),o={},d=1,h=x.IDLE,v=new k,g=null,y=!0,T=null,M=0,z(),b=null,l=null,D=!1,P=null,f=0,F=[],i.reset(),t&&i.setLabels(t),n&&i.setPixelURL(n)};return function(t){function s(e,t){return n[i]||u(e,t)}function o(){i=-1;for(var e=0;e<=r;e++)if(n.hasOwnProperty(String(e))){i=e;break}return ns_.StreamSense.activeIndex=i,i}function u(e,t){return e=e||null,t=t||null,e&&typeof e=="object"&&(t=e,e=null),n[++r]=new ns_.StreamSense(t,e),o(),n[r]}function a(){var e=!1,t=i;if(typeof arguments[0]=="number"&&isFinite(arguments[0]))t=arguments[0];else if(arguments[0]instanceof ns_.StreamSense)for(var r in n)if(n.hasOwnProperty(r)&&n[r]===arguments[0]){t=r;break}return n.hasOwnProperty(String(t))&&(e=n[t],delete n[t],e.reset(),o()),e}function f(e){return e=e||{},s().setPlaylist(e),s().getPlaylist()}function l(e,t,n){return e=e||{},typeof t=="number"&&(e.ns_st_cn=t),s().setClip(e,n),s().getClip()}function c(e,t,n){return typeof e=="undefined"?!1:(n=n||null,t=t||{},s().notify(e,t,n))}function h(e){typeof e!="undefined"&&s().setLabels(e)}function p(){return s().getLabels()}function d(e){typeof e!="undefined"&&s().getPlaylist().setLabels(e)}function v(){return s().getPlaylist().getLabels()}function m(e){typeof e!="undefined"&&s().getClip().setLabels(e)}function g(){return s().getClip().getLabels()}function y(e){return s().reset(e||{})}function b(e){return s().getPlaylist().reset(e||{})}function w(e){return s().getClip().reset(e||{})}function E(e){return e=e||{},s().viewNotify(null,e)}function S(e,t){return arguments.length>2&&(e=arguments[1],t=arguments[2]),e=e||{},typeof t=="number"&&(e.ns_st_po=t),s().customNotify(e,t)}function x(){return s().exportState()}function T(e){s().importState(e)}var n={},r=-1,i=-1;e.extend(t,{activeIndex:i,newInstance:u,"new":u,destroyInstance:a,destroy:a,newPlaylist:f,newClip:l,notify:c,setLabels:h,getLabels:p,setPlaylistLabels:d,getPlaylistLabels:v,setClipLabels:m,getClipLabels:g,resetInstance:y,resetPlaylist:b,resetClip:w,viewEvent:E,customEvent:S,exportState:x,importState:T})}(t),t}();return L.AdEvents=T,L.PlayerEvents=S,L.InternalStates=x,L.getPlatformAPI=function(){return p},L}(),ns_.StreamingTag=ns_.StreamingTag||function(){var e=ns_.Utils,t=ns_.StreamSense,n=ns_.StreamSense.PlayerEvents,r=ns_.StreamSense.AdEvents,i=ns_.StreamSense.InternalStates||null,s=ns_.StreamSense.InternalStates!=null;return function(){var r=function(r){function v(){if(!s)return;if(ns_.comScore)c=new t,c.setLabel("ns_st_it","r");else if(e.exists(r)){h=e.isTrue(r.debug);if(e.exists(r.customerC2)&&r.customerC2.length>0){var n=r.secure?"https://sb":"http"+(document.location.href.charAt(4)=="s"?"s://sb":"://b");c=new t,c.setPixelURL(n+".scorecardresearch.com/p?c1=2"),c.setLabel("c2",r.customerC2),c.setLabel("ns_st_it","r")}else h&&console&&console.log("Warning: customerC2 is not provided (or incorrect) in the StreamingTag configuration.")}}function m(t){return e.exists(t)||(t={}),e.exists(t.ns_st_ci)||(t.ns_st_ci="0"),e.exists(t.c3)||(t.c3="*null"),e.exists(t.c4)||(t.c4="*null"),e.exists(t.c6)||(t.c6="*null"),t}function g(e){return u>0&&e>=u?a+=e-u:a=0,a}function y(e){c.getState()!=i.IDLE&&c.getState()!=i.PAUSED?c.notify(n.END,g(e)):c.getState()==i.PAUSED&&c.notify(n.END,a)}function b(e){return w("ns_st_ci",f,e)&&w("c3",f,e)&&w("c4",f,e)&&w("c6",f,e)}function w(t,n,r){if(e.exists(t)&&e.exists(n)&&e.exists(r)){var i=n[t],s=r[t];return e.exists(i)&&e.exists(s)&&i===s}return!1}function E(t,r){y(t),o++;var i={ns_st_cn:o,ns_st_pn:"1",ns_st_tp:"0"};e.extend(i,r),c.setClip(i),f=r,u=t,a=0,c.notify(n.PLAY,a)}function S(t){var r=+(new Date);y(r),o++,t=m(t);var i={ns_st_cn:o,ns_st_pn:"1",ns_st_tp:"1",ns_st_ad:"1"};e.extend(i,t),c.setClip(i),a=0,c.notify(n.PLAY,a),u=r,l=!1}function x(e,t){var r=+(new Date);e=m(e),d==p.None&&(d=t),l&&d==t?b(e)?(c.getClip().setLabels(e),c.getState()!=i.PLAYING&&(u=r,c.notify(n.PLAY,a))):E(r,e):E(r,e),l=!0,d=t}var o=0,u=0,a=0,f=null,l=!1,c=null,h=!1,p={None:0,AudioContent:1,VideoContent:2},d=p.None;e.extend(this,{playAdvertisement:function(){if(!c)return;h&&console&&console.warn("Calling deprecated function 'playAdvertisement'. Please call 'playVideoAdvertisement' or 'playAudioAdvertisement' functions instead.");var e={ns_st_ct:"va"};S(e)},playVideoAdvertisement:function(t){if(!c)return;var n={ns_st_ct:"va"};t&&e.extend(n,t),S(n)},playAudioAdvertisement:function(t){if(!c)return;var n={ns_st_ct:"aa"};t&&e.extend(n,t),S(n)},playContentPart:function(t){if(!c)return;h&&console&&console.warn("Calling deprecated function 'playContentPart'. Please call 'playVideoContentPart' or 'playAudioContentPart' functions instead.");var n={ns_st_ct:"vc"};t&&e.extend(n,t),x(n,p.VideoContent)},playVideoContentPart:function(t){if(!c)return;var n={ns_st_ct:"vc"};t&&e.extend(n,t),x(n,p.VideoContent)},playAudioContentPart:function(t){if(!c)return;var n={ns_st_ct:"ac"};t&&e.extend(n,t),x(n,p.AudioContent)},stop:function(){if(!c)return;var e=+(new Date);c.notify(n.PAUSE,g(e))}}),v()};return function(e){}(r),r}()}();




/********** https://www.aufeminin.com/reloaded/static/preconcat_%2Freloaded%2Fstatic%2FFront%2FComponent%2FvideoPlayer%2Ftrackers%2FcomscoreVideoTracking.js.202002281736.js**********/

/** https://www.aufeminin.com/reloaded/static/Front/Component/videoPlayer/trackers/comscoreVideoTracking.js?v=202002281736 **/
var AufVideo=AufVideo||{};AufVideo.ComscoreTracker=(function(){var initialized=false;try{var streamingTag=new ns_.StreamingTag({customerC2:'6034949'});var metadata={ns_st_ci:'519134',c3:'Aufeminin–Livingly',c4:'aufeminin-Sites',c6:document.domain.split('.')[0],ns_st_st:'*null',ns_st_pu:'*null',ns_st_pr:'*null',ns_st_ep:'*null',ns_st_sn:'*null',ns_st_en:'*null'};}catch(e){afLogger.logError('AufVideo.ComscoreTracker try/catch error');}
function _init(){PubSub.subscribe('video.player.play',function(msg,data){metadata.ns_st_cl=Math.round(data.duration);streamingTag.playVideoContentPart(metadata);});PubSub.subscribe('video.player.pause',function(){streamingTag.stop();});PubSub.subscribe('video.player.complete',function(){streamingTag.stop();});}
return{init:function(){if(initialized){return;}
_init();initialized=true;}};})();




/********** https://www.aufeminin.com/reloaded/static/preconcat_%2Freloaded%2Fstatic%2FFront%2FComponent%2FvideoPlayer%2Ftrackers%2FmediametrieVideoTracking.js.202002281736.js**********/

/** https://www.aufeminin.com/reloaded/static/Front/Component/videoPlayer/trackers/mediametrieVideoTracking.js?v=202002281736 **/
var AufVideo=AufVideo||{};AufVideo.MediametrieTracker=(function(){var contentStreamTag;var initialized=false;var playTimeout;function _init(){PubSub.subscribe('video.player.ready',function(msg,data){var confStreamingAnalytics={serial:240040206230,measure:'streaming',streaming:{diffusion:'replay',callbackPosition:function(){return Math.round(data.position);},playerObj:data.playerInstance,playerName:data.playerName,streamName:'v'+data.videoId}};contentStreamTag=new eStatTag(confStreamingAnalytics);});PubSub.subscribe('video.player.play',function(msg,data){if(typeof contentStreamTag==='undefined'){return;}
var videoDuration=Math.round(data.duration);contentStreamTag.set({streaming:{streamDuration:videoDuration}});playTimeout=setTimeout(function(){contentStreamTag.notifyPlayer('play');},200);});PubSub.subscribe('video.player.pause',function(){if(typeof contentStreamTag==='undefined'){return;}
contentStreamTag.notifyPlayer('pause');});PubSub.subscribe('video.player.complete',function(){if(typeof contentStreamTag==='undefined'){return;}
contentStreamTag.notifyPlayer('stop');});PubSub.subscribe('video.player.seek',function(msg,data){if(typeof contentStreamTag==='undefined'){return;}
clearTimeout(playTimeout);contentStreamTag.notifyPlayer('pause',function(){return Math.round(data.position);});contentStreamTag.notifyPlayer('play',Math.round(data.offset));});}
return{init:function(){if(initialized){return;}
_init();initialized=true;}};})();




/********** https://www.aufeminin.com/reloaded/static/preconcat_https%3A%2F%2Fprof.estat.com%2Fjs%2Fmu-5.1.js.202002281736.js**********/

/** https://prof.estat.com/js/mu-5.1.js?v=202002281736 **/
/*! mu-5.1 27-07-2016 16:12:26 */
var eStatTag=function(a){"use strict";function b(){var a=null;if(Q)a=new window.XDomainRequest;else for(var b=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],c=0;c<b.length;c++)try{a=b[c]();break}catch(d){}return a}function c(a){if(!a)return N=!1,!1;if(a.hasOwnProperty("serial")&&a.serial||(N=!1),(!a.hasOwnProperty("measure")||"page"!==a.measure&&"streaming"!==a.measure)&&(N=!1),"streaming"===a.measure){if(a.hasOwnProperty("streaming")){var b={};b.live=1,b.replay=1,b.timeshifting=1,a.streaming.hasOwnProperty("diffusion")&&b.hasOwnProperty(a.streaming.diffusion)||(N=!1),a.streaming.hasOwnProperty("playerName")&&a.streaming.playerName||(N=!1),"live"!==a.streaming.diffusion&&(a.streaming.hasOwnProperty("playerObj")||(N=!1),a.streaming.hasOwnProperty("callbackPosition")&&a.streaming.callbackPosition||(N=!1))}else N=!1;a.hasOwnProperty("criteria")&&(N=!1),a.hasOwnProperty("segments")&&(N=!1),!a.hasOwnProperty("implementation")||"automatic"!==a.implementation||"live"!==a.streaming.diffusion&&"timeshifting"!==a.streaming.diffusion||(N=!1),a.hasOwnProperty("streaming")&&a.streaming.hasOwnProperty("diffusion")&&"live"!==a.streaming.diffusion&&(a.streaming.hasOwnProperty("playerObj")||(N=!1),a.streaming.hasOwnProperty("callbackPosition")||(N=!1))}return N}function d(){"denied"!==R.streaming.access&&(N=!0);var a=[];a.live=1,a.replay=1,a.timeshifting=1,R.streaming.diffusion&&a[R.streaming.diffusion]||(N=!1),R.streaming.playerName||(N=!1),R.streaming.streamName||(N=!1),"live"!==R.streaming.diffusion&&(R.streaming.playerObj||(N=!1),R.streaming.callbackPosition||(N=!1))}function e(){var a="";return R.domain&&!R.domain.match("&"+P.domain+"=")?"&"+P.domain+"="+m(R.domain):(a="frame"===R.implementation?f():document.domain,a?"&"+P.domain+"="+m(a):a)}function f(){var a="",b=(window.location!==window.parent.location?document.referrer:document.location).replace(Z,"").split("/");if(b[0].match(/:/g)){var c=b[0].split(":");a=c[0]}else a=b[0];return a}function g(){var a="",b=document.referrer;return"redirection"===R.implementation&&(b=h()),"frame"===R.implementation&&(b=f()),b&&(a="&r="+m(b)),a}function h(){for(var a="",b=document.cookie.split(";"),c=0;c<b.length;c++){var d=b[c].split("=");if("cks"===d[0]&&"-1"!==d[1])return a=b[c].substring(4),document.cookie="cks=-1;",a}return i()}function i(){var a="",b=document.URL;return b.match(/__cks_=/g)&&(a=b.match(/__cks_=([^&]+)/g)[0].split("=")[1]),a?a:(R.implementation="",g())}function j(){var a="",b=!0,c=["domain","measure"];if(a+=l("levels"),"streaming"===R.measure){c.push("page");for(var d=["cmsPS","cmsPO","cmsOP","cmsMV","cmsEV"],e=0;e<d.length;e++)a+="&"+d[e]+"="+R.streaming[d[e]]}else c.push("streaming"),c.push("page"),a+=l("segments"),a+=l("criteria");for(var f in P)if("exclude"!==P[f]){for(var g=0;g<c.length;g++)c[g]===f&&(b=!1);b&&(a+=l(f)),b=!0}return a}function k(){if(!N)return"";var a="",b="-yahoo";return b="",a=("undefined"!=typeof R.measureNodesURL?R.measureNodesURL:_)+R.serial+"?v="+S+"&tn=JS"+b+j()+"&sch="+U+"&scw="+V+"&scp="+Y+"&vh="+W+"&vw="+X+"&enc="+$+"&n="+Math.round(1e9*Math.random())+R.domain+R.referer,"undefined"!=typeof ga&&(a+=ga),a}function l(a){if(!(a in R))return"";var b="",c="",d="";if("string"==typeof P[a])c=P[a],b+="&"+c+"="+m(R[a]);else{"undefined"==typeof P[a]?c=P[R.measure][a]:"object"==typeof P[a]&&(c=P[a]);for(d in c)R[a][d]&&"exclude"!==c[d]&&(b+="&"+c[d]+"="+m(R[a][d]))}return b}function m(a){var b="";if(a){encodeURIComponent(a).length;b=encodeURIComponent(a).substring(0,256)}return b}function n(a){if(a){if(ea||"page"===R.measure){"streaming"===R.measure&&(da++,a=a+"&cmsVI="+R.streaming.cmsVI+"&cmsRK="+da,12===R.streaming.cmsPS&&(da=0,ea=!1),"restricted"===R.streaming.access&&(N=!1,ca.stop()));var b=document.createElement("img"),c=a.split("&"),d=c[0].split("?");c.push(d[1]),c.splice(0,1);var e=d[0];c.sort();for(var f="?",g=0;g<c.length;g++)e+=f+c[g],f="&";b.src=e,"streaming"===R.measure&&(R.streaming.cmsOP=R.streaming.cmsPO)}else setTimeout(function(){n(a)},500);return!0}}function o(a){return 12===R.streaming.cmsPS?(n(a),void(fa=null)):(fa||(n(a),window.setTimeout(function(){p()},1e3),fa=[],fa.firstPS=R.streaming.cmsPS),fa.cmsPS=R.streaming.cmsPS,fa.cmsPO=R.streaming.cmsPO,fa.cmsOP=R.streaming.cmsOP,void(fa.cmsVI=R.streaming.cmsVI))}function p(){if(fa&&fa.firstPS!==fa.cmsPS){R.streaming.cmsEV="state",R.streaming.cmsPS=fa.cmsPS,R.streaming.cmsPO=fa.cmsPO,R.streaming.cmsOP=fa.cmsOP,R.streaming.cmsVI=fa.cmsVI;var a=k();n(a)}fa=null}function q(){R.streaming.cmsMV=T,isNaN(R.streaming.cmsPO)&&(R.streaming.cmsPO=0),R.streaming.cmsOP=R.streaming.cmsPO,ba!==[]&&ca.stop(),ca.launch()}function r(){R.streaming.cmsVI=Math.floor(1e17*Math.random()%0x8db076000000000),R.streaming.access="full",C(),"automatic"===R.implementation&&u()}function s(){R.streaming.am_newPosition=w();var a=R.streaming.am_newPosition-R.streaming.am_oldPosition,b=.9;1!==R.streaming.am_isPlaying&&1+b>=a&&a>=1-b?(M("play",Math.round(R.streaming.am_oldPosition)),R.streaming.am_isPlaying=1):1==R.streaming.am_isPlaying&&(a>1+b||0>a?(M("pause",Math.round(R.streaming.am_oldPosition)),M("play",x())):0===a&&(Math.round(R.streaming.streamDuration)<=0||Math.round(R.streaming.am_newPosition)<Math.round(R.streaming.streamDuration))&&(M("pause",x()),R.streaming.am_isPlaying=0)),R.streaming.am_oldPosition=R.streaming.am_newPosition}function t(){delete R.streaming.am_isPlaying,delete R.streaming.am_newPosition,delete R.streaming.am_oldPosition,clearInterval(R.streaming.am_cb),delete R.streaming.am_cb,u()}function u(){R.streaming.am_cb||(R.streaming.am_oldPosition=0,R.streaming.am_newPosition=0,R.streaming.am_isPlaying=-1,R.streaming.am_cb=setInterval(s,1e3))}function v(){ca.stop(),R.streaming.cmsPS=12,o(k()),R.streaming.cmsVI=0,R.streaming.cmsPO=0,R.streaming.cmsOP=0}function w(){var a="0";return"replay"!==R.streaming.diffusion||(a=R.streaming.callbackPosition(R.streaming.playerObj),isNaN(a))?a:a}function x(){return Math.round(w())}function y(){R.streaming.cmsEV="polling",R.streaming.cmsPO=w(),fa&&(R.streaming.cmsPS=fa.firstPS),n(k())}function z(a){da||(R.streaming.access=a[0].split("=")[1]||a[0],_=a[1].split("=")[1]||a[1],"denied"===R.streaming.access?N=!1:(a[2].split("=")[1]?R.streaming.cmsVI=a[2].split("=")[1].replace(/\"/g,""):R.streaming.cmsVI=a[2],ea=!0))}function A(){R.streaming.access="denied",N=!1}function B(){200===O.status?z(O.responseText.split("|")):401===O.status&&A()}function C(){setTimeout(function(){ea=!0},2e3),aa="undefined"!=typeof R.authURL?R.authURL:Z+"auth.estat.com/";var a=aa+R.serial;if(O)Q?(O.onload=B,O.open("GET",a,!0),O.send()):(O.onreadystatechange=function(){4===O.readyState&&B()},O.open("GET",a,!0),O.send());else{var b=function(){var a=[eS_access,eS_host,cmsVI];z(a)},c=document.createElement("script");c.type="text/javascript",c.async=!0,c.src=a+".js";var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d),c.addEventListener?c.addEventListener("load",function(){b()},!1):c.onreadystatechange=function(){c.readyState in{complete:1,loaded:1}&&b()}}}function D(a){var b="";try{b=new window.ActiveXObject(a)}catch(c){}return b}function E(a){var b=D(a);return b?a:""}function F(){return screen.width+"x"+screen.height+"x"+screen.colorDepth}function G(){var a=new RegExp("/[0-9]+(.[0-9]+)*/","g");return navigator.userAgent.replace(a,"")}function H(a){var b="",c="";if(navigator.appName.match("/Internet Explorer/g")){c=["wmplayer.ocx","QuickTime.QuickTime","ShockwaveFlash.ShockwaveFlash","VideoLAN.VLCPlugin","AgControl.AgControl","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","RealPlayer","AcroPDF.PDF","PDF.PdfCtrl","SWCtl.SWCtl"];for(var d=0;d<c.length;d++)b+=E(c[d])+a}else if(c=navigator.plugins)for(var e=0;e<c.length;e++){var f=c[e];b||(b+=a),b+=f.name;for(var g=0;g<f.length;g++)b||(b+=a),b+=f[g].type}return b}function I(){return navigator.cookieEnabled?"Yes":"No"}function J(a){var b,c,d,e,f,g,h,i,j;for(b=3&a.length,c=a.length-b,d=j,j=3735928559,f=3432918353,g=461845907,i=0;c>i;)h=255&a.charCodeAt(i)|(255&a.charCodeAt(++i))<<8|(255&a.charCodeAt(++i))<<16|(255&a.charCodeAt(++i))<<24,++i,h=(65535&h)*f+(((h>>>16)*f&65535)<<16)&4294967295,h=h<<15|h>>>17,h=(65535&h)*g+(((h>>>16)*g&65535)<<16)&4294967295,d^=h,d=d<<13|d>>>19,e=5*(65535&d)+((5*(d>>>16)&65535)<<16)&4294967295,d=(65535&e)+27492+(((e>>>16)+58964&65535)<<16);switch(h=0,b){case 3:h^=(255&a.charCodeAt(i+2))<<16;break;case 2:h^=(255&a.charCodeAt(i+1))<<8;break;case 1:h^=255&a.charCodeAt(i),h=(65535&h)*f+(((h>>>16)*f&65535)<<16)&4294967295,h=h<<16|h>>>16,h=(65535&h)*g+(((h>>>16)*g&65535)<<16)&4294967295,d^=h}return d^=a.length,d^=d>>>16,d=2246822507*(65535&d)+((2246822507*(d>>>16)&65535)<<16)&4294967295,d^=d>>>13,d=3266489909*(65535&d)+((3266489909*(d>>>16)&65535)<<16)&4294967295,d^=d>>>16,d>>>0}function K(){var a="";return a+=F()+"|",a+=G()+"|",a+=H("|")+"|",a+=I(),ga="&ck2="+J(a)}function L(a,b){var c=!1;for(var d in a)if("object"!=typeof a[d])(b||"measure"!==d&&"serial"!==d)&&(R[d]=a[d],c=!0);else for(var f in a[d])R[d]||(R[d]={}),"streamName"===f&&R[d].hasOwnProperty(f)&&""!==R[d][f]||(R[d][f]=a[d][f],c=!0);return R.domain=e(),R.referer=g(),c}function M(a,b){if(!("play"===a|"pause"===a|"stop"===a))return!1;switch(R.streaming.cmsEV="state","undefined"==typeof b||isNaN(b)||"live"===R.streaming.diffusion?R.streaming.cmsPO=x():R.streaming.cmsPO=Math.round(b),a){case"play":if(d(),!N||5===R.streaming.cmsPS)break;R.streaming.cmsPS=5,da||(R.streaming.cmsVI||r(),q()),o(k());break;case"pause":if(!N||7===R.streaming.cmsPS||0===da)break;"replay"!==R.streaming.diffusion?(v(),"timeshifting"===R.streaming.diffusion&&(R.streaming.diffusion="replay")):(R.streaming.cmsPS=7,da||(R.streaming.cmsVI||r(),q()),o(k()));break;case"stop":if(!N||!da)break;v();break;default:return!1}return!0}var N=!0;c(a);var O,P={measure:{page:"exclude",streaming:"exclude"},serial:"exclude",implementation:"exclude",authURL:"exclude",measureNodesURL:"exclude",crmID:"crmid",domain:"dom",master:"g",wrapper:"w",page:{levels:{level_1:"c",level_2:"p",level_3:"l3",level_4:"l4"},criteria:{critere_1:"c1",critere_2:"c2",critere_3:"c3",critere_4:"c4",critere_5:"c5"},segments:{segment_1:"seg1",segment_2:"seg2",segment_3:"seg3",segment_4:"seg4",segment_5:"seg5",segment_6:"seg6",segment_7:"seg7",segment_8:"seg8"}},streaming:{levels:{level_1:"cmsS3",level_2:"cmsS2",level_3:"cmsS1",level_4:"cmsS4",level_5:"cmsS5"},diffusion:"exclude",streamName:"cmsSN",streamURL:"cmsME",streamGenre:"cmsGR",streamDuration:"cmsDU",playerName:"cmsPL",playerVersion:"cmsPV"},newLevels:{newLevel_1:"ml1",newLevel_2:"ml2",newLevel_3:"ml3",newLevel_4:"ml4",newLevel_5:"ml5",newLevel_6:"ml6",newLevel_7:"ml7",newLevel_8:"ml8",newLevel_9:"ml9",newLevel_10:"ml10",newLevel_11:"ml11"},mediaInfo:{mediaContentId:"msCid",mediaDiffMode:"msDm",mediaChannel:"msCh"},netMeasurement:"miCh"},Q=!!window.XDomainRequest,R={},S="5.1.11",T=5,U=screen.height,V=screen.width,W=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0,X=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0,Y=screen.colorDepth,Z="https:"===document.location.protocol?"https://":"http://",$=document.characterSet||document.charset,_=Z+"prof.estat.com/m/web/",aa=Z+"auth.estat.com/";O=b();var ba=[],ca={launch:function(){ba[0]=window.setTimeout(function(){y()},1e4),ba[1]=window.setTimeout(function(){y()},2e4),ba[2]=window.setTimeout(function(){y()},4e4),ba[3]=window.setInterval(function(){y()},6e4)},stop:function(){for(var a=0;3>a;a++)window.clearTimeout(ba[a]);window.clearInterval(ba[3]),ba=[]}},da=0,ea=!1,fa=null,ga=K();L(a,!0),"streaming"===R.measure&&N&&r();var ha={post:function(){return"page"!==R.measure?!1:(n(k()),!0)},set:function(a){var b=!1;return b=L(a)},notifyPlayer:function(a,b){return"streaming"!==R.measure?!1:"automatic"===R.implementation&&"stop"!==a?!1:("automatic"===R.implementation&&(b||(b=x()),t()),M(a,b)?!0:void 0)}};return ha};




/********** https://www.aufeminin.com/reloaded/static/preconcat_%2Freloaded%2Fstatic%2FFront%2FComponent%2FvideoPlayer%2Ftrackers%2FGAVideoTracking.js.202002281736.js**********/

/** https://www.aufeminin.com/reloaded/static/Front/Component/videoPlayer/trackers/GAVideoTracking.js?v=202002281736 **/
var AufVideo=AufVideo||{};AufVideo.GATracker=(function(){var initialized=false;function _getLocation(){return(window.location!==window.parent.location)?document.referrer:document.location.href;}
function _getPercentagePlayedValue(data){return(data.position&&data.duration)?Math.round((data.position*100/data.duration)*100)/100:0;}
var _trackedEvents={};function _trackEvent(category,action,data,sampling,nonInteraction,multipleTrackingAllow){var playerId=data.playerId||data.player.id;var value=data.player.getContext()||_getLocation();var nonInteraction=(typeof nonInteraction==='undefined')?true:nonInteraction;var multipleTrackingAllow=(typeof multipleTrackingAllow==='undefined')?false:multipleTrackingAllow;_trackedEvents[playerId]=_trackedEvents[playerId]||{};if(!multipleTrackingAllow&&_trackedEvents[playerId][category+'_'+action]){return;}
_trackedEvents[playerId][category+'_'+action]=true;if(typeof window.af_ua_trackEvent==='function'){af_ua_trackEvent(category,action,value,_getPercentagePlayedValue(data),nonInteraction,'',sampling);}else{afLogger.logError('af_ua_trackEvent is not a function');}}
function _init(){PubSub.subscribe('video.player.opportunities',function(msg,data){_trackEvent('Video Plays',data.file,data);});PubSub.subscribe('video.player.pause',function(msg,data){_trackEvent('AF_Video Pause','pause',data,5,false,true);});PubSub.subscribe('video.player.complete',function(msg,data){_trackEvent('Video Completes',data.file,data);});PubSub.subscribe('video.player.end',function(msg,data){_trackEvent('Percentage Played',data.file,data,10);});PubSub.subscribe('video.ad.start',function(msg,data){_trackEvent('AF_preroll',document.location.href,data);});PubSub.subscribe('video.player.sticky.stick',function(msg,data){_trackEvent('AF_VideoSticky','stick',data,10);});PubSub.subscribe('video.player.sticky.blocked',function(msg,data){_trackEvent('AF_VideoSticky','blocked',data,10);});PubSub.subscribe('video.player.sticky.close',function(msg,data){_trackEvent('AF_VideoSticky','close',data,10);});PubSub.subscribe('video.player.sticky.gotoplayer',function(msg,data){_trackEvent('AF_VideoSticky','gotoplayer',data,10,false,true);});}
return{init:function(){if(initialized){return;}
_init();initialized=true;}};})();




/********** https://www.aufeminin.com/reloaded/static/preconcat_%2Freloaded%2Fstatic%2FFront%2FComponent%2FvideoPlayer%2Fplayers%2Fvideo-js.js.202002281736.js**********/

/** https://www.aufeminin.com/reloaded/static/Front/Component/videoPlayer/players/video-js.js?v=202002281736 **/
var AufVideo=AufVideo||{};AufVideo.VideoJS=(function(){var STICKY_BLOCKED_DURATION=60*24*2;var player=function(opts){this.opts=opts;this.authStickPosition={'desktop':['bottom-right','top-right'],'mobile':['bottom-right','top-right','top']};this.isMobile=af_isMobile();this.logger=this.opts.logger;};player.prototype={constructor:player,init:function(){if(!window.videojs||!this.opts){this.publish('video.player.setupError',{message:'window.videojs or options not defined'});return;}
if(this.opts.swf){videojs.options.flash.swf=this.opts.swf;}
this.adPlayer=this.opts.adPlayer;this.context=this.opts.context;this.id=this.opts.id;this.relatedContents=this.opts.relatedContents;this.revolverData=this.opts.revolverData;this.setup=this.opts.setup;this.shortUrl=this.opts.shortUrl;this.startOnSight=this.opts.startOnSight;this.videoId=this.opts.videoId;this.stickyBlocked=(af_getCookie('af_video_sticky_blocked')==='1');this.stickyBlockedDuration=(typeof this.opts.stickyBlockedDuration!=='undefined')?this.opts.stickyBlockedDuration:STICKY_BLOCKED_DURATION;this.stickTo=this.opts.stickTo;if(this.stickTo==='ab-test'){this.stickTo=this.getAbTestStickPosition();}
this.fixWidth=this.opts.fixWidth;this.isSticky=false;this.autoplayBlocked=true;this.name='video-js';this.postRollDone=true;this.playerInstance=videojs(this.id,this.setup);this.initListeners();this.initCollisions();if(this.stickTo==='top'){var that=this;var container=this.getContainer();var headerContent=document.getElementsByTagName('header')[0];var stickyBannerATF=document.getElementById('sticky-banner_atf');PubSub.subscribe('mainNav.hideNav',function(){if(that.isSticky){var offset=0;if(stickyBannerATF&&stickyBannerATF.offsetHeight>0){offset+=stickyBannerATF.offsetHeight;}
container.style.top=offset+'px';}});PubSub.subscribe('mainNav.showNav',function(){if(that.isSticky){var offset=0;if(headerContent&&headerContent.offsetHeight>0){offset+=headerContent.offsetHeight;}
if(stickyBannerATF&&stickyBannerATF.offsetHeight>0){offset+=stickyBannerATF.offsetHeight;}
container.style.top=offset+'px';}});}
window.HELP_IMPROVE_VIDEOJS=false;this.publish('video.player.init');},logError:function(message,category){return this.logger.logError(message,category);},logEvent:function(event,data){return this.logger.logEvent(event,data);},logOpportunities:function(){if(this.opportunitiesLogged)return;this.opportunitiesLogged=true;this.publish('video.player.opportunities',{duration:this.getDuration(),file:this.getFile()});},publish:function(event,data){data=data||{};data.player=this;PubSub.publish(event,data);},initListeners:function(){var that=this;this.playerInstance.on('error',function(){var error=this.player().error();that.publish('video.player.error',{message:error.message});});this.playerInstance.on('ready',function(){that.autoplayBlocked=false;that.initEvents();that.publish('video.player.ready',{playerName:that.name,playerInstance:this,position:that.getPosition(),videoId:that.videoId});if(that.getControls()){this.controlBar.playToggle.on(this,['tap','click'],function(){that.autoplayBlocked=that.isPaused();});}});this.playerInstance.on('play',function(){if(that.getControls()&&af_isIOS()){var volumePanel=this.controlBar.volumePanel;volumePanel.el_.classList.remove('vjs-hidden');volumePanel.muteToggle.el_.classList.remove('vjs-hidden');volumePanel.volumeControl.el_.classList.remove('vjs-hidden');}
var videoDuration=that.getDuration();if(isNaN(videoDuration)){this.on('loadedmetadata',function(){that.onPlayCb();});}else{that.onPlayCb(videoDuration);}});this.playerInstance.on('pause',function(){that.publish('video.player.pause');});this.playerInstance.on('ended',function(){that.autoplayBlocked=true;that.publish('video.player.complete',{file:that.getFile()});});this.playerInstance.on('seeking',function(){that.publish('video.player.seek',{offset:0,position:that.getPosition()});});this.playerInstance.on('timeupdate',function(){that.publish('video.player.timeupdate',{duration:that.getDuration(),position:that.getPosition()});});},initEvents:function(){var that=this;af_addEvent(window,'beforeunload',function(){that.publish('video.player.end',{duration:that.getDuration(),file:that.getFile(),position:that.getPosition()});},false);},onPlayCb:function(duration){this.publish('video.player.play',{duration:duration||this.getDuration(),file:this.getFile()});this.logOpportunities();},changeSrc:function(sources){this.playerInstance.src(sources);},getContainer:function(){return(typeof this.playerInstance.contentEl==='function')?this.playerInstance.contentEl():document.getElementById(this.id);},getContext:function(){return this.context;},getControls:function(){return this.playerInstance.controls();},setControls:function(value){return this.playerInstance.controls(value);},getDuration:function(){return(typeof this.playerInstance.duration==='function')?this.playerInstance.duration():0;},getFile:function(){return(typeof this.playerInstance.currentSrc==='function')?this.playerInstance.currentSrc():'';},getPlayerInstance:function(){return this.playerInstance;},getPosition:function(){return(typeof this.playerInstance.currentTime==='function')?this.playerInstance.currentTime():0;},getRelatedContents:function(){return this.relatedContents;},getRevolverData:function(){return this.revolverData;},getShortUrl:function(){return this.shortUrl;},getHeight:function(){var boundingRect=this.getContainer().getBoundingClientRect()||{};return parseInt(boundingRect.height)||this.playerInstance.height();},getWidth:function(){var boundingRect=this.getContainer().getBoundingClientRect()||{};return parseInt(boundingRect.width)||this.playerInstance.width();},mute:function(){return this.playerInstance.muted(true);},unmute:function(){return this.playerInstance.muted(false);},pause:function(value){if(this.isPlaying()){return this.playerInstance.pause(value);}},play:function(value){if(!this.isPlaying()){var play=this.playerInstance.play(value);if(play&&typeof play.then==='function'){var that=this;play.then(function(){},function(error){if(error){that.publish('video.player.error',{message:error.message});}});}
return play;}},onAdReady:function(data){if(data.videoBreak==='postroll'){this.postRollDone=false;}},onAdEnd:function(data){if(data.videoBreak==='postroll'){this.postRollDone=true;}},isAutoplay:function(){return(this.hasStartOnSight()||this.setup.autoplay);},hasStartOnSight:function(){return(typeof this.startOnSight!=='undefined'&&this.startOnSight);},isIdle:function(){return false;},isPaused:function(){return(this.playerInstance.paused());},isPlaying:function(){return!this.isPaused();},isPostrollDone:function(){return this.postRollDone;},canStick:function(){if(this.stickyDisabled){return false;}
if(this.isMobile){return this.authStickPosition.mobile.indexOf(this.stickTo)!==-1;}else{return this.authStickPosition.desktop.indexOf(this.stickTo)!==-1;}},stick:function(){if(this.isSticky){return;}
if(this.stickyBlocked){if(!this.stickyBlockedLogged){this.stickyBlockedLogged=true;this.publish('video.player.sticky.blocked',{duration:this.getDuration(),file:this.getFile(),position:this.getPosition()});}
return;}
var container=this.getContainer();var that=this;var containerPos=af_findPos(container);if(containerPos.h===0&&containerPos.w===0){return;}
this.stickTop=containerPos.t;if(this.stickTop>=af_windowSize().t){return;}
if(container.classList.contains("vjs-fill")){container.classList.remove('vjs-fill');}
if(container.classList.contains("vjs-16-9")){container.classList.remove('vjs-16-9');}
container.classList.remove('vjs-fluid');if(this.stickTo==='bottom-right'||this.stickTo==='top-right'||this.stickTo==='top'){var stickyCssClass='sticky-'+this.stickTo;container.classList.add(stickyCssClass);if(this.fixWidth){var fixStickyCssClass='fix-width-'+stickyCssClass;container.classList.add(fixStickyCssClass);}
if(this.stickTo.substring(0,3)==='top'){this.checkTopCollisions(true);}else{this.checkBottomCollisions(true);}}
if(!this.stickyBgDiv){this.stickyBgDiv=document.createElement('div');this.stickyBgDiv.className='video-js-sticky-bg';container.parentNode.insertBefore(this.stickyBgDiv,container);}else{this.stickyBgDiv.style.display='';}
if(!this.stickyCloseBtn){this.stickyCloseBtn=document.createElement('a');this.stickyCloseBtn.href='#';this.stickyCloseBtn.className='video-js-sticky-custom-btn close';af_addEvent(this.stickyCloseBtn,'click',function(e){that.stickyBlocked=true;af_setCookie('af_video_sticky_blocked','1',that.stickyBlockedDuration);that.unstick(true);e.preventDefault();that.publish('video.player.sticky.close',{duration:that.getDuration(),file:that.getFile(),position:that.getPosition()});},false);container.insertBefore(this.stickyCloseBtn,container.firstChild);}else{this.stickyCloseBtn.style.display='';}
if(!this.stickyGoPlayerBtn){this.stickyGoPlayerBtn=document.createElement('a');this.stickyGoPlayerBtn.href='#';this.stickyGoPlayerBtn.className='video-js-sticky-custom-btn gotoplayer af-btn-v2 af-btn-v2-center';this.stickyGoPlayerBtn.innerHTML='<i class="icon icon-arrow-up"></i>';af_addEvent(this.stickyGoPlayerBtn,'click',function(e){that.unstick(true);that.scrollToPlayer();e.preventDefault();that.publish('video.player.sticky.gotoplayer',{duration:that.getDuration(),file:that.getFile(),position:that.getPosition()});},false);container.insertBefore(this.stickyGoPlayerBtn,container.stickyCloseBtn);}else{this.stickyGoPlayerBtn.style.display='';}
this.mute();this.isSticky=true;this.publish('video.player.sticky.stick',{duration:this.getDuration(),file:this.getFile(),position:this.getPosition()});},scrollToPlayer:function(){window.scrollTo({top:document.getElementById(this.id).offsetTop-40,behavior:'smooth'});},unstick:function(force,disable){this.stickyDisabled=disable||false;if(!this.isSticky||(this.stickTop<af_windowSize().t&&!force)){return;}
var container=this.getContainer();container.classList.add('vjs-fill');container.classList.add('vjs-fluid');if(this.setup.aspectRatio=="16:9"){container.classList.add('vjs-16-9');}
container.style.top='';if(this.stickTo==='bottom-right'||this.stickTo==='top-right'||this.stickTo==='top'){var stickyCssClass='sticky-'+this.stickTo;container.classList.remove(stickyCssClass);if(this.fixWidth){var fixStickyCssClass='fix-width-'+stickyCssClass;container.classList.remove(fixStickyCssClass);}
if(this.stickTo.substring(0,3)==='top'){this.resetTopCollisions();}else{this.resetBottomCollisions();}}
if(this.stickyBgDiv){this.stickyBgDiv.style.display='none';}
if(this.stickyCloseBtn){this.stickyCloseBtn.style.display='none';}
if(this.stickyGoPlayerBtn){this.stickyGoPlayerBtn.style.display='none';}
this.isSticky=false;this.publish('video.player.sticky.unstick',{duration:this.getDuration(),file:this.getFile(),position:this.getPosition()});},initCollisions:function(){if(!this.collisionsInitialized){this.collisionsInitialized=true;var that=this;this.tx=0;this.ty=0;this.mrtnSelectionBoxY=0;this.mrtnNotyY=0;PubSub.subscribe('mrtn-selection-box:open',function(){that.mrtnSelectionBoxY=110;that.checkBottomCollisions();});PubSub.subscribe('mrtn-selection-box:close',function(){that.mrtnSelectionBoxY=0;that.checkBottomCollisions();});var _getNotyY=function(){var notyContainer=document.getElementById('noty-container');var notyPos=af_findPos(notyContainer);return(notyPos.b>0?notyPos.b+10:0);};PubSub.subscribe('noty:add',function(){that.mrtnNotyY=_getNotyY();that.checkBottomCollisions();});PubSub.subscribe('noty:remove',function(){that.mrtnNotyY=0;that.checkBottomCollisions();});this.mrtnNotyY=_getNotyY();}},movePlayer:function(tx,ty){if(this.tx===tx&&this.ty===ty){return;}
this.tx=tx;this.ty=ty;af_cssUtils.translate(this.getContainer(),this.tx,this.ty,0);},checkTopCollisions:function(force){if(!force&&!this.isSticky)return;this.movePlayer(0,'-'+Math.max(this.mrtnSelectionBoxY,this.mrtnNotyY)+'px');},checkBottomCollisions:function(force){if(!force&&!this.isSticky)return;this.movePlayer(0,'-'+Math.max(this.mrtnSelectionBoxY,this.mrtnNotyY)+'px');},resetTopCollisions:function(){this.movePlayer(0,0);},resetBottomCollisions:function(){this.movePlayer(0,0);},getAbTestStickPosition:function(){var segment=afSession.getSegment();if(this.context==='story video'){if(this.isMobile&&(segment%2==0)){return'top';}}
return'bottom-right';}};return player;})();




/********** https://www.aufeminin.com/reloaded/static/preconcat_%2Freloaded%2Fstatic%2FFront%2FVendor%2Fvideo-js%2Fvideo-js-6.13.0%2Fvideo.js.202002281736.js**********/

/** https://www.aufeminin.com/reloaded/static/Front/Vendor/video-js/video-js-6.13.0/video.js?v=202002281736 **/
(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?module.exports=factory():typeof define==='function'&&define.amd?define(factory):(global.videojs=factory());}(this,(function(){var version="6.13.0";var commonjsGlobal=typeof window!=='undefined'?window:typeof global!=='undefined'?global:typeof self!=='undefined'?self:{};function createCommonjsModule(fn,module){return module={exports:{}},fn(module,module.exports),module.exports;}
var win;if(typeof window!=="undefined"){win=window;}else if(typeof commonjsGlobal!=="undefined"){win=commonjsGlobal;}else if(typeof self!=="undefined"){win=self;}else{win={};}
var window_1=win;var empty={};var empty$1=(Object.freeze||Object)({'default':empty});var minDoc=(empty$1&&empty)||empty$1;var topLevel=typeof commonjsGlobal!=='undefined'?commonjsGlobal:typeof window!=='undefined'?window:{};var doccy;if(typeof document!=='undefined'){doccy=document;}else{doccy=topLevel['__GLOBAL_DOCUMENT_CACHE@4'];if(!doccy){doccy=topLevel['__GLOBAL_DOCUMENT_CACHE@4']=minDoc;}}
var document_1=doccy;var USER_AGENT=window_1.navigator&&window_1.navigator.userAgent||'';var webkitVersionMap=/AppleWebKit\/([\d.]+)/i.exec(USER_AGENT);var appleWebkitVersion=webkitVersionMap?parseFloat(webkitVersionMap.pop()):null;var IS_IPAD=/iPad/i.test(USER_AGENT);var IS_IPHONE=/iPhone/i.test(USER_AGENT)&&!IS_IPAD;var IS_IPOD=/iPod/i.test(USER_AGENT);var IS_IOS=IS_IPHONE||IS_IPAD||IS_IPOD;var IOS_VERSION=function(){var match=USER_AGENT.match(/OS (\d+)_/i);if(match&&match[1]){return match[1];}
return null;}();var IS_ANDROID=/Android/i.test(USER_AGENT);var ANDROID_VERSION=function(){var match=USER_AGENT.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!match){return null;}
var major=match[1]&&parseFloat(match[1]);var minor=match[2]&&parseFloat(match[2]);if(major&&minor){return parseFloat(match[1]+'.'+match[2]);}else if(major){return major;}
return null;}();var IS_OLD_ANDROID=IS_ANDROID&&/webkit/i.test(USER_AGENT)&&ANDROID_VERSION<2.3;var IS_NATIVE_ANDROID=IS_ANDROID&&ANDROID_VERSION<5&&appleWebkitVersion<537;var IS_FIREFOX=/Firefox/i.test(USER_AGENT);var IS_EDGE=/Edge/i.test(USER_AGENT);var IS_CHROME=!IS_EDGE&&(/Chrome/i.test(USER_AGENT)||/CriOS/i.test(USER_AGENT));var CHROME_VERSION=function(){var match=USER_AGENT.match(/(Chrome|CriOS)\/(\d+)/);if(match&&match[2]){return parseFloat(match[2]);}
return null;}();var IS_IE8=/MSIE\s8\.0/.test(USER_AGENT);var IE_VERSION=function(){var result=/MSIE\s(\d+)\.\d/.exec(USER_AGENT);var version=result&&parseFloat(result[1]);if(!version&&/Trident\/7.0/i.test(USER_AGENT)&&/rv:11.0/.test(USER_AGENT)){version=11.0;}
return version;}();var IS_SAFARI=/Safari/i.test(USER_AGENT)&&!IS_CHROME&&!IS_ANDROID&&!IS_EDGE;var IS_ANY_SAFARI=(IS_SAFARI||IS_IOS)&&!IS_CHROME;var TOUCH_ENABLED=isReal()&&('ontouchstart'in window_1||window_1.navigator.maxTouchPoints||window_1.DocumentTouch&&window_1.document instanceof window_1.DocumentTouch);var BACKGROUND_SIZE_SUPPORTED=isReal()&&'backgroundSize'in window_1.document.createElement('video').style;var browser=(Object.freeze||Object)({IS_IPAD:IS_IPAD,IS_IPHONE:IS_IPHONE,IS_IPOD:IS_IPOD,IS_IOS:IS_IOS,IOS_VERSION:IOS_VERSION,IS_ANDROID:IS_ANDROID,ANDROID_VERSION:ANDROID_VERSION,IS_OLD_ANDROID:IS_OLD_ANDROID,IS_NATIVE_ANDROID:IS_NATIVE_ANDROID,IS_FIREFOX:IS_FIREFOX,IS_EDGE:IS_EDGE,IS_CHROME:IS_CHROME,CHROME_VERSION:CHROME_VERSION,IS_IE8:IS_IE8,IE_VERSION:IE_VERSION,IS_SAFARI:IS_SAFARI,IS_ANY_SAFARI:IS_ANY_SAFARI,TOUCH_ENABLED:TOUCH_ENABLED,BACKGROUND_SIZE_SUPPORTED:BACKGROUND_SIZE_SUPPORTED});var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};var classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}};var inherits=function(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}
subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;};var possibleConstructorReturn=function(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}
return call&&(typeof call==="object"||typeof call==="function")?call:self;};var taggedTemplateLiteralLoose=function(strings,raw){strings.raw=raw;return strings;};var toString=Object.prototype.toString;var keys=function keys(object){return isObject(object)?Object.keys(object):[];};function each(object,fn){keys(object).forEach(function(key){return fn(object[key],key);});}
function reduce(object,fn){var initial=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;return keys(object).reduce(function(accum,key){return fn(accum,object[key],key);},initial);}
function assign(target){for(var _len=arguments.length,sources=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){sources[_key-1]=arguments[_key];}
if(Object.assign){return Object.assign.apply(Object,[target].concat(sources));}
sources.forEach(function(source){if(!source){return;}
each(source,function(value,key){target[key]=value;});});return target;}
function isObject(value){return!!value&&(typeof value==='undefined'?'undefined':_typeof(value))==='object';}
function isPlain(value){return isObject(value)&&toString.call(value)==='[object Object]'&&value.constructor===Object;}
var history=[];var LogByTypeFactory=function LogByTypeFactory(name,log){return function(type,level,args,stringify){var lvl=log.levels[level];var lvlRegExp=new RegExp('^('+lvl+')$');if(type!=='log'){args.unshift(type.toUpperCase()+':');}
args.unshift(name+':');if(history){history.push([].concat(args));}
if(!window_1.console){return;}
var fn=window_1.console[type];if(!fn&&type==='debug'){fn=window_1.console.info||window_1.console.log;}
if(!fn||!lvl||!lvlRegExp.test(type)){return;}
if(stringify){args=args.map(function(a){if(isObject(a)||Array.isArray(a)){try{return JSON.stringify(a);}catch(x){return String(a);}}
return String(a);}).join(' ');}
if(!fn.apply){fn(args);}else{fn[Array.isArray(args)?'apply':'call'](window_1.console,args);}};};function createLogger$1(name){var level='info';var logByType=void 0;var log=function log(){var stringify=log.stringify||IE_VERSION&&IE_VERSION<11;for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}
logByType('log',level,args,stringify);};logByType=LogByTypeFactory(name,log);log.createLogger=function(subname){return createLogger$1(name+': '+subname);};log.levels={all:'debug|log|warn|error',off:'',debug:'debug|log|warn|error',info:'log|warn|error',warn:'warn|error',error:'error',DEFAULT:level};log.level=function(lvl){if(typeof lvl==='string'){if(!log.levels.hasOwnProperty(lvl)){throw new Error('"'+lvl+'" in not a valid log level');}
level=lvl;}
return level;};log.history=function(){return history?[].concat(history):[];};log.history.filter=function(fname){return(history||[]).filter(function(historyItem){return new RegExp('.*'+fname+'.*').test(historyItem[0]);});};log.history.clear=function(){if(history){history.length=0;}};log.history.disable=function(){if(history!==null){history.length=0;history=null;}};log.history.enable=function(){if(history===null){history=[];}};log.error=function(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}
return logByType('error',level,args);};log.warn=function(){for(var _len3=arguments.length,args=Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3];}
return logByType('warn',level,args);};log.debug=function(){for(var _len4=arguments.length,args=Array(_len4),_key4=0;_key4<_len4;_key4++){args[_key4]=arguments[_key4];}
return logByType('debug',level,args);};return log;}
var log=createLogger$1('VIDEOJS');var createLogger=log.createLogger;function clean(s){return s.replace(/\n\r?\s*/g,'')}
var tsml=function tsml(sa){var s='',i=0;for(;i<arguments.length;i++)
s+=clean(sa[i])+(arguments[i+1]||'');return s};function computedStyle(el,prop){if(!el||!prop){return'';}
if(typeof window_1.getComputedStyle==='function'){var cs=window_1.getComputedStyle(el);return cs?cs[prop]:'';}
return el.currentStyle[prop]||'';}
var _templateObject=taggedTemplateLiteralLoose(['Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set ',' to ','.'],['Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set ',' to ','.']);function isNonBlankString(str){return typeof str==='string'&&/\S/.test(str);}
function throwIfWhitespace(str){if(/\s/.test(str)){throw new Error('class has illegal whitespace characters');}}
function classRegExp(className){return new RegExp('(^|\\s)'+className+'($|\\s)');}
function isReal(){return(document_1===window_1.document&&typeof document_1.createElement!=='undefined');}
function isEl(value){return isObject(value)&&value.nodeType===1;}
function isInFrame(){try{return window_1.parent!==window_1.self;}catch(x){return true;}}
function createQuerier(method){return function(selector,context){if(!isNonBlankString(selector)){return document_1[method](null);}
if(isNonBlankString(context)){context=document_1.querySelector(context);}
var ctx=isEl(context)?context:document_1;return ctx[method]&&ctx[method](selector);};}
function createEl(){var tagName=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'div';var properties=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var attributes=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var content=arguments[3];var el=document_1.createElement(tagName);Object.getOwnPropertyNames(properties).forEach(function(propName){var val=properties[propName];if(propName.indexOf('aria-')!==-1||propName==='role'||propName==='type'){log.warn(tsml(_templateObject,propName,val));el.setAttribute(propName,val);}else if(propName==='textContent'){textContent(el,val);}else{el[propName]=val;}});Object.getOwnPropertyNames(attributes).forEach(function(attrName){el.setAttribute(attrName,attributes[attrName]);});if(content){appendContent(el,content);}
return el;}
function textContent(el,text){if(typeof el.textContent==='undefined'){el.innerText=text;}else{el.textContent=text;}
return el;}
function prependTo(child,parent){if(parent.firstChild){parent.insertBefore(child,parent.firstChild);}else{parent.appendChild(child);}}
function hasClass(element,classToCheck){throwIfWhitespace(classToCheck);if(element.classList){return element.classList.contains(classToCheck);}
return classRegExp(classToCheck).test(element.className);}
function addClass(element,classToAdd){if(element.classList){element.classList.add(classToAdd);}else if(!hasClass(element,classToAdd)){element.className=(element.className+' '+classToAdd).trim();}
return element;}
function removeClass(element,classToRemove){if(element.classList){element.classList.remove(classToRemove);}else{throwIfWhitespace(classToRemove);element.className=element.className.split(/\s+/).filter(function(c){return c!==classToRemove;}).join(' ');}
return element;}
function toggleClass(element,classToToggle,predicate){var has=hasClass(element,classToToggle);if(typeof predicate==='function'){predicate=predicate(element,classToToggle);}
if(typeof predicate!=='boolean'){predicate=!has;}
if(predicate===has){return;}
if(predicate){addClass(element,classToToggle);}else{removeClass(element,classToToggle);}
return element;}
function setAttributes(el,attributes){Object.getOwnPropertyNames(attributes).forEach(function(attrName){var attrValue=attributes[attrName];if(attrValue===null||typeof attrValue==='undefined'||attrValue===false){el.removeAttribute(attrName);}else{el.setAttribute(attrName,attrValue===true?'':attrValue);}});}
function getAttributes(tag){var obj={};var knownBooleans=','+'autoplay,controls,playsinline,loop,muted,default,defaultMuted'+',';if(tag&&tag.attributes&&tag.attributes.length>0){var attrs=tag.attributes;for(var i=attrs.length-1;i>=0;i--){var attrName=attrs[i].name;var attrVal=attrs[i].value;if(typeof tag[attrName]==='boolean'||knownBooleans.indexOf(','+attrName+',')!==-1){attrVal=attrVal!==null?true:false;}
obj[attrName]=attrVal;}}
return obj;}
function getAttribute(el,attribute){return el.getAttribute(attribute);}
function setAttribute(el,attribute,value){el.setAttribute(attribute,value);}
function removeAttribute(el,attribute){el.removeAttribute(attribute);}
function blockTextSelection(){document_1.body.focus();document_1.onselectstart=function(){return false;};}
function unblockTextSelection(){document_1.onselectstart=function(){return true;};}
function getBoundingClientRect(el){if(el&&el.getBoundingClientRect&&el.parentNode){var rect=el.getBoundingClientRect();var result={};['bottom','height','left','right','top','width'].forEach(function(k){if(rect[k]!==undefined){result[k]=rect[k];}});if(!result.height){result.height=parseFloat(computedStyle(el,'height'));}
if(!result.width){result.width=parseFloat(computedStyle(el,'width'));}
return result;}}
function findPosition(el){var box=void 0;if(el.getBoundingClientRect&&el.parentNode){box=el.getBoundingClientRect();}
if(!box){return{left:0,top:0};}
var docEl=document_1.documentElement;var body=document_1.body;var clientLeft=docEl.clientLeft||body.clientLeft||0;var scrollLeft=window_1.pageXOffset||body.scrollLeft;var left=box.left+scrollLeft-clientLeft;var clientTop=docEl.clientTop||body.clientTop||0;var scrollTop=window_1.pageYOffset||body.scrollTop;var top=box.top+scrollTop-clientTop;return{left:Math.round(left),top:Math.round(top)};}
function getPointerPosition(el,event){var position={};var box=findPosition(el);var boxW=el.offsetWidth;var boxH=el.offsetHeight;var boxY=box.top;var boxX=box.left;var pageY=event.pageY;var pageX=event.pageX;if(event.changedTouches){pageX=event.changedTouches[0].pageX;pageY=event.changedTouches[0].pageY;}
position.y=Math.max(0,Math.min(1,(boxY-pageY+boxH)/boxH));position.x=Math.max(0,Math.min(1,(pageX-boxX)/boxW));return position;}
function isTextNode(value){return isObject(value)&&value.nodeType===3;}
function emptyEl(el){while(el.firstChild){el.removeChild(el.firstChild);}
return el;}
function normalizeContent(content){if(typeof content==='function'){content=content();}
return(Array.isArray(content)?content:[content]).map(function(value){if(typeof value==='function'){value=value();}
if(isEl(value)||isTextNode(value)){return value;}
if(typeof value==='string'&&/\S/.test(value)){return document_1.createTextNode(value);}}).filter(function(value){return value;});}
function appendContent(el,content){normalizeContent(content).forEach(function(node){return el.appendChild(node);});return el;}
function insertContent(el,content){return appendContent(emptyEl(el),content);}
function isSingleLeftClick(event){if(event.button===undefined&&event.buttons===undefined){return true;}
if(event.button===0&&event.buttons===undefined){return true;}
if(IE_VERSION===9){return true;}
if(event.button!==0||event.buttons!==1){return false;}
return true;}
var $=createQuerier('querySelector');var $$=createQuerier('querySelectorAll');var Dom=(Object.freeze||Object)({isReal:isReal,isEl:isEl,isInFrame:isInFrame,createEl:createEl,textContent:textContent,prependTo:prependTo,hasClass:hasClass,addClass:addClass,removeClass:removeClass,toggleClass:toggleClass,setAttributes:setAttributes,getAttributes:getAttributes,getAttribute:getAttribute,setAttribute:setAttribute,removeAttribute:removeAttribute,blockTextSelection:blockTextSelection,unblockTextSelection:unblockTextSelection,getBoundingClientRect:getBoundingClientRect,findPosition:findPosition,getPointerPosition:getPointerPosition,isTextNode:isTextNode,emptyEl:emptyEl,normalizeContent:normalizeContent,appendContent:appendContent,insertContent:insertContent,isSingleLeftClick:isSingleLeftClick,$:$,$$:$$});var _guid=1;function newGUID(){return _guid++;}
var elData={};var elIdAttr='vdata'+new Date().getTime();function getData(el){var id=el[elIdAttr];if(!id){id=el[elIdAttr]=newGUID();}
if(!elData[id]){elData[id]={};}
return elData[id];}
function hasData(el){var id=el[elIdAttr];if(!id){return false;}
return!!Object.getOwnPropertyNames(elData[id]).length;}
function removeData(el){var id=el[elIdAttr];if(!id){return;}
delete elData[id];try{delete el[elIdAttr];}catch(e){if(el.removeAttribute){el.removeAttribute(elIdAttr);}else{el[elIdAttr]=null;}}}
function _cleanUpEvents(elem,type){var data=getData(elem);if(data.handlers[type].length===0){delete data.handlers[type];if(elem.removeEventListener){elem.removeEventListener(type,data.dispatcher,false);}else if(elem.detachEvent){elem.detachEvent('on'+type,data.dispatcher);}}
if(Object.getOwnPropertyNames(data.handlers).length<=0){delete data.handlers;delete data.dispatcher;delete data.disabled;}
if(Object.getOwnPropertyNames(data).length===0){removeData(elem);}}
function _handleMultipleEvents(fn,elem,types,callback){types.forEach(function(type){fn(elem,type,callback);});}
function fixEvent(event){function returnTrue(){return true;}
function returnFalse(){return false;}
if(!event||!event.isPropagationStopped){var old=event||window_1.event;event={};for(var key in old){if(key!=='layerX'&&key!=='layerY'&&key!=='keyLocation'&&key!=='webkitMovementX'&&key!=='webkitMovementY'){if(!(key==='returnValue'&&old.preventDefault)){event[key]=old[key];}}}
if(!event.target){event.target=event.srcElement||document_1;}
if(!event.relatedTarget){event.relatedTarget=event.fromElement===event.target?event.toElement:event.fromElement;}
event.preventDefault=function(){if(old.preventDefault){old.preventDefault();}
event.returnValue=false;old.returnValue=false;event.defaultPrevented=true;};event.defaultPrevented=false;event.stopPropagation=function(){if(old.stopPropagation){old.stopPropagation();}
event.cancelBubble=true;old.cancelBubble=true;event.isPropagationStopped=returnTrue;};event.isPropagationStopped=returnFalse;event.stopImmediatePropagation=function(){if(old.stopImmediatePropagation){old.stopImmediatePropagation();}
event.isImmediatePropagationStopped=returnTrue;event.stopPropagation();};event.isImmediatePropagationStopped=returnFalse;if(event.clientX!==null&&event.clientX!==undefined){var doc=document_1.documentElement;var body=document_1.body;event.pageX=event.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=event.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0);}
event.which=event.charCode||event.keyCode;if(event.button!==null&&event.button!==undefined){event.button=event.button&1?0:event.button&4?1:event.button&2?2:0;}}
return event;}
var _supportsPassive=false;(function(){try{var opts=Object.defineProperty({},'passive',{get:function get(){_supportsPassive=true;}});window_1.addEventListener('test',null,opts);window_1.removeEventListener('test',null,opts);}catch(e){}})();var passiveEvents=['touchstart','touchmove'];function on(elem,type,fn){if(Array.isArray(type)){return _handleMultipleEvents(on,elem,type,fn);}
var data=getData(elem);if(!data.handlers){data.handlers={};}
if(!data.handlers[type]){data.handlers[type]=[];}
if(!fn.guid){fn.guid=newGUID();}
data.handlers[type].push(fn);if(!data.dispatcher){data.disabled=false;data.dispatcher=function(event,hash){if(data.disabled){return;}
event=fixEvent(event);var handlers=data.handlers[event.type];if(handlers){var handlersCopy=handlers.slice(0);for(var m=0,n=handlersCopy.length;m<n;m++){if(event.isImmediatePropagationStopped()){break;}else{try{handlersCopy[m].call(elem,event,hash);}catch(e){log.error(e);}}}}};}
if(data.handlers[type].length===1){if(elem.addEventListener){var options=false;if(_supportsPassive&&passiveEvents.indexOf(type)>-1){options={passive:true};}
elem.addEventListener(type,data.dispatcher,options);}else if(elem.attachEvent){elem.attachEvent('on'+type,data.dispatcher);}}}
function off(elem,type,fn){if(!hasData(elem)){return;}
var data=getData(elem);if(!data.handlers){return;}
if(Array.isArray(type)){return _handleMultipleEvents(off,elem,type,fn);}
var removeType=function removeType(el,t){data.handlers[t]=[];_cleanUpEvents(el,t);};if(type===undefined){for(var t in data.handlers){if(Object.prototype.hasOwnProperty.call(data.handlers||{},t)){removeType(elem,t);}}
return;}
var handlers=data.handlers[type];if(!handlers){return;}
if(!fn){removeType(elem,type);return;}
if(fn.guid){for(var n=0;n<handlers.length;n++){if(handlers[n].guid===fn.guid){handlers.splice(n--,1);}}}
_cleanUpEvents(elem,type);}
function trigger(elem,event,hash){var elemData=hasData(elem)?getData(elem):{};var parent=elem.parentNode||elem.ownerDocument;if(typeof event==='string'){event={type:event,target:elem};}else if(!event.target){event.target=elem;}
event=fixEvent(event);if(elemData.dispatcher){elemData.dispatcher.call(elem,event,hash);}
if(parent&&!event.isPropagationStopped()&&event.bubbles===true){trigger.call(null,parent,event,hash);}else if(!parent&&!event.defaultPrevented){var targetData=getData(event.target);if(event.target[event.type]){targetData.disabled=true;if(typeof event.target[event.type]==='function'){event.target[event.type]();}
targetData.disabled=false;}}
return!event.defaultPrevented;}
function one(elem,type,fn){if(Array.isArray(type)){return _handleMultipleEvents(one,elem,type,fn);}
var func=function func(){off(elem,type,func);fn.apply(this,arguments);};func.guid=fn.guid=fn.guid||newGUID();on(elem,type,func);}
var Events=(Object.freeze||Object)({fixEvent:fixEvent,on:on,off:off,trigger:trigger,one:one});var _windowLoaded=false;var videojs$2=void 0;var autoSetup=function autoSetup(){if(!isReal()||videojs$2.options.autoSetup===false){return;}
var vids=document_1.getElementsByTagName('video');var audios=document_1.getElementsByTagName('audio');var divs=document_1.getElementsByTagName('video-js');var mediaEls=[];if(vids&&vids.length>0){for(var i=0,e=vids.length;i<e;i++){mediaEls.push(vids[i]);}}
if(audios&&audios.length>0){for(var _i=0,_e=audios.length;_i<_e;_i++){mediaEls.push(audios[_i]);}}
if(divs&&divs.length>0){for(var _i2=0,_e2=divs.length;_i2<_e2;_i2++){mediaEls.push(divs[_i2]);}}
if(mediaEls&&mediaEls.length>0){for(var _i3=0,_e3=mediaEls.length;_i3<_e3;_i3++){var mediaEl=mediaEls[_i3];if(mediaEl&&mediaEl.getAttribute){if(mediaEl.player===undefined){var options=mediaEl.getAttribute('data-setup');if(options!==null){videojs$2(mediaEl);}}}else{autoSetupTimeout(1);break;}}}else if(!_windowLoaded){autoSetupTimeout(1);}};function autoSetupTimeout(wait,vjs){if(vjs){videojs$2=vjs;}
window_1.setTimeout(autoSetup,wait);}
if(isReal()&&document_1.readyState==='complete'){_windowLoaded=true;}else{one(window_1,'load',function(){_windowLoaded=true;});}
var createStyleElement=function createStyleElement(className){var style=document_1.createElement('style');style.className=className;return style;};var setTextContent=function setTextContent(el,content){if(el.styleSheet){el.styleSheet.cssText=content;}else{el.textContent=content;}};var bind=function bind(context,fn,uid){if(!fn.guid){fn.guid=newGUID();}
var bound=function bound(){return fn.apply(context,arguments);};bound.guid=uid?uid+'_'+fn.guid:fn.guid;return bound;};var throttle=function throttle(fn,wait){var last=Date.now();var throttled=function throttled(){var now=Date.now();if(now-last>=wait){fn.apply(undefined,arguments);last=now;}};return throttled;};var debounce=function debounce(func,wait,immediate){var context=arguments.length>3&&arguments[3]!==undefined?arguments[3]:window_1;var timeout=void 0;var cancel=function cancel(){context.clearTimeout(timeout);timeout=null;};var debounced=function debounced(){var self=this;var args=arguments;var _later=function later(){timeout=null;_later=null;if(!immediate){func.apply(self,args);}};if(!timeout&&immediate){func.apply(self,args);}
context.clearTimeout(timeout);timeout=context.setTimeout(_later,wait);};debounced.cancel=cancel;return debounced;};var EventTarget=function EventTarget(){};EventTarget.prototype.allowedEvents_={};EventTarget.prototype.on=function(type,fn){var ael=this.addEventListener;this.addEventListener=function(){};on(this,type,fn);this.addEventListener=ael;};EventTarget.prototype.addEventListener=EventTarget.prototype.on;EventTarget.prototype.off=function(type,fn){off(this,type,fn);};EventTarget.prototype.removeEventListener=EventTarget.prototype.off;EventTarget.prototype.one=function(type,fn){var ael=this.addEventListener;this.addEventListener=function(){};one(this,type,fn);this.addEventListener=ael;};EventTarget.prototype.trigger=function(event){var type=event.type||event;if(typeof event==='string'){event={type:type};}
event=fixEvent(event);if(this.allowedEvents_[type]&&this['on'+type]){this['on'+type](event);}
trigger(this,event);};EventTarget.prototype.dispatchEvent=EventTarget.prototype.trigger;var isEvented=function isEvented(object){return object instanceof EventTarget||!!object.eventBusEl_&&['on','one','off','trigger'].every(function(k){return typeof object[k]==='function';});};var isValidEventType=function isValidEventType(type){return(typeof type==='string'&&/\S/.test(type)||Array.isArray(type)&&!!type.length);};var validateTarget=function validateTarget(target){if(!target.nodeName&&!isEvented(target)){throw new Error('Invalid target; must be a DOM node or evented object.');}};var validateEventType=function validateEventType(type){if(!isValidEventType(type)){throw new Error('Invalid event type; must be a non-empty string or array.');}};var validateListener=function validateListener(listener){if(typeof listener!=='function'){throw new Error('Invalid listener; must be a function.');}};var normalizeListenArgs=function normalizeListenArgs(self,args){var isTargetingSelf=args.length<3||args[0]===self||args[0]===self.eventBusEl_;var target=void 0;var type=void 0;var listener=void 0;if(isTargetingSelf){target=self.eventBusEl_;if(args.length>=3){args.shift();}
type=args[0];listener=args[1];}else{target=args[0];type=args[1];listener=args[2];}
validateTarget(target);validateEventType(type);validateListener(listener);listener=bind(self,listener);return{isTargetingSelf:isTargetingSelf,target:target,type:type,listener:listener};};var listen=function listen(target,method,type,listener){validateTarget(target);if(target.nodeName){Events[method](target,type,listener);}else{target[method](type,listener);}};var EventedMixin={on:function on$$1(){var _this=this;for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}
var _normalizeListenArgs=normalizeListenArgs(this,args),isTargetingSelf=_normalizeListenArgs.isTargetingSelf,target=_normalizeListenArgs.target,type=_normalizeListenArgs.type,listener=_normalizeListenArgs.listener;listen(target,'on',type,listener);if(!isTargetingSelf){var removeListenerOnDispose=function removeListenerOnDispose(){return _this.off(target,type,listener);};removeListenerOnDispose.guid=listener.guid;var removeRemoverOnTargetDispose=function removeRemoverOnTargetDispose(){return _this.off('dispose',removeListenerOnDispose);};removeRemoverOnTargetDispose.guid=listener.guid;listen(this,'on','dispose',removeListenerOnDispose);listen(target,'on','dispose',removeRemoverOnTargetDispose);}},one:function one$$1(){var _this2=this;for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}
var _normalizeListenArgs2=normalizeListenArgs(this,args),isTargetingSelf=_normalizeListenArgs2.isTargetingSelf,target=_normalizeListenArgs2.target,type=_normalizeListenArgs2.type,listener=_normalizeListenArgs2.listener;if(isTargetingSelf){listen(target,'one',type,listener);}else{var wrapper=function wrapper(){for(var _len3=arguments.length,largs=Array(_len3),_key3=0;_key3<_len3;_key3++){largs[_key3]=arguments[_key3];}
_this2.off(target,type,wrapper);listener.apply(null,largs);};wrapper.guid=listener.guid;listen(target,'one',type,wrapper);}},off:function off$$1(targetOrType,typeOrListener,listener){if(!targetOrType||isValidEventType(targetOrType)){off(this.eventBusEl_,targetOrType,typeOrListener);}else{var target=targetOrType;var type=typeOrListener;validateTarget(target);validateEventType(type);validateListener(listener);listener=bind(this,listener);this.off('dispose',listener);if(target.nodeName){off(target,type,listener);off(target,'dispose',listener);}else if(isEvented(target)){target.off(type,listener);target.off('dispose',listener);}}},trigger:function trigger$$1(event,hash){return trigger(this.eventBusEl_,event,hash);}};function evented(target){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var eventBusKey=options.eventBusKey;if(eventBusKey){if(!target[eventBusKey].nodeName){throw new Error('The eventBusKey "'+eventBusKey+'" does not refer to an element.');}
target.eventBusEl_=target[eventBusKey];}else{target.eventBusEl_=createEl('span',{className:'vjs-event-bus'});}
assign(target,EventedMixin);target.on('dispose',function(){target.off();window_1.setTimeout(function(){target.eventBusEl_=null;},0);});return target;}
var StatefulMixin={state:{},setState:function setState(stateUpdates){var _this=this;if(typeof stateUpdates==='function'){stateUpdates=stateUpdates();}
var changes=void 0;each(stateUpdates,function(value,key){if(_this.state[key]!==value){changes=changes||{};changes[key]={from:_this.state[key],to:value};}
_this.state[key]=value;});if(changes&&isEvented(this)){this.trigger({changes:changes,type:'statechanged'});}
return changes;}};function stateful(target,defaultState){assign(target,StatefulMixin);target.state=assign({},target.state,defaultState);if(typeof target.handleStateChanged==='function'&&isEvented(target)){target.on('statechanged',target.handleStateChanged);}
return target;}
function toTitleCase(string){if(typeof string!=='string'){return string;}
return string.charAt(0).toUpperCase()+string.slice(1);}
function titleCaseEquals(str1,str2){return toTitleCase(str1)===toTitleCase(str2);}
function mergeOptions(){var result={};for(var _len=arguments.length,sources=Array(_len),_key=0;_key<_len;_key++){sources[_key]=arguments[_key];}
sources.forEach(function(source){if(!source){return;}
each(source,function(value,key){if(!isPlain(value)){result[key]=value;return;}
if(!isPlain(result[key])){result[key]={};}
result[key]=mergeOptions(result[key],value);});});return result;}
var Component=function(){function Component(player,options,ready){classCallCheck(this,Component);if(!player&&this.play){this.player_=player=this;}else{this.player_=player;}
this.options_=mergeOptions({},this.options_);options=this.options_=mergeOptions(this.options_,options);this.id_=options.id||options.el&&options.el.id;if(!this.id_){var id=player&&player.id&&player.id()||'no_player';this.id_=id+'_component_'+newGUID();}
this.name_=options.name||null;if(options.el){this.el_=options.el;}else if(options.createEl!==false){this.el_=this.createEl();}
if(options.evented!==false){evented(this,{eventBusKey:this.el_?'el_':null});}
stateful(this,this.constructor.defaultState);this.children_=[];this.childIndex_={};this.childNameIndex_={};if(options.initChildren!==false){this.initChildren();}
this.ready(ready);if(options.reportTouchActivity!==false){this.enableTouchActivity();}}
Component.prototype.dispose=function dispose(){this.trigger({type:'dispose',bubbles:false});if(this.children_){for(var i=this.children_.length-1;i>=0;i--){if(this.children_[i].dispose){this.children_[i].dispose();}}}
this.children_=null;this.childIndex_=null;this.childNameIndex_=null;if(this.el_){if(this.el_.parentNode){this.el_.parentNode.removeChild(this.el_);}
removeData(this.el_);this.el_=null;}
this.player_=null;};Component.prototype.player=function player(){return this.player_;};Component.prototype.options=function options(obj){log.warn('this.options() has been deprecated and will be moved to the constructor in 6.0');if(!obj){return this.options_;}
this.options_=mergeOptions(this.options_,obj);return this.options_;};Component.prototype.el=function el(){return this.el_;};Component.prototype.createEl=function createEl$$1(tagName,properties,attributes){return createEl(tagName,properties,attributes);};Component.prototype.localize=function localize(string,tokens){var defaultValue=arguments.length>2&&arguments[2]!==undefined?arguments[2]:string;var code=this.player_.language&&this.player_.language();var languages=this.player_.languages&&this.player_.languages();var language=languages&&languages[code];var primaryCode=code&&code.split('-')[0];var primaryLang=languages&&languages[primaryCode];var localizedString=defaultValue;if(language&&language[string]){localizedString=language[string];}else if(primaryLang&&primaryLang[string]){localizedString=primaryLang[string];}
if(tokens){localizedString=localizedString.replace(/\{(\d+)\}/g,function(match,index){var value=tokens[index-1];var ret=value;if(typeof value==='undefined'){ret=match;}
return ret;});}
return localizedString;};Component.prototype.contentEl=function contentEl(){return this.contentEl_||this.el_;};Component.prototype.id=function id(){return this.id_;};Component.prototype.name=function name(){return this.name_;};Component.prototype.children=function children(){return this.children_;};Component.prototype.getChildById=function getChildById(id){return this.childIndex_[id];};Component.prototype.getChild=function getChild(name){if(!name){return;}
name=toTitleCase(name);return this.childNameIndex_[name];};Component.prototype.addChild=function addChild(child){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var index=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.children_.length;var component=void 0;var componentName=void 0;if(typeof child==='string'){componentName=toTitleCase(child);var componentClassName=options.componentClass||componentName;options.name=componentName;var ComponentClass=Component.getComponent(componentClassName);if(!ComponentClass){throw new Error('Component '+componentClassName+' does not exist');}
if(typeof ComponentClass!=='function'){return null;}
component=new ComponentClass(this.player_||this,options);}else{component=child;}
this.children_.splice(index,0,component);if(typeof component.id==='function'){this.childIndex_[component.id()]=component;}
componentName=componentName||component.name&&toTitleCase(component.name());if(componentName){this.childNameIndex_[componentName]=component;}
if(typeof component.el==='function'&&component.el()){var childNodes=this.contentEl().children;var refNode=childNodes[index]||null;this.contentEl().insertBefore(component.el(),refNode);}
return component;};Component.prototype.removeChild=function removeChild(component){if(typeof component==='string'){component=this.getChild(component);}
if(!component||!this.children_){return;}
var childFound=false;for(var i=this.children_.length-1;i>=0;i--){if(this.children_[i]===component){childFound=true;this.children_.splice(i,1);break;}}
if(!childFound){return;}
this.childIndex_[component.id()]=null;this.childNameIndex_[component.name()]=null;var compEl=component.el();if(compEl&&compEl.parentNode===this.contentEl()){this.contentEl().removeChild(component.el());}};Component.prototype.initChildren=function initChildren(){var _this=this;var children=this.options_.children;if(children){var parentOptions=this.options_;var handleAdd=function handleAdd(child){var name=child.name;var opts=child.opts;if(parentOptions[name]!==undefined){opts=parentOptions[name];}
if(opts===false){return;}
if(opts===true){opts={};}
opts.playerOptions=_this.options_.playerOptions;var newChild=_this.addChild(name,opts);if(newChild){_this[name]=newChild;}};var workingChildren=void 0;var Tech=Component.getComponent('Tech');if(Array.isArray(children)){workingChildren=children;}else{workingChildren=Object.keys(children);}
workingChildren.concat(Object.keys(this.options_).filter(function(child){return!workingChildren.some(function(wchild){if(typeof wchild==='string'){return child===wchild;}
return child===wchild.name;});})).map(function(child){var name=void 0;var opts=void 0;if(typeof child==='string'){name=child;opts=children[name]||_this.options_[name]||{};}else{name=child.name;opts=child;}
return{name:name,opts:opts};}).filter(function(child){var c=Component.getComponent(child.opts.componentClass||toTitleCase(child.name));return c&&!Tech.isTech(c);}).forEach(handleAdd);}};Component.prototype.buildCSSClass=function buildCSSClass(){return'';};Component.prototype.ready=function ready(fn){var sync=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!fn){return;}
if(!this.isReady_){this.readyQueue_=this.readyQueue_||[];this.readyQueue_.push(fn);return;}
if(sync){fn.call(this);}else{this.setTimeout(fn,1);}};Component.prototype.triggerReady=function triggerReady(){this.isReady_=true;this.setTimeout(function(){var readyQueue=this.readyQueue_;this.readyQueue_=[];if(readyQueue&&readyQueue.length>0){readyQueue.forEach(function(fn){fn.call(this);},this);}
this.trigger('ready');},1);};Component.prototype.$=function $$$1(selector,context){return $(selector,context||this.contentEl());};Component.prototype.$$=function $$$$1(selector,context){return $$(selector,context||this.contentEl());};Component.prototype.hasClass=function hasClass$$1(classToCheck){return hasClass(this.el_,classToCheck);};Component.prototype.addClass=function addClass$$1(classToAdd){addClass(this.el_,classToAdd);};Component.prototype.removeClass=function removeClass$$1(classToRemove){removeClass(this.el_,classToRemove);};Component.prototype.toggleClass=function toggleClass$$1(classToToggle,predicate){toggleClass(this.el_,classToToggle,predicate);};Component.prototype.show=function show(){this.removeClass('vjs-hidden');};Component.prototype.hide=function hide(){this.addClass('vjs-hidden');};Component.prototype.lockShowing=function lockShowing(){this.addClass('vjs-lock-showing');};Component.prototype.unlockShowing=function unlockShowing(){this.removeClass('vjs-lock-showing');};Component.prototype.getAttribute=function getAttribute$$1(attribute){return getAttribute(this.el_,attribute);};Component.prototype.setAttribute=function setAttribute$$1(attribute,value){setAttribute(this.el_,attribute,value);};Component.prototype.removeAttribute=function removeAttribute$$1(attribute){removeAttribute(this.el_,attribute);};Component.prototype.width=function width(num,skipListeners){return this.dimension('width',num,skipListeners);};Component.prototype.height=function height(num,skipListeners){return this.dimension('height',num,skipListeners);};Component.prototype.dimensions=function dimensions(width,height){this.width(width,true);this.height(height);};Component.prototype.dimension=function dimension(widthOrHeight,num,skipListeners){if(num!==undefined){if(num===null||num!==num){num=0;}
if((''+num).indexOf('%')!==-1||(''+num).indexOf('px')!==-1){this.el_.style[widthOrHeight]=num;}else if(num==='auto'){this.el_.style[widthOrHeight]='';}else{this.el_.style[widthOrHeight]=num+'px';}
if(!skipListeners){this.trigger('componentresize');}
return;}
if(!this.el_){return 0;}
var val=this.el_.style[widthOrHeight];var pxIndex=val.indexOf('px');if(pxIndex!==-1){return parseInt(val.slice(0,pxIndex),10);}
return parseInt(this.el_['offset'+toTitleCase(widthOrHeight)],10);};Component.prototype.currentDimension=function currentDimension(widthOrHeight){var computedWidthOrHeight=0;if(widthOrHeight!=='width'&&widthOrHeight!=='height'){throw new Error('currentDimension only accepts width or height value');}
if(typeof window_1.getComputedStyle==='function'){var computedStyle=window_1.getComputedStyle(this.el_);computedWidthOrHeight=computedStyle.getPropertyValue(widthOrHeight)||computedStyle[widthOrHeight];}
computedWidthOrHeight=parseFloat(computedWidthOrHeight);if(computedWidthOrHeight===0){var rule='offset'+toTitleCase(widthOrHeight);computedWidthOrHeight=this.el_[rule];}
return computedWidthOrHeight;};Component.prototype.currentDimensions=function currentDimensions(){return{width:this.currentDimension('width'),height:this.currentDimension('height')};};Component.prototype.currentWidth=function currentWidth(){return this.currentDimension('width');};Component.prototype.currentHeight=function currentHeight(){return this.currentDimension('height');};Component.prototype.focus=function focus(){this.el_.focus();};Component.prototype.blur=function blur(){this.el_.blur();};Component.prototype.emitTapEvents=function emitTapEvents(){var touchStart=0;var firstTouch=null;var tapMovementThreshold=10;var touchTimeThreshold=200;var couldBeTap=void 0;this.on('touchstart',function(event){if(event.touches.length===1){firstTouch={pageX:event.touches[0].pageX,pageY:event.touches[0].pageY};touchStart=new Date().getTime();couldBeTap=true;}});this.on('touchmove',function(event){if(event.touches.length>1){couldBeTap=false;}else if(firstTouch){var xdiff=event.touches[0].pageX-firstTouch.pageX;var ydiff=event.touches[0].pageY-firstTouch.pageY;var touchDistance=Math.sqrt(xdiff*xdiff+ydiff*ydiff);if(touchDistance>tapMovementThreshold){couldBeTap=false;}}});var noTap=function noTap(){couldBeTap=false;};this.on('touchleave',noTap);this.on('touchcancel',noTap);this.on('touchend',function(event){firstTouch=null;if(couldBeTap===true){var touchTime=new Date().getTime()-touchStart;if(touchTime<touchTimeThreshold){event.preventDefault();this.trigger('tap');}}});};Component.prototype.enableTouchActivity=function enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity){return;}
var report=bind(this.player(),this.player().reportUserActivity);var touchHolding=void 0;this.on('touchstart',function(){report();this.clearInterval(touchHolding);touchHolding=this.setInterval(report,250);});var touchEnd=function touchEnd(event){report();this.clearInterval(touchHolding);};this.on('touchmove',report);this.on('touchend',touchEnd);this.on('touchcancel',touchEnd);};Component.prototype.setTimeout=function setTimeout(fn,timeout){var _this2=this;var timeoutId,disposeFn;fn=bind(this,fn);timeoutId=window_1.setTimeout(function(){_this2.off('dispose',disposeFn);fn();},timeout);disposeFn=function disposeFn(){return _this2.clearTimeout(timeoutId);};disposeFn.guid='vjs-timeout-'+timeoutId;this.on('dispose',disposeFn);return timeoutId;};Component.prototype.clearTimeout=function clearTimeout(timeoutId){window_1.clearTimeout(timeoutId);var disposeFn=function disposeFn(){};disposeFn.guid='vjs-timeout-'+timeoutId;this.off('dispose',disposeFn);return timeoutId;};Component.prototype.setInterval=function setInterval(fn,interval){var _this3=this;fn=bind(this,fn);var intervalId=window_1.setInterval(fn,interval);var disposeFn=function disposeFn(){return _this3.clearInterval(intervalId);};disposeFn.guid='vjs-interval-'+intervalId;this.on('dispose',disposeFn);return intervalId;};Component.prototype.clearInterval=function clearInterval(intervalId){window_1.clearInterval(intervalId);var disposeFn=function disposeFn(){};disposeFn.guid='vjs-interval-'+intervalId;this.off('dispose',disposeFn);return intervalId;};Component.prototype.requestAnimationFrame=function requestAnimationFrame(fn){var _this4=this;var id,disposeFn;if(this.supportsRaf_){fn=bind(this,fn);id=window_1.requestAnimationFrame(function(){_this4.off('dispose',disposeFn);fn();});disposeFn=function disposeFn(){return _this4.cancelAnimationFrame(id);};disposeFn.guid='vjs-raf-'+id;this.on('dispose',disposeFn);return id;}
return this.setTimeout(fn,1000/60);};Component.prototype.cancelAnimationFrame=function cancelAnimationFrame(id){if(this.supportsRaf_){window_1.cancelAnimationFrame(id);var disposeFn=function disposeFn(){};disposeFn.guid='vjs-raf-'+id;this.off('dispose',disposeFn);return id;}
return this.clearTimeout(id);};Component.registerComponent=function registerComponent(name,ComponentToRegister){if(typeof name!=='string'||!name){throw new Error('Illegal component name, "'+name+'"; must be a non-empty string.');}
var Tech=Component.getComponent('Tech');var isTech=Tech&&Tech.isTech(ComponentToRegister);var isComp=Component===ComponentToRegister||Component.prototype.isPrototypeOf(ComponentToRegister.prototype);if(isTech||!isComp){var reason=void 0;if(isTech){reason='techs must be registered using Tech.registerTech()';}else{reason='must be a Component subclass';}
throw new Error('Illegal component, "'+name+'"; '+reason+'.');}
name=toTitleCase(name);if(!Component.components_){Component.components_={};}
var Player=Component.getComponent('Player');if(name==='Player'&&Player&&Player.players){var players=Player.players;var playerNames=Object.keys(players);if(players&&playerNames.length>0&&playerNames.map(function(pname){return players[pname];}).every(Boolean)){throw new Error('Can not register Player component after player has been created.');}}
Component.components_[name]=ComponentToRegister;return ComponentToRegister;};Component.getComponent=function getComponent(name){if(!name){return;}
name=toTitleCase(name);if(Component.components_&&Component.components_[name]){return Component.components_[name];}};return Component;}();Component.prototype.supportsRaf_=typeof window_1.requestAnimationFrame==='function'&&typeof window_1.cancelAnimationFrame==='function';Component.registerComponent('Component',Component);function rangeCheck(fnName,index,maxIndex){if(typeof index!=='number'||index<0||index>maxIndex){throw new Error('Failed to execute \''+fnName+'\' on \'TimeRanges\': The index provided ('+index+') is non-numeric or out of bounds (0-'+maxIndex+').');}}
function getRange(fnName,valueIndex,ranges,rangeIndex){rangeCheck(fnName,rangeIndex,ranges.length-1);return ranges[rangeIndex][valueIndex];}
function createTimeRangesObj(ranges){if(ranges===undefined||ranges.length===0){return{length:0,start:function start(){throw new Error('This TimeRanges object is empty');},end:function end(){throw new Error('This TimeRanges object is empty');}};}
return{length:ranges.length,start:getRange.bind(null,'start',0,ranges),end:getRange.bind(null,'end',1,ranges)};}
function createTimeRanges(start,end){if(Array.isArray(start)){return createTimeRangesObj(start);}else if(start===undefined||end===undefined){return createTimeRangesObj();}
return createTimeRangesObj([[start,end]]);}
function bufferedPercent(buffered,duration){var bufferedDuration=0;var start=void 0;var end=void 0;if(!duration){return 0;}
if(!buffered||!buffered.length){buffered=createTimeRanges(0,0);}
for(var i=0;i<buffered.length;i++){start=buffered.start(i);end=buffered.end(i);if(end>duration){end=duration;}
bufferedDuration+=end-start;}
return bufferedDuration/duration;}
var FullscreenApi={};var apiMap=[['requestFullscreen','exitFullscreen','fullscreenElement','fullscreenEnabled','fullscreenchange','fullscreenerror'],['webkitRequestFullscreen','webkitExitFullscreen','webkitFullscreenElement','webkitFullscreenEnabled','webkitfullscreenchange','webkitfullscreenerror'],['webkitRequestFullScreen','webkitCancelFullScreen','webkitCurrentFullScreenElement','webkitCancelFullScreen','webkitfullscreenchange','webkitfullscreenerror'],['mozRequestFullScreen','mozCancelFullScreen','mozFullScreenElement','mozFullScreenEnabled','mozfullscreenchange','mozfullscreenerror'],['msRequestFullscreen','msExitFullscreen','msFullscreenElement','msFullscreenEnabled','MSFullscreenChange','MSFullscreenError']];var specApi=apiMap[0];var browserApi=void 0;for(var i=0;i<apiMap.length;i++){if(apiMap[i][1]in document_1){browserApi=apiMap[i];break;}}
if(browserApi){for(var _i=0;_i<browserApi.length;_i++){FullscreenApi[specApi[_i]]=browserApi[_i];}}
function MediaError(value){if(value instanceof MediaError){return value;}
if(typeof value==='number'){this.code=value;}else if(typeof value==='string'){this.message=value;}else if(isObject(value)){if(typeof value.code==='number'){this.code=value.code;}
assign(this,value);}
if(!this.message){this.message=MediaError.defaultMessages[this.code]||'';}}
MediaError.prototype.code=0;MediaError.prototype.message='';MediaError.prototype.status=null;MediaError.errorTypes=['MEDIA_ERR_CUSTOM','MEDIA_ERR_ABORTED','MEDIA_ERR_NETWORK','MEDIA_ERR_DECODE','MEDIA_ERR_SRC_NOT_SUPPORTED','MEDIA_ERR_ENCRYPTED'];MediaError.defaultMessages={1:'You aborted the media playback',2:'A network error caused the media download to fail part-way.',3:'The media playback was aborted due to a corruption problem or because the media used features your browser did not support.',4:'The media could not be loaded, either because the server or network failed or because the format is not supported.',5:'The media is encrypted and we do not have the keys to decrypt it.'};for(var errNum=0;errNum<MediaError.errorTypes.length;errNum++){MediaError[MediaError.errorTypes[errNum]]=errNum;MediaError.prototype[MediaError.errorTypes[errNum]]=errNum;}
var tuple=SafeParseTuple;function SafeParseTuple(obj,reviver){var json;var error=null;try{json=JSON.parse(obj,reviver);}catch(err){error=err;}
return[error,json]}
function isPromise(value){return value!==undefined&&value!==null&&typeof value.then==='function';}
function silencePromise(value){if(isPromise(value)){value.then(null,function(e){});}}
var trackToJson_=function trackToJson_(track){var ret=['kind','label','language','id','inBandMetadataTrackDispatchType','mode','src'].reduce(function(acc,prop,i){if(track[prop]){acc[prop]=track[prop];}
return acc;},{cues:track.cues&&Array.prototype.map.call(track.cues,function(cue){return{startTime:cue.startTime,endTime:cue.endTime,text:cue.text,id:cue.id};})});return ret;};var textTracksToJson=function textTracksToJson(tech){var trackEls=tech.$$('track');var trackObjs=Array.prototype.map.call(trackEls,function(t){return t.track;});var tracks=Array.prototype.map.call(trackEls,function(trackEl){var json=trackToJson_(trackEl.track);if(trackEl.src){json.src=trackEl.src;}
return json;});return tracks.concat(Array.prototype.filter.call(tech.textTracks(),function(track){return trackObjs.indexOf(track)===-1;}).map(trackToJson_));};var jsonToTextTracks=function jsonToTextTracks(json,tech){json.forEach(function(track){var addedTrack=tech.addRemoteTextTrack(track).track;if(!track.src&&track.cues){track.cues.forEach(function(cue){return addedTrack.addCue(cue);});}});return tech.textTracks();};var textTrackConverter={textTracksToJson:textTracksToJson,jsonToTextTracks:jsonToTextTracks,trackToJson_:trackToJson_};var MODAL_CLASS_NAME='vjs-modal-dialog';var ESC=27;var ModalDialog=function(_Component){inherits(ModalDialog,_Component);function ModalDialog(player,options){classCallCheck(this,ModalDialog);var _this=possibleConstructorReturn(this,_Component.call(this,player,options));_this.opened_=_this.hasBeenOpened_=_this.hasBeenFilled_=false;_this.closeable(!_this.options_.uncloseable);_this.content(_this.options_.content);_this.contentEl_=createEl('div',{className:MODAL_CLASS_NAME+'-content'},{role:'document'});_this.descEl_=createEl('p',{className:MODAL_CLASS_NAME+'-description vjs-control-text',id:_this.el().getAttribute('aria-describedby')});textContent(_this.descEl_,_this.description());_this.el_.appendChild(_this.descEl_);_this.el_.appendChild(_this.contentEl_);return _this;}
ModalDialog.prototype.createEl=function createEl$$1(){return _Component.prototype.createEl.call(this,'div',{className:this.buildCSSClass(),tabIndex:-1},{'aria-describedby':this.id()+'_description','aria-hidden':'true','aria-label':this.label(),'role':'dialog'});};ModalDialog.prototype.dispose=function dispose(){this.contentEl_=null;this.descEl_=null;this.previouslyActiveEl_=null;_Component.prototype.dispose.call(this);};ModalDialog.prototype.buildCSSClass=function buildCSSClass(){return MODAL_CLASS_NAME+' vjs-hidden '+_Component.prototype.buildCSSClass.call(this);};ModalDialog.prototype.handleKeyPress=function handleKeyPress(e){if(e.which===ESC&&this.closeable()){this.close();}};ModalDialog.prototype.label=function label(){return this.localize(this.options_.label||'Modal Window');};ModalDialog.prototype.description=function description(){var desc=this.options_.description||this.localize('This is a modal window.');if(this.closeable()){desc+=' '+this.localize('This modal can be closed by pressing the Escape key or activating the close button.');}
return desc;};ModalDialog.prototype.open=function open(){if(!this.opened_){var player=this.player();this.trigger('beforemodalopen');this.opened_=true;if(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_){this.fill();}
this.wasPlaying_=!player.paused();if(this.options_.pauseOnOpen&&this.wasPlaying_){player.pause();}
if(this.closeable()){this.on(this.el_.ownerDocument,'keydown',bind(this,this.handleKeyPress));}
this.hadControls_=player.controls();player.controls(false);this.show();this.conditionalFocus_();this.el().setAttribute('aria-hidden','false');this.trigger('modalopen');this.hasBeenOpened_=true;}};ModalDialog.prototype.opened=function opened(value){if(typeof value==='boolean'){this[value?'open':'close']();}
return this.opened_;};ModalDialog.prototype.close=function close(){if(!this.opened_){return;}
var player=this.player();this.trigger('beforemodalclose');this.opened_=false;if(this.wasPlaying_&&this.options_.pauseOnOpen){player.play();}
if(this.closeable()){this.off(this.el_.ownerDocument,'keydown',bind(this,this.handleKeyPress));}
if(this.hadControls_){player.controls(true);}
this.hide();this.el().setAttribute('aria-hidden','true');this.trigger('modalclose');this.conditionalBlur_();if(this.options_.temporary){this.dispose();}};ModalDialog.prototype.closeable=function closeable(value){if(typeof value==='boolean'){var closeable=this.closeable_=!!value;var close=this.getChild('closeButton');if(closeable&&!close){var temp=this.contentEl_;this.contentEl_=this.el_;close=this.addChild('closeButton',{controlText:'Close Modal Dialog'});this.contentEl_=temp;this.on(close,'close',this.close);}
if(!closeable&&close){this.off(close,'close',this.close);this.removeChild(close);close.dispose();}}
return this.closeable_;};ModalDialog.prototype.fill=function fill(){this.fillWith(this.content());};ModalDialog.prototype.fillWith=function fillWith(content){var contentEl=this.contentEl();var parentEl=contentEl.parentNode;var nextSiblingEl=contentEl.nextSibling;this.trigger('beforemodalfill');this.hasBeenFilled_=true;parentEl.removeChild(contentEl);this.empty();insertContent(contentEl,content);this.trigger('modalfill');if(nextSiblingEl){parentEl.insertBefore(contentEl,nextSiblingEl);}else{parentEl.appendChild(contentEl);}
var closeButton=this.getChild('closeButton');if(closeButton){parentEl.appendChild(closeButton.el_);}};ModalDialog.prototype.empty=function empty(){this.trigger('beforemodalempty');emptyEl(this.contentEl());this.trigger('modalempty');};ModalDialog.prototype.content=function content(value){if(typeof value!=='undefined'){this.content_=value;}
return this.content_;};ModalDialog.prototype.conditionalFocus_=function conditionalFocus_(){var activeEl=document_1.activeElement;var playerEl=this.player_.el_;this.previouslyActiveEl_=null;if(playerEl.contains(activeEl)||playerEl===activeEl){this.previouslyActiveEl_=activeEl;this.focus();this.on(document_1,'keydown',this.handleKeyDown);}};ModalDialog.prototype.conditionalBlur_=function conditionalBlur_(){if(this.previouslyActiveEl_){this.previouslyActiveEl_.focus();this.previouslyActiveEl_=null;}
this.off(document_1,'keydown',this.handleKeyDown);};ModalDialog.prototype.handleKeyDown=function handleKeyDown(event){if(event.which!==9){return;}
var focusableEls=this.focusableEls_();var activeEl=this.el_.querySelector(':focus');var focusIndex=void 0;for(var i=0;i<focusableEls.length;i++){if(activeEl===focusableEls[i]){focusIndex=i;break;}}
if(document_1.activeElement===this.el_){focusIndex=0;}
if(event.shiftKey&&focusIndex===0){focusableEls[focusableEls.length-1].focus();event.preventDefault();}else if(!event.shiftKey&&focusIndex===focusableEls.length-1){focusableEls[0].focus();event.preventDefault();}};ModalDialog.prototype.focusableEls_=function focusableEls_(){var allChildren=this.el_.querySelectorAll('*');return Array.prototype.filter.call(allChildren,function(child){return(child instanceof window_1.HTMLAnchorElement||child instanceof window_1.HTMLAreaElement)&&child.hasAttribute('href')||(child instanceof window_1.HTMLInputElement||child instanceof window_1.HTMLSelectElement||child instanceof window_1.HTMLTextAreaElement||child instanceof window_1.HTMLButtonElement)&&!child.hasAttribute('disabled')||child instanceof window_1.HTMLIFrameElement||child instanceof window_1.HTMLObjectElement||child instanceof window_1.HTMLEmbedElement||child.hasAttribute('tabindex')&&child.getAttribute('tabindex')!==-1||child.hasAttribute('contenteditable');});};return ModalDialog;}(Component);ModalDialog.prototype.options_={pauseOnOpen:true,temporary:true};Component.registerComponent('ModalDialog',ModalDialog);var TrackList=function(_EventTarget){inherits(TrackList,_EventTarget);function TrackList(){var tracks=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var _ret;var list=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;classCallCheck(this,TrackList);var _this=possibleConstructorReturn(this,_EventTarget.call(this));if(!list){list=_this;if(IS_IE8){list=document_1.createElement('custom');for(var prop in TrackList.prototype){if(prop!=='constructor'){list[prop]=TrackList.prototype[prop];}}}}
list.tracks_=[];Object.defineProperty(list,'length',{get:function get$$1(){return this.tracks_.length;}});for(var i=0;i<tracks.length;i++){list.addTrack(tracks[i]);}
return _ret=list,possibleConstructorReturn(_this,_ret);}
TrackList.prototype.addTrack=function addTrack(track){var index=this.tracks_.length;if(!(''+index in this)){Object.defineProperty(this,index,{get:function get$$1(){return this.tracks_[index];}});}
if(this.tracks_.indexOf(track)===-1){this.tracks_.push(track);this.trigger({track:track,type:'addtrack'});}};TrackList.prototype.removeTrack=function removeTrack(rtrack){var track=void 0;for(var i=0,l=this.length;i<l;i++){if(this[i]===rtrack){track=this[i];if(track.off){track.off();}
this.tracks_.splice(i,1);break;}}
if(!track){return;}
this.trigger({track:track,type:'removetrack'});};TrackList.prototype.getTrackById=function getTrackById(id){var result=null;for(var i=0,l=this.length;i<l;i++){var track=this[i];if(track.id===id){result=track;break;}}
return result;};return TrackList;}(EventTarget);TrackList.prototype.allowedEvents_={change:'change',addtrack:'addtrack',removetrack:'removetrack'};for(var event in TrackList.prototype.allowedEvents_){TrackList.prototype['on'+event]=null;}
var disableOthers=function disableOthers(list,track){for(var i=0;i<list.length;i++){if(!Object.keys(list[i]).length||track.id===list[i].id){continue;}
list[i].enabled=false;}};var AudioTrackList=function(_TrackList){inherits(AudioTrackList,_TrackList);function AudioTrackList(){var _this,_ret;var tracks=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];classCallCheck(this,AudioTrackList);var list=void 0;for(var i=tracks.length-1;i>=0;i--){if(tracks[i].enabled){disableOthers(tracks,tracks[i]);break;}}
if(IS_IE8){list=document_1.createElement('custom');for(var prop in TrackList.prototype){if(prop!=='constructor'){list[prop]=TrackList.prototype[prop];}}
for(var _prop in AudioTrackList.prototype){if(_prop!=='constructor'){list[_prop]=AudioTrackList.prototype[_prop];}}}
list=(_this=possibleConstructorReturn(this,_TrackList.call(this,tracks,list)),_this);list.changing_=false;return _ret=list,possibleConstructorReturn(_this,_ret);}
AudioTrackList.prototype.addTrack=function addTrack(track){var _this2=this;if(track.enabled){disableOthers(this,track);}
_TrackList.prototype.addTrack.call(this,track);if(!track.addEventListener){return;}
track.addEventListener('enabledchange',function(){if(_this2.changing_){return;}
_this2.changing_=true;disableOthers(_this2,track);_this2.changing_=false;_this2.trigger('change');});};return AudioTrackList;}(TrackList);var disableOthers$1=function disableOthers(list,track){for(var i=0;i<list.length;i++){if(!Object.keys(list[i]).length||track.id===list[i].id){continue;}
list[i].selected=false;}};var VideoTrackList=function(_TrackList){inherits(VideoTrackList,_TrackList);function VideoTrackList(){var _this,_ret;var tracks=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];classCallCheck(this,VideoTrackList);var list=void 0;for(var i=tracks.length-1;i>=0;i--){if(tracks[i].selected){disableOthers$1(tracks,tracks[i]);break;}}
if(IS_IE8){list=document_1.createElement('custom');for(var prop in TrackList.prototype){if(prop!=='constructor'){list[prop]=TrackList.prototype[prop];}}
for(var _prop in VideoTrackList.prototype){if(_prop!=='constructor'){list[_prop]=VideoTrackList.prototype[_prop];}}}
list=(_this=possibleConstructorReturn(this,_TrackList.call(this,tracks,list)),_this);list.changing_=false;Object.defineProperty(list,'selectedIndex',{get:function get$$1(){for(var _i=0;_i<this.length;_i++){if(this[_i].selected){return _i;}}
return-1;},set:function set$$1(){}});return _ret=list,possibleConstructorReturn(_this,_ret);}
VideoTrackList.prototype.addTrack=function addTrack(track){var _this2=this;if(track.selected){disableOthers$1(this,track);}
_TrackList.prototype.addTrack.call(this,track);if(!track.addEventListener){return;}
track.addEventListener('selectedchange',function(){if(_this2.changing_){return;}
_this2.changing_=true;disableOthers$1(_this2,track);_this2.changing_=false;_this2.trigger('change');});};return VideoTrackList;}(TrackList);var TextTrackList=function(_TrackList){inherits(TextTrackList,_TrackList);function TextTrackList(){var _this,_ret;var tracks=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];classCallCheck(this,TextTrackList);var list=void 0;if(IS_IE8){list=document_1.createElement('custom');for(var prop in TrackList.prototype){if(prop!=='constructor'){list[prop]=TrackList.prototype[prop];}}
for(var _prop in TextTrackList.prototype){if(_prop!=='constructor'){list[_prop]=TextTrackList.prototype[_prop];}}}
list=(_this=possibleConstructorReturn(this,_TrackList.call(this,tracks,list)),_this);return _ret=list,possibleConstructorReturn(_this,_ret);}
TextTrackList.prototype.addTrack=function addTrack(track){_TrackList.prototype.addTrack.call(this,track);track.addEventListener('modechange',bind(this,function(){this.trigger('change');}));var nonLanguageTextTrackKind=['metadata','chapters'];if(nonLanguageTextTrackKind.indexOf(track.kind)===-1){track.addEventListener('modechange',bind(this,function(){this.trigger('selectedlanguagechange');}));}};return TextTrackList;}(TrackList);var HtmlTrackElementList=function(){function HtmlTrackElementList(){var trackElements=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];classCallCheck(this,HtmlTrackElementList);var list=this;if(IS_IE8){list=document_1.createElement('custom');for(var prop in HtmlTrackElementList.prototype){if(prop!=='constructor'){list[prop]=HtmlTrackElementList.prototype[prop];}}}
list.trackElements_=[];Object.defineProperty(list,'length',{get:function get$$1(){return this.trackElements_.length;}});for(var i=0,length=trackElements.length;i<length;i++){list.addTrackElement_(trackElements[i]);}
if(IS_IE8){return list;}}
HtmlTrackElementList.prototype.addTrackElement_=function addTrackElement_(trackElement){var index=this.trackElements_.length;if(!(''+index in this)){Object.defineProperty(this,index,{get:function get$$1(){return this.trackElements_[index];}});}
if(this.trackElements_.indexOf(trackElement)===-1){this.trackElements_.push(trackElement);}};HtmlTrackElementList.prototype.getTrackElementByTrack_=function getTrackElementByTrack_(track){var trackElement_=void 0;for(var i=0,length=this.trackElements_.length;i<length;i++){if(track===this.trackElements_[i].track){trackElement_=this.trackElements_[i];break;}}
return trackElement_;};HtmlTrackElementList.prototype.removeTrackElement_=function removeTrackElement_(trackElement){for(var i=0,length=this.trackElements_.length;i<length;i++){if(trackElement===this.trackElements_[i]){this.trackElements_.splice(i,1);break;}}};return HtmlTrackElementList;}();var TextTrackCueList=function(){function TextTrackCueList(cues){classCallCheck(this,TextTrackCueList);var list=this;if(IS_IE8){list=document_1.createElement('custom');for(var prop in TextTrackCueList.prototype){if(prop!=='constructor'){list[prop]=TextTrackCueList.prototype[prop];}}}
TextTrackCueList.prototype.setCues_.call(list,cues);Object.defineProperty(list,'length',{get:function get$$1(){return this.length_;}});if(IS_IE8){return list;}}
TextTrackCueList.prototype.setCues_=function setCues_(cues){var oldLength=this.length||0;var i=0;var l=cues.length;this.cues_=cues;this.length_=cues.length;var defineProp=function defineProp(index){if(!(''+index in this)){Object.defineProperty(this,''+index,{get:function get$$1(){return this.cues_[index];}});}};if(oldLength<l){i=oldLength;for(;i<l;i++){defineProp.call(this,i);}}};TextTrackCueList.prototype.getCueById=function getCueById(id){var result=null;for(var i=0,l=this.length;i<l;i++){var cue=this[i];if(cue.id===id){result=cue;break;}}
return result;};return TextTrackCueList;}();var VideoTrackKind={alternative:'alternative',captions:'captions',main:'main',sign:'sign',subtitles:'subtitles',commentary:'commentary'};var AudioTrackKind={'alternative':'alternative','descriptions':'descriptions','main':'main','main-desc':'main-desc','translation':'translation','commentary':'commentary'};var TextTrackKind={subtitles:'subtitles',captions:'captions',descriptions:'descriptions',chapters:'chapters',metadata:'metadata'};var TextTrackMode={disabled:'disabled',hidden:'hidden',showing:'showing'};var Track=function(_EventTarget){inherits(Track,_EventTarget);function Track(){var _ret;var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};classCallCheck(this,Track);var _this=possibleConstructorReturn(this,_EventTarget.call(this));var track=_this;if(IS_IE8){track=document_1.createElement('custom');for(var prop in Track.prototype){if(prop!=='constructor'){track[prop]=Track.prototype[prop];}}}
var trackProps={id:options.id||'vjs_track_'+newGUID(),kind:options.kind||'',label:options.label||'',language:options.language||''};var _loop=function _loop(key){Object.defineProperty(track,key,{get:function get$$1(){return trackProps[key];},set:function set$$1(){}});};for(var key in trackProps){_loop(key);}
return _ret=track,possibleConstructorReturn(_this,_ret);}
return Track;}(EventTarget);var parseUrl=function parseUrl(url){var props=['protocol','hostname','port','pathname','search','hash','host'];var a=document_1.createElement('a');a.href=url;var addToBody=a.host===''&&a.protocol!=='file:';var div=void 0;if(addToBody){div=document_1.createElement('div');div.innerHTML='<a href="'+url+'"></a>';a=div.firstChild;div.setAttribute('style','display:none; position:absolute;');document_1.body.appendChild(div);}
var details={};for(var i=0;i<props.length;i++){details[props[i]]=a[props[i]];}
if(details.protocol==='http:'){details.host=details.host.replace(/:80$/,'');}
if(details.protocol==='https:'){details.host=details.host.replace(/:443$/,'');}
if(!details.protocol){details.protocol=window_1.location.protocol;}
if(addToBody){document_1.body.removeChild(div);}
return details;};var getAbsoluteURL=function getAbsoluteURL(url){if(!url.match(/^https?:\/\//)){var div=document_1.createElement('div');div.innerHTML='<a href="'+url+'">x</a>';url=div.firstChild.href;}
return url;};var getFileExtension=function getFileExtension(path){if(typeof path==='string'){var splitPathRe=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i;var pathParts=splitPathRe.exec(path);if(pathParts){return pathParts.pop().toLowerCase();}}
return'';};var isCrossOrigin=function isCrossOrigin(url){var winLoc=window_1.location;var urlInfo=parseUrl(url);var srcProtocol=urlInfo.protocol===':'?winLoc.protocol:urlInfo.protocol;var crossOrigin=srcProtocol+urlInfo.host!==winLoc.protocol+winLoc.host;return crossOrigin;};var Url=(Object.freeze||Object)({parseUrl:parseUrl,getAbsoluteURL:getAbsoluteURL,getFileExtension:getFileExtension,isCrossOrigin:isCrossOrigin});var isFunction_1=isFunction;var toString$1=Object.prototype.toString;function isFunction(fn){var string=toString$1.call(fn);return string==='[object Function]'||(typeof fn==='function'&&string!=='[object RegExp]')||(typeof window!=='undefined'&&(fn===window.setTimeout||fn===window.alert||fn===window.confirm||fn===window.prompt))}
var trim_1=createCommonjsModule(function(module,exports){exports=module.exports=trim;function trim(str){return str.replace(/^\s*|\s*$/g,'');}
exports.left=function(str){return str.replace(/^\s*/,'');};exports.right=function(str){return str.replace(/\s*$/,'');};});var fnToStr=Function.prototype.toString;var constructorRegex=/^\s*class\b/;var isES6ClassFn=function isES6ClassFunction(value){try{var fnStr=fnToStr.call(value);return constructorRegex.test(fnStr);}catch(e){return false;}};var tryFunctionObject=function tryFunctionToStr(value){try{if(isES6ClassFn(value)){return false;}
fnToStr.call(value);return true;}catch(e){return false;}};var toStr$1=Object.prototype.toString;var fnClass='[object Function]';var genClass='[object GeneratorFunction]';var hasToStringTag=typeof Symbol==='function'&&typeof Symbol.toStringTag==='symbol';var isCallable=function isCallable(value){if(!value){return false;}
if(typeof value!=='function'&&typeof value!=='object'){return false;}
if(typeof value==='function'&&!value.prototype){return true;}
if(hasToStringTag){return tryFunctionObject(value);}
if(isES6ClassFn(value)){return false;}
var strClass=toStr$1.call(value);return strClass===fnClass||strClass===genClass;};var toStr=Object.prototype.toString;var hasOwnProperty=Object.prototype.hasOwnProperty;var forEachArray$1=function forEachArray(array,iterator,receiver){for(var i=0,len=array.length;i<len;i++){if(hasOwnProperty.call(array,i)){if(receiver==null){iterator(array[i],i,array);}else{iterator.call(receiver,array[i],i,array);}}}};var forEachString=function forEachString(string,iterator,receiver){for(var i=0,len=string.length;i<len;i++){if(receiver==null){iterator(string.charAt(i),i,string);}else{iterator.call(receiver,string.charAt(i),i,string);}}};var forEachObject=function forEachObject(object,iterator,receiver){for(var k in object){if(hasOwnProperty.call(object,k)){if(receiver==null){iterator(object[k],k,object);}else{iterator.call(receiver,object[k],k,object);}}}};var forEach=function forEach(list,iterator,thisArg){if(!isCallable(iterator)){throw new TypeError('iterator must be a function');}
var receiver;if(arguments.length>=3){receiver=thisArg;}
if(toStr.call(list)==='[object Array]'){forEachArray$1(list,iterator,receiver);}else if(typeof list==='string'){forEachString(list,iterator,receiver);}else{forEachObject(list,iterator,receiver);}};var forEach_1=forEach;var isArray=function(arg){return Object.prototype.toString.call(arg)==='[object Array]';};var parseHeaders=function(headers){if(!headers)
return{}
var result={};forEach_1(trim_1(headers).split('\n'),function(row){var index=row.indexOf(':'),key=trim_1(row.slice(0,index)).toLowerCase(),value=trim_1(row.slice(index+1));if(typeof(result[key])==='undefined'){result[key]=value;}else if(isArray(result[key])){result[key].push(value);}else{result[key]=[result[key],value];}});return result};var immutable=extend;var hasOwnProperty$1=Object.prototype.hasOwnProperty;function extend(){var target={};for(var i=0;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(hasOwnProperty$1.call(source,key)){target[key]=source[key];}}}
return target}
var xhr=createXHR;createXHR.XMLHttpRequest=window_1.XMLHttpRequest||noop;createXHR.XDomainRequest="withCredentials"in(new createXHR.XMLHttpRequest())?createXHR.XMLHttpRequest:window_1.XDomainRequest;forEachArray(["get","put","post","patch","head","delete"],function(method){createXHR[method==="delete"?"del":method]=function(uri,options,callback){options=initParams(uri,options,callback);options.method=method.toUpperCase();return _createXHR(options)};});function forEachArray(array,iterator){for(var i=0;i<array.length;i++){iterator(array[i]);}}
function isEmpty(obj){for(var i in obj){if(obj.hasOwnProperty(i))return false}
return true}
function initParams(uri,options,callback){var params=uri;if(isFunction_1(options)){callback=options;if(typeof uri==="string"){params={uri:uri};}}else{params=immutable(options,{uri:uri});}
params.callback=callback;return params}
function createXHR(uri,options,callback){options=initParams(uri,options,callback);return _createXHR(options)}
function _createXHR(options){if(typeof options.callback==="undefined"){throw new Error("callback argument missing")}
var called=false;var callback=function cbOnce(err,response,body){if(!called){called=true;options.callback(err,response,body);}};function readystatechange(){if(xhr.readyState===4){setTimeout(loadFunc,0);}}
function getBody(){var body=undefined;if(xhr.response){body=xhr.response;}else{body=xhr.responseText||getXml(xhr);}
if(isJson){try{body=JSON.parse(body);}catch(e){}}
return body}
function errorFunc(evt){clearTimeout(timeoutTimer);if(!(evt instanceof Error)){evt=new Error(""+(evt||"Unknown XMLHttpRequest Error"));}
evt.statusCode=0;return callback(evt,failureResponse)}
function loadFunc(){if(aborted)return
var status;clearTimeout(timeoutTimer);if(options.useXDR&&xhr.status===undefined){status=200;}else{status=(xhr.status===1223?204:xhr.status);}
var response=failureResponse;var err=null;if(status!==0){response={body:getBody(),statusCode:status,method:method,headers:{},url:uri,rawRequest:xhr};if(xhr.getAllResponseHeaders){response.headers=parseHeaders(xhr.getAllResponseHeaders());}}else{err=new Error("Internal XMLHttpRequest Error");}
return callback(err,response,response.body)}
var xhr=options.xhr||null;if(!xhr){if(options.cors||options.useXDR){xhr=new createXHR.XDomainRequest();}else{xhr=new createXHR.XMLHttpRequest();}}
var key;var aborted;var uri=xhr.url=options.uri||options.url;var method=xhr.method=options.method||"GET";var body=options.body||options.data;var headers=xhr.headers=options.headers||{};var sync=!!options.sync;var isJson=false;var timeoutTimer;var failureResponse={body:undefined,headers:{},statusCode:0,method:method,url:uri,rawRequest:xhr};if("json"in options&&options.json!==false){isJson=true;headers["accept"]||headers["Accept"]||(headers["Accept"]="application/json");if(method!=="GET"&&method!=="HEAD"){headers["content-type"]||headers["Content-Type"]||(headers["Content-Type"]="application/json");body=JSON.stringify(options.json===true?body:options.json);}}
xhr.onreadystatechange=readystatechange;xhr.onload=loadFunc;xhr.onerror=errorFunc;xhr.onprogress=function(){};xhr.onabort=function(){aborted=true;};xhr.ontimeout=errorFunc;xhr.open(method,uri,!sync,options.username,options.password);if(!sync){xhr.withCredentials=!!options.withCredentials;}
if(!sync&&options.timeout>0){timeoutTimer=setTimeout(function(){if(aborted)return
aborted=true;xhr.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT";errorFunc(e);},options.timeout);}
if(xhr.setRequestHeader){for(key in headers){if(headers.hasOwnProperty(key)){xhr.setRequestHeader(key,headers[key]);}}}else if(options.headers&&!isEmpty(options.headers)){throw new Error("Headers cannot be set on an XDomainRequest object")}
if("responseType"in options){xhr.responseType=options.responseType;}
if("beforeSend"in options&&typeof options.beforeSend==="function"){options.beforeSend(xhr);}
xhr.send(body||null);return xhr}
function getXml(xhr){if(xhr.responseType==="document"){return xhr.responseXML}
var firefoxBugTakenEffect=xhr.responseXML&&xhr.responseXML.documentElement.nodeName==="parsererror";if(xhr.responseType===""&&!firefoxBugTakenEffect){return xhr.responseXML}
return null}
function noop(){}
var parseCues=function parseCues(srcContent,track){var parser=new window_1.WebVTT.Parser(window_1,window_1.vttjs,window_1.WebVTT.StringDecoder());var errors=[];parser.oncue=function(cue){track.addCue(cue);};parser.onparsingerror=function(error){errors.push(error);};parser.onflush=function(){track.trigger({type:'loadeddata',target:track});};parser.parse(srcContent);if(errors.length>0){if(window_1.console&&window_1.console.groupCollapsed){window_1.console.groupCollapsed('Text Track parsing errors for '+track.src);}
errors.forEach(function(error){return log.error(error);});if(window_1.console&&window_1.console.groupEnd){window_1.console.groupEnd();}}
parser.flush();};var loadTrack=function loadTrack(src,track){var opts={uri:src};var crossOrigin=isCrossOrigin(src);if(crossOrigin){opts.cors=crossOrigin;}
xhr(opts,bind(this,function(err,response,responseBody){if(err){return log.error(err,response);}
track.loaded_=true;if(typeof window_1.WebVTT!=='function'){if(track.tech_){var loadHandler=function loadHandler(){return parseCues(responseBody,track);};track.tech_.on('vttjsloaded',loadHandler);track.tech_.on('vttjserror',function(){log.error('vttjs failed to load, stopping trying to process '+track.src);track.tech_.off('vttjsloaded',loadHandler);});}}else{parseCues(responseBody,track);}}));};var TextTrack=function(_Track){inherits(TextTrack,_Track);function TextTrack(){var _this,_ret;var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};classCallCheck(this,TextTrack);if(!options.tech){throw new Error('A tech was not provided.');}
var settings=mergeOptions(options,{kind:TextTrackKind[options.kind]||'subtitles',language:options.language||options.srclang||''});var mode=TextTrackMode[settings.mode]||'disabled';var default_=settings['default'];if(settings.kind==='metadata'||settings.kind==='chapters'){mode='hidden';}
var tt=(_this=possibleConstructorReturn(this,_Track.call(this,settings)),_this);tt.tech_=settings.tech;if(IS_IE8){for(var prop in TextTrack.prototype){if(prop!=='constructor'){tt[prop]=TextTrack.prototype[prop];}}}
tt.cues_=[];tt.activeCues_=[];var cues=new TextTrackCueList(tt.cues_);var activeCues=new TextTrackCueList(tt.activeCues_);var changed=false;var timeupdateHandler=bind(tt,function(){this.activeCues=this.activeCues;if(changed){this.trigger('cuechange');changed=false;}});if(mode!=='disabled'){tt.tech_.ready(function(){tt.tech_.on('timeupdate',timeupdateHandler);},true);}
Object.defineProperty(tt,'default',{get:function get$$1(){return default_;},set:function set$$1(){}});Object.defineProperty(tt,'mode',{get:function get$$1(){return mode;},set:function set$$1(newMode){var _this2=this;if(!TextTrackMode[newMode]){return;}
mode=newMode;if(mode!=='disabled'){this.tech_.ready(function(){_this2.tech_.on('timeupdate',timeupdateHandler);},true);}else{this.tech_.off('timeupdate',timeupdateHandler);}
this.trigger('modechange');}});Object.defineProperty(tt,'cues',{get:function get$$1(){if(!this.loaded_){return null;}
return cues;},set:function set$$1(){}});Object.defineProperty(tt,'activeCues',{get:function get$$1(){if(!this.loaded_){return null;}
if(this.cues.length===0){return activeCues;}
var ct=this.tech_.currentTime();var active=[];for(var i=0,l=this.cues.length;i<l;i++){var cue=this.cues[i];if(cue.startTime<=ct&&cue.endTime>=ct){active.push(cue);}else if(cue.startTime===cue.endTime&&cue.startTime<=ct&&cue.startTime+0.5>=ct){active.push(cue);}}
changed=false;if(active.length!==this.activeCues_.length){changed=true;}else{for(var _i=0;_i<active.length;_i++){if(this.activeCues_.indexOf(active[_i])===-1){changed=true;}}}
this.activeCues_=active;activeCues.setCues_(this.activeCues_);return activeCues;},set:function set$$1(){}});if(settings.src){tt.src=settings.src;loadTrack(settings.src,tt);}else{tt.loaded_=true;}
return _ret=tt,possibleConstructorReturn(_this,_ret);}
TextTrack.prototype.addCue=function addCue(originalCue){var cue=originalCue;if(window_1.vttjs&&!(originalCue instanceof window_1.vttjs.VTTCue)){cue=new window_1.vttjs.VTTCue(originalCue.startTime,originalCue.endTime,originalCue.text);for(var prop in originalCue){if(!(prop in cue)){cue[prop]=originalCue[prop];}}
cue.id=originalCue.id;cue.originalCue_=originalCue;}
var tracks=this.tech_.textTracks();for(var i=0;i<tracks.length;i++){if(tracks[i]!==this){tracks[i].removeCue(cue);}}
this.cues_.push(cue);this.cues.setCues_(this.cues_);};TextTrack.prototype.removeCue=function removeCue(_removeCue){var i=this.cues_.length;while(i--){var cue=this.cues_[i];if(cue===_removeCue||cue.originalCue_&&cue.originalCue_===_removeCue){this.cues_.splice(i,1);this.cues.setCues_(this.cues_);break;}}};return TextTrack;}(Track);TextTrack.prototype.allowedEvents_={cuechange:'cuechange'};var AudioTrack=function(_Track){inherits(AudioTrack,_Track);function AudioTrack(){var _this,_ret;var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};classCallCheck(this,AudioTrack);var settings=mergeOptions(options,{kind:AudioTrackKind[options.kind]||''});var track=(_this=possibleConstructorReturn(this,_Track.call(this,settings)),_this);var enabled=false;if(IS_IE8){for(var prop in AudioTrack.prototype){if(prop!=='constructor'){track[prop]=AudioTrack.prototype[prop];}}}
Object.defineProperty(track,'enabled',{get:function get$$1(){return enabled;},set:function set$$1(newEnabled){if(typeof newEnabled!=='boolean'||newEnabled===enabled){return;}
enabled=newEnabled;this.trigger('enabledchange');}});if(settings.enabled){track.enabled=settings.enabled;}
track.loaded_=true;return _ret=track,possibleConstructorReturn(_this,_ret);}
return AudioTrack;}(Track);var VideoTrack=function(_Track){inherits(VideoTrack,_Track);function VideoTrack(){var _this,_ret;var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};classCallCheck(this,VideoTrack);var settings=mergeOptions(options,{kind:VideoTrackKind[options.kind]||''});var track=(_this=possibleConstructorReturn(this,_Track.call(this,settings)),_this);var selected=false;if(IS_IE8){for(var prop in VideoTrack.prototype){if(prop!=='constructor'){track[prop]=VideoTrack.prototype[prop];}}}
Object.defineProperty(track,'selected',{get:function get$$1(){return selected;},set:function set$$1(newSelected){if(typeof newSelected!=='boolean'||newSelected===selected){return;}
selected=newSelected;this.trigger('selectedchange');}});if(settings.selected){track.selected=settings.selected;}
return _ret=track,possibleConstructorReturn(_this,_ret);}
return VideoTrack;}(Track);var NONE=0;var LOADING=1;var LOADED=2;var ERROR=3;var HTMLTrackElement=function(_EventTarget){inherits(HTMLTrackElement,_EventTarget);function HTMLTrackElement(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};classCallCheck(this,HTMLTrackElement);var _this=possibleConstructorReturn(this,_EventTarget.call(this));var readyState=void 0;var trackElement=_this;if(IS_IE8){trackElement=document_1.createElement('custom');for(var prop in HTMLTrackElement.prototype){if(prop!=='constructor'){trackElement[prop]=HTMLTrackElement.prototype[prop];}}}
var track=new TextTrack(options);trackElement.kind=track.kind;trackElement.src=track.src;trackElement.srclang=track.language;trackElement.label=track.label;trackElement['default']=track['default'];Object.defineProperty(trackElement,'readyState',{get:function get$$1(){return readyState;}});Object.defineProperty(trackElement,'track',{get:function get$$1(){return track;}});readyState=NONE;track.addEventListener('loadeddata',function(){readyState=LOADED;trackElement.trigger({type:'load',target:trackElement});});if(IS_IE8){var _ret;return _ret=trackElement,possibleConstructorReturn(_this,_ret);}
return _this;}
return HTMLTrackElement;}(EventTarget);HTMLTrackElement.prototype.allowedEvents_={load:'load'};HTMLTrackElement.NONE=NONE;HTMLTrackElement.LOADING=LOADING;HTMLTrackElement.LOADED=LOADED;HTMLTrackElement.ERROR=ERROR;var NORMAL={audio:{ListClass:AudioTrackList,TrackClass:AudioTrack,capitalName:'Audio'},video:{ListClass:VideoTrackList,TrackClass:VideoTrack,capitalName:'Video'},text:{ListClass:TextTrackList,TrackClass:TextTrack,capitalName:'Text'}};Object.keys(NORMAL).forEach(function(type){NORMAL[type].getterName=type+'Tracks';NORMAL[type].privateName=type+'Tracks_';});var REMOTE={remoteText:{ListClass:TextTrackList,TrackClass:TextTrack,capitalName:'RemoteText',getterName:'remoteTextTracks',privateName:'remoteTextTracks_'},remoteTextEl:{ListClass:HtmlTrackElementList,TrackClass:HTMLTrackElement,capitalName:'RemoteTextTrackEls',getterName:'remoteTextTrackEls',privateName:'remoteTextTrackEls_'}};var ALL=mergeOptions(NORMAL,REMOTE);REMOTE.names=Object.keys(REMOTE);NORMAL.names=Object.keys(NORMAL);ALL.names=[].concat(REMOTE.names).concat(NORMAL.names);var _objCreate=Object.create||(function(){function F(){}
return function(o){if(arguments.length!==1){throw new Error('Object.create shim only accepts one parameter.');}
F.prototype=o;return new F();};})();function ParsingError(errorData,message){this.name="ParsingError";this.code=errorData.code;this.message=message||errorData.message;}
ParsingError.prototype=_objCreate(Error.prototype);ParsingError.prototype.constructor=ParsingError;ParsingError.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function parseTimeStamp(input){function computeSeconds(h,m,s,f){return(h|0)*3600+(m|0)*60+(s|0)+(f|0)/1000;}
var m=input.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);if(!m){return null;}
if(m[3]){return computeSeconds(m[1],m[2],m[3].replace(":",""),m[4]);}else if(m[1]>59){return computeSeconds(m[1],m[2],0,m[4]);}else{return computeSeconds(0,m[1],m[2],m[4]);}}
function Settings(){this.values=_objCreate(null);}
Settings.prototype={set:function(k,v){if(!this.get(k)&&v!==""){this.values[k]=v;}},get:function(k,dflt,defaultKey){if(defaultKey){return this.has(k)?this.values[k]:dflt[defaultKey];}
return this.has(k)?this.values[k]:dflt;},has:function(k){return k in this.values;},alt:function(k,v,a){for(var n=0;n<a.length;++n){if(v===a[n]){this.set(k,v);break;}}},integer:function(k,v){if(/^-?\d+$/.test(v)){this.set(k,parseInt(v,10));}},percent:function(k,v){var m;if((m=v.match(/^([\d]{1,3})(\.[\d]*)?%$/))){v=parseFloat(v);if(v>=0&&v<=100){this.set(k,v);return true;}}
return false;}};function parseOptions(input,callback,keyValueDelim,groupDelim){var groups=groupDelim?input.split(groupDelim):[input];for(var i in groups){if(typeof groups[i]!=="string"){continue;}
var kv=groups[i].split(keyValueDelim);if(kv.length!==2){continue;}
var k=kv[0];var v=kv[1];callback(k,v);}}
function parseCue(input,cue,regionList){var oInput=input;function consumeTimeStamp(){var ts=parseTimeStamp(input);if(ts===null){throw new ParsingError(ParsingError.Errors.BadTimeStamp,"Malformed timestamp: "+oInput);}
input=input.replace(/^[^\sa-zA-Z-]+/,"");return ts;}
function consumeCueSettings(input,cue){var settings=new Settings();parseOptions(input,function(k,v){switch(k){case"region":for(var i=regionList.length-1;i>=0;i--){if(regionList[i].id===v){settings.set(k,regionList[i].region);break;}}
break;case"vertical":settings.alt(k,v,["rl","lr"]);break;case"line":var vals=v.split(","),vals0=vals[0];settings.integer(k,vals0);settings.percent(k,vals0)?settings.set("snapToLines",false):null;settings.alt(k,vals0,["auto"]);if(vals.length===2){settings.alt("lineAlign",vals[1],["start","middle","end"]);}
break;case"position":vals=v.split(",");settings.percent(k,vals[0]);if(vals.length===2){settings.alt("positionAlign",vals[1],["start","middle","end"]);}
break;case"size":settings.percent(k,v);break;case"align":settings.alt(k,v,["start","middle","end","left","right"]);break;}},/:/,/\s/);cue.region=settings.get("region",null);cue.vertical=settings.get("vertical","");cue.line=settings.get("line","auto");cue.lineAlign=settings.get("lineAlign","start");cue.snapToLines=settings.get("snapToLines",true);cue.size=settings.get("size",100);cue.align=settings.get("align","middle");cue.position=settings.get("position",{start:0,left:0,middle:50,end:100,right:100},cue.align);cue.positionAlign=settings.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},cue.align);}
function skipWhitespace(){input=input.replace(/^\s+/,"");}
skipWhitespace();cue.startTime=consumeTimeStamp();skipWhitespace();if(input.substr(0,3)!=="-->"){throw new ParsingError(ParsingError.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+
oInput);}
input=input.substr(3);skipWhitespace();cue.endTime=consumeTimeStamp();skipWhitespace();consumeCueSettings(input,cue);}
var ESCAPE={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"\u200e","&rlm;":"\u200f","&nbsp;":"\u00a0"};var TAG_NAME={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"};var TAG_ANNOTATION={v:"title",lang:"lang"};var NEEDS_PARENT={rt:"ruby"};function parseContent(window,input){function nextToken(){if(!input){return null;}
function consume(result){input=input.substr(result.length);return result;}
var m=input.match(/^([^<]*)(<[^>]*>?)?/);return consume(m[1]?m[1]:m[2]);}
function unescape1(e){return ESCAPE[e];}
function unescape(s){while((m=s.match(/&(amp|lt|gt|lrm|rlm|nbsp);/))){s=s.replace(m[0],unescape1);}
return s;}
function shouldAdd(current,element){return!NEEDS_PARENT[element.localName]||NEEDS_PARENT[element.localName]===current.localName;}
function createElement(type,annotation){var tagName=TAG_NAME[type];if(!tagName){return null;}
var element=window.document.createElement(tagName);element.localName=tagName;var name=TAG_ANNOTATION[type];if(name&&annotation){element[name]=annotation.trim();}
return element;}
var rootDiv=window.document.createElement("div"),current=rootDiv,t,tagStack=[];while((t=nextToken())!==null){if(t[0]==='<'){if(t[1]==="/"){if(tagStack.length&&tagStack[tagStack.length-1]===t.substr(2).replace(">","")){tagStack.pop();current=current.parentNode;}
continue;}
var ts=parseTimeStamp(t.substr(1,t.length-2));var node;if(ts){node=window.document.createProcessingInstruction("timestamp",ts);current.appendChild(node);continue;}
var m=t.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!m){continue;}
node=createElement(m[1],m[3]);if(!node){continue;}
if(!shouldAdd(current,node)){continue;}
if(m[2]){node.className=m[2].substr(1).replace('.',' ');}
tagStack.push(m[1]);current.appendChild(node);current=node;continue;}
current.appendChild(window.document.createTextNode(unescape(t)));}
return rootDiv;}
var strongRTLRanges=[[0x5be,0x5be],[0x5c0,0x5c0],[0x5c3,0x5c3],[0x5c6,0x5c6],[0x5d0,0x5ea],[0x5f0,0x5f4],[0x608,0x608],[0x60b,0x60b],[0x60d,0x60d],[0x61b,0x61b],[0x61e,0x64a],[0x66d,0x66f],[0x671,0x6d5],[0x6e5,0x6e6],[0x6ee,0x6ef],[0x6fa,0x70d],[0x70f,0x710],[0x712,0x72f],[0x74d,0x7a5],[0x7b1,0x7b1],[0x7c0,0x7ea],[0x7f4,0x7f5],[0x7fa,0x7fa],[0x800,0x815],[0x81a,0x81a],[0x824,0x824],[0x828,0x828],[0x830,0x83e],[0x840,0x858],[0x85e,0x85e],[0x8a0,0x8a0],[0x8a2,0x8ac],[0x200f,0x200f],[0xfb1d,0xfb1d],[0xfb1f,0xfb28],[0xfb2a,0xfb36],[0xfb38,0xfb3c],[0xfb3e,0xfb3e],[0xfb40,0xfb41],[0xfb43,0xfb44],[0xfb46,0xfbc1],[0xfbd3,0xfd3d],[0xfd50,0xfd8f],[0xfd92,0xfdc7],[0xfdf0,0xfdfc],[0xfe70,0xfe74],[0xfe76,0xfefc],[0x10800,0x10805],[0x10808,0x10808],[0x1080a,0x10835],[0x10837,0x10838],[0x1083c,0x1083c],[0x1083f,0x10855],[0x10857,0x1085f],[0x10900,0x1091b],[0x10920,0x10939],[0x1093f,0x1093f],[0x10980,0x109b7],[0x109be,0x109bf],[0x10a00,0x10a00],[0x10a10,0x10a13],[0x10a15,0x10a17],[0x10a19,0x10a33],[0x10a40,0x10a47],[0x10a50,0x10a58],[0x10a60,0x10a7f],[0x10b00,0x10b35],[0x10b40,0x10b55],[0x10b58,0x10b72],[0x10b78,0x10b7f],[0x10c00,0x10c48],[0x1ee00,0x1ee03],[0x1ee05,0x1ee1f],[0x1ee21,0x1ee22],[0x1ee24,0x1ee24],[0x1ee27,0x1ee27],[0x1ee29,0x1ee32],[0x1ee34,0x1ee37],[0x1ee39,0x1ee39],[0x1ee3b,0x1ee3b],[0x1ee42,0x1ee42],[0x1ee47,0x1ee47],[0x1ee49,0x1ee49],[0x1ee4b,0x1ee4b],[0x1ee4d,0x1ee4f],[0x1ee51,0x1ee52],[0x1ee54,0x1ee54],[0x1ee57,0x1ee57],[0x1ee59,0x1ee59],[0x1ee5b,0x1ee5b],[0x1ee5d,0x1ee5d],[0x1ee5f,0x1ee5f],[0x1ee61,0x1ee62],[0x1ee64,0x1ee64],[0x1ee67,0x1ee6a],[0x1ee6c,0x1ee72],[0x1ee74,0x1ee77],[0x1ee79,0x1ee7c],[0x1ee7e,0x1ee7e],[0x1ee80,0x1ee89],[0x1ee8b,0x1ee9b],[0x1eea1,0x1eea3],[0x1eea5,0x1eea9],[0x1eeab,0x1eebb],[0x10fffd,0x10fffd]];function isStrongRTLChar(charCode){for(var i=0;i<strongRTLRanges.length;i++){var currentRange=strongRTLRanges[i];if(charCode>=currentRange[0]&&charCode<=currentRange[1]){return true;}}
return false;}
function determineBidi(cueDiv){var nodeStack=[],text="",charCode;if(!cueDiv||!cueDiv.childNodes){return"ltr";}
function pushNodes(nodeStack,node){for(var i=node.childNodes.length-1;i>=0;i--){nodeStack.push(node.childNodes[i]);}}
function nextTextNode(nodeStack){if(!nodeStack||!nodeStack.length){return null;}
var node=nodeStack.pop(),text=node.textContent||node.innerText;if(text){var m=text.match(/^.*(\n|\r)/);if(m){nodeStack.length=0;return m[0];}
return text;}
if(node.tagName==="ruby"){return nextTextNode(nodeStack);}
if(node.childNodes){pushNodes(nodeStack,node);return nextTextNode(nodeStack);}}
pushNodes(nodeStack,cueDiv);while((text=nextTextNode(nodeStack))){for(var i=0;i<text.length;i++){charCode=text.charCodeAt(i);if(isStrongRTLChar(charCode)){return"rtl";}}}
return"ltr";}
function computeLinePos(cue){if(typeof cue.line==="number"&&(cue.snapToLines||(cue.line>=0&&cue.line<=100))){return cue.line;}
if(!cue.track||!cue.track.textTrackList||!cue.track.textTrackList.mediaElement){return-1;}
var track=cue.track,trackList=track.textTrackList,count=0;for(var i=0;i<trackList.length&&trackList[i]!==track;i++){if(trackList[i].mode==="showing"){count++;}}
return++count*-1;}
function StyleBox(){}
StyleBox.prototype.applyStyles=function(styles,div){div=div||this.div;for(var prop in styles){if(styles.hasOwnProperty(prop)){div.style[prop]=styles[prop];}}};StyleBox.prototype.formatStyle=function(val,unit){return val===0?0:val+unit;};function CueStyleBox(window,cue,styleOptions){var isIE8=(/MSIE\s8\.0/).test(navigator.userAgent);var color="rgba(255, 255, 255, 1)";var backgroundColor="rgba(0, 0, 0, 0.8)";if(isIE8){color="rgb(255, 255, 255)";backgroundColor="rgb(0, 0, 0)";}
StyleBox.call(this);this.cue=cue;this.cueDiv=parseContent(window,cue.text);var styles={color:color,backgroundColor:backgroundColor,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"};if(!isIE8){styles.writingMode=cue.vertical===""?"horizontal-tb":cue.vertical==="lr"?"vertical-lr":"vertical-rl";styles.unicodeBidi="plaintext";}
this.applyStyles(styles,this.cueDiv);this.div=window.document.createElement("div");styles={textAlign:cue.align==="middle"?"center":cue.align,font:styleOptions.font,whiteSpace:"pre-line",position:"absolute"};if(!isIE8){styles.direction=determineBidi(this.cueDiv);styles.writingMode=cue.vertical===""?"horizontal-tb":cue.vertical==="lr"?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext";}
this.applyStyles(styles);this.div.appendChild(this.cueDiv);var textPos=0;switch(cue.positionAlign){case"start":textPos=cue.position;break;case"middle":textPos=cue.position-(cue.size/2);break;case"end":textPos=cue.position-cue.size;break;}
if(cue.vertical===""){this.applyStyles({left:this.formatStyle(textPos,"%"),width:this.formatStyle(cue.size,"%")});}else{this.applyStyles({top:this.formatStyle(textPos,"%"),height:this.formatStyle(cue.size,"%")});}
this.move=function(box){this.applyStyles({top:this.formatStyle(box.top,"px"),bottom:this.formatStyle(box.bottom,"px"),left:this.formatStyle(box.left,"px"),right:this.formatStyle(box.right,"px"),height:this.formatStyle(box.height,"px"),width:this.formatStyle(box.width,"px")});};}
CueStyleBox.prototype=_objCreate(StyleBox.prototype);CueStyleBox.prototype.constructor=CueStyleBox;function BoxPosition(obj){var isIE8=(/MSIE\s8\.0/).test(navigator.userAgent);var lh,height,width,top;if(obj.div){height=obj.div.offsetHeight;width=obj.div.offsetWidth;top=obj.div.offsetTop;var rects=(rects=obj.div.childNodes)&&(rects=rects[0])&&rects.getClientRects&&rects.getClientRects();obj=obj.div.getBoundingClientRect();lh=rects?Math.max((rects[0]&&rects[0].height)||0,obj.height/rects.length):0;}
this.left=obj.left;this.right=obj.right;this.top=obj.top||top;this.height=obj.height||height;this.bottom=obj.bottom||(top+(obj.height||height));this.width=obj.width||width;this.lineHeight=lh!==undefined?lh:obj.lineHeight;if(isIE8&&!this.lineHeight){this.lineHeight=13;}}
BoxPosition.prototype.move=function(axis,toMove){toMove=toMove!==undefined?toMove:this.lineHeight;switch(axis){case"+x":this.left+=toMove;this.right+=toMove;break;case"-x":this.left-=toMove;this.right-=toMove;break;case"+y":this.top+=toMove;this.bottom+=toMove;break;case"-y":this.top-=toMove;this.bottom-=toMove;break;}};BoxPosition.prototype.overlaps=function(b2){return this.left<b2.right&&this.right>b2.left&&this.top<b2.bottom&&this.bottom>b2.top;};BoxPosition.prototype.overlapsAny=function(boxes){for(var i=0;i<boxes.length;i++){if(this.overlaps(boxes[i])){return true;}}
return false;};BoxPosition.prototype.within=function(container){return this.top>=container.top&&this.bottom<=container.bottom&&this.left>=container.left&&this.right<=container.right;};BoxPosition.prototype.overlapsOppositeAxis=function(container,axis){switch(axis){case"+x":return this.left<container.left;case"-x":return this.right>container.right;case"+y":return this.top<container.top;case"-y":return this.bottom>container.bottom;}};BoxPosition.prototype.intersectPercentage=function(b2){var x=Math.max(0,Math.min(this.right,b2.right)-Math.max(this.left,b2.left)),y=Math.max(0,Math.min(this.bottom,b2.bottom)-Math.max(this.top,b2.top)),intersectArea=x*y;return intersectArea/(this.height*this.width);};BoxPosition.prototype.toCSSCompatValues=function(reference){return{top:this.top-reference.top,bottom:reference.bottom-this.bottom,left:this.left-reference.left,right:reference.right-this.right,height:this.height,width:this.width};};BoxPosition.getSimpleBoxPosition=function(obj){var height=obj.div?obj.div.offsetHeight:obj.tagName?obj.offsetHeight:0;var width=obj.div?obj.div.offsetWidth:obj.tagName?obj.offsetWidth:0;var top=obj.div?obj.div.offsetTop:obj.tagName?obj.offsetTop:0;obj=obj.div?obj.div.getBoundingClientRect():obj.tagName?obj.getBoundingClientRect():obj;var ret={left:obj.left,right:obj.right,top:obj.top||top,height:obj.height||height,bottom:obj.bottom||(top+(obj.height||height)),width:obj.width||width};return ret;};function moveBoxToLinePosition(window,styleBox,containerBox,boxPositions){function findBestPosition(b,axis){var bestPosition,specifiedPosition=new BoxPosition(b),percentage=1;for(var i=0;i<axis.length;i++){while(b.overlapsOppositeAxis(containerBox,axis[i])||(b.within(containerBox)&&b.overlapsAny(boxPositions))){b.move(axis[i]);}
if(b.within(containerBox)){return b;}
var p=b.intersectPercentage(containerBox);if(percentage>p){bestPosition=new BoxPosition(b);percentage=p;}
b=new BoxPosition(specifiedPosition);}
return bestPosition||specifiedPosition;}
var boxPosition=new BoxPosition(styleBox),cue=styleBox.cue,linePos=computeLinePos(cue),axis=[];if(cue.snapToLines){var size;switch(cue.vertical){case"":axis=["+y","-y"];size="height";break;case"rl":axis=["+x","-x"];size="width";break;case"lr":axis=["-x","+x"];size="width";break;}
var step=boxPosition.lineHeight,position=step*Math.round(linePos),maxPosition=containerBox[size]+step,initialAxis=axis[0];if(Math.abs(position)>maxPosition){position=position<0?-1:1;position*=Math.ceil(maxPosition/step)*step;}
if(linePos<0){position+=cue.vertical===""?containerBox.height:containerBox.width;axis=axis.reverse();}
boxPosition.move(initialAxis,position);}else{var calculatedPercentage=(boxPosition.lineHeight/containerBox.height)*100;switch(cue.lineAlign){case"middle":linePos-=(calculatedPercentage/2);break;case"end":linePos-=calculatedPercentage;break;}
switch(cue.vertical){case"":styleBox.applyStyles({top:styleBox.formatStyle(linePos,"%")});break;case"rl":styleBox.applyStyles({left:styleBox.formatStyle(linePos,"%")});break;case"lr":styleBox.applyStyles({right:styleBox.formatStyle(linePos,"%")});break;}
axis=["+y","-x","+x","-y"];boxPosition=new BoxPosition(styleBox);}
var bestPosition=findBestPosition(boxPosition,axis);styleBox.move(bestPosition.toCSSCompatValues(containerBox));}
function WebVTT$1(){}
WebVTT$1.StringDecoder=function(){return{decode:function(data){if(!data){return"";}
if(typeof data!=="string"){throw new Error("Error - expected string data.");}
return decodeURIComponent(encodeURIComponent(data));}};};WebVTT$1.convertCueToDOMTree=function(window,cuetext){if(!window||!cuetext){return null;}
return parseContent(window,cuetext);};var FONT_SIZE_PERCENT=0.05;var FONT_STYLE="sans-serif";var CUE_BACKGROUND_PADDING="1.5%";WebVTT$1.processCues=function(window,cues,overlay){if(!window||!cues||!overlay){return null;}
while(overlay.firstChild){overlay.removeChild(overlay.firstChild);}
var paddedOverlay=window.document.createElement("div");paddedOverlay.style.position="absolute";paddedOverlay.style.left="0";paddedOverlay.style.right="0";paddedOverlay.style.top="0";paddedOverlay.style.bottom="0";paddedOverlay.style.margin=CUE_BACKGROUND_PADDING;overlay.appendChild(paddedOverlay);function shouldCompute(cues){for(var i=0;i<cues.length;i++){if(cues[i].hasBeenReset||!cues[i].displayState){return true;}}
return false;}
if(!shouldCompute(cues)){for(var i=0;i<cues.length;i++){paddedOverlay.appendChild(cues[i].displayState);}
return;}
var boxPositions=[],containerBox=BoxPosition.getSimpleBoxPosition(paddedOverlay),fontSize=Math.round(containerBox.height*FONT_SIZE_PERCENT*100)/100;var styleOptions={font:fontSize+"px "+FONT_STYLE};(function(){var styleBox,cue;for(var i=0;i<cues.length;i++){cue=cues[i];styleBox=new CueStyleBox(window,cue,styleOptions);paddedOverlay.appendChild(styleBox.div);moveBoxToLinePosition(window,styleBox,containerBox,boxPositions);cue.displayState=styleBox.div;boxPositions.push(BoxPosition.getSimpleBoxPosition(styleBox));}})();};WebVTT$1.Parser=function(window,vttjs,decoder){if(!decoder){decoder=vttjs;vttjs={};}
if(!vttjs){vttjs={};}
this.window=window;this.vttjs=vttjs;this.state="INITIAL";this.buffer="";this.decoder=decoder||new TextDecoder("utf8");this.regionList=[];};WebVTT$1.Parser.prototype={reportOrThrowError:function(e){if(e instanceof ParsingError){this.onparsingerror&&this.onparsingerror(e);}else{throw e;}},parse:function(data){var self=this;if(data){self.buffer+=self.decoder.decode(data,{stream:true});}
function collectNextLine(){var buffer=self.buffer;var pos=0;while(pos<buffer.length&&buffer[pos]!=='\r'&&buffer[pos]!=='\n'){++pos;}
var line=buffer.substr(0,pos);if(buffer[pos]==='\r'){++pos;}
if(buffer[pos]==='\n'){++pos;}
self.buffer=buffer.substr(pos);return line;}
function parseRegion(input){var settings=new Settings();parseOptions(input,function(k,v){switch(k){case"id":settings.set(k,v);break;case"width":settings.percent(k,v);break;case"lines":settings.integer(k,v);break;case"regionanchor":case"viewportanchor":var xy=v.split(',');if(xy.length!==2){break;}
var anchor=new Settings();anchor.percent("x",xy[0]);anchor.percent("y",xy[1]);if(!anchor.has("x")||!anchor.has("y")){break;}
settings.set(k+"X",anchor.get("x"));settings.set(k+"Y",anchor.get("y"));break;case"scroll":settings.alt(k,v,["up"]);break;}},/=/,/\s/);if(settings.has("id")){var region=new(self.vttjs.VTTRegion||self.window.VTTRegion)();region.width=settings.get("width",100);region.lines=settings.get("lines",3);region.regionAnchorX=settings.get("regionanchorX",0);region.regionAnchorY=settings.get("regionanchorY",100);region.viewportAnchorX=settings.get("viewportanchorX",0);region.viewportAnchorY=settings.get("viewportanchorY",100);region.scroll=settings.get("scroll","");self.onregion&&self.onregion(region);self.regionList.push({id:settings.get("id"),region:region});}}
function parseTimestampMap(input){var settings=new Settings();parseOptions(input,function(k,v){switch(k){case"MPEGT":settings.integer(k+'S',v);break;case"LOCA":settings.set(k+'L',parseTimeStamp(v));break;}},/[^\d]:/,/,/);self.ontimestampmap&&self.ontimestampmap({"MPEGTS":settings.get("MPEGTS"),"LOCAL":settings.get("LOCAL")});}
function parseHeader(input){if(input.match(/X-TIMESTAMP-MAP/)){parseOptions(input,function(k,v){switch(k){case"X-TIMESTAMP-MAP":parseTimestampMap(v);break;}},/=/);}else{parseOptions(input,function(k,v){switch(k){case"Region":parseRegion(v);break;}},/:/);}}
try{var line;if(self.state==="INITIAL"){if(!/\r\n|\n/.test(self.buffer)){return this;}
line=collectNextLine();var m=line.match(/^WEBVTT([ \t].*)?$/);if(!m||!m[0]){throw new ParsingError(ParsingError.Errors.BadSignature);}
self.state="HEADER";}
var alreadyCollectedLine=false;while(self.buffer){if(!/\r\n|\n/.test(self.buffer)){return this;}
if(!alreadyCollectedLine){line=collectNextLine();}else{alreadyCollectedLine=false;}
switch(self.state){case"HEADER":if(/:/.test(line)){parseHeader(line);}else if(!line){self.state="ID";}
continue;case"NOTE":if(!line){self.state="ID";}
continue;case"ID":if(/^NOTE($|[ \t])/.test(line)){self.state="NOTE";break;}
if(!line){continue;}
self.cue=new(self.vttjs.VTTCue||self.window.VTTCue)(0,0,"");self.state="CUE";if(line.indexOf("-->")===-1){self.cue.id=line;continue;}
case"CUE":try{parseCue(line,self.cue,self.regionList);}catch(e){self.reportOrThrowError(e);self.cue=null;self.state="BADCUE";continue;}
self.state="CUETEXT";continue;case"CUETEXT":var hasSubstring=line.indexOf("-->")!==-1;if(!line||hasSubstring&&(alreadyCollectedLine=true)){self.oncue&&self.oncue(self.cue);self.cue=null;self.state="ID";continue;}
if(self.cue.text){self.cue.text+="\n";}
self.cue.text+=line;continue;case"BADCUE":if(!line){self.state="ID";}
continue;}}}catch(e){self.reportOrThrowError(e);if(self.state==="CUETEXT"&&self.cue&&self.oncue){self.oncue(self.cue);}
self.cue=null;self.state=self.state==="INITIAL"?"BADWEBVTT":"BADCUE";}
return this;},flush:function(){var self=this;try{self.buffer+=self.decoder.decode();if(self.cue||self.state==="HEADER"){self.buffer+="\n\n";self.parse();}
if(self.state==="INITIAL"){throw new ParsingError(ParsingError.Errors.BadSignature);}}catch(e){self.reportOrThrowError(e);}
self.onflush&&self.onflush();return this;}};var vtt$1=WebVTT$1;var autoKeyword="auto";var directionSetting={"":true,"lr":true,"rl":true};var alignSetting={"start":true,"middle":true,"end":true,"left":true,"right":true};function findDirectionSetting(value){if(typeof value!=="string"){return false;}
var dir=directionSetting[value.toLowerCase()];return dir?value.toLowerCase():false;}
function findAlignSetting(value){if(typeof value!=="string"){return false;}
var align=alignSetting[value.toLowerCase()];return align?value.toLowerCase():false;}
function extend$1(obj){var i=1;for(;i<arguments.length;i++){var cobj=arguments[i];for(var p in cobj){obj[p]=cobj[p];}}
return obj;}
function VTTCue(startTime,endTime,text){var cue=this;var isIE8=(/MSIE\s8\.0/).test(navigator.userAgent);var baseObj={};if(isIE8){cue=document.createElement('custom');}else{baseObj.enumerable=true;}
cue.hasBeenReset=false;var _id="";var _pauseOnExit=false;var _startTime=startTime;var _endTime=endTime;var _text=text;var _region=null;var _vertical="";var _snapToLines=true;var _line="auto";var _lineAlign="start";var _position=50;var _positionAlign="middle";var _size=50;var _align="middle";Object.defineProperty(cue,"id",extend$1({},baseObj,{get:function(){return _id;},set:function(value){_id=""+value;}}));Object.defineProperty(cue,"pauseOnExit",extend$1({},baseObj,{get:function(){return _pauseOnExit;},set:function(value){_pauseOnExit=!!value;}}));Object.defineProperty(cue,"startTime",extend$1({},baseObj,{get:function(){return _startTime;},set:function(value){if(typeof value!=="number"){throw new TypeError("Start time must be set to a number.");}
_startTime=value;this.hasBeenReset=true;}}));Object.defineProperty(cue,"endTime",extend$1({},baseObj,{get:function(){return _endTime;},set:function(value){if(typeof value!=="number"){throw new TypeError("End time must be set to a number.");}
_endTime=value;this.hasBeenReset=true;}}));Object.defineProperty(cue,"text",extend$1({},baseObj,{get:function(){return _text;},set:function(value){_text=""+value;this.hasBeenReset=true;}}));Object.defineProperty(cue,"region",extend$1({},baseObj,{get:function(){return _region;},set:function(value){_region=value;this.hasBeenReset=true;}}));Object.defineProperty(cue,"vertical",extend$1({},baseObj,{get:function(){return _vertical;},set:function(value){var setting=findDirectionSetting(value);if(setting===false){throw new SyntaxError("An invalid or illegal string was specified.");}
_vertical=setting;this.hasBeenReset=true;}}));Object.defineProperty(cue,"snapToLines",extend$1({},baseObj,{get:function(){return _snapToLines;},set:function(value){_snapToLines=!!value;this.hasBeenReset=true;}}));Object.defineProperty(cue,"line",extend$1({},baseObj,{get:function(){return _line;},set:function(value){if(typeof value!=="number"&&value!==autoKeyword){throw new SyntaxError("An invalid number or illegal string was specified.");}
_line=value;this.hasBeenReset=true;}}));Object.defineProperty(cue,"lineAlign",extend$1({},baseObj,{get:function(){return _lineAlign;},set:function(value){var setting=findAlignSetting(value);if(!setting){throw new SyntaxError("An invalid or illegal string was specified.");}
_lineAlign=setting;this.hasBeenReset=true;}}));Object.defineProperty(cue,"position",extend$1({},baseObj,{get:function(){return _position;},set:function(value){if(value<0||value>100){throw new Error("Position must be between 0 and 100.");}
_position=value;this.hasBeenReset=true;}}));Object.defineProperty(cue,"positionAlign",extend$1({},baseObj,{get:function(){return _positionAlign;},set:function(value){var setting=findAlignSetting(value);if(!setting){throw new SyntaxError("An invalid or illegal string was specified.");}
_positionAlign=setting;this.hasBeenReset=true;}}));Object.defineProperty(cue,"size",extend$1({},baseObj,{get:function(){return _size;},set:function(value){if(value<0||value>100){throw new Error("Size must be between 0 and 100.");}
_size=value;this.hasBeenReset=true;}}));Object.defineProperty(cue,"align",extend$1({},baseObj,{get:function(){return _align;},set:function(value){var setting=findAlignSetting(value);if(!setting){throw new SyntaxError("An invalid or illegal string was specified.");}
_align=setting;this.hasBeenReset=true;}}));cue.displayState=undefined;if(isIE8){return cue;}}
VTTCue.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text);};var vttcue=VTTCue;var scrollSetting={"":true,"up":true};function findScrollSetting(value){if(typeof value!=="string"){return false;}
var scroll=scrollSetting[value.toLowerCase()];return scroll?value.toLowerCase():false;}
function isValidPercentValue(value){return typeof value==="number"&&(value>=0&&value<=100);}
function VTTRegion(){var _width=100;var _lines=3;var _regionAnchorX=0;var _regionAnchorY=100;var _viewportAnchorX=0;var _viewportAnchorY=100;var _scroll="";Object.defineProperties(this,{"width":{enumerable:true,get:function(){return _width;},set:function(value){if(!isValidPercentValue(value)){throw new Error("Width must be between 0 and 100.");}
_width=value;}},"lines":{enumerable:true,get:function(){return _lines;},set:function(value){if(typeof value!=="number"){throw new TypeError("Lines must be set to a number.");}
_lines=value;}},"regionAnchorY":{enumerable:true,get:function(){return _regionAnchorY;},set:function(value){if(!isValidPercentValue(value)){throw new Error("RegionAnchorX must be between 0 and 100.");}
_regionAnchorY=value;}},"regionAnchorX":{enumerable:true,get:function(){return _regionAnchorX;},set:function(value){if(!isValidPercentValue(value)){throw new Error("RegionAnchorY must be between 0 and 100.");}
_regionAnchorX=value;}},"viewportAnchorY":{enumerable:true,get:function(){return _viewportAnchorY;},set:function(value){if(!isValidPercentValue(value)){throw new Error("ViewportAnchorY must be between 0 and 100.");}
_viewportAnchorY=value;}},"viewportAnchorX":{enumerable:true,get:function(){return _viewportAnchorX;},set:function(value){if(!isValidPercentValue(value)){throw new Error("ViewportAnchorX must be between 0 and 100.");}
_viewportAnchorX=value;}},"scroll":{enumerable:true,get:function(){return _scroll;},set:function(value){var setting=findScrollSetting(value);if(setting===false){throw new SyntaxError("An invalid or illegal string was specified.");}
_scroll=setting;}}});}
var vttregion=VTTRegion;var browserIndex=createCommonjsModule(function(module){var vttjs=module.exports={WebVTT:vtt$1,VTTCue:vttcue,VTTRegion:vttregion};window_1.vttjs=vttjs;window_1.WebVTT=vttjs.WebVTT;var cueShim=vttjs.VTTCue;var regionShim=vttjs.VTTRegion;var nativeVTTCue=window_1.VTTCue;var nativeVTTRegion=window_1.VTTRegion;vttjs.shim=function(){window_1.VTTCue=cueShim;window_1.VTTRegion=regionShim;};vttjs.restore=function(){window_1.VTTCue=nativeVTTCue;window_1.VTTRegion=nativeVTTRegion;};if(!window_1.VTTCue){vttjs.shim();}});function createTrackHelper(self,kind,label,language){var options=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{};var tracks=self.textTracks();options.kind=kind;if(label){options.label=label;}
if(language){options.language=language;}
options.tech=self;var track=new ALL.text.TrackClass(options);tracks.addTrack(track);return track;}
var Tech=function(_Component){inherits(Tech,_Component);function Tech(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var ready=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(){};classCallCheck(this,Tech);options.reportTouchActivity=false;var _this=possibleConstructorReturn(this,_Component.call(this,null,options,ready));_this.hasStarted_=false;_this.on('playing',function(){this.hasStarted_=true;});_this.on('loadstart',function(){this.hasStarted_=false;});ALL.names.forEach(function(name){var props=ALL[name];if(options&&options[props.getterName]){_this[props.privateName]=options[props.getterName];}});if(!_this.featuresProgressEvents){_this.manualProgressOn();}
if(!_this.featuresTimeupdateEvents){_this.manualTimeUpdatesOn();}
['Text','Audio','Video'].forEach(function(track){if(options['native'+track+'Tracks']===false){_this['featuresNative'+track+'Tracks']=false;}});if(options.nativeCaptions===false||options.nativeTextTracks===false){_this.featuresNativeTextTracks=false;}else if(options.nativeCaptions===true||options.nativeTextTracks===true){_this.featuresNativeTextTracks=true;}
if(!_this.featuresNativeTextTracks){_this.emulateTextTracks();}
_this.autoRemoteTextTracks_=new ALL.text.ListClass();_this.initTrackListeners();if(!options.nativeControlsForTouch){_this.emitTapEvents();}
if(_this.constructor){_this.name_=_this.constructor.name||'Unknown Tech';}
return _this;}
Tech.prototype.triggerSourceset=function triggerSourceset(src){var _this2=this;if(!this.isReady_){this.one('ready',function(){return _this2.setTimeout(function(){return _this2.triggerSourceset(src);},1);});}
this.trigger({src:src,type:'sourceset'});};Tech.prototype.manualProgressOn=function manualProgressOn(){this.on('durationchange',this.onDurationChange);this.manualProgress=true;this.one('ready',this.trackProgress);};Tech.prototype.manualProgressOff=function manualProgressOff(){this.manualProgress=false;this.stopTrackingProgress();this.off('durationchange',this.onDurationChange);};Tech.prototype.trackProgress=function trackProgress(event){this.stopTrackingProgress();this.progressInterval=this.setInterval(bind(this,function(){var numBufferedPercent=this.bufferedPercent();if(this.bufferedPercent_!==numBufferedPercent){this.trigger('progress');}
this.bufferedPercent_=numBufferedPercent;if(numBufferedPercent===1){this.stopTrackingProgress();}}),500);};Tech.prototype.onDurationChange=function onDurationChange(event){this.duration_=this.duration();};Tech.prototype.buffered=function buffered(){return createTimeRanges(0,0);};Tech.prototype.bufferedPercent=function bufferedPercent$$1(){return bufferedPercent(this.buffered(),this.duration_);};Tech.prototype.stopTrackingProgress=function stopTrackingProgress(){this.clearInterval(this.progressInterval);};Tech.prototype.manualTimeUpdatesOn=function manualTimeUpdatesOn(){this.manualTimeUpdates=true;this.on('play',this.trackCurrentTime);this.on('pause',this.stopTrackingCurrentTime);};Tech.prototype.manualTimeUpdatesOff=function manualTimeUpdatesOff(){this.manualTimeUpdates=false;this.stopTrackingCurrentTime();this.off('play',this.trackCurrentTime);this.off('pause',this.stopTrackingCurrentTime);};Tech.prototype.trackCurrentTime=function trackCurrentTime(){if(this.currentTimeInterval){this.stopTrackingCurrentTime();}
this.currentTimeInterval=this.setInterval(function(){this.trigger({type:'timeupdate',target:this,manuallyTriggered:true});},250);};Tech.prototype.stopTrackingCurrentTime=function stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval);this.trigger({type:'timeupdate',target:this,manuallyTriggered:true});};Tech.prototype.dispose=function dispose(){this.clearTracks(NORMAL.names);if(this.manualProgress){this.manualProgressOff();}
if(this.manualTimeUpdates){this.manualTimeUpdatesOff();}
_Component.prototype.dispose.call(this);};Tech.prototype.clearTracks=function clearTracks(types){var _this3=this;types=[].concat(types);types.forEach(function(type){var list=_this3[type+'Tracks']()||[];var i=list.length;while(i--){var track=list[i];if(type==='text'){_this3.removeRemoteTextTrack(track);}
list.removeTrack(track);}});};Tech.prototype.cleanupAutoTextTracks=function cleanupAutoTextTracks(){var list=this.autoRemoteTextTracks_||[];var i=list.length;while(i--){var track=list[i];this.removeRemoteTextTrack(track);}};Tech.prototype.reset=function reset(){};Tech.prototype.error=function error(err){if(err!==undefined){this.error_=new MediaError(err);this.trigger('error');}
return this.error_;};Tech.prototype.played=function played(){if(this.hasStarted_){return createTimeRanges(0,0);}
return createTimeRanges();};Tech.prototype.setCurrentTime=function setCurrentTime(){if(this.manualTimeUpdates){this.trigger({type:'timeupdate',target:this,manuallyTriggered:true});}};Tech.prototype.initTrackListeners=function initTrackListeners(){var _this4=this;NORMAL.names.forEach(function(name){var props=NORMAL[name];var trackListChanges=function trackListChanges(){_this4.trigger(name+'trackchange');};var tracks=_this4[props.getterName]();tracks.addEventListener('removetrack',trackListChanges);tracks.addEventListener('addtrack',trackListChanges);_this4.on('dispose',function(){tracks.removeEventListener('removetrack',trackListChanges);tracks.removeEventListener('addtrack',trackListChanges);});});};Tech.prototype.addWebVttScript_=function addWebVttScript_(){var _this5=this;if(window_1.WebVTT){return;}
if(document_1.body.contains(this.el())){if(!this.options_['vtt.js']&&isPlain(browserIndex)&&Object.keys(browserIndex).length>0){this.trigger('vttjsloaded');return;}
var script=document_1.createElement('script');script.src=this.options_['vtt.js']||'https://vjs.zencdn.net/vttjs/0.12.4/vtt.min.js';script.onload=function(){_this5.trigger('vttjsloaded');};script.onerror=function(){_this5.trigger('vttjserror');};this.on('dispose',function(){script.onload=null;script.onerror=null;});window_1.WebVTT=true;this.el().parentNode.appendChild(script);}else{this.ready(this.addWebVttScript_);}};Tech.prototype.emulateTextTracks=function emulateTextTracks(){var _this6=this;var tracks=this.textTracks();var remoteTracks=this.remoteTextTracks();var handleAddTrack=function handleAddTrack(e){return tracks.addTrack(e.track);};var handleRemoveTrack=function handleRemoveTrack(e){return tracks.removeTrack(e.track);};remoteTracks.on('addtrack',handleAddTrack);remoteTracks.on('removetrack',handleRemoveTrack);this.addWebVttScript_();var updateDisplay=function updateDisplay(){return _this6.trigger('texttrackchange');};var textTracksChanges=function textTracksChanges(){updateDisplay();for(var i=0;i<tracks.length;i++){var track=tracks[i];track.removeEventListener('cuechange',updateDisplay);if(track.mode==='showing'){track.addEventListener('cuechange',updateDisplay);}}};textTracksChanges();tracks.addEventListener('change',textTracksChanges);tracks.addEventListener('addtrack',textTracksChanges);tracks.addEventListener('removetrack',textTracksChanges);this.on('dispose',function(){remoteTracks.off('addtrack',handleAddTrack);remoteTracks.off('removetrack',handleRemoveTrack);tracks.removeEventListener('change',textTracksChanges);tracks.removeEventListener('addtrack',textTracksChanges);tracks.removeEventListener('removetrack',textTracksChanges);for(var i=0;i<tracks.length;i++){var track=tracks[i];track.removeEventListener('cuechange',updateDisplay);}});};Tech.prototype.addTextTrack=function addTextTrack(kind,label,language){if(!kind){throw new Error('TextTrack kind is required but was not provided');}
return createTrackHelper(this,kind,label,language);};Tech.prototype.createRemoteTextTrack=function createRemoteTextTrack(options){var track=mergeOptions(options,{tech:this});return new REMOTE.remoteTextEl.TrackClass(track);};Tech.prototype.addRemoteTextTrack=function addRemoteTextTrack(){var _this7=this;var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var manualCleanup=arguments[1];var htmlTrackElement=this.createRemoteTextTrack(options);if(manualCleanup!==true&&manualCleanup!==false){log.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js');manualCleanup=true;}
this.remoteTextTrackEls().addTrackElement_(htmlTrackElement);this.remoteTextTracks().addTrack(htmlTrackElement.track);if(manualCleanup!==true){this.ready(function(){return _this7.autoRemoteTextTracks_.addTrack(htmlTrackElement.track);});}
return htmlTrackElement;};Tech.prototype.removeRemoteTextTrack=function removeRemoteTextTrack(track){var trackElement=this.remoteTextTrackEls().getTrackElementByTrack_(track);this.remoteTextTrackEls().removeTrackElement_(trackElement);this.remoteTextTracks().removeTrack(track);this.autoRemoteTextTracks_.removeTrack(track);};Tech.prototype.getVideoPlaybackQuality=function getVideoPlaybackQuality(){return{};};Tech.prototype.setPoster=function setPoster(){};Tech.prototype.playsinline=function playsinline(){};Tech.prototype.setPlaysinline=function setPlaysinline(){};Tech.prototype.canPlayType=function canPlayType(){return'';};Tech.canPlayType=function canPlayType(){return'';};Tech.canPlaySource=function canPlaySource(srcObj,options){return Tech.canPlayType(srcObj.type);};Tech.isTech=function isTech(component){return component.prototype instanceof Tech||component instanceof Tech||component===Tech;};Tech.registerTech=function registerTech(name,tech){if(!Tech.techs_){Tech.techs_={};}
if(!Tech.isTech(tech)){throw new Error('Tech '+name+' must be a Tech');}
if(!Tech.canPlayType){throw new Error('Techs must have a static canPlayType method on them');}
if(!Tech.canPlaySource){throw new Error('Techs must have a static canPlaySource method on them');}
name=toTitleCase(name);Tech.techs_[name]=tech;if(name!=='Tech'){Tech.defaultTechOrder_.push(name);}
return tech;};Tech.getTech=function getTech(name){if(!name){return;}
name=toTitleCase(name);if(Tech.techs_&&Tech.techs_[name]){return Tech.techs_[name];}
if(window_1&&window_1.videojs&&window_1.videojs[name]){log.warn('The '+name+' tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)');return window_1.videojs[name];}};return Tech;}(Component);ALL.names.forEach(function(name){var props=ALL[name];Tech.prototype[props.getterName]=function(){this[props.privateName]=this[props.privateName]||new props.ListClass();return this[props.privateName];};});Tech.prototype.featuresVolumeControl=true;Tech.prototype.featuresMuteControl=true;Tech.prototype.featuresFullscreenResize=false;Tech.prototype.featuresPlaybackRate=false;Tech.prototype.featuresProgressEvents=false;Tech.prototype.featuresSourceset=false;Tech.prototype.featuresTimeupdateEvents=false;Tech.prototype.featuresNativeTextTracks=false;Tech.withSourceHandlers=function(_Tech){_Tech.registerSourceHandler=function(handler,index){var handlers=_Tech.sourceHandlers;if(!handlers){handlers=_Tech.sourceHandlers=[];}
if(index===undefined){index=handlers.length;}
handlers.splice(index,0,handler);};_Tech.canPlayType=function(type){var handlers=_Tech.sourceHandlers||[];var can=void 0;for(var i=0;i<handlers.length;i++){can=handlers[i].canPlayType(type);if(can){return can;}}
return'';};_Tech.selectSourceHandler=function(source,options){var handlers=_Tech.sourceHandlers||[];var can=void 0;for(var i=0;i<handlers.length;i++){can=handlers[i].canHandleSource(source,options);if(can){return handlers[i];}}
return null;};_Tech.canPlaySource=function(srcObj,options){var sh=_Tech.selectSourceHandler(srcObj,options);if(sh){return sh.canHandleSource(srcObj,options);}
return'';};var deferrable=['seekable','seeking','duration'];deferrable.forEach(function(fnName){var originalFn=this[fnName];if(typeof originalFn!=='function'){return;}
this[fnName]=function(){if(this.sourceHandler_&&this.sourceHandler_[fnName]){return this.sourceHandler_[fnName].apply(this.sourceHandler_,arguments);}
return originalFn.apply(this,arguments);};},_Tech.prototype);_Tech.prototype.setSource=function(source){var sh=_Tech.selectSourceHandler(source,this.options_);if(!sh){if(_Tech.nativeSourceHandler){sh=_Tech.nativeSourceHandler;}else{log.error('No source hander found for the current source.');}}
this.disposeSourceHandler();this.off('dispose',this.disposeSourceHandler);if(sh!==_Tech.nativeSourceHandler){this.currentSource_=source;}
this.sourceHandler_=sh.handleSource(source,this,this.options_);this.on('dispose',this.disposeSourceHandler);};_Tech.prototype.disposeSourceHandler=function(){if(this.currentSource_){this.clearTracks(['audio','video']);this.currentSource_=null;}
this.cleanupAutoTextTracks();if(this.sourceHandler_){if(this.sourceHandler_.dispose){this.sourceHandler_.dispose();}
this.sourceHandler_=null;}};};Component.registerComponent('Tech',Tech);Tech.registerTech('Tech',Tech);Tech.defaultTechOrder_=[];var middlewares={};var middlewareInstances={};var TERMINATOR={};function use(type,middleware){middlewares[type]=middlewares[type]||[];middlewares[type].push(middleware);}
function setSource(player,src,next){player.setTimeout(function(){return setSourceHelper(src,middlewares[src.type],next,player);},1);}
function setTech(middleware,tech){middleware.forEach(function(mw){return mw.setTech&&mw.setTech(tech);});}
function get$1(middleware,tech,method){return middleware.reduceRight(middlewareIterator(method),tech[method]());}
function set$1(middleware,tech,method,arg){return tech[method](middleware.reduce(middlewareIterator(method),arg));}
function mediate(middleware,tech,method){var arg=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var callMethod='call'+toTitleCase(method);var middlewareValue=middleware.reduce(middlewareIterator(callMethod),arg);var terminated=middlewareValue===TERMINATOR;var returnValue=terminated?null:tech[method](middlewareValue);executeRight(middleware,method,returnValue,terminated);return returnValue;}
var allowedGetters={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1};var allowedSetters={setCurrentTime:1};var allowedMediators={play:1,pause:1};function middlewareIterator(method){return function(value,mw){if(value===TERMINATOR){return TERMINATOR;}
if(mw[method]){return mw[method](value);}
return value;};}
function executeRight(mws,method,value,terminated){for(var i=mws.length-1;i>=0;i--){var mw=mws[i];if(mw[method]){mw[method](terminated,value);}}}
function clearCacheForPlayer(player){middlewareInstances[player.id()]=null;}
function getOrCreateFactory(player,mwFactory){var mws=middlewareInstances[player.id()];var mw=null;if(mws===undefined||mws===null){mw=mwFactory(player);middlewareInstances[player.id()]=[[mwFactory,mw]];return mw;}
for(var i=0;i<mws.length;i++){var _mws$i=mws[i],mwf=_mws$i[0],mwi=_mws$i[1];if(mwf!==mwFactory){continue;}
mw=mwi;}
if(mw===null){mw=mwFactory(player);mws.push([mwFactory,mw]);}
return mw;}
function setSourceHelper(){var src=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var middleware=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var next=arguments[2];var player=arguments[3];var acc=arguments.length>4&&arguments[4]!==undefined?arguments[4]:[];var lastRun=arguments.length>5&&arguments[5]!==undefined?arguments[5]:false;var mwFactory=middleware[0],mwrest=middleware.slice(1);if(typeof mwFactory==='string'){setSourceHelper(src,middlewares[mwFactory],next,player,acc,lastRun);}else if(mwFactory){var mw=getOrCreateFactory(player,mwFactory);if(!mw.setSource){acc.push(mw);return setSourceHelper(src,mwrest,next,player,acc,lastRun);}
mw.setSource(assign({},src),function(err,_src){if(err){return setSourceHelper(src,mwrest,next,player,acc,lastRun);}
acc.push(mw);setSourceHelper(_src,src.type===_src.type?mwrest:middlewares[_src.type],next,player,acc,lastRun);});}else if(mwrest.length){setSourceHelper(src,mwrest,next,player,acc,lastRun);}else if(lastRun){next(src,acc);}else{setSourceHelper(src,middlewares['*'],next,player,acc,true);}}
var MimetypesKind={opus:'video/ogg',ogv:'video/ogg',mp4:'video/mp4',mov:'video/mp4',m4v:'video/mp4',mkv:'video/x-matroska',mp3:'audio/mpeg',aac:'audio/aac',oga:'audio/ogg',m3u8:'application/x-mpegURL'};var getMimetype=function getMimetype(){var src=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var ext=getFileExtension(src);var mimetype=MimetypesKind[ext.toLowerCase()];return mimetype||'';};var findMimetype=function findMimetype(player,src){if(!src){return'';}
if(player.cache_.source.src===src&&player.cache_.source.type){return player.cache_.source.type;}
var matchingSources=player.cache_.sources.filter(function(s){return s.src===src;});if(matchingSources.length){return matchingSources[0].type;}
var sources=player.$$('source');for(var i=0;i<sources.length;i++){var s=sources[i];if(s.type&&s.src&&s.src===src){return s.type;}}
return getMimetype(src);};var filterSource=function filterSource(src){if(Array.isArray(src)){var newsrc=[];src.forEach(function(srcobj){srcobj=filterSource(srcobj);if(Array.isArray(srcobj)){newsrc=newsrc.concat(srcobj);}else if(isObject(srcobj)){newsrc.push(srcobj);}});src=newsrc;}else if(typeof src==='string'&&src.trim()){src=[fixSource({src:src})];}else if(isObject(src)&&typeof src.src==='string'&&src.src&&src.src.trim()){src=[fixSource(src)];}else{src=[];}
return src;};function fixSource(src){var mimetype=getMimetype(src.src);if(!src.type&&mimetype){src.type=mimetype;}
return src;}
var MediaLoader=function(_Component){inherits(MediaLoader,_Component);function MediaLoader(player,options,ready){classCallCheck(this,MediaLoader);var options_=mergeOptions({createEl:false},options);var _this=possibleConstructorReturn(this,_Component.call(this,player,options_,ready));if(!options.playerOptions.sources||options.playerOptions.sources.length===0){for(var i=0,j=options.playerOptions.techOrder;i<j.length;i++){var techName=toTitleCase(j[i]);var tech=Tech.getTech(techName);if(!techName){tech=Component.getComponent(techName);}
if(tech&&tech.isSupported()){player.loadTech_(techName);break;}}}else{player.src(options.playerOptions.sources);}
return _this;}
return MediaLoader;}(Component);Component.registerComponent('MediaLoader',MediaLoader);var ClickableComponent=function(_Component){inherits(ClickableComponent,_Component);function ClickableComponent(player,options){classCallCheck(this,ClickableComponent);var _this=possibleConstructorReturn(this,_Component.call(this,player,options));_this.emitTapEvents();_this.enable();return _this;}
ClickableComponent.prototype.createEl=function createEl$$1(){var tag=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'div';var props=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var attributes=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};props=assign({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},props);if(tag==='button'){log.error('Creating a ClickableComponent with an HTML element of '+tag+' is not supported; use a Button instead.');}
attributes=assign({role:'button'},attributes);this.tabIndex_=props.tabIndex;var el=_Component.prototype.createEl.call(this,tag,props,attributes);this.createControlTextEl(el);return el;};ClickableComponent.prototype.dispose=function dispose(){this.controlTextEl_=null;_Component.prototype.dispose.call(this);};ClickableComponent.prototype.createControlTextEl=function createControlTextEl(el){this.controlTextEl_=createEl('span',{className:'vjs-control-text'},{'aria-live':'polite'});if(el){el.appendChild(this.controlTextEl_);}
this.controlText(this.controlText_,el);return this.controlTextEl_;};ClickableComponent.prototype.controlText=function controlText(text){var el=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.el();if(text===undefined){return this.controlText_||'Need Text';}
var localizedText=this.localize(text);this.controlText_=text;textContent(this.controlTextEl_,localizedText);if(!this.nonIconControl){el.setAttribute('title',localizedText);}};ClickableComponent.prototype.buildCSSClass=function buildCSSClass(){return'vjs-control vjs-button '+_Component.prototype.buildCSSClass.call(this);};ClickableComponent.prototype.enable=function enable(){if(!this.enabled_){this.enabled_=true;this.removeClass('vjs-disabled');this.el_.setAttribute('aria-disabled','false');if(typeof this.tabIndex_!=='undefined'){this.el_.setAttribute('tabIndex',this.tabIndex_);}
this.on(['tap','click'],this.handleClick);this.on('focus',this.handleFocus);this.on('blur',this.handleBlur);}};ClickableComponent.prototype.disable=function disable(){this.enabled_=false;this.addClass('vjs-disabled');this.el_.setAttribute('aria-disabled','true');if(typeof this.tabIndex_!=='undefined'){this.el_.removeAttribute('tabIndex');}
this.off(['tap','click'],this.handleClick);this.off('focus',this.handleFocus);this.off('blur',this.handleBlur);};ClickableComponent.prototype.handleClick=function handleClick(event){};ClickableComponent.prototype.handleFocus=function handleFocus(event){on(document_1,'keydown',bind(this,this.handleKeyPress));};ClickableComponent.prototype.handleKeyPress=function handleKeyPress(event){if(event.which===32||event.which===13){event.preventDefault();this.trigger('click');}else if(_Component.prototype.handleKeyPress){_Component.prototype.handleKeyPress.call(this,event);}};ClickableComponent.prototype.handleBlur=function handleBlur(event){off(document_1,'keydown',bind(this,this.handleKeyPress));};return ClickableComponent;}(Component);Component.registerComponent('ClickableComponent',ClickableComponent);var PosterImage=function(_ClickableComponent){inherits(PosterImage,_ClickableComponent);function PosterImage(player,options){classCallCheck(this,PosterImage);var _this=possibleConstructorReturn(this,_ClickableComponent.call(this,player,options));_this.update();player.on('posterchange',bind(_this,_this.update));return _this;}
PosterImage.prototype.dispose=function dispose(){this.player().off('posterchange',this.update);_ClickableComponent.prototype.dispose.call(this);};PosterImage.prototype.createEl=function createEl$$1(){var el=createEl('div',{className:'vjs-poster',tabIndex:-1});if(!BACKGROUND_SIZE_SUPPORTED){this.fallbackImg_=createEl('img');el.appendChild(this.fallbackImg_);}
return el;};PosterImage.prototype.update=function update(event){var url=this.player().poster();this.setSrc(url);if(url){this.show();}else{this.hide();}};PosterImage.prototype.setSrc=function setSrc(url){if(this.fallbackImg_){this.fallbackImg_.src=url;}else{var backgroundImage='';if(url){backgroundImage='url("'+url+'")';}
this.el_.style.backgroundImage=backgroundImage;}};PosterImage.prototype.handleClick=function handleClick(event){if(!this.player_.controls()){return;}
if(this.player_.paused()){silencePromise(this.player_.play());}else{this.player_.pause();}};return PosterImage;}(ClickableComponent);Component.registerComponent('PosterImage',PosterImage);var darkGray='#222';var lightGray='#ccc';var fontMap={monospace:'monospace',sansSerif:'sans-serif',serif:'serif',monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:'sans-serif',proportionalSerif:'serif',casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function constructColor(color,opacity){var hex=void 0;if(color.length===4){hex=color[1]+color[1]+color[2]+color[2]+color[3]+color[3];}else if(color.length===7){hex=color.slice(1);}else{throw new Error('Invalid color code provided, '+color+'; must be formatted as e.g. #f0e or #f604e2.');}
return'rgba('+parseInt(hex.slice(0,2),16)+','+parseInt(hex.slice(2,4),16)+','+parseInt(hex.slice(4,6),16)+','+opacity+')';}
function tryUpdateStyle(el,style,rule){try{el.style[style]=rule;}catch(e){return;}}
var TextTrackDisplay=function(_Component){inherits(TextTrackDisplay,_Component);function TextTrackDisplay(player,options,ready){classCallCheck(this,TextTrackDisplay);var _this=possibleConstructorReturn(this,_Component.call(this,player,options,ready));var updateDisplayHandler=bind(_this,_this.updateDisplay);player.on('loadstart',bind(_this,_this.toggleDisplay));player.on('texttrackchange',updateDisplayHandler);player.on('loadstart',bind(_this,_this.preselectTrack));player.ready(bind(_this,function(){if(player.tech_&&player.tech_.featuresNativeTextTracks){this.hide();return;}
player.on('fullscreenchange',updateDisplayHandler);player.on('playerresize',updateDisplayHandler);if(window_1.addEventListener){window_1.addEventListener('orientationchange',updateDisplayHandler);}
player.on('dispose',function(){return window_1.removeEventListener('orientationchange',updateDisplayHandler);});var tracks=this.options_.playerOptions.tracks||[];for(var i=0;i<tracks.length;i++){this.player_.addRemoteTextTrack(tracks[i],true);}
this.preselectTrack();}));return _this;}
TextTrackDisplay.prototype.preselectTrack=function preselectTrack(){var modes={captions:1,subtitles:1};var trackList=this.player_.textTracks();var userPref=this.player_.cache_.selectedLanguage;var firstDesc=void 0;var firstCaptions=void 0;var preferredTrack=void 0;for(var i=0;i<trackList.length;i++){var track=trackList[i];if(userPref&&userPref.enabled&&userPref.language===track.language){if(track.kind===userPref.kind){preferredTrack=track;}else if(!preferredTrack){preferredTrack=track;}}else if(userPref&&!userPref.enabled){preferredTrack=null;firstDesc=null;firstCaptions=null;}else if(track['default']){if(track.kind==='descriptions'&&!firstDesc){firstDesc=track;}else if(track.kind in modes&&!firstCaptions){firstCaptions=track;}}}
if(preferredTrack){preferredTrack.mode='showing';}else if(firstCaptions){firstCaptions.mode='showing';}else if(firstDesc){firstDesc.mode='showing';}};TextTrackDisplay.prototype.toggleDisplay=function toggleDisplay(){if(this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks){this.hide();}else{this.show();}};TextTrackDisplay.prototype.createEl=function createEl(){return _Component.prototype.createEl.call(this,'div',{className:'vjs-text-track-display'},{'aria-live':'off','aria-atomic':'true'});};TextTrackDisplay.prototype.clearDisplay=function clearDisplay(){if(typeof window_1.WebVTT==='function'){window_1.WebVTT.processCues(window_1,[],this.el_);}};TextTrackDisplay.prototype.updateDisplay=function updateDisplay(){var tracks=this.player_.textTracks();this.clearDisplay();var descriptionsTrack=null;var captionsSubtitlesTrack=null;var i=tracks.length;while(i--){var track=tracks[i];if(track.mode==='showing'){if(track.kind==='descriptions'){descriptionsTrack=track;}else{captionsSubtitlesTrack=track;}}}
if(captionsSubtitlesTrack){if(this.getAttribute('aria-live')!=='off'){this.setAttribute('aria-live','off');}
this.updateForTrack(captionsSubtitlesTrack);}else if(descriptionsTrack){if(this.getAttribute('aria-live')!=='assertive'){this.setAttribute('aria-live','assertive');}
this.updateForTrack(descriptionsTrack);}};TextTrackDisplay.prototype.updateForTrack=function updateForTrack(track){if(typeof window_1.WebVTT!=='function'||!track.activeCues){return;}
var cues=[];for(var _i=0;_i<track.activeCues.length;_i++){cues.push(track.activeCues[_i]);}
window_1.WebVTT.processCues(window_1,cues,this.el_);if(!this.player_.textTrackSettings){return;}
var overrides=this.player_.textTrackSettings.getValues();var i=cues.length;while(i--){var cue=cues[i];if(!cue){continue;}
var cueDiv=cue.displayState;if(overrides.color){cueDiv.firstChild.style.color=overrides.color;}
if(overrides.textOpacity){tryUpdateStyle(cueDiv.firstChild,'color',constructColor(overrides.color||'#fff',overrides.textOpacity));}
if(overrides.backgroundColor){cueDiv.firstChild.style.backgroundColor=overrides.backgroundColor;}
if(overrides.backgroundOpacity){tryUpdateStyle(cueDiv.firstChild,'backgroundColor',constructColor(overrides.backgroundColor||'#000',overrides.backgroundOpacity));}
if(overrides.windowColor){if(overrides.windowOpacity){tryUpdateStyle(cueDiv,'backgroundColor',constructColor(overrides.windowColor,overrides.windowOpacity));}else{cueDiv.style.backgroundColor=overrides.windowColor;}}
if(overrides.edgeStyle){if(overrides.edgeStyle==='dropshadow'){cueDiv.firstChild.style.textShadow='2px 2px 3px '+darkGray+', 2px 2px 4px '+darkGray+', 2px 2px 5px '+darkGray;}else if(overrides.edgeStyle==='raised'){cueDiv.firstChild.style.textShadow='1px 1px '+darkGray+', 2px 2px '+darkGray+', 3px 3px '+darkGray;}else if(overrides.edgeStyle==='depressed'){cueDiv.firstChild.style.textShadow='1px 1px '+lightGray+', 0 1px '+lightGray+', -1px -1px '+darkGray+', 0 -1px '+darkGray;}else if(overrides.edgeStyle==='uniform'){cueDiv.firstChild.style.textShadow='0 0 4px '+darkGray+', 0 0 4px '+darkGray+', 0 0 4px '+darkGray+', 0 0 4px '+darkGray;}}
if(overrides.fontPercent&&overrides.fontPercent!==1){var fontSize=window_1.parseFloat(cueDiv.style.fontSize);cueDiv.style.fontSize=fontSize*overrides.fontPercent+'px';cueDiv.style.height='auto';cueDiv.style.top='auto';cueDiv.style.bottom='2px';}
if(overrides.fontFamily&&overrides.fontFamily!=='default'){if(overrides.fontFamily==='small-caps'){cueDiv.firstChild.style.fontVariant='small-caps';}else{cueDiv.firstChild.style.fontFamily=fontMap[overrides.fontFamily];}}}};return TextTrackDisplay;}(Component);Component.registerComponent('TextTrackDisplay',TextTrackDisplay);var LoadingSpinner=function(_Component){inherits(LoadingSpinner,_Component);function LoadingSpinner(){classCallCheck(this,LoadingSpinner);return possibleConstructorReturn(this,_Component.apply(this,arguments));}
LoadingSpinner.prototype.createEl=function createEl$$1(){var isAudio=this.player_.isAudio();var playerType=this.localize(isAudio?'Audio Player':'Video Player');var controlText=createEl('span',{className:'vjs-control-text',innerHTML:this.localize('{1} is loading.',[playerType])});var el=_Component.prototype.createEl.call(this,'div',{className:'vjs-loading-spinner',dir:'ltr'});el.appendChild(controlText);return el;};return LoadingSpinner;}(Component);Component.registerComponent('LoadingSpinner',LoadingSpinner);var Button=function(_ClickableComponent){inherits(Button,_ClickableComponent);function Button(){classCallCheck(this,Button);return possibleConstructorReturn(this,_ClickableComponent.apply(this,arguments));}
Button.prototype.createEl=function createEl(tag){var props=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var attributes=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};tag='button';props=assign({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},props);attributes=assign({type:'button'},attributes);var el=Component.prototype.createEl.call(this,tag,props,attributes);this.createControlTextEl(el);return el;};Button.prototype.addChild=function addChild(child){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var className=this.constructor.name;log.warn('Adding an actionable (user controllable) child to a Button ('+className+') is not supported; use a ClickableComponent instead.');return Component.prototype.addChild.call(this,child,options);};Button.prototype.enable=function enable(){_ClickableComponent.prototype.enable.call(this);this.el_.removeAttribute('disabled');};Button.prototype.disable=function disable(){_ClickableComponent.prototype.disable.call(this);this.el_.setAttribute('disabled','disabled');};Button.prototype.handleKeyPress=function handleKeyPress(event){if(event.which===32||event.which===13){return;}
_ClickableComponent.prototype.handleKeyPress.call(this,event);};return Button;}(ClickableComponent);Component.registerComponent('Button',Button);var BigPlayButton=function(_Button){inherits(BigPlayButton,_Button);function BigPlayButton(player,options){classCallCheck(this,BigPlayButton);var _this=possibleConstructorReturn(this,_Button.call(this,player,options));_this.mouseused_=false;_this.on('mousedown',_this.handleMouseDown);return _this;}
BigPlayButton.prototype.buildCSSClass=function buildCSSClass(){return'vjs-big-play-button';};BigPlayButton.prototype.handleClick=function handleClick(event){var playPromise=this.player_.play();if(this.mouseused_&&event.clientX&&event.clientY){silencePromise(playPromise);return;}
var cb=this.player_.getChild('controlBar');var playToggle=cb&&cb.getChild('playToggle');if(!playToggle){this.player_.focus();return;}
var playFocus=function playFocus(){return playToggle.focus();};if(isPromise(playPromise)){playPromise.then(playFocus,function(){});}else{this.setTimeout(playFocus,1);}};BigPlayButton.prototype.handleKeyPress=function handleKeyPress(event){this.mouseused_=false;_Button.prototype.handleKeyPress.call(this,event);};BigPlayButton.prototype.handleMouseDown=function handleMouseDown(event){this.mouseused_=true;};return BigPlayButton;}(Button);BigPlayButton.prototype.controlText_='Play Video';Component.registerComponent('BigPlayButton',BigPlayButton);var CloseButton=function(_Button){inherits(CloseButton,_Button);function CloseButton(player,options){classCallCheck(this,CloseButton);var _this=possibleConstructorReturn(this,_Button.call(this,player,options));_this.controlText(options&&options.controlText||_this.localize('Close'));return _this;}
CloseButton.prototype.buildCSSClass=function buildCSSClass(){return'vjs-close-button '+_Button.prototype.buildCSSClass.call(this);};CloseButton.prototype.handleClick=function handleClick(event){this.trigger({type:'close',bubbles:false});};return CloseButton;}(Button);Component.registerComponent('CloseButton',CloseButton);var PlayToggle=function(_Button){inherits(PlayToggle,_Button);function PlayToggle(player,options){classCallCheck(this,PlayToggle);var _this=possibleConstructorReturn(this,_Button.call(this,player,options));_this.on(player,'play',_this.handlePlay);_this.on(player,'pause',_this.handlePause);_this.on(player,'ended',_this.handleEnded);return _this;}
PlayToggle.prototype.buildCSSClass=function buildCSSClass(){return'vjs-play-control '+_Button.prototype.buildCSSClass.call(this);};PlayToggle.prototype.handleClick=function handleClick(event){if(this.player_.paused()){this.player_.play();}else{this.player_.pause();}};PlayToggle.prototype.handleSeeked=function handleSeeked(event){this.removeClass('vjs-ended');if(this.player_.paused()){this.handlePause(event);}else{this.handlePlay(event);}};PlayToggle.prototype.handlePlay=function handlePlay(event){this.removeClass('vjs-ended');this.removeClass('vjs-paused');this.addClass('vjs-playing');this.controlText('Pause');};PlayToggle.prototype.handlePause=function handlePause(event){this.removeClass('vjs-playing');this.addClass('vjs-paused');this.controlText('Play');};PlayToggle.prototype.handleEnded=function handleEnded(event){this.removeClass('vjs-playing');this.addClass('vjs-ended');this.controlText('Replay');this.one(this.player_,'seeked',this.handleSeeked);};return PlayToggle;}(Button);PlayToggle.prototype.controlText_='Play';Component.registerComponent('PlayToggle',PlayToggle);var defaultImplementation=function defaultImplementation(seconds,guide){seconds=seconds<0?0:seconds;var s=Math.floor(seconds%60);var m=Math.floor(seconds/60%60);var h=Math.floor(seconds/3600);var gm=Math.floor(guide/60%60);var gh=Math.floor(guide/3600);if(isNaN(seconds)||seconds===Infinity){h=m=s='-';}
h=h>0||gh>0?h+':':'';m=((h||gm>=10)&&m<10?'0'+m:m)+':';s=s<10?'0'+s:s;return h+m+s;};var implementation=defaultImplementation;function setFormatTime(customImplementation){implementation=customImplementation;}
function resetFormatTime(){implementation=defaultImplementation;}
var formatTime=function(seconds){var guide=arguments.length>1&&arguments[1]!==undefined?arguments[1]:seconds;return implementation(seconds,guide);};var TimeDisplay=function(_Component){inherits(TimeDisplay,_Component);function TimeDisplay(player,options){classCallCheck(this,TimeDisplay);var _this=possibleConstructorReturn(this,_Component.call(this,player,options));_this.throttledUpdateContent=throttle(bind(_this,_this.updateContent),25);_this.on(player,'timeupdate',_this.throttledUpdateContent);return _this;}
TimeDisplay.prototype.createEl=function createEl$$1(plainName){var className=this.buildCSSClass();var el=_Component.prototype.createEl.call(this,'div',{className:className+' vjs-time-control vjs-control',innerHTML:'<span class="vjs-control-text">'+this.localize(this.labelText_)+'\xA0</span>'});this.contentEl_=createEl('span',{className:className+'-display'},{'aria-live':'off'});this.updateTextNode_();el.appendChild(this.contentEl_);return el;};TimeDisplay.prototype.dispose=function dispose(){this.contentEl_=null;this.textNode_=null;_Component.prototype.dispose.call(this);};TimeDisplay.prototype.updateTextNode_=function updateTextNode_(){if(!this.contentEl_){return;}
while(this.contentEl_.firstChild){this.contentEl_.removeChild(this.contentEl_.firstChild);}
this.textNode_=document_1.createTextNode(this.formattedTime_||this.formatTime_(0));this.contentEl_.appendChild(this.textNode_);};TimeDisplay.prototype.formatTime_=function formatTime_(time){return formatTime(time);};TimeDisplay.prototype.updateFormattedTime_=function updateFormattedTime_(time){var formattedTime=this.formatTime_(time);if(formattedTime===this.formattedTime_){return;}
this.formattedTime_=formattedTime;this.requestAnimationFrame(this.updateTextNode_);};TimeDisplay.prototype.updateContent=function updateContent(event){};return TimeDisplay;}(Component);TimeDisplay.prototype.labelText_='Time';TimeDisplay.prototype.controlText_='Time';Component.registerComponent('TimeDisplay',TimeDisplay);var CurrentTimeDisplay=function(_TimeDisplay){inherits(CurrentTimeDisplay,_TimeDisplay);function CurrentTimeDisplay(player,options){classCallCheck(this,CurrentTimeDisplay);var _this=possibleConstructorReturn(this,_TimeDisplay.call(this,player,options));_this.on(player,'ended',_this.handleEnded);return _this;}
CurrentTimeDisplay.prototype.buildCSSClass=function buildCSSClass(){return'vjs-current-time';};CurrentTimeDisplay.prototype.updateContent=function updateContent(event){var time=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(time);};CurrentTimeDisplay.prototype.handleEnded=function handleEnded(event){if(!this.player_.duration()){return;}
this.updateFormattedTime_(this.player_.duration());};return CurrentTimeDisplay;}(TimeDisplay);CurrentTimeDisplay.prototype.labelText_='Current Time';CurrentTimeDisplay.prototype.controlText_='Current Time';Component.registerComponent('CurrentTimeDisplay',CurrentTimeDisplay);var DurationDisplay=function(_TimeDisplay){inherits(DurationDisplay,_TimeDisplay);function DurationDisplay(player,options){classCallCheck(this,DurationDisplay);var _this=possibleConstructorReturn(this,_TimeDisplay.call(this,player,options));_this.on(player,'durationchange',_this.updateContent);_this.on(player,'loadedmetadata',_this.throttledUpdateContent);return _this;}
DurationDisplay.prototype.buildCSSClass=function buildCSSClass(){return'vjs-duration';};DurationDisplay.prototype.updateContent=function updateContent(event){var duration=this.player_.duration();if(duration&&this.duration_!==duration){this.duration_=duration;this.updateFormattedTime_(duration);}};return DurationDisplay;}(TimeDisplay);DurationDisplay.prototype.labelText_='Duration';DurationDisplay.prototype.controlText_='Duration';Component.registerComponent('DurationDisplay',DurationDisplay);var TimeDivider=function(_Component){inherits(TimeDivider,_Component);function TimeDivider(){classCallCheck(this,TimeDivider);return possibleConstructorReturn(this,_Component.apply(this,arguments));}
TimeDivider.prototype.createEl=function createEl(){return _Component.prototype.createEl.call(this,'div',{className:'vjs-time-control vjs-time-divider',innerHTML:'<div><span>/</span></div>'});};return TimeDivider;}(Component);Component.registerComponent('TimeDivider',TimeDivider);var RemainingTimeDisplay=function(_TimeDisplay){inherits(RemainingTimeDisplay,_TimeDisplay);function RemainingTimeDisplay(player,options){classCallCheck(this,RemainingTimeDisplay);var _this=possibleConstructorReturn(this,_TimeDisplay.call(this,player,options));_this.on(player,'durationchange',_this.throttledUpdateContent);_this.on(player,'ended',_this.handleEnded);return _this;}
RemainingTimeDisplay.prototype.buildCSSClass=function buildCSSClass(){return'vjs-remaining-time';};RemainingTimeDisplay.prototype.formatTime_=function formatTime_(time){return'-'+_TimeDisplay.prototype.formatTime_.call(this,time);};RemainingTimeDisplay.prototype.updateContent=function updateContent(event){if(!this.player_.duration()){return;}
if(this.player_.remainingTimeDisplay){this.updateFormattedTime_(this.player_.remainingTimeDisplay());}else{this.updateFormattedTime_(this.player_.remainingTime());}};RemainingTimeDisplay.prototype.handleEnded=function handleEnded(event){if(!this.player_.duration()){return;}
this.updateFormattedTime_(0);};return RemainingTimeDisplay;}(TimeDisplay);RemainingTimeDisplay.prototype.labelText_='Remaining Time';RemainingTimeDisplay.prototype.controlText_='Remaining Time';Component.registerComponent('RemainingTimeDisplay',RemainingTimeDisplay);var LiveDisplay=function(_Component){inherits(LiveDisplay,_Component);function LiveDisplay(player,options){classCallCheck(this,LiveDisplay);var _this=possibleConstructorReturn(this,_Component.call(this,player,options));_this.updateShowing();_this.on(_this.player(),'durationchange',_this.updateShowing);return _this;}
LiveDisplay.prototype.createEl=function createEl$$1(){var el=_Component.prototype.createEl.call(this,'div',{className:'vjs-live-control vjs-control'});this.contentEl_=createEl('div',{className:'vjs-live-display',innerHTML:'<span class="vjs-control-text">'+this.localize('Stream Type')+'\xA0</span>'+this.localize('LIVE')},{'aria-live':'off'});el.appendChild(this.contentEl_);return el;};LiveDisplay.prototype.dispose=function dispose(){this.contentEl_=null;_Component.prototype.dispose.call(this);};LiveDisplay.prototype.updateShowing=function updateShowing(event){if(this.player().duration()===Infinity){this.show();}else{this.hide();}};return LiveDisplay;}(Component);Component.registerComponent('LiveDisplay',LiveDisplay);var Slider=function(_Component){inherits(Slider,_Component);function Slider(player,options){classCallCheck(this,Slider);var _this=possibleConstructorReturn(this,_Component.call(this,player,options));_this.bar=_this.getChild(_this.options_.barName);_this.vertical(!!_this.options_.vertical);_this.enable();return _this;}
Slider.prototype.enabled=function enabled(){return this.enabled_;};Slider.prototype.enable=function enable(){if(this.enabled()){return;}
this.on('mousedown',this.handleMouseDown);this.on('touchstart',this.handleMouseDown);this.on('focus',this.handleFocus);this.on('blur',this.handleBlur);this.on('click',this.handleClick);this.on(this.player_,'controlsvisible',this.update);if(this.playerEvent){this.on(this.player_,this.playerEvent,this.update);}
this.removeClass('disabled');this.setAttribute('tabindex',0);this.enabled_=true;};Slider.prototype.disable=function disable(){if(!this.enabled()){return;}
var doc=this.bar.el_.ownerDocument;this.off('mousedown',this.handleMouseDown);this.off('touchstart',this.handleMouseDown);this.off('focus',this.handleFocus);this.off('blur',this.handleBlur);this.off('click',this.handleClick);this.off(this.player_,'controlsvisible',this.update);this.off(doc,'mousemove',this.handleMouseMove);this.off(doc,'mouseup',this.handleMouseUp);this.off(doc,'touchmove',this.handleMouseMove);this.off(doc,'touchend',this.handleMouseUp);this.removeAttribute('tabindex');this.addClass('disabled');if(this.playerEvent){this.off(this.player_,this.playerEvent,this.update);}
this.enabled_=false;};Slider.prototype.createEl=function createEl$$1(type){var props=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var attributes=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};props.className=props.className+' vjs-slider';props=assign({tabIndex:0},props);attributes=assign({'role':'slider','aria-valuenow':0,'aria-valuemin':0,'aria-valuemax':100,'tabIndex':0},attributes);return _Component.prototype.createEl.call(this,type,props,attributes);};Slider.prototype.handleMouseDown=function handleMouseDown(event){var doc=this.bar.el_.ownerDocument;if(event.type==='mousedown'){event.preventDefault();}
if(event.type==='touchstart'&&!IS_CHROME){event.preventDefault();}
blockTextSelection();this.addClass('vjs-sliding');this.trigger('slideractive');this.on(doc,'mousemove',this.handleMouseMove);this.on(doc,'mouseup',this.handleMouseUp);this.on(doc,'touchmove',this.handleMouseMove);this.on(doc,'touchend',this.handleMouseUp);this.handleMouseMove(event);};Slider.prototype.handleMouseMove=function handleMouseMove(event){};Slider.prototype.handleMouseUp=function handleMouseUp(){var doc=this.bar.el_.ownerDocument;unblockTextSelection();this.removeClass('vjs-sliding');this.trigger('sliderinactive');this.off(doc,'mousemove',this.handleMouseMove);this.off(doc,'mouseup',this.handleMouseUp);this.off(doc,'touchmove',this.handleMouseMove);this.off(doc,'touchend',this.handleMouseUp);this.update();};Slider.prototype.update=function update(){if(!this.el_){return;}
var progress=this.getPercent();var bar=this.bar;if(!bar){return;}
if(typeof progress!=='number'||progress!==progress||progress<0||progress===Infinity){progress=0;}
var percentage=(progress*100).toFixed(2)+'%';var style=bar.el().style;if(this.vertical()){style.height=percentage;}else{style.width=percentage;}
return progress;};Slider.prototype.calculateDistance=function calculateDistance(event){var position=getPointerPosition(this.el_,event);if(this.vertical()){return position.y;}
return position.x;};Slider.prototype.handleFocus=function handleFocus(){this.on(this.bar.el_.ownerDocument,'keydown',this.handleKeyPress);};Slider.prototype.handleKeyPress=function handleKeyPress(event){if(event.which===37||event.which===40){event.preventDefault();this.stepBack();}else if(event.which===38||event.which===39){event.preventDefault();this.stepForward();}};Slider.prototype.handleBlur=function handleBlur(){this.off(this.bar.el_.ownerDocument,'keydown',this.handleKeyPress);};Slider.prototype.handleClick=function handleClick(event){event.stopImmediatePropagation();event.preventDefault();};Slider.prototype.vertical=function vertical(bool){if(bool===undefined){return this.vertical_||false;}
this.vertical_=!!bool;if(this.vertical_){this.addClass('vjs-slider-vertical');}else{this.addClass('vjs-slider-horizontal');}};return Slider;}(Component);Component.registerComponent('Slider',Slider);var LoadProgressBar=function(_Component){inherits(LoadProgressBar,_Component);function LoadProgressBar(player,options){classCallCheck(this,LoadProgressBar);var _this=possibleConstructorReturn(this,_Component.call(this,player,options));_this.partEls_=[];_this.on(player,'progress',_this.update);return _this;}
LoadProgressBar.prototype.createEl=function createEl$$1(){return _Component.prototype.createEl.call(this,'div',{className:'vjs-load-progress',innerHTML:'<span class="vjs-control-text"><span>'+this.localize('Loaded')+'</span>: 0%</span>'});};LoadProgressBar.prototype.dispose=function dispose(){this.partEls_=null;_Component.prototype.dispose.call(this);};LoadProgressBar.prototype.update=function update(event){var buffered=this.player_.buffered();var duration=this.player_.duration();var bufferedEnd=this.player_.bufferedEnd();var children=this.partEls_;var percentify=function percentify(time,end){var percent=time/end||0;return(percent>=1?1:percent)*100+'%';};this.el_.style.width=percentify(bufferedEnd,duration);for(var i=0;i<buffered.length;i++){var start=buffered.start(i);var end=buffered.end(i);var part=children[i];if(!part){part=this.el_.appendChild(createEl());children[i]=part;}
part.style.left=percentify(start,bufferedEnd);part.style.width=percentify(end-start,bufferedEnd);}
for(var _i=children.length;_i>buffered.length;_i--){this.el_.removeChild(children[_i-1]);}
children.length=buffered.length;};return LoadProgressBar;}(Component);Component.registerComponent('LoadProgressBar',LoadProgressBar);var TimeTooltip=function(_Component){inherits(TimeTooltip,_Component);function TimeTooltip(){classCallCheck(this,TimeTooltip);return possibleConstructorReturn(this,_Component.apply(this,arguments));}
TimeTooltip.prototype.createEl=function createEl$$1(){return _Component.prototype.createEl.call(this,'div',{className:'vjs-time-tooltip'});};TimeTooltip.prototype.update=function update(seekBarRect,seekBarPoint,content){var tooltipRect=getBoundingClientRect(this.el_);var playerRect=getBoundingClientRect(this.player_.el());var seekBarPointPx=seekBarRect.width*seekBarPoint;if(!playerRect||!tooltipRect){return;}
var spaceLeftOfPoint=seekBarRect.left-playerRect.left+seekBarPointPx;var spaceRightOfPoint=seekBarRect.width-seekBarPointPx+(playerRect.right-seekBarRect.right);var pullTooltipBy=tooltipRect.width/2;if(spaceLeftOfPoint<pullTooltipBy){pullTooltipBy+=pullTooltipBy-spaceLeftOfPoint;}else if(spaceRightOfPoint<pullTooltipBy){pullTooltipBy=spaceRightOfPoint;}
if(pullTooltipBy<0){pullTooltipBy=0;}else if(pullTooltipBy>tooltipRect.width){pullTooltipBy=tooltipRect.width;}
this.el_.style.right='-'+pullTooltipBy+'px';textContent(this.el_,content);};return TimeTooltip;}(Component);Component.registerComponent('TimeTooltip',TimeTooltip);var PlayProgressBar=function(_Component){inherits(PlayProgressBar,_Component);function PlayProgressBar(){classCallCheck(this,PlayProgressBar);return possibleConstructorReturn(this,_Component.apply(this,arguments));}
PlayProgressBar.prototype.createEl=function createEl(){return _Component.prototype.createEl.call(this,'div',{className:'vjs-play-progress vjs-slider-bar',innerHTML:'<span class="vjs-control-text"><span>'+this.localize('Progress')+'</span>: 0%</span>'});};PlayProgressBar.prototype.update=function update(seekBarRect,seekBarPoint){var _this2=this;if(this.rafId_){this.cancelAnimationFrame(this.rafId_);}
this.rafId_=this.requestAnimationFrame(function(){var time=_this2.player_.scrubbing()?_this2.player_.getCache().currentTime:_this2.player_.currentTime();var content=formatTime(time,_this2.player_.duration());var timeTooltip=_this2.getChild('timeTooltip');if(timeTooltip){timeTooltip.update(seekBarRect,seekBarPoint,content);}});};return PlayProgressBar;}(Component);PlayProgressBar.prototype.options_={children:[]};if((!IE_VERSION||IE_VERSION>8)&&!IS_IOS&&!IS_ANDROID){PlayProgressBar.prototype.options_.children.push('timeTooltip');}
Component.registerComponent('PlayProgressBar',PlayProgressBar);var MouseTimeDisplay=function(_Component){inherits(MouseTimeDisplay,_Component);function MouseTimeDisplay(player,options){classCallCheck(this,MouseTimeDisplay);var _this=possibleConstructorReturn(this,_Component.call(this,player,options));_this.update=throttle(bind(_this,_this.update),25);return _this;}
MouseTimeDisplay.prototype.createEl=function createEl(){return _Component.prototype.createEl.call(this,'div',{className:'vjs-mouse-display'});};MouseTimeDisplay.prototype.update=function update(seekBarRect,seekBarPoint){var _this2=this;if(this.rafId_){this.cancelAnimationFrame(this.rafId_);}
this.rafId_=this.requestAnimationFrame(function(){var duration=_this2.player_.duration();var content=formatTime(seekBarPoint*duration,duration);_this2.el_.style.left=seekBarRect.width*seekBarPoint+'px';_this2.getChild('timeTooltip').update(seekBarRect,seekBarPoint,content);});};return MouseTimeDisplay;}(Component);MouseTimeDisplay.prototype.options_={children:['timeTooltip']};Component.registerComponent('MouseTimeDisplay',MouseTimeDisplay);var STEP_SECONDS=5;var UPDATE_REFRESH_INTERVAL=30;var SeekBar=function(_Slider){inherits(SeekBar,_Slider);function SeekBar(player,options){classCallCheck(this,SeekBar);var _this=possibleConstructorReturn(this,_Slider.call(this,player,options));_this.setEventHandlers_();return _this;}
SeekBar.prototype.setEventHandlers_=function setEventHandlers_(){var _this2=this;this.update=throttle(bind(this,this.update),UPDATE_REFRESH_INTERVAL);this.on(this.player_,'timeupdate',this.update);this.on(this.player_,'ended',this.handleEnded);this.updateInterval=null;this.on(this.player_,['playing'],function(){_this2.clearInterval(_this2.updateInterval);_this2.updateInterval=_this2.setInterval(function(){_this2.requestAnimationFrame(function(){_this2.update();});},UPDATE_REFRESH_INTERVAL);});this.on(this.player_,['ended','pause','waiting'],function(){_this2.clearInterval(_this2.updateInterval);});this.on(this.player_,['timeupdate','ended'],this.update);};SeekBar.prototype.createEl=function createEl$$1(){return _Slider.prototype.createEl.call(this,'div',{className:'vjs-progress-holder'},{'aria-label':this.localize('Progress Bar')});};SeekBar.prototype.update_=function update_(currentTime,percent){var duration=this.player_.duration();this.el_.setAttribute('aria-valuenow',(percent*100).toFixed(2));this.el_.setAttribute('aria-valuetext',this.localize('progress bar timing: currentTime={1} duration={2}',[formatTime(currentTime,duration),formatTime(duration,duration)],'{1} of {2}'));this.bar.update(getBoundingClientRect(this.el_),percent);};SeekBar.prototype.update=function update(event){var percent=_Slider.prototype.update.call(this);this.update_(this.getCurrentTime_(),percent);return percent;};SeekBar.prototype.getCurrentTime_=function getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();};SeekBar.prototype.handleEnded=function handleEnded(event){this.update_(this.player_.duration(),1);};SeekBar.prototype.getPercent=function getPercent(){var percent=this.getCurrentTime_()/this.player_.duration();return percent>=1?1:percent;};SeekBar.prototype.handleMouseDown=function handleMouseDown(event){if(!isSingleLeftClick(event)){return;}
event.stopPropagation();this.player_.scrubbing(true);this.videoWasPlaying=!this.player_.paused();this.player_.pause();_Slider.prototype.handleMouseDown.call(this,event);};SeekBar.prototype.handleMouseMove=function handleMouseMove(event){if(!isSingleLeftClick(event)){return;}
var newTime=this.calculateDistance(event)*this.player_.duration();if(newTime===this.player_.duration()){newTime=newTime-0.1;}
this.player_.currentTime(newTime);};SeekBar.prototype.enable=function enable(){_Slider.prototype.enable.call(this);var mouseTimeDisplay=this.getChild('mouseTimeDisplay');if(!mouseTimeDisplay){return;}
mouseTimeDisplay.show();};SeekBar.prototype.disable=function disable(){_Slider.prototype.disable.call(this);var mouseTimeDisplay=this.getChild('mouseTimeDisplay');if(!mouseTimeDisplay){return;}
mouseTimeDisplay.hide();};SeekBar.prototype.handleMouseUp=function handleMouseUp(event){_Slider.prototype.handleMouseUp.call(this,event);if(event){event.stopPropagation();}
this.player_.scrubbing(false);this.player_.trigger({type:'timeupdate',target:this,manuallyTriggered:true});if(this.videoWasPlaying){silencePromise(this.player_.play());}};SeekBar.prototype.stepForward=function stepForward(){this.player_.currentTime(this.player_.currentTime()+STEP_SECONDS);};SeekBar.prototype.stepBack=function stepBack(){this.player_.currentTime(this.player_.currentTime()-STEP_SECONDS);};SeekBar.prototype.handleAction=function handleAction(event){if(this.player_.paused()){this.player_.play();}else{this.player_.pause();}};SeekBar.prototype.handleKeyPress=function handleKeyPress(event){if(event.which===32||event.which===13){event.preventDefault();this.handleAction(event);}else if(_Slider.prototype.handleKeyPress){_Slider.prototype.handleKeyPress.call(this,event);}};return SeekBar;}(Slider);SeekBar.prototype.options_={children:['loadProgressBar','playProgressBar'],barName:'playProgressBar'};if((!IE_VERSION||IE_VERSION>8)&&!IS_IOS&&!IS_ANDROID){SeekBar.prototype.options_.children.splice(1,0,'mouseTimeDisplay');}
SeekBar.prototype.playerEvent='timeupdate';Component.registerComponent('SeekBar',SeekBar);var ProgressControl=function(_Component){inherits(ProgressControl,_Component);function ProgressControl(player,options){classCallCheck(this,ProgressControl);var _this=possibleConstructorReturn(this,_Component.call(this,player,options));_this.handleMouseMove=throttle(bind(_this,_this.handleMouseMove),25);_this.throttledHandleMouseSeek=throttle(bind(_this,_this.handleMouseSeek),25);_this.enable();return _this;}
ProgressControl.prototype.createEl=function createEl$$1(){return _Component.prototype.createEl.call(this,'div',{className:'vjs-progress-control vjs-control'});};ProgressControl.prototype.handleMouseMove=function handleMouseMove(event){var seekBar=this.getChild('seekBar');if(seekBar){var mouseTimeDisplay=seekBar.getChild('mouseTimeDisplay');var seekBarEl=seekBar.el();var seekBarRect=getBoundingClientRect(seekBarEl);var seekBarPoint=getPointerPosition(seekBarEl,event).x;if(seekBarPoint>1){seekBarPoint=1;}else if(seekBarPoint<0){seekBarPoint=0;}
if(mouseTimeDisplay){mouseTimeDisplay.update(seekBarRect,seekBarPoint);}}};ProgressControl.prototype.handleMouseSeek=function handleMouseSeek(event){var seekBar=this.getChild('seekBar');if(seekBar){seekBar.handleMouseMove(event);}};ProgressControl.prototype.enabled=function enabled(){return this.enabled_;};ProgressControl.prototype.disable=function disable(){this.children().forEach(function(child){return child.disable&&child.disable();});if(!this.enabled()){return;}
this.off(['mousedown','touchstart'],this.handleMouseDown);this.off(this.el_,'mousemove',this.handleMouseMove);this.handleMouseUp();this.addClass('disabled');this.enabled_=false;};ProgressControl.prototype.enable=function enable(){this.children().forEach(function(child){return child.enable&&child.enable();});if(this.enabled()){return;}
this.on(['mousedown','touchstart'],this.handleMouseDown);this.on(this.el_,'mousemove',this.handleMouseMove);this.removeClass('disabled');this.enabled_=true;};ProgressControl.prototype.handleMouseDown=function handleMouseDown(event){var doc=this.el_.ownerDocument;var seekBar=this.getChild('seekBar');if(seekBar){seekBar.handleMouseDown(event);}
this.on(doc,'mousemove',this.throttledHandleMouseSeek);this.on(doc,'touchmove',this.throttledHandleMouseSeek);this.on(doc,'mouseup',this.handleMouseUp);this.on(doc,'touchend',this.handleMouseUp);};ProgressControl.prototype.handleMouseUp=function handleMouseUp(event){var doc=this.el_.ownerDocument;var seekBar=this.getChild('seekBar');if(seekBar){seekBar.handleMouseUp(event);}
this.off(doc,'mousemove',this.throttledHandleMouseSeek);this.off(doc,'touchmove',this.throttledHandleMouseSeek);this.off(doc,'mouseup',this.handleMouseUp);this.off(doc,'touchend',this.handleMouseUp);};return ProgressControl;}(Component);ProgressControl.prototype.options_={children:['seekBar']};Component.registerComponent('ProgressControl',ProgressControl);var FullscreenToggle=function(_Button){inherits(FullscreenToggle,_Button);function FullscreenToggle(player,options){classCallCheck(this,FullscreenToggle);var _this=possibleConstructorReturn(this,_Button.call(this,player,options));_this.on(player,'fullscreenchange',_this.handleFullscreenChange);if(document_1[FullscreenApi.fullscreenEnabled]===false){_this.disable();}
return _this;}
FullscreenToggle.prototype.buildCSSClass=function buildCSSClass(){return'vjs-fullscreen-control '+_Button.prototype.buildCSSClass.call(this);};FullscreenToggle.prototype.handleFullscreenChange=function handleFullscreenChange(event){if(this.player_.isFullscreen()){this.controlText('Non-Fullscreen');}else{this.controlText('Fullscreen');}};FullscreenToggle.prototype.handleClick=function handleClick(event){if(!this.player_.isFullscreen()){this.player_.requestFullscreen();}else{this.player_.exitFullscreen();}};return FullscreenToggle;}(Button);FullscreenToggle.prototype.controlText_='Fullscreen';Component.registerComponent('FullscreenToggle',FullscreenToggle);var checkVolumeSupport=function checkVolumeSupport(self,player){if(player.tech_&&!player.tech_.featuresVolumeControl){self.addClass('vjs-hidden');}
self.on(player,'loadstart',function(){if(!player.tech_.featuresVolumeControl){self.addClass('vjs-hidden');}else{self.removeClass('vjs-hidden');}});};var VolumeLevel=function(_Component){inherits(VolumeLevel,_Component);function VolumeLevel(){classCallCheck(this,VolumeLevel);return possibleConstructorReturn(this,_Component.apply(this,arguments));}
VolumeLevel.prototype.createEl=function createEl(){return _Component.prototype.createEl.call(this,'div',{className:'vjs-volume-level',innerHTML:'<span class="vjs-control-text"></span>'});};return VolumeLevel;}(Component);Component.registerComponent('VolumeLevel',VolumeLevel);var VolumeBar=function(_Slider){inherits(VolumeBar,_Slider);function VolumeBar(player,options){classCallCheck(this,VolumeBar);var _this=possibleConstructorReturn(this,_Slider.call(this,player,options));_this.on('slideractive',_this.updateLastVolume_);_this.on(player,'volumechange',_this.updateARIAAttributes);player.ready(function(){return _this.updateARIAAttributes();});return _this;}
VolumeBar.prototype.createEl=function createEl$$1(){return _Slider.prototype.createEl.call(this,'div',{className:'vjs-volume-bar vjs-slider-bar'},{'aria-label':this.localize('Volume Level'),'aria-live':'polite'});};VolumeBar.prototype.handleMouseDown=function handleMouseDown(event){if(!isSingleLeftClick(event)){return;}
_Slider.prototype.handleMouseDown.call(this,event);};VolumeBar.prototype.handleMouseMove=function handleMouseMove(event){if(!isSingleLeftClick(event)){return;}
this.checkMuted();this.player_.volume(this.calculateDistance(event));};VolumeBar.prototype.checkMuted=function checkMuted(){if(this.player_.muted()){this.player_.muted(false);}};VolumeBar.prototype.getPercent=function getPercent(){if(this.player_.muted()){return 0;}
return this.player_.volume();};VolumeBar.prototype.stepForward=function stepForward(){this.checkMuted();this.player_.volume(this.player_.volume()+0.1);};VolumeBar.prototype.stepBack=function stepBack(){this.checkMuted();this.player_.volume(this.player_.volume()-0.1);};VolumeBar.prototype.updateARIAAttributes=function updateARIAAttributes(event){var ariaValue=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute('aria-valuenow',ariaValue);this.el_.setAttribute('aria-valuetext',ariaValue+'%');};VolumeBar.prototype.volumeAsPercentage_=function volumeAsPercentage_(){return Math.round(this.player_.volume()*100);};VolumeBar.prototype.updateLastVolume_=function updateLastVolume_(){var _this2=this;var volumeBeforeDrag=this.player_.volume();this.one('sliderinactive',function(){if(_this2.player_.volume()===0){_this2.player_.lastVolume_(volumeBeforeDrag);}});};return VolumeBar;}(Slider);VolumeBar.prototype.options_={children:['volumeLevel'],barName:'volumeLevel'};VolumeBar.prototype.playerEvent='volumechange';Component.registerComponent('VolumeBar',VolumeBar);var VolumeControl=function(_Component){inherits(VolumeControl,_Component);function VolumeControl(player){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};classCallCheck(this,VolumeControl);options.vertical=options.vertical||false;if(typeof options.volumeBar==='undefined'||isPlain(options.volumeBar)){options.volumeBar=options.volumeBar||{};options.volumeBar.vertical=options.vertical;}
var _this=possibleConstructorReturn(this,_Component.call(this,player,options));checkVolumeSupport(_this,player);_this.throttledHandleMouseMove=throttle(bind(_this,_this.handleMouseMove),25);_this.on('mousedown',_this.handleMouseDown);_this.on('touchstart',_this.handleMouseDown);_this.on(_this.volumeBar,['focus','slideractive'],function(){_this.volumeBar.addClass('vjs-slider-active');_this.addClass('vjs-slider-active');_this.trigger('slideractive');});_this.on(_this.volumeBar,['blur','sliderinactive'],function(){_this.volumeBar.removeClass('vjs-slider-active');_this.removeClass('vjs-slider-active');_this.trigger('sliderinactive');});return _this;}
VolumeControl.prototype.createEl=function createEl(){var orientationClass='vjs-volume-horizontal';if(this.options_.vertical){orientationClass='vjs-volume-vertical';}
return _Component.prototype.createEl.call(this,'div',{className:'vjs-volume-control vjs-control '+orientationClass});};VolumeControl.prototype.handleMouseDown=function handleMouseDown(event){var doc=this.el_.ownerDocument;this.on(doc,'mousemove',this.throttledHandleMouseMove);this.on(doc,'touchmove',this.throttledHandleMouseMove);this.on(doc,'mouseup',this.handleMouseUp);this.on(doc,'touchend',this.handleMouseUp);};VolumeControl.prototype.handleMouseUp=function handleMouseUp(event){var doc=this.el_.ownerDocument;this.off(doc,'mousemove',this.throttledHandleMouseMove);this.off(doc,'touchmove',this.throttledHandleMouseMove);this.off(doc,'mouseup',this.handleMouseUp);this.off(doc,'touchend',this.handleMouseUp);};VolumeControl.prototype.handleMouseMove=function handleMouseMove(event){this.volumeBar.handleMouseMove(event);};return VolumeControl;}(Component);VolumeControl.prototype.options_={children:['volumeBar']};Component.registerComponent('VolumeControl',VolumeControl);var checkMuteSupport=function checkMuteSupport(self,player){if(player.tech_&&!player.tech_.featuresMuteControl){self.addClass('vjs-hidden');}
self.on(player,'loadstart',function(){if(!player.tech_.featuresMuteControl){self.addClass('vjs-hidden');}else{self.removeClass('vjs-hidden');}});};var MuteToggle=function(_Button){inherits(MuteToggle,_Button);function MuteToggle(player,options){classCallCheck(this,MuteToggle);var _this=possibleConstructorReturn(this,_Button.call(this,player,options));checkMuteSupport(_this,player);_this.on(player,['loadstart','volumechange'],_this.update);return _this;}
MuteToggle.prototype.buildCSSClass=function buildCSSClass(){return'vjs-mute-control '+_Button.prototype.buildCSSClass.call(this);};MuteToggle.prototype.handleClick=function handleClick(event){var vol=this.player_.volume();var lastVolume=this.player_.lastVolume_();if(vol===0){var volumeToSet=lastVolume<0.1?0.1:lastVolume;this.player_.volume(volumeToSet);this.player_.muted(false);}else{this.player_.muted(this.player_.muted()?false:true);}};MuteToggle.prototype.update=function update(event){this.updateIcon_();this.updateControlText_();};MuteToggle.prototype.updateIcon_=function updateIcon_(){var vol=this.player_.volume();var level=3;if(IS_IOS){this.player_.muted(this.player_.tech_.el_.muted);}
if(vol===0||this.player_.muted()){level=0;}else if(vol<0.33){level=1;}else if(vol<0.67){level=2;}
for(var i=0;i<4;i++){removeClass(this.el_,'vjs-vol-'+i);}
addClass(this.el_,'vjs-vol-'+level);};MuteToggle.prototype.updateControlText_=function updateControlText_(){var soundOff=this.player_.muted()||this.player_.volume()===0;var text=soundOff?'Unmute':'Mute';if(this.controlText()!==text){this.controlText(text);}};return MuteToggle;}(Button);MuteToggle.prototype.controlText_='Mute';Component.registerComponent('MuteToggle',MuteToggle);var VolumePanel=function(_Component){inherits(VolumePanel,_Component);function VolumePanel(player){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};classCallCheck(this,VolumePanel);if(typeof options.inline!=='undefined'){options.inline=options.inline;}else{options.inline=true;}
if(typeof options.volumeControl==='undefined'||isPlain(options.volumeControl)){options.volumeControl=options.volumeControl||{};options.volumeControl.vertical=!options.inline;}
var _this=possibleConstructorReturn(this,_Component.call(this,player,options));_this.on(player,['loadstart'],_this.volumePanelState_);_this.on(_this.volumeControl,['slideractive'],_this.sliderActive_);_this.on(_this.volumeControl,['sliderinactive'],_this.sliderInactive_);return _this;}
VolumePanel.prototype.sliderActive_=function sliderActive_(){this.addClass('vjs-slider-active');};VolumePanel.prototype.sliderInactive_=function sliderInactive_(){this.removeClass('vjs-slider-active');};VolumePanel.prototype.volumePanelState_=function volumePanelState_(){if(this.volumeControl.hasClass('vjs-hidden')&&this.muteToggle.hasClass('vjs-hidden')){this.addClass('vjs-hidden');}
if(this.volumeControl.hasClass('vjs-hidden')&&!this.muteToggle.hasClass('vjs-hidden')){this.addClass('vjs-mute-toggle-only');}};VolumePanel.prototype.createEl=function createEl(){var orientationClass='vjs-volume-panel-horizontal';if(!this.options_.inline){orientationClass='vjs-volume-panel-vertical';}
return _Component.prototype.createEl.call(this,'div',{className:'vjs-volume-panel vjs-control '+orientationClass});};return VolumePanel;}(Component);VolumePanel.prototype.options_={children:['muteToggle','volumeControl']};Component.registerComponent('VolumePanel',VolumePanel);var Menu=function(_Component){inherits(Menu,_Component);function Menu(player,options){classCallCheck(this,Menu);var _this=possibleConstructorReturn(this,_Component.call(this,player,options));if(options){_this.menuButton_=options.menuButton;}
_this.focusedChild_=-1;_this.on('keydown',_this.handleKeyPress);return _this;}
Menu.prototype.addItem=function addItem(component){this.addChild(component);component.on('click',bind(this,function(event){if(this.menuButton_){this.menuButton_.unpressButton();if(component.name()!=='CaptionSettingsMenuItem'){this.menuButton_.focus();}}}));};Menu.prototype.createEl=function createEl$$1(){var contentElType=this.options_.contentElType||'ul';this.contentEl_=createEl(contentElType,{className:'vjs-menu-content'});this.contentEl_.setAttribute('role','menu');var el=_Component.prototype.createEl.call(this,'div',{append:this.contentEl_,className:'vjs-menu'});el.appendChild(this.contentEl_);on(el,'click',function(event){event.preventDefault();event.stopImmediatePropagation();});return el;};Menu.prototype.dispose=function dispose(){this.contentEl_=null;_Component.prototype.dispose.call(this);};Menu.prototype.handleKeyPress=function handleKeyPress(event){if(event.which===37||event.which===40){event.preventDefault();this.stepForward();}else if(event.which===38||event.which===39){event.preventDefault();this.stepBack();}};Menu.prototype.stepForward=function stepForward(){var stepChild=0;if(this.focusedChild_!==undefined){stepChild=this.focusedChild_+1;}
this.focus(stepChild);};Menu.prototype.stepBack=function stepBack(){var stepChild=0;if(this.focusedChild_!==undefined){stepChild=this.focusedChild_-1;}
this.focus(stepChild);};Menu.prototype.focus=function focus(){var item=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var children=this.children().slice();var haveTitle=children.length&&children[0].className&&/vjs-menu-title/.test(children[0].className);if(haveTitle){children.shift();}
if(children.length>0){if(item<0){item=0;}else if(item>=children.length){item=children.length-1;}
this.focusedChild_=item;children[item].el_.focus();}};return Menu;}(Component);Component.registerComponent('Menu',Menu);var MenuButton=function(_Component){inherits(MenuButton,_Component);function MenuButton(player){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};classCallCheck(this,MenuButton);var _this=possibleConstructorReturn(this,_Component.call(this,player,options));_this.menuButton_=new Button(player,options);_this.menuButton_.controlText(_this.controlText_);_this.menuButton_.el_.setAttribute('aria-haspopup','true');var buttonClass=Button.prototype.buildCSSClass();_this.menuButton_.el_.className=_this.buildCSSClass()+' '+buttonClass;_this.menuButton_.removeClass('vjs-control');_this.addChild(_this.menuButton_);_this.update();_this.enabled_=true;_this.on(_this.menuButton_,'tap',_this.handleClick);_this.on(_this.menuButton_,'click',_this.handleClick);_this.on(_this.menuButton_,'focus',_this.handleFocus);_this.on(_this.menuButton_,'blur',_this.handleBlur);_this.on('keydown',_this.handleSubmenuKeyPress);return _this;}
MenuButton.prototype.update=function update(){var menu=this.createMenu();if(this.menu){this.menu.dispose();this.removeChild(this.menu);}
this.menu=menu;this.addChild(menu);this.buttonPressed_=false;this.menuButton_.el_.setAttribute('aria-expanded','false');if(this.items&&this.items.length<=this.hideThreshold_){this.hide();}else{this.show();}};MenuButton.prototype.createMenu=function createMenu(){var menu=new Menu(this.player_,{menuButton:this});this.hideThreshold_=0;if(this.options_.title){var title=createEl('li',{className:'vjs-menu-title',innerHTML:toTitleCase(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;menu.children_.unshift(title);prependTo(title,menu.contentEl());}
this.items=this.createItems();if(this.items){for(var i=0;i<this.items.length;i++){menu.addItem(this.items[i]);}}
return menu;};MenuButton.prototype.createItems=function createItems(){};MenuButton.prototype.createEl=function createEl$$1(){return _Component.prototype.createEl.call(this,'div',{className:this.buildWrapperCSSClass()},{});};MenuButton.prototype.buildWrapperCSSClass=function buildWrapperCSSClass(){var menuButtonClass='vjs-menu-button';if(this.options_.inline===true){menuButtonClass+='-inline';}else{menuButtonClass+='-popup';}
var buttonClass=Button.prototype.buildCSSClass();return'vjs-menu-button '+menuButtonClass+' '+buttonClass+' '+_Component.prototype.buildCSSClass.call(this);};MenuButton.prototype.buildCSSClass=function buildCSSClass(){var menuButtonClass='vjs-menu-button';if(this.options_.inline===true){menuButtonClass+='-inline';}else{menuButtonClass+='-popup';}
return'vjs-menu-button '+menuButtonClass+' '+_Component.prototype.buildCSSClass.call(this);};MenuButton.prototype.controlText=function controlText(text){var el=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.menuButton_.el();return this.menuButton_.controlText(text,el);};MenuButton.prototype.handleClick=function handleClick(event){this.one(this.menu.contentEl(),'mouseleave',bind(this,function(e){this.unpressButton();this.el_.blur();}));if(this.buttonPressed_){this.unpressButton();}else{this.pressButton();}};MenuButton.prototype.focus=function focus(){this.menuButton_.focus();};MenuButton.prototype.blur=function blur(){this.menuButton_.blur();};MenuButton.prototype.handleFocus=function handleFocus(){on(document_1,'keydown',bind(this,this.handleKeyPress));};MenuButton.prototype.handleBlur=function handleBlur(){off(document_1,'keydown',bind(this,this.handleKeyPress));};MenuButton.prototype.handleKeyPress=function handleKeyPress(event){if(event.which===27||event.which===9){if(this.buttonPressed_){this.unpressButton();}
if(event.which!==9){event.preventDefault();this.menuButton_.el_.focus();}}else if(event.which===38||event.which===40){if(!this.buttonPressed_){this.pressButton();event.preventDefault();}}};MenuButton.prototype.handleSubmenuKeyPress=function handleSubmenuKeyPress(event){if(event.which===27||event.which===9){if(this.buttonPressed_){this.unpressButton();}
if(event.which!==9){event.preventDefault();this.menuButton_.el_.focus();}}};MenuButton.prototype.pressButton=function pressButton(){if(this.enabled_){this.buttonPressed_=true;this.menu.lockShowing();this.menuButton_.el_.setAttribute('aria-expanded','true');if(IS_IOS&&isInFrame()){return;}
this.menu.focus();}};MenuButton.prototype.unpressButton=function unpressButton(){if(this.enabled_){this.buttonPressed_=false;this.menu.unlockShowing();this.menuButton_.el_.setAttribute('aria-expanded','false');}};MenuButton.prototype.disable=function disable(){this.unpressButton();this.enabled_=false;this.addClass('vjs-disabled');this.menuButton_.disable();};MenuButton.prototype.enable=function enable(){this.enabled_=true;this.removeClass('vjs-disabled');this.menuButton_.enable();};return MenuButton;}(Component);Component.registerComponent('MenuButton',MenuButton);var TrackButton=function(_MenuButton){inherits(TrackButton,_MenuButton);function TrackButton(player,options){classCallCheck(this,TrackButton);var tracks=options.tracks;var _this=possibleConstructorReturn(this,_MenuButton.call(this,player,options));if(_this.items.length<=1){_this.hide();}
if(!tracks){return possibleConstructorReturn(_this);}
var updateHandler=bind(_this,_this.update);tracks.addEventListener('removetrack',updateHandler);tracks.addEventListener('addtrack',updateHandler);_this.player_.on('ready',updateHandler);_this.player_.on('dispose',function(){tracks.removeEventListener('removetrack',updateHandler);tracks.removeEventListener('addtrack',updateHandler);});return _this;}
return TrackButton;}(MenuButton);Component.registerComponent('TrackButton',TrackButton);var MenuItem=function(_ClickableComponent){inherits(MenuItem,_ClickableComponent);function MenuItem(player,options){classCallCheck(this,MenuItem);var _this=possibleConstructorReturn(this,_ClickableComponent.call(this,player,options));_this.selectable=options.selectable;_this.isSelected_=options.selected||false;_this.multiSelectable=options.multiSelectable;_this.selected(_this.isSelected_);if(_this.selectable){if(_this.multiSelectable){_this.el_.setAttribute('role','menuitemcheckbox');}else{_this.el_.setAttribute('role','menuitemradio');}}else{_this.el_.setAttribute('role','menuitem');}
return _this;}
MenuItem.prototype.createEl=function createEl(type,props,attrs){this.nonIconControl=true;return _ClickableComponent.prototype.createEl.call(this,'li',assign({className:'vjs-menu-item',innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+'</span>',tabIndex:-1},props),attrs);};MenuItem.prototype.handleClick=function handleClick(event){this.selected(true);};MenuItem.prototype.selected=function selected(_selected){if(this.selectable){if(_selected){this.addClass('vjs-selected');this.el_.setAttribute('aria-checked','true');this.controlText(', selected');this.isSelected_=true;}else{this.removeClass('vjs-selected');this.el_.setAttribute('aria-checked','false');this.controlText('');this.isSelected_=false;}}};return MenuItem;}(ClickableComponent);Component.registerComponent('MenuItem',MenuItem);var TextTrackMenuItem=function(_MenuItem){inherits(TextTrackMenuItem,_MenuItem);function TextTrackMenuItem(player,options){classCallCheck(this,TextTrackMenuItem);var track=options.track;var tracks=player.textTracks();options.label=track.label||track.language||'Unknown';options.selected=track.mode==='showing';var _this=possibleConstructorReturn(this,_MenuItem.call(this,player,options));_this.track=track;var changeHandler=function changeHandler(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}
_this.handleTracksChange.apply(_this,args);};var selectedLanguageChangeHandler=function selectedLanguageChangeHandler(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}
_this.handleSelectedLanguageChange.apply(_this,args);};player.on(['loadstart','texttrackchange'],changeHandler);tracks.addEventListener('change',changeHandler);tracks.addEventListener('selectedlanguagechange',selectedLanguageChangeHandler);_this.on('dispose',function(){player.off(['loadstart','texttrackchange'],changeHandler);tracks.removeEventListener('change',changeHandler);tracks.removeEventListener('selectedlanguagechange',selectedLanguageChangeHandler);});if(tracks.onchange===undefined){var event=void 0;_this.on(['tap','click'],function(){if(_typeof(window_1.Event)!=='object'){try{event=new window_1.Event('change');}catch(err){}}
if(!event){event=document_1.createEvent('Event');event.initEvent('change',true,true);}
tracks.dispatchEvent(event);});}
_this.handleTracksChange();return _this;}
TextTrackMenuItem.prototype.handleClick=function handleClick(event){var kind=this.track.kind;var kinds=this.track.kinds;var tracks=this.player_.textTracks();if(!kinds){kinds=[kind];}
_MenuItem.prototype.handleClick.call(this,event);if(!tracks){return;}
for(var i=0;i<tracks.length;i++){var track=tracks[i];if(track===this.track&&kinds.indexOf(track.kind)>-1){if(track.mode!=='showing'){track.mode='showing';}}else if(track.mode!=='disabled'){track.mode='disabled';}}};TextTrackMenuItem.prototype.handleTracksChange=function handleTracksChange(event){var shouldBeSelected=this.track.mode==='showing';if(shouldBeSelected!==this.isSelected_){this.selected(shouldBeSelected);}};TextTrackMenuItem.prototype.handleSelectedLanguageChange=function handleSelectedLanguageChange(event){if(this.track.mode==='showing'){var selectedLanguage=this.player_.cache_.selectedLanguage;if(selectedLanguage&&selectedLanguage.enabled&&selectedLanguage.language===this.track.language&&selectedLanguage.kind!==this.track.kind){return;}
this.player_.cache_.selectedLanguage={enabled:true,language:this.track.language,kind:this.track.kind};}};TextTrackMenuItem.prototype.dispose=function dispose(){this.track=null;_MenuItem.prototype.dispose.call(this);};return TextTrackMenuItem;}(MenuItem);Component.registerComponent('TextTrackMenuItem',TextTrackMenuItem);var OffTextTrackMenuItem=function(_TextTrackMenuItem){inherits(OffTextTrackMenuItem,_TextTrackMenuItem);function OffTextTrackMenuItem(player,options){classCallCheck(this,OffTextTrackMenuItem);options.track={player:player,kind:options.kind,kinds:options.kinds,'default':false,mode:'disabled'};if(!options.kinds){options.kinds=[options.kind];}
if(options.label){options.track.label=options.label;}else{options.track.label=options.kinds.join(' and ')+' off';}
options.selectable=true;options.multiSelectable=false;return possibleConstructorReturn(this,_TextTrackMenuItem.call(this,player,options));}
OffTextTrackMenuItem.prototype.handleTracksChange=function handleTracksChange(event){var tracks=this.player().textTracks();var shouldBeSelected=true;for(var i=0,l=tracks.length;i<l;i++){var track=tracks[i];if(this.options_.kinds.indexOf(track.kind)>-1&&track.mode==='showing'){shouldBeSelected=false;break;}}
if(shouldBeSelected!==this.isSelected_){this.selected(shouldBeSelected);}};OffTextTrackMenuItem.prototype.handleSelectedLanguageChange=function handleSelectedLanguageChange(event){var tracks=this.player().textTracks();var allHidden=true;for(var i=0,l=tracks.length;i<l;i++){var track=tracks[i];if(['captions','descriptions','subtitles'].indexOf(track.kind)>-1&&track.mode==='showing'){allHidden=false;break;}}
if(allHidden){this.player_.cache_.selectedLanguage={enabled:false};}};return OffTextTrackMenuItem;}(TextTrackMenuItem);Component.registerComponent('OffTextTrackMenuItem',OffTextTrackMenuItem);var TextTrackButton=function(_TrackButton){inherits(TextTrackButton,_TrackButton);function TextTrackButton(player){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};classCallCheck(this,TextTrackButton);options.tracks=player.textTracks();return possibleConstructorReturn(this,_TrackButton.call(this,player,options));}
TextTrackButton.prototype.createItems=function createItems(){var items=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var TrackMenuItem=arguments.length>1&&arguments[1]!==undefined?arguments[1]:TextTrackMenuItem;var label=void 0;if(this.label_){label=this.label_+' off';}
items.push(new OffTextTrackMenuItem(this.player_,{kinds:this.kinds_,kind:this.kind_,label:label}));this.hideThreshold_+=1;var tracks=this.player_.textTracks();if(!Array.isArray(this.kinds_)){this.kinds_=[this.kind_];}
for(var i=0;i<tracks.length;i++){var track=tracks[i];if(this.kinds_.indexOf(track.kind)>-1){var item=new TrackMenuItem(this.player_,{track:track,selectable:true,multiSelectable:false});item.addClass('vjs-'+track.kind+'-menu-item');items.push(item);}}
return items;};return TextTrackButton;}(TrackButton);Component.registerComponent('TextTrackButton',TextTrackButton);var ChaptersTrackMenuItem=function(_MenuItem){inherits(ChaptersTrackMenuItem,_MenuItem);function ChaptersTrackMenuItem(player,options){classCallCheck(this,ChaptersTrackMenuItem);var track=options.track;var cue=options.cue;var currentTime=player.currentTime();options.selectable=true;options.multiSelectable=false;options.label=cue.text;options.selected=cue.startTime<=currentTime&&currentTime<cue.endTime;var _this=possibleConstructorReturn(this,_MenuItem.call(this,player,options));_this.track=track;_this.cue=cue;track.addEventListener('cuechange',bind(_this,_this.update));return _this;}
ChaptersTrackMenuItem.prototype.handleClick=function handleClick(event){_MenuItem.prototype.handleClick.call(this);this.player_.currentTime(this.cue.startTime);this.update(this.cue.startTime);};ChaptersTrackMenuItem.prototype.update=function update(event){var cue=this.cue;var currentTime=this.player_.currentTime();this.selected(cue.startTime<=currentTime&&currentTime<cue.endTime);};return ChaptersTrackMenuItem;}(MenuItem);Component.registerComponent('ChaptersTrackMenuItem',ChaptersTrackMenuItem);var ChaptersButton=function(_TextTrackButton){inherits(ChaptersButton,_TextTrackButton);function ChaptersButton(player,options,ready){classCallCheck(this,ChaptersButton);return possibleConstructorReturn(this,_TextTrackButton.call(this,player,options,ready));}
ChaptersButton.prototype.buildCSSClass=function buildCSSClass(){return'vjs-chapters-button '+_TextTrackButton.prototype.buildCSSClass.call(this);};ChaptersButton.prototype.buildWrapperCSSClass=function buildWrapperCSSClass(){return'vjs-chapters-button '+_TextTrackButton.prototype.buildWrapperCSSClass.call(this);};ChaptersButton.prototype.update=function update(event){if(!this.track_||event&&(event.type==='addtrack'||event.type==='removetrack')){this.setTrack(this.findChaptersTrack());}
_TextTrackButton.prototype.update.call(this);};ChaptersButton.prototype.setTrack=function setTrack(track){if(this.track_===track){return;}
if(!this.updateHandler_){this.updateHandler_=this.update.bind(this);}
if(this.track_){var remoteTextTrackEl=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);if(remoteTextTrackEl){remoteTextTrackEl.removeEventListener('load',this.updateHandler_);}
this.track_=null;}
this.track_=track;if(this.track_){this.track_.mode='hidden';var _remoteTextTrackEl=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);if(_remoteTextTrackEl){_remoteTextTrackEl.addEventListener('load',this.updateHandler_);}}};ChaptersButton.prototype.findChaptersTrack=function findChaptersTrack(){var tracks=this.player_.textTracks()||[];for(var i=tracks.length-1;i>=0;i--){var track=tracks[i];if(track.kind===this.kind_){return track;}}};ChaptersButton.prototype.getMenuCaption=function getMenuCaption(){if(this.track_&&this.track_.label){return this.track_.label;}
return this.localize(toTitleCase(this.kind_));};ChaptersButton.prototype.createMenu=function createMenu(){this.options_.title=this.getMenuCaption();return _TextTrackButton.prototype.createMenu.call(this);};ChaptersButton.prototype.createItems=function createItems(){var items=[];if(!this.track_){return items;}
var cues=this.track_.cues;if(!cues){return items;}
for(var i=0,l=cues.length;i<l;i++){var cue=cues[i];var mi=new ChaptersTrackMenuItem(this.player_,{track:this.track_,cue:cue});items.push(mi);}
return items;};return ChaptersButton;}(TextTrackButton);ChaptersButton.prototype.kind_='chapters';ChaptersButton.prototype.controlText_='Chapters';Component.registerComponent('ChaptersButton',ChaptersButton);var DescriptionsButton=function(_TextTrackButton){inherits(DescriptionsButton,_TextTrackButton);function DescriptionsButton(player,options,ready){classCallCheck(this,DescriptionsButton);var _this=possibleConstructorReturn(this,_TextTrackButton.call(this,player,options,ready));var tracks=player.textTracks();var changeHandler=bind(_this,_this.handleTracksChange);tracks.addEventListener('change',changeHandler);_this.on('dispose',function(){tracks.removeEventListener('change',changeHandler);});return _this;}
DescriptionsButton.prototype.handleTracksChange=function handleTracksChange(event){var tracks=this.player().textTracks();var disabled=false;for(var i=0,l=tracks.length;i<l;i++){var track=tracks[i];if(track.kind!==this.kind_&&track.mode==='showing'){disabled=true;break;}}
if(disabled){this.disable();}else{this.enable();}};DescriptionsButton.prototype.buildCSSClass=function buildCSSClass(){return'vjs-descriptions-button '+_TextTrackButton.prototype.buildCSSClass.call(this);};DescriptionsButton.prototype.buildWrapperCSSClass=function buildWrapperCSSClass(){return'vjs-descriptions-button '+_TextTrackButton.prototype.buildWrapperCSSClass.call(this);};return DescriptionsButton;}(TextTrackButton);DescriptionsButton.prototype.kind_='descriptions';DescriptionsButton.prototype.controlText_='Descriptions';Component.registerComponent('DescriptionsButton',DescriptionsButton);var SubtitlesButton=function(_TextTrackButton){inherits(SubtitlesButton,_TextTrackButton);function SubtitlesButton(player,options,ready){classCallCheck(this,SubtitlesButton);return possibleConstructorReturn(this,_TextTrackButton.call(this,player,options,ready));}
SubtitlesButton.prototype.buildCSSClass=function buildCSSClass(){return'vjs-subtitles-button '+_TextTrackButton.prototype.buildCSSClass.call(this);};SubtitlesButton.prototype.buildWrapperCSSClass=function buildWrapperCSSClass(){return'vjs-subtitles-button '+_TextTrackButton.prototype.buildWrapperCSSClass.call(this);};return SubtitlesButton;}(TextTrackButton);SubtitlesButton.prototype.kind_='subtitles';SubtitlesButton.prototype.controlText_='Subtitles';Component.registerComponent('SubtitlesButton',SubtitlesButton);var CaptionSettingsMenuItem=function(_TextTrackMenuItem){inherits(CaptionSettingsMenuItem,_TextTrackMenuItem);function CaptionSettingsMenuItem(player,options){classCallCheck(this,CaptionSettingsMenuItem);options.track={player:player,kind:options.kind,label:options.kind+' settings',selectable:false,'default':false,mode:'disabled'};options.selectable=false;options.name='CaptionSettingsMenuItem';var _this=possibleConstructorReturn(this,_TextTrackMenuItem.call(this,player,options));_this.addClass('vjs-texttrack-settings');_this.controlText(', opens '+options.kind+' settings dialog');return _this;}
CaptionSettingsMenuItem.prototype.handleClick=function handleClick(event){this.player().getChild('textTrackSettings').open();};return CaptionSettingsMenuItem;}(TextTrackMenuItem);Component.registerComponent('CaptionSettingsMenuItem',CaptionSettingsMenuItem);var CaptionsButton=function(_TextTrackButton){inherits(CaptionsButton,_TextTrackButton);function CaptionsButton(player,options,ready){classCallCheck(this,CaptionsButton);return possibleConstructorReturn(this,_TextTrackButton.call(this,player,options,ready));}
CaptionsButton.prototype.buildCSSClass=function buildCSSClass(){return'vjs-captions-button '+_TextTrackButton.prototype.buildCSSClass.call(this);};CaptionsButton.prototype.buildWrapperCSSClass=function buildWrapperCSSClass(){return'vjs-captions-button '+_TextTrackButton.prototype.buildWrapperCSSClass.call(this);};CaptionsButton.prototype.createItems=function createItems(){var items=[];if(!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild('textTrackSettings')){items.push(new CaptionSettingsMenuItem(this.player_,{kind:this.kind_}));this.hideThreshold_+=1;}
return _TextTrackButton.prototype.createItems.call(this,items);};return CaptionsButton;}(TextTrackButton);CaptionsButton.prototype.kind_='captions';CaptionsButton.prototype.controlText_='Captions';Component.registerComponent('CaptionsButton',CaptionsButton);var SubsCapsMenuItem=function(_TextTrackMenuItem){inherits(SubsCapsMenuItem,_TextTrackMenuItem);function SubsCapsMenuItem(){classCallCheck(this,SubsCapsMenuItem);return possibleConstructorReturn(this,_TextTrackMenuItem.apply(this,arguments));}
SubsCapsMenuItem.prototype.createEl=function createEl(type,props,attrs){var innerHTML='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);if(this.options_.track.kind==='captions'){innerHTML+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize('Captions')+'</span>\n      ';}
innerHTML+='</span>';var el=_TextTrackMenuItem.prototype.createEl.call(this,type,assign({innerHTML:innerHTML},props),attrs);return el;};return SubsCapsMenuItem;}(TextTrackMenuItem);Component.registerComponent('SubsCapsMenuItem',SubsCapsMenuItem);var SubsCapsButton=function(_TextTrackButton){inherits(SubsCapsButton,_TextTrackButton);function SubsCapsButton(player){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};classCallCheck(this,SubsCapsButton);var _this=possibleConstructorReturn(this,_TextTrackButton.call(this,player,options));_this.label_='subtitles';if(['en','en-us','en-ca','fr-ca'].indexOf(_this.player_.language_)>-1){_this.label_='captions';}
_this.menuButton_.controlText(toTitleCase(_this.label_));return _this;}
SubsCapsButton.prototype.buildCSSClass=function buildCSSClass(){return'vjs-subs-caps-button '+_TextTrackButton.prototype.buildCSSClass.call(this);};SubsCapsButton.prototype.buildWrapperCSSClass=function buildWrapperCSSClass(){return'vjs-subs-caps-button '+_TextTrackButton.prototype.buildWrapperCSSClass.call(this);};SubsCapsButton.prototype.createItems=function createItems(){var items=[];if(!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild('textTrackSettings')){items.push(new CaptionSettingsMenuItem(this.player_,{kind:this.label_}));this.hideThreshold_+=1;}
items=_TextTrackButton.prototype.createItems.call(this,items,SubsCapsMenuItem);return items;};return SubsCapsButton;}(TextTrackButton);SubsCapsButton.prototype.kinds_=['captions','subtitles'];SubsCapsButton.prototype.controlText_='Subtitles';Component.registerComponent('SubsCapsButton',SubsCapsButton);var AudioTrackMenuItem=function(_MenuItem){inherits(AudioTrackMenuItem,_MenuItem);function AudioTrackMenuItem(player,options){classCallCheck(this,AudioTrackMenuItem);var track=options.track;var tracks=player.audioTracks();options.label=track.label||track.language||'Unknown';options.selected=track.enabled;var _this=possibleConstructorReturn(this,_MenuItem.call(this,player,options));_this.track=track;_this.addClass('vjs-'+track.kind+'-menu-item');var changeHandler=function changeHandler(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}
_this.handleTracksChange.apply(_this,args);};tracks.addEventListener('change',changeHandler);_this.on('dispose',function(){tracks.removeEventListener('change',changeHandler);});return _this;}
AudioTrackMenuItem.prototype.createEl=function createEl(type,props,attrs){var innerHTML='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);if(this.options_.track.kind==='main-desc'){innerHTML+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize('Descriptions')+'</span>\n      ';}
innerHTML+='</span>';var el=_MenuItem.prototype.createEl.call(this,type,assign({innerHTML:innerHTML},props),attrs);return el;};AudioTrackMenuItem.prototype.handleClick=function handleClick(event){var tracks=this.player_.audioTracks();_MenuItem.prototype.handleClick.call(this,event);for(var i=0;i<tracks.length;i++){var track=tracks[i];track.enabled=track===this.track;}};AudioTrackMenuItem.prototype.handleTracksChange=function handleTracksChange(event){this.selected(this.track.enabled);};return AudioTrackMenuItem;}(MenuItem);Component.registerComponent('AudioTrackMenuItem',AudioTrackMenuItem);var AudioTrackButton=function(_TrackButton){inherits(AudioTrackButton,_TrackButton);function AudioTrackButton(player){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};classCallCheck(this,AudioTrackButton);options.tracks=player.audioTracks();return possibleConstructorReturn(this,_TrackButton.call(this,player,options));}
AudioTrackButton.prototype.buildCSSClass=function buildCSSClass(){return'vjs-audio-button '+_TrackButton.prototype.buildCSSClass.call(this);};AudioTrackButton.prototype.buildWrapperCSSClass=function buildWrapperCSSClass(){return'vjs-audio-button '+_TrackButton.prototype.buildWrapperCSSClass.call(this);};AudioTrackButton.prototype.createItems=function createItems(){var items=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];this.hideThreshold_=1;var tracks=this.player_.audioTracks();for(var i=0;i<tracks.length;i++){var track=tracks[i];items.push(new AudioTrackMenuItem(this.player_,{track:track,selectable:true,multiSelectable:false}));}
return items;};return AudioTrackButton;}(TrackButton);AudioTrackButton.prototype.controlText_='Audio Track';Component.registerComponent('AudioTrackButton',AudioTrackButton);var PlaybackRateMenuItem=function(_MenuItem){inherits(PlaybackRateMenuItem,_MenuItem);function PlaybackRateMenuItem(player,options){classCallCheck(this,PlaybackRateMenuItem);var label=options.rate;var rate=parseFloat(label,10);options.label=label;options.selected=rate===1;options.selectable=true;options.multiSelectable=false;var _this=possibleConstructorReturn(this,_MenuItem.call(this,player,options));_this.label=label;_this.rate=rate;_this.on(player,'ratechange',_this.update);return _this;}
PlaybackRateMenuItem.prototype.handleClick=function handleClick(event){_MenuItem.prototype.handleClick.call(this);this.player().playbackRate(this.rate);};PlaybackRateMenuItem.prototype.update=function update(event){this.selected(this.player().playbackRate()===this.rate);};return PlaybackRateMenuItem;}(MenuItem);PlaybackRateMenuItem.prototype.contentElType='button';Component.registerComponent('PlaybackRateMenuItem',PlaybackRateMenuItem);var PlaybackRateMenuButton=function(_MenuButton){inherits(PlaybackRateMenuButton,_MenuButton);function PlaybackRateMenuButton(player,options){classCallCheck(this,PlaybackRateMenuButton);var _this=possibleConstructorReturn(this,_MenuButton.call(this,player,options));_this.updateVisibility();_this.updateLabel();_this.on(player,'loadstart',_this.updateVisibility);_this.on(player,'ratechange',_this.updateLabel);return _this;}
PlaybackRateMenuButton.prototype.createEl=function createEl$$1(){var el=_MenuButton.prototype.createEl.call(this);this.labelEl_=createEl('div',{className:'vjs-playback-rate-value',innerHTML:'1x'});el.appendChild(this.labelEl_);return el;};PlaybackRateMenuButton.prototype.dispose=function dispose(){this.labelEl_=null;_MenuButton.prototype.dispose.call(this);};PlaybackRateMenuButton.prototype.buildCSSClass=function buildCSSClass(){return'vjs-playback-rate '+_MenuButton.prototype.buildCSSClass.call(this);};PlaybackRateMenuButton.prototype.buildWrapperCSSClass=function buildWrapperCSSClass(){return'vjs-playback-rate '+_MenuButton.prototype.buildWrapperCSSClass.call(this);};PlaybackRateMenuButton.prototype.createMenu=function createMenu(){var menu=new Menu(this.player());var rates=this.playbackRates();if(rates){for(var i=rates.length-1;i>=0;i--){menu.addChild(new PlaybackRateMenuItem(this.player(),{rate:rates[i]+'x'}));}}
return menu;};PlaybackRateMenuButton.prototype.updateARIAAttributes=function updateARIAAttributes(){this.el().setAttribute('aria-valuenow',this.player().playbackRate());};PlaybackRateMenuButton.prototype.handleClick=function handleClick(event){var currentRate=this.player().playbackRate();var rates=this.playbackRates();var newRate=rates[0];for(var i=0;i<rates.length;i++){if(rates[i]>currentRate){newRate=rates[i];break;}}
this.player().playbackRate(newRate);};PlaybackRateMenuButton.prototype.playbackRates=function playbackRates(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates;};PlaybackRateMenuButton.prototype.playbackRateSupported=function playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0;};PlaybackRateMenuButton.prototype.updateVisibility=function updateVisibility(event){if(this.playbackRateSupported()){this.removeClass('vjs-hidden');}else{this.addClass('vjs-hidden');}};PlaybackRateMenuButton.prototype.updateLabel=function updateLabel(event){if(this.playbackRateSupported()){this.labelEl_.innerHTML=this.player().playbackRate()+'x';}};return PlaybackRateMenuButton;}(MenuButton);PlaybackRateMenuButton.prototype.controlText_='Playback Rate';Component.registerComponent('PlaybackRateMenuButton',PlaybackRateMenuButton);var Spacer=function(_Component){inherits(Spacer,_Component);function Spacer(){classCallCheck(this,Spacer);return possibleConstructorReturn(this,_Component.apply(this,arguments));}
Spacer.prototype.buildCSSClass=function buildCSSClass(){return'vjs-spacer '+_Component.prototype.buildCSSClass.call(this);};Spacer.prototype.createEl=function createEl(){return _Component.prototype.createEl.call(this,'div',{className:this.buildCSSClass()});};return Spacer;}(Component);Component.registerComponent('Spacer',Spacer);var CustomControlSpacer=function(_Spacer){inherits(CustomControlSpacer,_Spacer);function CustomControlSpacer(){classCallCheck(this,CustomControlSpacer);return possibleConstructorReturn(this,_Spacer.apply(this,arguments));}
CustomControlSpacer.prototype.buildCSSClass=function buildCSSClass(){return'vjs-custom-control-spacer '+_Spacer.prototype.buildCSSClass.call(this);};CustomControlSpacer.prototype.createEl=function createEl(){var el=_Spacer.prototype.createEl.call(this,{className:this.buildCSSClass()});el.innerHTML='\xA0';return el;};return CustomControlSpacer;}(Spacer);Component.registerComponent('CustomControlSpacer',CustomControlSpacer);var ControlBar=function(_Component){inherits(ControlBar,_Component);function ControlBar(){classCallCheck(this,ControlBar);return possibleConstructorReturn(this,_Component.apply(this,arguments));}
ControlBar.prototype.createEl=function createEl(){return _Component.prototype.createEl.call(this,'div',{className:'vjs-control-bar',dir:'ltr'});};return ControlBar;}(Component);ControlBar.prototype.options_={children:['playToggle','volumePanel','currentTimeDisplay','timeDivider','durationDisplay','progressControl','liveDisplay','remainingTimeDisplay','customControlSpacer','playbackRateMenuButton','chaptersButton','descriptionsButton','subsCapsButton','audioTrackButton','fullscreenToggle']};Component.registerComponent('ControlBar',ControlBar);var ErrorDisplay=function(_ModalDialog){inherits(ErrorDisplay,_ModalDialog);function ErrorDisplay(player,options){classCallCheck(this,ErrorDisplay);var _this=possibleConstructorReturn(this,_ModalDialog.call(this,player,options));_this.on(player,'error',_this.open);return _this;}
ErrorDisplay.prototype.buildCSSClass=function buildCSSClass(){return'vjs-error-display '+_ModalDialog.prototype.buildCSSClass.call(this);};ErrorDisplay.prototype.content=function content(){var error=this.player().error();return error?this.localize(error.message):'';};return ErrorDisplay;}(ModalDialog);ErrorDisplay.prototype.options_=mergeOptions(ModalDialog.prototype.options_,{pauseOnOpen:false,fillAlways:true,temporary:false,uncloseable:true});Component.registerComponent('ErrorDisplay',ErrorDisplay);var LOCAL_STORAGE_KEY='vjs-text-track-settings';var COLOR_BLACK=['#000','Black'];var COLOR_BLUE=['#00F','Blue'];var COLOR_CYAN=['#0FF','Cyan'];var COLOR_GREEN=['#0F0','Green'];var COLOR_MAGENTA=['#F0F','Magenta'];var COLOR_RED=['#F00','Red'];var COLOR_WHITE=['#FFF','White'];var COLOR_YELLOW=['#FF0','Yellow'];var OPACITY_OPAQUE=['1','Opaque'];var OPACITY_SEMI=['0.5','Semi-Transparent'];var OPACITY_TRANS=['0','Transparent'];var selectConfigs={backgroundColor:{selector:'.vjs-bg-color > select',id:'captions-background-color-%s',label:'Color',options:[COLOR_BLACK,COLOR_WHITE,COLOR_RED,COLOR_GREEN,COLOR_BLUE,COLOR_YELLOW,COLOR_MAGENTA,COLOR_CYAN]},backgroundOpacity:{selector:'.vjs-bg-opacity > select',id:'captions-background-opacity-%s',label:'Transparency',options:[OPACITY_OPAQUE,OPACITY_SEMI,OPACITY_TRANS]},color:{selector:'.vjs-fg-color > select',id:'captions-foreground-color-%s',label:'Color',options:[COLOR_WHITE,COLOR_BLACK,COLOR_RED,COLOR_GREEN,COLOR_BLUE,COLOR_YELLOW,COLOR_MAGENTA,COLOR_CYAN]},edgeStyle:{selector:'.vjs-edge-style > select',id:'%s',label:'Text Edge Style',options:[['none','None'],['raised','Raised'],['depressed','Depressed'],['uniform','Uniform'],['dropshadow','Dropshadow']]},fontFamily:{selector:'.vjs-font-family > select',id:'captions-font-family-%s',label:'Font Family',options:[['proportionalSansSerif','Proportional Sans-Serif'],['monospaceSansSerif','Monospace Sans-Serif'],['proportionalSerif','Proportional Serif'],['monospaceSerif','Monospace Serif'],['casual','Casual'],['script','Script'],['small-caps','Small Caps']]},fontPercent:{selector:'.vjs-font-percent > select',id:'captions-font-size-%s',label:'Font Size',options:[['0.50','50%'],['0.75','75%'],['1.00','100%'],['1.25','125%'],['1.50','150%'],['1.75','175%'],['2.00','200%'],['3.00','300%'],['4.00','400%']],'default':2,parser:function parser(v){return v==='1.00'?null:Number(v);}},textOpacity:{selector:'.vjs-text-opacity > select',id:'captions-foreground-opacity-%s',label:'Transparency',options:[OPACITY_OPAQUE,OPACITY_SEMI]},windowColor:{selector:'.vjs-window-color > select',id:'captions-window-color-%s',label:'Color'},windowOpacity:{selector:'.vjs-window-opacity > select',id:'captions-window-opacity-%s',label:'Transparency',options:[OPACITY_TRANS,OPACITY_SEMI,OPACITY_OPAQUE]}};selectConfigs.windowColor.options=selectConfigs.backgroundColor.options;function parseOptionValue(value,parser){if(parser){value=parser(value);}
if(value&&value!=='none'){return value;}}
function getSelectedOptionValue(el,parser){var value=el.options[el.options.selectedIndex].value;return parseOptionValue(value,parser);}
function setSelectedOption(el,value,parser){if(!value){return;}
for(var i=0;i<el.options.length;i++){if(parseOptionValue(el.options[i].value,parser)===value){el.selectedIndex=i;break;}}}
var TextTrackSettings=function(_ModalDialog){inherits(TextTrackSettings,_ModalDialog);function TextTrackSettings(player,options){classCallCheck(this,TextTrackSettings);options.temporary=false;var _this=possibleConstructorReturn(this,_ModalDialog.call(this,player,options));_this.updateDisplay=bind(_this,_this.updateDisplay);_this.fill();_this.hasBeenOpened_=_this.hasBeenFilled_=true;_this.endDialog=createEl('p',{className:'vjs-control-text',textContent:_this.localize('End of dialog window.')});_this.el().appendChild(_this.endDialog);_this.setDefaults();if(options.persistTextTrackSettings===undefined){_this.options_.persistTextTrackSettings=_this.options_.playerOptions.persistTextTrackSettings;}
_this.on(_this.$('.vjs-done-button'),'click',function(){_this.saveSettings();_this.close();});_this.on(_this.$('.vjs-default-button'),'click',function(){_this.setDefaults();_this.updateDisplay();});each(selectConfigs,function(config){_this.on(_this.$(config.selector),'change',_this.updateDisplay);});if(_this.options_.persistTextTrackSettings){_this.restoreSettings();}
return _this;}
TextTrackSettings.prototype.dispose=function dispose(){this.endDialog=null;_ModalDialog.prototype.dispose.call(this);};TextTrackSettings.prototype.createElSelect_=function createElSelect_(key){var _this2=this;var legendId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var type=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'label';var config=selectConfigs[key];var id=config.id.replace('%s',this.id_);var selectLabelledbyIds=[legendId,id].join(' ').trim();return['<'+type+' id="'+id+'" class="'+(type==='label'?'vjs-label':'')+'">',this.localize(config.label),'</'+type+'>','<select aria-labelledby="'+selectLabelledbyIds+'">'].concat(config.options.map(function(o){var optionId=id+'-'+o[1].replace(/\W+/g,'');return['<option id="'+optionId+'" value="'+o[0]+'" ','aria-labelledby="'+selectLabelledbyIds+' '+optionId+'">',_this2.localize(o[1]),'</option>'].join('');})).concat('</select>').join('');};TextTrackSettings.prototype.createElFgColor_=function createElFgColor_(){var legendId='captions-text-legend-'+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+legendId+'">',this.localize('Text'),'</legend>',this.createElSelect_('color',legendId),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_('textOpacity',legendId),'</span>','</fieldset>'].join('');};TextTrackSettings.prototype.createElBgColor_=function createElBgColor_(){var legendId='captions-background-'+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+legendId+'">',this.localize('Background'),'</legend>',this.createElSelect_('backgroundColor',legendId),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_('backgroundOpacity',legendId),'</span>','</fieldset>'].join('');};TextTrackSettings.prototype.createElWinColor_=function createElWinColor_(){var legendId='captions-window-'+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+legendId+'">',this.localize('Window'),'</legend>',this.createElSelect_('windowColor',legendId),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_('windowOpacity',legendId),'</span>','</fieldset>'].join('');};TextTrackSettings.prototype.createElColors_=function createElColors_(){return createEl('div',{className:'vjs-track-settings-colors',innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join('')});};TextTrackSettings.prototype.createElFont_=function createElFont_(){return createEl('div',{className:'vjs-track-settings-font',innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_('fontPercent','','legend'),'</fieldset>','<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_('edgeStyle','','legend'),'</fieldset>','<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_('fontFamily','','legend'),'</fieldset>'].join('')});};TextTrackSettings.prototype.createElControls_=function createElControls_(){var defaultsDescription=this.localize('restore all settings to the default values');return createEl('div',{className:'vjs-track-settings-controls',innerHTML:['<button type="button" class="vjs-default-button" title="'+defaultsDescription+'">',this.localize('Reset'),'<span class="vjs-control-text"> '+defaultsDescription+'</span>','</button>','<button type="button" class="vjs-done-button">'+this.localize('Done')+'</button>'].join('')});};TextTrackSettings.prototype.content=function content(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()];};TextTrackSettings.prototype.label=function label(){return this.localize('Caption Settings Dialog');};TextTrackSettings.prototype.description=function description(){return this.localize('Beginning of dialog window. Escape will cancel and close the window.');};TextTrackSettings.prototype.buildCSSClass=function buildCSSClass(){return _ModalDialog.prototype.buildCSSClass.call(this)+' vjs-text-track-settings';};TextTrackSettings.prototype.getValues=function getValues(){var _this3=this;return reduce(selectConfigs,function(accum,config,key){var value=getSelectedOptionValue(_this3.$(config.selector),config.parser);if(value!==undefined){accum[key]=value;}
return accum;},{});};TextTrackSettings.prototype.setValues=function setValues(values){var _this4=this;each(selectConfigs,function(config,key){setSelectedOption(_this4.$(config.selector),values[key],config.parser);});};TextTrackSettings.prototype.setDefaults=function setDefaults(){var _this5=this;each(selectConfigs,function(config){var index=config.hasOwnProperty('default')?config['default']:0;_this5.$(config.selector).selectedIndex=index;});};TextTrackSettings.prototype.restoreSettings=function restoreSettings(){var values=void 0;try{values=JSON.parse(window_1.localStorage.getItem(LOCAL_STORAGE_KEY));}catch(err){log.warn(err);}
if(values){this.setValues(values);}};TextTrackSettings.prototype.saveSettings=function saveSettings(){if(!this.options_.persistTextTrackSettings){return;}
var values=this.getValues();try{if(Object.keys(values).length){window_1.localStorage.setItem(LOCAL_STORAGE_KEY,JSON.stringify(values));}else{window_1.localStorage.removeItem(LOCAL_STORAGE_KEY);}}catch(err){log.warn(err);}};TextTrackSettings.prototype.updateDisplay=function updateDisplay(){var ttDisplay=this.player_.getChild('textTrackDisplay');if(ttDisplay){ttDisplay.updateDisplay();}};TextTrackSettings.prototype.conditionalBlur_=function conditionalBlur_(){this.previouslyActiveEl_=null;this.off(document_1,'keydown',this.handleKeyDown);var cb=this.player_.controlBar;var subsCapsBtn=cb&&cb.subsCapsButton;var ccBtn=cb&&cb.captionsButton;if(subsCapsBtn){subsCapsBtn.focus();}else if(ccBtn){ccBtn.focus();}};return TextTrackSettings;}(ModalDialog);Component.registerComponent('TextTrackSettings',TextTrackSettings);var ResizeManager=function(_Component){inherits(ResizeManager,_Component);function ResizeManager(player,options){classCallCheck(this,ResizeManager);var RESIZE_OBSERVER_AVAILABLE=options.ResizeObserver||window_1.ResizeObserver;if(options.ResizeObserver===null){RESIZE_OBSERVER_AVAILABLE=false;}
var options_=mergeOptions({createEl:!RESIZE_OBSERVER_AVAILABLE},options);var _this=possibleConstructorReturn(this,_Component.call(this,player,options_));_this.ResizeObserver=options.ResizeObserver||window_1.ResizeObserver;_this.loadListener_=null;_this.resizeObserver_=null;_this.debouncedHandler_=debounce(function(){_this.resizeHandler();},100,false,_this);if(RESIZE_OBSERVER_AVAILABLE){_this.resizeObserver_=new _this.ResizeObserver(_this.debouncedHandler_);_this.resizeObserver_.observe(player.el());}else{_this.loadListener_=function(){if(!_this.el_||!_this.el_.contentWindow){return;}
on(_this.el_.contentWindow,'resize',_this.debouncedHandler_);};_this.one('load',_this.loadListener_);}
return _this;}
ResizeManager.prototype.createEl=function createEl(){return _Component.prototype.createEl.call(this,'iframe',{className:'vjs-resize-manager'});};ResizeManager.prototype.resizeHandler=function resizeHandler(){if(!this.player_||!this.player_.trigger){return;}
this.player_.trigger('playerresize');};ResizeManager.prototype.dispose=function dispose(){if(this.debouncedHandler_){this.debouncedHandler_.cancel();}
if(this.resizeObserver_){if(this.player_.el()){this.resizeObserver_.unobserve(this.player_.el());}
this.resizeObserver_.disconnect();}
if(this.el_&&this.el_.contentWindow){off(this.el_.contentWindow,'resize',this.debouncedHandler_);}
if(this.loadListener_){this.off('load',this.loadListener_);}
this.ResizeObserver=null;this.resizeObserver=null;this.debouncedHandler_=null;this.loadListener_=null;};return ResizeManager;}(Component);Component.registerComponent('ResizeManager',ResizeManager);var sourcesetLoad=function sourcesetLoad(tech){var el=tech.el();if(el.hasAttribute('src')){tech.triggerSourceset(el.src);return true;}
var sources=tech.$$('source');var srcUrls=[];var src='';if(!sources.length){return false;}
for(var i=0;i<sources.length;i++){var url=sources[i].src;if(url&&srcUrls.indexOf(url)===-1){srcUrls.push(url);}}
if(!srcUrls.length){return false;}
if(srcUrls.length===1){src=srcUrls[0];}
tech.triggerSourceset(src);return true;};var innerHTMLDescriptorPolyfill={};if(!IS_IE8){innerHTMLDescriptorPolyfill=Object.defineProperty({},'innerHTML',{get:function get(){return this.cloneNode(true).innerHTML;},set:function set(v){var dummy=document_1.createElement(this.nodeName.toLowerCase());dummy.innerHTML=v;var docFrag=document_1.createDocumentFragment();while(dummy.childNodes.length){docFrag.appendChild(dummy.childNodes[0]);}
this.innerText='';window_1.Element.prototype.appendChild.call(this,docFrag);return this.innerHTML;}});}
var getDescriptor=function getDescriptor(priority,prop){var descriptor={};for(var i=0;i<priority.length;i++){descriptor=Object.getOwnPropertyDescriptor(priority[i],prop);if(descriptor&&descriptor.set&&descriptor.get){break;}}
descriptor.enumerable=true;descriptor.configurable=true;return descriptor;};var getInnerHTMLDescriptor=function getInnerHTMLDescriptor(tech){return getDescriptor([tech.el(),window_1.HTMLMediaElement.prototype,window_1.Element.prototype,innerHTMLDescriptorPolyfill],'innerHTML');};var firstSourceWatch=function firstSourceWatch(tech){var el=tech.el();if(el.resetSourceWatch_){return;}
var old={};var innerDescriptor=getInnerHTMLDescriptor(tech);var appendWrapper=function appendWrapper(appendFn){return function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}
var retval=appendFn.apply(el,args);sourcesetLoad(tech);return retval;};};['append','appendChild','insertAdjacentHTML'].forEach(function(k){if(!el[k]){return;}
old[k]=el[k];el[k]=appendWrapper(old[k]);});Object.defineProperty(el,'innerHTML',mergeOptions(innerDescriptor,{set:appendWrapper(innerDescriptor.set)}));el.resetSourceWatch_=function(){el.resetSourceWatch_=null;Object.keys(old).forEach(function(k){el[k]=old[k];});Object.defineProperty(el,'innerHTML',innerDescriptor);};tech.one('sourceset',el.resetSourceWatch_);};var srcDescriptorPolyfill={};if(!IS_IE8){srcDescriptorPolyfill=Object.defineProperty({},'src',{get:function get(){if(this.hasAttribute('src')){return getAbsoluteURL(window_1.Element.prototype.getAttribute.call(this,'src'));}
return'';},set:function set(v){window_1.Element.prototype.setAttribute.call(this,'src',v);return v;}});}
var getSrcDescriptor=function getSrcDescriptor(tech){return getDescriptor([tech.el(),window_1.HTMLMediaElement.prototype,srcDescriptorPolyfill],'src');};var setupSourceset=function setupSourceset(tech){if(!tech.featuresSourceset){return;}
var el=tech.el();if(el.resetSourceset_){return;}
var srcDescriptor=getSrcDescriptor(tech);var oldSetAttribute=el.setAttribute;var oldLoad=el.load;Object.defineProperty(el,'src',mergeOptions(srcDescriptor,{set:function set(v){var retval=srcDescriptor.set.call(el,v);tech.triggerSourceset(el.src);return retval;}}));el.setAttribute=function(n,v){var retval=oldSetAttribute.call(el,n,v);if(/src/i.test(n)){tech.triggerSourceset(el.src);}
return retval;};el.load=function(){var retval=oldLoad.call(el);if(!sourcesetLoad(tech)){tech.triggerSourceset('');firstSourceWatch(tech);}
return retval;};if(el.currentSrc){tech.triggerSourceset(el.currentSrc);}else if(!sourcesetLoad(tech)){firstSourceWatch(tech);}
el.resetSourceset_=function(){el.resetSourceset_=null;el.load=oldLoad;el.setAttribute=oldSetAttribute;Object.defineProperty(el,'src',srcDescriptor);if(el.resetSourceWatch_){el.resetSourceWatch_();}};};var _templateObject$2=taggedTemplateLiteralLoose(['Text Tracks are being loaded from another origin but the crossorigin attribute isn\'t used.\n            This may prevent text tracks from loading.'],['Text Tracks are being loaded from another origin but the crossorigin attribute isn\'t used.\n            This may prevent text tracks from loading.']);var Html5=function(_Tech){inherits(Html5,_Tech);function Html5(options,ready){classCallCheck(this,Html5);var _this=possibleConstructorReturn(this,_Tech.call(this,options,ready));var source=options.source;var crossoriginTracks=false;if(source&&(_this.el_.currentSrc!==source.src||options.tag&&options.tag.initNetworkState_===3)){_this.setSource(source);}else{_this.handleLateInit_(_this.el_);}
if(options.enableSourceset){_this.setupSourcesetHandling_();}
if(_this.el_.hasChildNodes()){var nodes=_this.el_.childNodes;var nodesLength=nodes.length;var removeNodes=[];while(nodesLength--){var node=nodes[nodesLength];var nodeName=node.nodeName.toLowerCase();if(nodeName==='track'){if(!_this.featuresNativeTextTracks){removeNodes.push(node);}else{_this.remoteTextTrackEls().addTrackElement_(node);_this.remoteTextTracks().addTrack(node.track);_this.textTracks().addTrack(node.track);if(!crossoriginTracks&&!_this.el_.hasAttribute('crossorigin')&&isCrossOrigin(node.src)){crossoriginTracks=true;}}}}
for(var i=0;i<removeNodes.length;i++){_this.el_.removeChild(removeNodes[i]);}}
_this.proxyNativeTracks_();if(_this.featuresNativeTextTracks&&crossoriginTracks){log.warn(tsml(_templateObject$2));}
_this.restoreMetadataTracksInIOSNativePlayer_();if((TOUCH_ENABLED||IS_IPHONE||IS_NATIVE_ANDROID)&&options.nativeControlsForTouch===true){_this.setControls(true);}
_this.proxyWebkitFullscreen_();_this.triggerReady();return _this;}
Html5.prototype.dispose=function dispose(){if(this.el_&&this.el_.resetSourceset_){this.el_.resetSourceset_();}
Html5.disposeMediaElement(this.el_);this.options_=null;_Tech.prototype.dispose.call(this);};Html5.prototype.setupSourcesetHandling_=function setupSourcesetHandling_(){setupSourceset(this);};Html5.prototype.restoreMetadataTracksInIOSNativePlayer_=function restoreMetadataTracksInIOSNativePlayer_(){var textTracks=this.textTracks();var metadataTracksPreFullscreenState=void 0;var takeMetadataTrackSnapshot=function takeMetadataTrackSnapshot(){metadataTracksPreFullscreenState=[];for(var i=0;i<textTracks.length;i++){var track=textTracks[i];if(track.kind==='metadata'){metadataTracksPreFullscreenState.push({track:track,storedMode:track.mode});}}};takeMetadataTrackSnapshot();textTracks.addEventListener('change',takeMetadataTrackSnapshot);this.on('dispose',function(){return textTracks.removeEventListener('change',takeMetadataTrackSnapshot);});var restoreTrackMode=function restoreTrackMode(){for(var i=0;i<metadataTracksPreFullscreenState.length;i++){var storedTrack=metadataTracksPreFullscreenState[i];if(storedTrack.track.mode==='disabled'&&storedTrack.track.mode!==storedTrack.storedMode){storedTrack.track.mode=storedTrack.storedMode;}}
textTracks.removeEventListener('change',restoreTrackMode);};this.on('webkitbeginfullscreen',function(){textTracks.removeEventListener('change',takeMetadataTrackSnapshot);textTracks.removeEventListener('change',restoreTrackMode);textTracks.addEventListener('change',restoreTrackMode);});this.on('webkitendfullscreen',function(){textTracks.removeEventListener('change',takeMetadataTrackSnapshot);textTracks.addEventListener('change',takeMetadataTrackSnapshot);textTracks.removeEventListener('change',restoreTrackMode);});};Html5.prototype.proxyNativeTracks_=function proxyNativeTracks_(){var _this2=this;NORMAL.names.forEach(function(name){var props=NORMAL[name];var elTracks=_this2.el()[props.getterName];var techTracks=_this2[props.getterName]();if(!_this2['featuresNative'+props.capitalName+'Tracks']||!elTracks||!elTracks.addEventListener){return;}
var listeners={change:function change(e){techTracks.trigger({type:'change',target:techTracks,currentTarget:techTracks,srcElement:techTracks});},addtrack:function addtrack(e){techTracks.addTrack(e.track);},removetrack:function removetrack(e){techTracks.removeTrack(e.track);}};var removeOldTracks=function removeOldTracks(){var removeTracks=[];for(var i=0;i<techTracks.length;i++){var found=false;for(var j=0;j<elTracks.length;j++){if(elTracks[j]===techTracks[i]){found=true;break;}}
if(!found){removeTracks.push(techTracks[i]);}}
while(removeTracks.length){techTracks.removeTrack(removeTracks.shift());}};Object.keys(listeners).forEach(function(eventName){var listener=listeners[eventName];elTracks.addEventListener(eventName,listener);_this2.on('dispose',function(e){return elTracks.removeEventListener(eventName,listener);});});_this2.on('loadstart',removeOldTracks);_this2.on('dispose',function(e){return _this2.off('loadstart',removeOldTracks);});});};Html5.prototype.createEl=function createEl$$1(){var el=this.options_.tag;if(!el||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(el){var clone=el.cloneNode(true);if(el.parentNode){el.parentNode.insertBefore(clone,el);}
Html5.disposeMediaElement(el);el=clone;}else{el=document_1.createElement('video');var tagAttributes=this.options_.tag&&getAttributes(this.options_.tag);var attributes=mergeOptions({},tagAttributes);if(!TOUCH_ENABLED||this.options_.nativeControlsForTouch!==true){delete attributes.controls;}
setAttributes(el,assign(attributes,{id:this.options_.techId,'class':'vjs-tech'}));}
el.playerId=this.options_.playerId;}
if(typeof this.options_.preload!=='undefined'){setAttribute(el,'preload',this.options_.preload);}
var settingsAttrs=['loop','muted','playsinline','autoplay'];for(var i=0;i<settingsAttrs.length;i++){var attr=settingsAttrs[i];var value=this.options_[attr];if(typeof value!=='undefined'){if(value){setAttribute(el,attr,attr);}else{removeAttribute(el,attr);}
el[attr]=value;}}
return el;};Html5.prototype.handleLateInit_=function handleLateInit_(el){if(el.networkState===0||el.networkState===3){return;}
if(el.readyState===0){var loadstartFired=false;var setLoadstartFired=function setLoadstartFired(){loadstartFired=true;};this.on('loadstart',setLoadstartFired);var triggerLoadstart=function triggerLoadstart(){if(!loadstartFired){this.trigger('loadstart');}};this.on('loadedmetadata',triggerLoadstart);this.ready(function(){this.off('loadstart',setLoadstartFired);this.off('loadedmetadata',triggerLoadstart);if(!loadstartFired){this.trigger('loadstart');}});return;}
var eventsToTrigger=['loadstart'];eventsToTrigger.push('loadedmetadata');if(el.readyState>=2){eventsToTrigger.push('loadeddata');}
if(el.readyState>=3){eventsToTrigger.push('canplay');}
if(el.readyState>=4){eventsToTrigger.push('canplaythrough');}
this.ready(function(){eventsToTrigger.forEach(function(type){this.trigger(type);},this);});};Html5.prototype.setCurrentTime=function setCurrentTime(seconds){try{this.el_.currentTime=seconds;}catch(e){log(e,'Video is not ready. (Video.js)');}};Html5.prototype.duration=function duration(){var _this3=this;if(this.el_.duration===Infinity&&IS_ANDROID&&IS_CHROME&&this.el_.currentTime===0){var checkProgress=function checkProgress(){if(_this3.el_.currentTime>0){if(_this3.el_.duration===Infinity){_this3.trigger('durationchange');}
_this3.off('timeupdate',checkProgress);}};this.on('timeupdate',checkProgress);return NaN;}
return this.el_.duration||NaN;};Html5.prototype.width=function width(){return this.el_.offsetWidth;};Html5.prototype.height=function height(){return this.el_.offsetHeight;};Html5.prototype.proxyWebkitFullscreen_=function proxyWebkitFullscreen_(){var _this4=this;if(!('webkitDisplayingFullscreen'in this.el_)){return;}
var endFn=function endFn(){this.trigger('fullscreenchange',{isFullscreen:false});};var beginFn=function beginFn(){if('webkitPresentationMode'in this.el_&&this.el_.webkitPresentationMode!=='picture-in-picture'){this.one('webkitendfullscreen',endFn);this.trigger('fullscreenchange',{isFullscreen:true});}};this.on('webkitbeginfullscreen',beginFn);this.on('dispose',function(){_this4.off('webkitbeginfullscreen',beginFn);_this4.off('webkitendfullscreen',endFn);});};Html5.prototype.supportsFullScreen=function supportsFullScreen(){if(typeof this.el_.webkitEnterFullScreen==='function'){var userAgent=window_1.navigator&&window_1.navigator.userAgent||'';if(/Android/.test(userAgent)||!/Chrome|Mac OS X 10.5/.test(userAgent)){return true;}}
return false;};Html5.prototype.enterFullScreen=function enterFullScreen(){var video=this.el_;if(video.paused&&video.networkState<=video.HAVE_METADATA){this.el_.play();this.setTimeout(function(){video.pause();video.webkitEnterFullScreen();},0);}else{video.webkitEnterFullScreen();}};Html5.prototype.exitFullScreen=function exitFullScreen(){this.el_.webkitExitFullScreen();};Html5.prototype.src=function src(_src){if(_src===undefined){return this.el_.src;}
this.setSrc(_src);};Html5.prototype.reset=function reset(){Html5.resetMediaElement(this.el_);};Html5.prototype.currentSrc=function currentSrc(){if(this.currentSource_){return this.currentSource_.src;}
return this.el_.currentSrc;};Html5.prototype.setControls=function setControls(val){this.el_.controls=!!val;};Html5.prototype.addTextTrack=function addTextTrack(kind,label,language){if(!this.featuresNativeTextTracks){return _Tech.prototype.addTextTrack.call(this,kind,label,language);}
return this.el_.addTextTrack(kind,label,language);};Html5.prototype.createRemoteTextTrack=function createRemoteTextTrack(options){if(!this.featuresNativeTextTracks){return _Tech.prototype.createRemoteTextTrack.call(this,options);}
var htmlTrackElement=document_1.createElement('track');if(options.kind){htmlTrackElement.kind=options.kind;}
if(options.label){htmlTrackElement.label=options.label;}
if(options.language||options.srclang){htmlTrackElement.srclang=options.language||options.srclang;}
if(options['default']){htmlTrackElement['default']=options['default'];}
if(options.id){htmlTrackElement.id=options.id;}
if(options.src){htmlTrackElement.src=options.src;}
return htmlTrackElement;};Html5.prototype.addRemoteTextTrack=function addRemoteTextTrack(options,manualCleanup){var htmlTrackElement=_Tech.prototype.addRemoteTextTrack.call(this,options,manualCleanup);if(this.featuresNativeTextTracks){this.el().appendChild(htmlTrackElement);}
return htmlTrackElement;};Html5.prototype.removeRemoteTextTrack=function removeRemoteTextTrack(track){_Tech.prototype.removeRemoteTextTrack.call(this,track);if(this.featuresNativeTextTracks){var tracks=this.$$('track');var i=tracks.length;while(i--){if(track===tracks[i]||track===tracks[i].track){this.el().removeChild(tracks[i]);}}}};Html5.prototype.getVideoPlaybackQuality=function getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality==='function'){return this.el().getVideoPlaybackQuality();}
var videoPlaybackQuality={};if(typeof this.el().webkitDroppedFrameCount!=='undefined'&&typeof this.el().webkitDecodedFrameCount!=='undefined'){videoPlaybackQuality.droppedVideoFrames=this.el().webkitDroppedFrameCount;videoPlaybackQuality.totalVideoFrames=this.el().webkitDecodedFrameCount;}
if(window_1.performance&&typeof window_1.performance.now==='function'){videoPlaybackQuality.creationTime=window_1.performance.now();}else if(window_1.performance&&window_1.performance.timing&&typeof window_1.performance.timing.navigationStart==='number'){videoPlaybackQuality.creationTime=window_1.Date.now()-window_1.performance.timing.navigationStart;}
return videoPlaybackQuality;};return Html5;}(Tech);if(isReal()){Html5.TEST_VID=document_1.createElement('video');var track=document_1.createElement('track');track.kind='captions';track.srclang='en';track.label='English';Html5.TEST_VID.appendChild(track);}
Html5.isSupported=function(){try{Html5.TEST_VID.volume=0.5;}catch(e){return false;}
return!!(Html5.TEST_VID&&Html5.TEST_VID.canPlayType);};Html5.canPlayType=function(type){return Html5.TEST_VID.canPlayType(type);};Html5.canPlaySource=function(srcObj,options){return Html5.canPlayType(srcObj.type);};Html5.canControlVolume=function(){try{var volume=Html5.TEST_VID.volume;Html5.TEST_VID.volume=volume/2+0.1;return volume!==Html5.TEST_VID.volume;}catch(e){return false;}};Html5.canMuteVolume=function(){try{var muted=Html5.TEST_VID.muted;Html5.TEST_VID.muted=!muted;if(Html5.TEST_VID.muted){setAttribute(Html5.TEST_VID,'muted','muted');}else{removeAttribute(Html5.TEST_VID,'muted','muted');}
return muted!==Html5.TEST_VID.muted;}catch(e){return false;}};Html5.canControlPlaybackRate=function(){if(IS_ANDROID&&IS_CHROME&&CHROME_VERSION<58){return false;}
try{var playbackRate=Html5.TEST_VID.playbackRate;Html5.TEST_VID.playbackRate=playbackRate/2+0.1;return playbackRate!==Html5.TEST_VID.playbackRate;}catch(e){return false;}};Html5.canOverrideAttributes=function(){if(IS_IE8){return false;}
try{var noop=function noop(){};Object.defineProperty(document_1.createElement('video'),'src',{get:noop,set:noop});Object.defineProperty(document_1.createElement('audio'),'src',{get:noop,set:noop});Object.defineProperty(document_1.createElement('video'),'innerHTML',{get:noop,set:noop});Object.defineProperty(document_1.createElement('audio'),'innerHTML',{get:noop,set:noop});}catch(e){return false;}
return true;};Html5.supportsNativeTextTracks=function(){return IS_ANY_SAFARI||IS_IOS&&IS_CHROME;};Html5.supportsNativeVideoTracks=function(){return!!(Html5.TEST_VID&&Html5.TEST_VID.videoTracks);};Html5.supportsNativeAudioTracks=function(){return!!(Html5.TEST_VID&&Html5.TEST_VID.audioTracks);};Html5.Events=['loadstart','suspend','abort','error','emptied','stalled','loadedmetadata','loadeddata','canplay','canplaythrough','playing','waiting','seeking','seeked','ended','durationchange','timeupdate','progress','play','pause','ratechange','resize','volumechange'];Html5.prototype.featuresVolumeControl=Html5.canControlVolume();Html5.prototype.featuresMuteControl=Html5.canMuteVolume();Html5.prototype.featuresPlaybackRate=Html5.canControlPlaybackRate();Html5.prototype.featuresSourceset=Html5.canOverrideAttributes();Html5.prototype.movingMediaElementInDOM=!IS_IOS;Html5.prototype.featuresFullscreenResize=true;Html5.prototype.featuresProgressEvents=true;Html5.prototype.featuresTimeupdateEvents=true;Html5.prototype.featuresNativeTextTracks=Html5.supportsNativeTextTracks();Html5.prototype.featuresNativeVideoTracks=Html5.supportsNativeVideoTracks();Html5.prototype.featuresNativeAudioTracks=Html5.supportsNativeAudioTracks();var canPlayType=Html5.TEST_VID&&Html5.TEST_VID.constructor.prototype.canPlayType;var mpegurlRE=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;var mp4RE=/^video\/mp4/i;Html5.patchCanPlayType=function(){if(ANDROID_VERSION>=4.0&&!IS_FIREFOX&&!IS_CHROME){Html5.TEST_VID.constructor.prototype.canPlayType=function(type){if(type&&mpegurlRE.test(type)){return'maybe';}
return canPlayType.call(this,type);};}else if(IS_OLD_ANDROID){Html5.TEST_VID.constructor.prototype.canPlayType=function(type){if(type&&mp4RE.test(type)){return'maybe';}
return canPlayType.call(this,type);};}};Html5.unpatchCanPlayType=function(){var r=Html5.TEST_VID.constructor.prototype.canPlayType;Html5.TEST_VID.constructor.prototype.canPlayType=canPlayType;return r;};Html5.patchCanPlayType();Html5.disposeMediaElement=function(el){if(!el){return;}
if(el.parentNode){el.parentNode.removeChild(el);}
while(el.hasChildNodes()){el.removeChild(el.firstChild);}
el.removeAttribute('src');if(typeof el.load==='function'){(function(){try{el.load();}catch(e){}})();}};Html5.resetMediaElement=function(el){if(!el){return;}
var sources=el.querySelectorAll('source');var i=sources.length;while(i--){el.removeChild(sources[i]);}
el.removeAttribute('src');if(typeof el.load==='function'){(function(){try{el.load();}catch(e){}})();}};['muted','defaultMuted','autoplay','controls','loop','playsinline'].forEach(function(prop){Html5.prototype[prop]=function(){return this.el_[prop]||this.el_.hasAttribute(prop);};});['muted','defaultMuted','autoplay','loop','playsinline'].forEach(function(prop){Html5.prototype['set'+toTitleCase(prop)]=function(v){this.el_[prop]=v;if(v){this.el_.setAttribute(prop,prop);}else{this.el_.removeAttribute(prop);}};});['paused','currentTime','buffered','volume','poster','preload','error','seeking','seekable','ended','playbackRate','defaultPlaybackRate','played','networkState','readyState','videoWidth','videoHeight'].forEach(function(prop){Html5.prototype[prop]=function(){return this.el_[prop];};});['volume','src','poster','preload','playbackRate','defaultPlaybackRate'].forEach(function(prop){Html5.prototype['set'+toTitleCase(prop)]=function(v){this.el_[prop]=v;};});['pause','load','play'].forEach(function(prop){Html5.prototype[prop]=function(){return this.el_[prop]();};});Tech.withSourceHandlers(Html5);Html5.nativeSourceHandler={};Html5.nativeSourceHandler.canPlayType=function(type){try{return Html5.TEST_VID.canPlayType(type);}catch(e){return'';}};Html5.nativeSourceHandler.canHandleSource=function(source,options){if(source.type){return Html5.nativeSourceHandler.canPlayType(source.type);}else if(source.src){var ext=getFileExtension(source.src);return Html5.nativeSourceHandler.canPlayType('video/'+ext);}
return'';};Html5.nativeSourceHandler.handleSource=function(source,tech,options){tech.setSrc(source.src);};Html5.nativeSourceHandler.dispose=function(){};Html5.registerSourceHandler(Html5.nativeSourceHandler);Tech.registerTech('Html5',Html5);var _templateObject$1=taggedTemplateLiteralLoose(['\n        Using the tech directly can be dangerous. I hope you know what you\'re doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      '],['\n        Using the tech directly can be dangerous. I hope you know what you\'re doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      ']);var TECH_EVENTS_RETRIGGER=['progress','abort','suspend','emptied','stalled','loadedmetadata','loadeddata','timeupdate','resize','volumechange','texttrackchange'];var TECH_EVENTS_QUEUE={canplay:'CanPlay',canplaythrough:'CanPlayThrough',playing:'Playing',seeked:'Seeked'};var BREAKPOINT_ORDER=['tiny','xsmall','small','medium','large','xlarge','huge'];var BREAKPOINT_CLASSES={};BREAKPOINT_ORDER.forEach(function(k){var v=k.charAt(0)==='x'?'x-'+k.substring(1):k;BREAKPOINT_CLASSES[k]='vjs-layout-'+v;});var DEFAULT_BREAKPOINTS={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:Infinity};var Player=function(_Component){inherits(Player,_Component);function Player(tag,options,ready){classCallCheck(this,Player);tag.id=tag.id||options.id||'vjs_video_'+newGUID();options=assign(Player.getTagSettings(tag),options);options.initChildren=false;options.createEl=false;options.evented=false;options.reportTouchActivity=false;if(!options.language){if(typeof tag.closest==='function'){var closest=tag.closest('[lang]');if(closest&&closest.getAttribute){options.language=closest.getAttribute('lang');}}else{var element=tag;while(element&&element.nodeType===1){if(getAttributes(element).hasOwnProperty('lang')){options.language=element.getAttribute('lang');break;}
element=element.parentNode;}}}
var _this=possibleConstructorReturn(this,_Component.call(this,null,options,ready));_this.log=createLogger(_this.id_);_this.isPosterFromTech_=false;_this.queuedCallbacks_=[];_this.isReady_=false;_this.hasStarted_=false;_this.userActive_=false;if(!_this.options_||!_this.options_.techOrder||!_this.options_.techOrder.length){throw new Error('No techOrder specified. Did you overwrite '+'videojs.options instead of just changing the '+'properties you want to override?');}
_this.tag=tag;_this.tagAttributes=tag&&getAttributes(tag);_this.language(_this.options_.language);if(options.languages){var languagesToLower={};Object.getOwnPropertyNames(options.languages).forEach(function(name$$1){languagesToLower[name$$1.toLowerCase()]=options.languages[name$$1];});_this.languages_=languagesToLower;}else{_this.languages_=Player.prototype.options_.languages;}
_this.cache_={};_this.poster_=options.poster||'';_this.controls_=!!options.controls;_this.cache_.lastVolume=1;tag.controls=false;tag.removeAttribute('controls');if(tag.hasAttribute('autoplay')){_this.options_.autoplay=true;}else{_this.autoplay(_this.options_.autoplay);}
_this.scrubbing_=false;_this.el_=_this.createEl();_this.cache_.lastPlaybackRate=_this.defaultPlaybackRate();evented(_this,{eventBusKey:'el_'});var playerOptionsCopy=mergeOptions(_this.options_);if(options.plugins){var plugins=options.plugins;Object.keys(plugins).forEach(function(name$$1){if(typeof this[name$$1]==='function'){this[name$$1](plugins[name$$1]);}else{throw new Error('plugin "'+name$$1+'" does not exist');}},_this);}
_this.options_.playerOptions=playerOptionsCopy;_this.middleware_=[];_this.initChildren();_this.isAudio(tag.nodeName.toLowerCase()==='audio');if(_this.controls()){_this.addClass('vjs-controls-enabled');}else{_this.addClass('vjs-controls-disabled');}
_this.el_.setAttribute('role','region');if(_this.isAudio()){_this.el_.setAttribute('aria-label',_this.localize('Audio Player'));}else{_this.el_.setAttribute('aria-label',_this.localize('Video Player'));}
if(_this.isAudio()){_this.addClass('vjs-audio');}
if(_this.flexNotSupported_()){_this.addClass('vjs-no-flex');}
if(!IS_IOS){_this.addClass('vjs-workinghover');}
Player.players[_this.id_]=_this;var majorVersion=version.split('.')[0];_this.addClass('vjs-v'+majorVersion);_this.userActive(true);_this.reportUserActivity();_this.one('play',_this.listenForUserActivity_);_this.on('fullscreenchange',_this.handleFullscreenChange_);_this.on('stageclick',_this.handleStageClick_);_this.breakpoints(_this.options_.breakpoints);_this.responsive(_this.options_.responsive);_this.changingSrc_=false;_this.playWaitingForReady_=false;_this.playOnLoadstart_=null;return _this;}
Player.prototype.dispose=function dispose(){this.trigger('dispose');this.off('dispose');if(this.styleEl_&&this.styleEl_.parentNode){this.styleEl_.parentNode.removeChild(this.styleEl_);this.styleEl_=null;}
Player.players[this.id_]=null;if(this.tag&&this.tag.player){this.tag.player=null;}
if(this.el_&&this.el_.player){this.el_.player=null;}
if(this.tech_){this.tech_.dispose();this.isPosterFromTech_=false;this.poster_='';}
if(this.playerElIngest_){this.playerElIngest_=null;}
if(this.tag){this.tag=null;}
clearCacheForPlayer(this);_Component.prototype.dispose.call(this);};Player.prototype.createEl=function createEl$$1(){var tag=this.tag;var el=void 0;var playerElIngest=this.playerElIngest_=tag.parentNode&&tag.parentNode.hasAttribute&&tag.parentNode.hasAttribute('data-vjs-player');var divEmbed=this.tag.tagName.toLowerCase()==='video-js';if(playerElIngest){el=this.el_=tag.parentNode;}else if(!divEmbed){el=this.el_=_Component.prototype.createEl.call(this,'div');}
var attrs=getAttributes(tag);if(divEmbed){el=this.el_=tag;tag=this.tag=document_1.createElement('video');while(el.children.length){tag.appendChild(el.firstChild);}
if(!hasClass(el,'video-js')){addClass(el,'video-js');}
el.appendChild(tag);playerElIngest=this.playerElIngest_=el;['autoplay','controls','crossOrigin','defaultMuted','defaultPlaybackRate','loop','muted','playbackRate','src','volume'].forEach(function(prop){if(typeof el[prop]!=='undefined'){tag[prop]=el[prop];}});}
tag.setAttribute('tabindex','-1');attrs.tabindex='-1';if(IE_VERSION){tag.setAttribute('role','application');attrs.role='application';}
tag.removeAttribute('width');tag.removeAttribute('height');if('width'in attrs){delete attrs.width;}
if('height'in attrs){delete attrs.height;}
Object.getOwnPropertyNames(attrs).forEach(function(attr){if(attr==='class'){el.className+=' '+attrs[attr];if(divEmbed){tag.className+=' '+attrs[attr];}}else{el.setAttribute(attr,attrs[attr]);if(divEmbed){tag.setAttribute(attr,attrs[attr]);}}});tag.playerId=tag.id;tag.id+='_html5_api';tag.className='vjs-tech';tag.player=el.player=this;this.addClass('vjs-paused');if(window_1.VIDEOJS_NO_DYNAMIC_STYLE!==true){this.styleEl_=createStyleElement('vjs-styles-dimensions');var defaultsStyleEl=$('.vjs-styles-defaults');var head=$('head');head.insertBefore(this.styleEl_,defaultsStyleEl?defaultsStyleEl.nextSibling:head.firstChild);}
this.fill_=false;this.fluid_=false;this.width(this.options_.width);this.height(this.options_.height);this.fill(this.options_.fill);this.fluid(this.options_.fluid);this.aspectRatio(this.options_.aspectRatio);var links=tag.getElementsByTagName('a');for(var i=0;i<links.length;i++){var linkEl=links.item(i);addClass(linkEl,'vjs-hidden');linkEl.setAttribute('hidden','hidden');}
tag.initNetworkState_=tag.networkState;if(tag.parentNode&&!playerElIngest){tag.parentNode.insertBefore(el,tag);}
prependTo(tag,el);this.children_.unshift(tag);this.el_.setAttribute('lang',this.language_);this.el_=el;return el;};Player.prototype.width=function width(value){return this.dimension('width',value);};Player.prototype.height=function height(value){return this.dimension('height',value);};Player.prototype.dimension=function dimension(_dimension,value){var privDimension=_dimension+'_';if(value===undefined){return this[privDimension]||0;}
if(value===''){this[privDimension]=undefined;this.updateStyleEl_();return;}
var parsedVal=parseFloat(value);if(isNaN(parsedVal)){log.error('Improper value "'+value+'" supplied for for '+_dimension);return;}
this[privDimension]=parsedVal;this.updateStyleEl_();};Player.prototype.fluid=function fluid(bool){if(bool===undefined){return!!this.fluid_;}
this.fluid_=!!bool;if(bool){this.addClass('vjs-fluid');this.fill(false);}else{this.removeClass('vjs-fluid');}
this.updateStyleEl_();};Player.prototype.fill=function fill(bool){if(bool===undefined){return!!this.fill_;}
this.fill_=!!bool;if(bool){this.addClass('vjs-fill');this.fluid(false);}else{this.removeClass('vjs-fill');}};Player.prototype.aspectRatio=function aspectRatio(ratio){if(ratio===undefined){return this.aspectRatio_;}
if(!/^\d+\:\d+$/.test(ratio)){throw new Error('Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.');}
this.aspectRatio_=ratio;this.fluid(true);this.updateStyleEl_();};Player.prototype.updateStyleEl_=function updateStyleEl_(){if(window_1.VIDEOJS_NO_DYNAMIC_STYLE===true){var _width=typeof this.width_==='number'?this.width_:this.options_.width;var _height=typeof this.height_==='number'?this.height_:this.options_.height;var techEl=this.tech_&&this.tech_.el();if(techEl){if(_width>=0){techEl.width=_width;}
if(_height>=0){techEl.height=_height;}}
return;}
var width=void 0;var height=void 0;var aspectRatio=void 0;var idClass=void 0;if(this.aspectRatio_!==undefined&&this.aspectRatio_!=='auto'){aspectRatio=this.aspectRatio_;}else if(this.videoWidth()>0){aspectRatio=this.videoWidth()+':'+this.videoHeight();}else{aspectRatio='16:9';}
var ratioParts=aspectRatio.split(':');var ratioMultiplier=ratioParts[1]/ratioParts[0];if(this.width_!==undefined){width=this.width_;}else if(this.height_!==undefined){width=this.height_/ratioMultiplier;}else{width=this.videoWidth()||300;}
if(this.height_!==undefined){height=this.height_;}else{height=width*ratioMultiplier;}
if(/^[^a-zA-Z]/.test(this.id())){idClass='dimensions-'+this.id();}else{idClass=this.id()+'-dimensions';}
this.addClass(idClass);setTextContent(this.styleEl_,'\n      .'+idClass+' {\n        width: '+width+'px;\n        height: '+height+'px;\n      }\n\n      .'+idClass+'.vjs-fluid {\n        padding-top: '+ratioMultiplier*100+'%;\n      }\n    ');};Player.prototype.loadTech_=function loadTech_(techName,source){var _this2=this;if(this.tech_){this.unloadTech_();}
var titleTechName=toTitleCase(techName);var camelTechName=techName.charAt(0).toLowerCase()+techName.slice(1);if(titleTechName!=='Html5'&&this.tag){Tech.getTech('Html5').disposeMediaElement(this.tag);this.tag.player=null;this.tag=null;}
this.techName_=titleTechName;this.isReady_=false;var autoplay=typeof this.autoplay()==='string'?false:this.autoplay();var techOptions={source:source,autoplay:autoplay,'nativeControlsForTouch':this.options_.nativeControlsForTouch,'playerId':this.id(),'techId':this.id()+'_'+camelTechName+'_api','playsinline':this.options_.playsinline,'preload':this.options_.preload,'loop':this.options_.loop,'muted':this.options_.muted,'poster':this.poster(),'language':this.language(),'playerElIngest':this.playerElIngest_||false,'vtt.js':this.options_['vtt.js'],'canOverridePoster':!!this.options_.techCanOverridePoster,'enableSourceset':this.options_.enableSourceset};ALL.names.forEach(function(name$$1){var props=ALL[name$$1];techOptions[props.getterName]=_this2[props.privateName];});assign(techOptions,this.options_[titleTechName]);assign(techOptions,this.options_[camelTechName]);assign(techOptions,this.options_[techName.toLowerCase()]);if(this.tag){techOptions.tag=this.tag;}
if(source&&source.src===this.cache_.src&&this.cache_.currentTime>0){techOptions.startTime=this.cache_.currentTime;}
var TechClass=Tech.getTech(techName);if(!TechClass){throw new Error('No Tech named \''+titleTechName+'\' exists! \''+titleTechName+'\' should be registered using videojs.registerTech()\'');}
this.tech_=new TechClass(techOptions);this.tech_.ready(bind(this,this.handleTechReady_),true);textTrackConverter.jsonToTextTracks(this.textTracksJson_||[],this.tech_);TECH_EVENTS_RETRIGGER.forEach(function(event){_this2.on(_this2.tech_,event,_this2['handleTech'+toTitleCase(event)+'_']);});Object.keys(TECH_EVENTS_QUEUE).forEach(function(event){_this2.on(_this2.tech_,event,function(eventObj){if(_this2.tech_.playbackRate()===0&&_this2.tech_.seeking()){_this2.queuedCallbacks_.push({callback:_this2['handleTech'+TECH_EVENTS_QUEUE[event]+'_'].bind(_this2),event:eventObj});return;}
_this2['handleTech'+TECH_EVENTS_QUEUE[event]+'_'](eventObj);});});this.on(this.tech_,'loadstart',this.handleTechLoadStart_);this.on(this.tech_,'sourceset',this.handleTechSourceset_);this.on(this.tech_,'waiting',this.handleTechWaiting_);this.on(this.tech_,'ended',this.handleTechEnded_);this.on(this.tech_,'seeking',this.handleTechSeeking_);this.on(this.tech_,'play',this.handleTechPlay_);this.on(this.tech_,'firstplay',this.handleTechFirstPlay_);this.on(this.tech_,'pause',this.handleTechPause_);this.on(this.tech_,'durationchange',this.handleTechDurationChange_);this.on(this.tech_,'fullscreenchange',this.handleTechFullscreenChange_);this.on(this.tech_,'error',this.handleTechError_);this.on(this.tech_,'loadedmetadata',this.updateStyleEl_);this.on(this.tech_,'posterchange',this.handleTechPosterChange_);this.on(this.tech_,'textdata',this.handleTechTextData_);this.on(this.tech_,'ratechange',this.handleTechRateChange_);this.usingNativeControls(this.techGet_('controls'));if(this.controls()&&!this.usingNativeControls()){this.addTechControlsListeners_();}
if(this.tech_.el().parentNode!==this.el()&&(titleTechName!=='Html5'||!this.tag)){prependTo(this.tech_.el(),this.el());}
if(this.tag){this.tag.player=null;this.tag=null;}};Player.prototype.unloadTech_=function unloadTech_(){var _this3=this;ALL.names.forEach(function(name$$1){var props=ALL[name$$1];_this3[props.privateName]=_this3[props.getterName]();});this.textTracksJson_=textTrackConverter.textTracksToJson(this.tech_);this.isReady_=false;this.tech_.dispose();this.tech_=false;if(this.isPosterFromTech_){this.poster_='';this.trigger('posterchange');}
this.isPosterFromTech_=false;};Player.prototype.tech=function tech(safety){if(safety===undefined){log.warn(tsml(_templateObject$1));}
return this.tech_;};Player.prototype.addTechControlsListeners_=function addTechControlsListeners_(){this.removeTechControlsListeners_();this.on(this.tech_,'mousedown',this.handleTechClick_);this.on(this.tech_,'touchstart',this.handleTechTouchStart_);this.on(this.tech_,'touchmove',this.handleTechTouchMove_);this.on(this.tech_,'touchend',this.handleTechTouchEnd_);this.on(this.tech_,'tap',this.handleTechTap_);};Player.prototype.removeTechControlsListeners_=function removeTechControlsListeners_(){this.off(this.tech_,'tap',this.handleTechTap_);this.off(this.tech_,'touchstart',this.handleTechTouchStart_);this.off(this.tech_,'touchmove',this.handleTechTouchMove_);this.off(this.tech_,'touchend',this.handleTechTouchEnd_);this.off(this.tech_,'mousedown',this.handleTechClick_);};Player.prototype.handleTechReady_=function handleTechReady_(){this.triggerReady();if(this.cache_.volume){this.techCall_('setVolume',this.cache_.volume);}
this.handleTechPosterChange_();this.handleTechDurationChange_();if((this.src()||this.currentSrc())&&this.tag&&this.options_.autoplay&&this.paused()){try{delete this.tag.poster;}catch(e){log('deleting tag.poster throws in some browsers',e);}}};Player.prototype.handleTechLoadStart_=function handleTechLoadStart_(){this.removeClass('vjs-ended');this.removeClass('vjs-seeking');this.error(null);if(!this.paused()){this.trigger('loadstart');this.trigger('firstplay');}else{this.hasStarted(false);this.trigger('loadstart');}
this.manualAutoplay_(this.autoplay());};Player.prototype.manualAutoplay_=function manualAutoplay_(type){var _this4=this;if(!this.tech_||typeof type!=='string'){return;}
var muted=function muted(){var previouslyMuted=_this4.muted();_this4.muted(true);var playPromise=_this4.play();if(!playPromise||!playPromise.then||!playPromise['catch']){return;}
return playPromise['catch'](function(e){_this4.muted(previouslyMuted);});};var promise=void 0;if(type==='any'){promise=this.play();if(promise&&promise.then&&promise['catch']){promise['catch'](function(){return muted();});}}else if(type==='muted'){promise=muted();}else{promise=this.play();}
if(!promise||!promise.then||!promise['catch']){return;}
return promise.then(function(){_this4.trigger({type:'autoplay-success',autoplay:type});})['catch'](function(e){_this4.trigger({type:'autoplay-failure',autoplay:type});});};Player.prototype.updateSourceCaches_=function updateSourceCaches_(){var srcObj=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var src=srcObj;var type='';if(typeof src!=='string'){src=srcObj.src;type=srcObj.type;}
this.cache_.source=this.cache_.source||{};this.cache_.sources=this.cache_.sources||[];if(src&&!type){type=findMimetype(this,src);}
this.cache_.source=mergeOptions({},srcObj,{src:src,type:type});var matchingSources=this.cache_.sources.filter(function(s){return s.src&&s.src===src;});var sourceElSources=[];var sourceEls=this.$$('source');var matchingSourceEls=[];for(var i=0;i<sourceEls.length;i++){var sourceObj=getAttributes(sourceEls[i]);sourceElSources.push(sourceObj);if(sourceObj.src&&sourceObj.src===src){matchingSourceEls.push(sourceObj.src);}}
if(matchingSourceEls.length&&!matchingSources.length){this.cache_.sources=sourceElSources;}else if(!matchingSources.length){this.cache_.sources=[this.cache_.source];}
this.cache_.src=src;};Player.prototype.handleTechSourceset_=function handleTechSourceset_(event){var _this5=this;if(!this.changingSrc_){var updateSourceCaches=function updateSourceCaches(src){return _this5.updateSourceCaches_(src);};var playerSrc=this.currentSource().src;var eventSrc=event.src;if(playerSrc&&!/^blob:/.test(playerSrc)&&/^blob:/.test(eventSrc)){if(!this.lastSource_||this.lastSource_.tech!==eventSrc&&this.lastSource_.player!==playerSrc){updateSourceCaches=function updateSourceCaches(){};}}
updateSourceCaches(eventSrc);if(!event.src){var updateCache=function updateCache(e){if(e.type!=='sourceset'){var techSrc=_this5.techGet('currentSrc');_this5.lastSource_.tech=techSrc;_this5.updateSourceCaches_(techSrc);}
_this5.tech_.off(['sourceset','loadstart'],updateCache);};this.tech_.one(['sourceset','loadstart'],updateCache);}}
this.lastSource_={player:this.currentSource().src,tech:event.src};this.trigger({src:event.src,type:'sourceset'});};Player.prototype.hasStarted=function hasStarted(request){if(request===undefined){return this.hasStarted_;}
if(request===this.hasStarted_){return;}
this.hasStarted_=request;if(this.hasStarted_){this.addClass('vjs-has-started');this.trigger('firstplay');}else{this.removeClass('vjs-has-started');}};Player.prototype.handleTechPlay_=function handleTechPlay_(){this.removeClass('vjs-ended');this.removeClass('vjs-paused');this.addClass('vjs-playing');this.hasStarted(true);this.trigger('play');};Player.prototype.handleTechRateChange_=function handleTechRateChange_(){if(this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0){this.queuedCallbacks_.forEach(function(queued){return queued.callback(queued.event);});this.queuedCallbacks_=[];}
this.cache_.lastPlaybackRate=this.tech_.playbackRate();this.trigger('ratechange');};Player.prototype.handleTechWaiting_=function handleTechWaiting_(){var _this6=this;this.addClass('vjs-waiting');this.trigger('waiting');this.one('timeupdate',function(){return _this6.removeClass('vjs-waiting');});};Player.prototype.handleTechCanPlay_=function handleTechCanPlay_(){this.removeClass('vjs-waiting');this.trigger('canplay');};Player.prototype.handleTechCanPlayThrough_=function handleTechCanPlayThrough_(){this.removeClass('vjs-waiting');this.trigger('canplaythrough');};Player.prototype.handleTechPlaying_=function handleTechPlaying_(){this.removeClass('vjs-waiting');this.trigger('playing');};Player.prototype.handleTechSeeking_=function handleTechSeeking_(){this.addClass('vjs-seeking');this.trigger('seeking');};Player.prototype.handleTechSeeked_=function handleTechSeeked_(){this.removeClass('vjs-seeking');this.trigger('seeked');};Player.prototype.handleTechFirstPlay_=function handleTechFirstPlay_(){if(this.options_.starttime){log.warn('Passing the `starttime` option to the player will be deprecated in 6.0');this.currentTime(this.options_.starttime);}
this.addClass('vjs-has-started');this.trigger('firstplay');};Player.prototype.handleTechPause_=function handleTechPause_(){this.removeClass('vjs-playing');this.addClass('vjs-paused');this.trigger('pause');};Player.prototype.handleTechEnded_=function handleTechEnded_(){this.addClass('vjs-ended');if(this.options_.loop){this.currentTime(0);this.play();}else if(!this.paused()){this.pause();}
this.trigger('ended');};Player.prototype.handleTechDurationChange_=function handleTechDurationChange_(){this.duration(this.techGet_('duration'));};Player.prototype.handleTechClick_=function handleTechClick_(event){if(!isSingleLeftClick(event)){return;}
if(!this.controls_){return;}
if(this.paused()){silencePromise(this.play());}else{this.pause();}};Player.prototype.handleTechTap_=function handleTechTap_(){this.userActive(!this.userActive());};Player.prototype.handleTechTouchStart_=function handleTechTouchStart_(){this.userWasActive=this.userActive();};Player.prototype.handleTechTouchMove_=function handleTechTouchMove_(){if(this.userWasActive){this.reportUserActivity();}};Player.prototype.handleTechTouchEnd_=function handleTechTouchEnd_(event){event.preventDefault();};Player.prototype.handleFullscreenChange_=function handleFullscreenChange_(){if(this.isFullscreen()){this.addClass('vjs-fullscreen');}else{this.removeClass('vjs-fullscreen');}};Player.prototype.handleStageClick_=function handleStageClick_(){this.reportUserActivity();};Player.prototype.handleTechFullscreenChange_=function handleTechFullscreenChange_(event,data){if(data){this.isFullscreen(data.isFullscreen);}
this.trigger('fullscreenchange');};Player.prototype.handleTechError_=function handleTechError_(){var error=this.tech_.error();this.error(error);};Player.prototype.handleTechTextData_=function handleTechTextData_(){var data=null;if(arguments.length>1){data=arguments[1];}
this.trigger('textdata',data);};Player.prototype.getCache=function getCache(){return this.cache_;};Player.prototype.techCall_=function techCall_(method,arg){this.ready(function(){if(method in allowedSetters){return set$1(this.middleware_,this.tech_,method,arg);}else if(method in allowedMediators){return mediate(this.middleware_,this.tech_,method,arg);}
try{if(this.tech_){this.tech_[method](arg);}}catch(e){log(e);throw e;}},true);};Player.prototype.techGet_=function techGet_(method){if(!this.tech_||!this.tech_.isReady_){return;}
if(method in allowedGetters){return get$1(this.middleware_,this.tech_,method);}else if(method in allowedMediators){return mediate(this.middleware_,this.tech_,method);}
try{return this.tech_[method]();}catch(e){if(this.tech_[method]===undefined){log('Video.js: '+method+' method not defined for '+this.techName_+' playback technology.',e);throw e;}
if(e.name==='TypeError'){log('Video.js: '+method+' unavailable on '+this.techName_+' playback technology element.',e);this.tech_.isReady_=false;throw e;}
log(e);throw e;}};Player.prototype.play=function play(){var _this7=this;var PromiseClass=this.options_.Promise||window_1.Promise;if(PromiseClass){return new PromiseClass(function(resolve){_this7.play_(resolve);});}
return this.play_();};Player.prototype.play_=function play_(){var _this8=this;var callback=arguments.length>0&&arguments[0]!==undefined?arguments[0]:silencePromise;if(this.playOnLoadstart_){this.off('loadstart',this.playOnLoadstart_);}
if(!this.isReady_){if(this.playWaitingForReady_){return;}
this.playWaitingForReady_=true;this.ready(function(){_this8.playWaitingForReady_=false;callback(_this8.play());});}else if(!this.changingSrc_&&(this.src()||this.currentSrc())){callback(this.techGet_('play'));return;}else{this.playOnLoadstart_=function(){_this8.playOnLoadstart_=null;callback(_this8.play());};this.one('loadstart',this.playOnLoadstart_);}};Player.prototype.pause=function pause(){this.techCall_('pause');};Player.prototype.paused=function paused(){return this.techGet_('paused')===false?false:true;};Player.prototype.played=function played(){return this.techGet_('played')||createTimeRanges(0,0);};Player.prototype.scrubbing=function scrubbing(isScrubbing){if(typeof isScrubbing==='undefined'){return this.scrubbing_;}
this.scrubbing_=!!isScrubbing;if(isScrubbing){this.addClass('vjs-scrubbing');}else{this.removeClass('vjs-scrubbing');}};Player.prototype.currentTime=function currentTime(seconds){if(typeof seconds!=='undefined'){if(seconds<0){seconds=0;}
this.techCall_('setCurrentTime',seconds);return;}
this.cache_.currentTime=this.techGet_('currentTime')||0;return this.cache_.currentTime;};Player.prototype.duration=function duration(seconds){if(seconds===undefined){return this.cache_.duration!==undefined?this.cache_.duration:NaN;}
seconds=parseFloat(seconds);if(seconds<0){seconds=Infinity;}
if(seconds!==this.cache_.duration){this.cache_.duration=seconds;if(seconds===Infinity){this.addClass('vjs-live');}else{this.removeClass('vjs-live');}
this.trigger('durationchange');}};Player.prototype.remainingTime=function remainingTime(){return this.duration()-this.currentTime();};Player.prototype.remainingTimeDisplay=function remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime());};Player.prototype.buffered=function buffered(){var buffered=this.techGet_('buffered');if(!buffered||!buffered.length){buffered=createTimeRanges(0,0);}
return buffered;};Player.prototype.bufferedPercent=function bufferedPercent$$1(){return bufferedPercent(this.buffered(),this.duration());};Player.prototype.bufferedEnd=function bufferedEnd(){var buffered=this.buffered();var duration=this.duration();var end=buffered.end(buffered.length-1);if(end>duration){end=duration;}
return end;};Player.prototype.volume=function volume(percentAsDecimal){var vol=void 0;if(percentAsDecimal!==undefined){vol=Math.max(0,Math.min(1,parseFloat(percentAsDecimal)));this.cache_.volume=vol;this.techCall_('setVolume',vol);if(vol>0){this.lastVolume_(vol);}
return;}
vol=parseFloat(this.techGet_('volume'));return isNaN(vol)?1:vol;};Player.prototype.muted=function muted(_muted){if(_muted!==undefined){this.techCall_('setMuted',_muted);return;}
return this.techGet_('muted')||false;};Player.prototype.defaultMuted=function defaultMuted(_defaultMuted){if(_defaultMuted!==undefined){return this.techCall_('setDefaultMuted',_defaultMuted);}
return this.techGet_('defaultMuted')||false;};Player.prototype.lastVolume_=function lastVolume_(percentAsDecimal){if(percentAsDecimal!==undefined&&percentAsDecimal!==0){this.cache_.lastVolume=percentAsDecimal;return;}
return this.cache_.lastVolume;};Player.prototype.supportsFullScreen=function supportsFullScreen(){return this.techGet_('supportsFullScreen')||false;};Player.prototype.isFullscreen=function isFullscreen(isFS){if(isFS!==undefined){this.isFullscreen_=!!isFS;return;}
return!!this.isFullscreen_;};Player.prototype.requestFullscreen=function requestFullscreen(){var fsApi=FullscreenApi;this.isFullscreen(true);if(fsApi.requestFullscreen){on(document_1,fsApi.fullscreenchange,bind(this,function documentFullscreenChange(e){this.isFullscreen(document_1[fsApi.fullscreenElement]);if(this.isFullscreen()===false){off(document_1,fsApi.fullscreenchange,documentFullscreenChange);}
this.trigger('fullscreenchange');}));this.el_[fsApi.requestFullscreen]();}else if(this.tech_.supportsFullScreen()){this.techCall_('enterFullScreen');}else{this.enterFullWindow();this.trigger('fullscreenchange');}};Player.prototype.exitFullscreen=function exitFullscreen(){var fsApi=FullscreenApi;this.isFullscreen(false);if(fsApi.requestFullscreen){document_1[fsApi.exitFullscreen]();}else if(this.tech_.supportsFullScreen()){this.techCall_('exitFullScreen');}else{this.exitFullWindow();this.trigger('fullscreenchange');}};Player.prototype.enterFullWindow=function enterFullWindow(){this.isFullWindow=true;this.docOrigOverflow=document_1.documentElement.style.overflow;on(document_1,'keydown',bind(this,this.fullWindowOnEscKey));document_1.documentElement.style.overflow='hidden';addClass(document_1.body,'vjs-full-window');this.trigger('enterFullWindow');};Player.prototype.fullWindowOnEscKey=function fullWindowOnEscKey(event){if(event.keyCode===27){if(this.isFullscreen()===true){this.exitFullscreen();}else{this.exitFullWindow();}}};Player.prototype.exitFullWindow=function exitFullWindow(){this.isFullWindow=false;off(document_1,'keydown',this.fullWindowOnEscKey);document_1.documentElement.style.overflow=this.docOrigOverflow;removeClass(document_1.body,'vjs-full-window');this.trigger('exitFullWindow');};Player.prototype.canPlayType=function canPlayType(type){var can=void 0;for(var i=0,j=this.options_.techOrder;i<j.length;i++){var techName=j[i];var tech=Tech.getTech(techName);if(!tech){tech=Component.getComponent(techName);}
if(!tech){log.error('The "'+techName+'" tech is undefined. Skipped browser support check for that tech.');continue;}
if(tech.isSupported()){can=tech.canPlayType(type);if(can){return can;}}}
return'';};Player.prototype.selectSource=function selectSource(sources){var _this9=this;var techs=this.options_.techOrder.map(function(techName){return[techName,Tech.getTech(techName)];}).filter(function(_ref){var techName=_ref[0],tech=_ref[1];if(tech){return tech.isSupported();}
log.error('The "'+techName+'" tech is undefined. Skipped browser support check for that tech.');return false;});var findFirstPassingTechSourcePair=function findFirstPassingTechSourcePair(outerArray,innerArray,tester){var found=void 0;outerArray.some(function(outerChoice){return innerArray.some(function(innerChoice){found=tester(outerChoice,innerChoice);if(found){return true;}});});return found;};var foundSourceAndTech=void 0;var flip=function flip(fn){return function(a,b){return fn(b,a);};};var finder=function finder(_ref2,source){var techName=_ref2[0],tech=_ref2[1];if(tech.canPlaySource(source,_this9.options_[techName.toLowerCase()])){return{source:source,tech:techName};}};if(this.options_.sourceOrder){foundSourceAndTech=findFirstPassingTechSourcePair(sources,techs,flip(finder));}else{foundSourceAndTech=findFirstPassingTechSourcePair(techs,sources,finder);}
return foundSourceAndTech||false;};Player.prototype.src=function src(source){var _this10=this;if(typeof source==='undefined'){return this.cache_.src||'';}
var sources=filterSource(source);if(!sources.length){this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)});},0);return;}
this.changingSrc_=true;this.cache_.sources=sources;this.updateSourceCaches_(sources[0]);setSource(this,sources[0],function(middlewareSource,mws){_this10.middleware_=mws;_this10.cache_.sources=sources;_this10.updateSourceCaches_(middlewareSource);var err=_this10.src_(middlewareSource);if(err){if(sources.length>1){return _this10.src(sources.slice(1));}
_this10.changingSrc_=false;_this10.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)});},0);_this10.triggerReady();return;}
setTech(mws,_this10.tech_);});};Player.prototype.src_=function src_(source){var _this11=this;var sourceTech=this.selectSource([source]);if(!sourceTech){return true;}
if(!titleCaseEquals(sourceTech.tech,this.techName_)){this.changingSrc_=true;this.loadTech_(sourceTech.tech,sourceTech.source);this.tech_.ready(function(){_this11.changingSrc_=false;});return false;}
this.ready(function(){if(this.tech_.constructor.prototype.hasOwnProperty('setSource')){this.techCall_('setSource',source);}else{this.techCall_('src',source.src);}
this.changingSrc_=false;},true);return false;};Player.prototype.load=function load(){this.techCall_('load');};Player.prototype.reset=function reset(){if(this.tech_){this.tech_.clearTracks('text');}
this.loadTech_(this.options_.techOrder[0],null);this.techCall_('reset');};Player.prototype.currentSources=function currentSources(){var source=this.currentSource();var sources=[];if(Object.keys(source).length!==0){sources.push(source);}
return this.cache_.sources||sources;};Player.prototype.currentSource=function currentSource(){return this.cache_.source||{};};Player.prototype.currentSrc=function currentSrc(){return this.currentSource()&&this.currentSource().src||'';};Player.prototype.currentType=function currentType(){return this.currentSource()&&this.currentSource().type||'';};Player.prototype.preload=function preload(value){if(value!==undefined){this.techCall_('setPreload',value);this.options_.preload=value;return;}
return this.techGet_('preload');};Player.prototype.autoplay=function autoplay(value){if(value===undefined){return this.options_.autoplay||false;}
var techAutoplay=void 0;if(typeof value==='string'&&/(any|play|muted)/.test(value)){this.options_.autoplay=value;this.manualAutoplay_(value);techAutoplay=false;}else if(!value){this.options_.autoplay=false;}else{this.options_.autoplay=true;}
techAutoplay=techAutoplay||this.options_.autoplay;if(this.tech_){this.techCall_('setAutoplay',techAutoplay);}};Player.prototype.playsinline=function playsinline(value){if(value!==undefined){this.techCall_('setPlaysinline',value);this.options_.playsinline=value;return this;}
return this.techGet_('playsinline');};Player.prototype.loop=function loop(value){if(value!==undefined){this.techCall_('setLoop',value);this.options_.loop=value;return;}
return this.techGet_('loop');};Player.prototype.poster=function poster(src){if(src===undefined){return this.poster_;}
if(!src){src='';}
if(src===this.poster_){return;}
this.poster_=src;this.techCall_('setPoster',src);this.isPosterFromTech_=false;this.trigger('posterchange');};Player.prototype.handleTechPosterChange_=function handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var newPoster=this.tech_.poster()||'';if(newPoster!==this.poster_){this.poster_=newPoster;this.isPosterFromTech_=true;this.trigger('posterchange');}}};Player.prototype.controls=function controls(bool){if(bool===undefined){return!!this.controls_;}
bool=!!bool;if(this.controls_===bool){return;}
this.controls_=bool;if(this.usingNativeControls()){this.techCall_('setControls',bool);}
if(this.controls_){this.removeClass('vjs-controls-disabled');this.addClass('vjs-controls-enabled');this.trigger('controlsenabled');if(!this.usingNativeControls()){this.addTechControlsListeners_();}}else{this.removeClass('vjs-controls-enabled');this.addClass('vjs-controls-disabled');this.trigger('controlsdisabled');if(!this.usingNativeControls()){this.removeTechControlsListeners_();}}};Player.prototype.usingNativeControls=function usingNativeControls(bool){if(bool===undefined){return!!this.usingNativeControls_;}
bool=!!bool;if(this.usingNativeControls_===bool){return;}
this.usingNativeControls_=bool;if(this.usingNativeControls_){this.addClass('vjs-using-native-controls');this.trigger('usingnativecontrols');}else{this.removeClass('vjs-using-native-controls');this.trigger('usingcustomcontrols');}};Player.prototype.error=function error(err){if(err===undefined){return this.error_||null;}
if(err===null){this.error_=err;this.removeClass('vjs-error');if(this.errorDisplay){this.errorDisplay.close();}
return;}
this.error_=new MediaError(err);this.addClass('vjs-error');log.error('(CODE:'+this.error_.code+' '+MediaError.errorTypes[this.error_.code]+')',this.error_.message,this.error_);this.trigger('error');return;};Player.prototype.reportUserActivity=function reportUserActivity(event){this.userActivity_=true;};Player.prototype.userActive=function userActive(bool){if(bool===undefined){return this.userActive_;}
bool=!!bool;if(bool===this.userActive_){return;}
this.userActive_=bool;if(this.userActive_){this.userActivity_=true;this.removeClass('vjs-user-inactive');this.addClass('vjs-user-active');this.trigger('useractive');return;}
if(this.tech_){this.tech_.one('mousemove',function(e){e.stopPropagation();e.preventDefault();});}
this.userActivity_=false;this.removeClass('vjs-user-active');this.addClass('vjs-user-inactive');this.trigger('userinactive');};Player.prototype.listenForUserActivity_=function listenForUserActivity_(){var mouseInProgress=void 0;var lastMoveX=void 0;var lastMoveY=void 0;var handleActivity=bind(this,this.reportUserActivity);var handleMouseMove=function handleMouseMove(e){if(e.screenX!==lastMoveX||e.screenY!==lastMoveY){lastMoveX=e.screenX;lastMoveY=e.screenY;handleActivity();}};var handleMouseDown=function handleMouseDown(){handleActivity();this.clearInterval(mouseInProgress);mouseInProgress=this.setInterval(handleActivity,250);};var handleMouseUp=function handleMouseUp(event){handleActivity();this.clearInterval(mouseInProgress);};this.on('mousedown',handleMouseDown);this.on('mousemove',handleMouseMove);this.on('mouseup',handleMouseUp);this.on('keydown',handleActivity);this.on('keyup',handleActivity);var inactivityTimeout=void 0;this.setInterval(function(){if(!this.userActivity_){return;}
this.userActivity_=false;this.userActive(true);this.clearTimeout(inactivityTimeout);var timeout=this.options_.inactivityTimeout;if(timeout<=0){return;}
inactivityTimeout=this.setTimeout(function(){if(!this.userActivity_){this.userActive(false);}},timeout);},250);};Player.prototype.playbackRate=function playbackRate(rate){if(rate!==undefined){this.techCall_('setPlaybackRate',rate);return;}
if(this.tech_&&this.tech_.featuresPlaybackRate){return this.cache_.lastPlaybackRate||this.techGet_('playbackRate');}
return 1.0;};Player.prototype.defaultPlaybackRate=function defaultPlaybackRate(rate){if(rate!==undefined){return this.techCall_('setDefaultPlaybackRate',rate);}
if(this.tech_&&this.tech_.featuresPlaybackRate){return this.techGet_('defaultPlaybackRate');}
return 1.0;};Player.prototype.isAudio=function isAudio(bool){if(bool!==undefined){this.isAudio_=!!bool;return;}
return!!this.isAudio_;};Player.prototype.addTextTrack=function addTextTrack(kind,label,language){if(this.tech_){return this.tech_.addTextTrack(kind,label,language);}};Player.prototype.addRemoteTextTrack=function addRemoteTextTrack(options,manualCleanup){if(this.tech_){return this.tech_.addRemoteTextTrack(options,manualCleanup);}};Player.prototype.removeRemoteTextTrack=function removeRemoteTextTrack(){var _ref3=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref3$track=_ref3.track,track=_ref3$track===undefined?arguments[0]:_ref3$track;if(this.tech_){return this.tech_.removeRemoteTextTrack(track);}};Player.prototype.getVideoPlaybackQuality=function getVideoPlaybackQuality(){return this.techGet_('getVideoPlaybackQuality');};Player.prototype.videoWidth=function videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0;};Player.prototype.videoHeight=function videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0;};Player.prototype.language=function language(code){if(code===undefined){return this.language_;}
this.language_=String(code).toLowerCase();};Player.prototype.languages=function languages(){return mergeOptions(Player.prototype.options_.languages,this.languages_);};Player.prototype.toJSON=function toJSON(){var options=mergeOptions(this.options_);var tracks=options.tracks;options.tracks=[];for(var i=0;i<tracks.length;i++){var track=tracks[i];track=mergeOptions(track);track.player=undefined;options.tracks[i]=track;}
return options;};Player.prototype.createModal=function createModal(content,options){var _this12=this;options=options||{};options.content=content||'';var modal=new ModalDialog(this,options);this.addChild(modal);modal.on('dispose',function(){_this12.removeChild(modal);});modal.open();return modal;};Player.prototype.updateCurrentBreakpoint_=function updateCurrentBreakpoint_(){if(!this.responsive()){return;}
var currentBreakpoint=this.currentBreakpoint();var currentWidth=this.currentWidth();for(var i=0;i<BREAKPOINT_ORDER.length;i++){var candidateBreakpoint=BREAKPOINT_ORDER[i];var maxWidth=this.breakpoints_[candidateBreakpoint];if(currentWidth<=maxWidth){if(currentBreakpoint===candidateBreakpoint){return;}
if(currentBreakpoint){this.removeClass(BREAKPOINT_CLASSES[currentBreakpoint]);}
this.addClass(BREAKPOINT_CLASSES[candidateBreakpoint]);this.breakpoint_=candidateBreakpoint;break;}}};Player.prototype.removeCurrentBreakpoint_=function removeCurrentBreakpoint_(){var className=this.currentBreakpointClass();this.breakpoint_='';if(className){this.removeClass(className);}};Player.prototype.breakpoints=function breakpoints(_breakpoints){if(_breakpoints===undefined){return assign(this.breakpoints_);}
this.breakpoint_='';this.breakpoints_=assign({},DEFAULT_BREAKPOINTS,_breakpoints);this.updateCurrentBreakpoint_();return assign(this.breakpoints_);};Player.prototype.responsive=function responsive(value){if(value===undefined){return this.responsive_;}
value=Boolean(value);var current=this.responsive_;if(value===current){return;}
this.responsive_=value;if(value){this.on('playerresize',this.updateCurrentBreakpoint_);this.updateCurrentBreakpoint_();}else{this.off('playerresize',this.updateCurrentBreakpoint_);this.removeCurrentBreakpoint_();}
return value;};Player.prototype.currentBreakpoint=function currentBreakpoint(){return this.breakpoint_;};Player.prototype.currentBreakpointClass=function currentBreakpointClass(){return BREAKPOINT_CLASSES[this.breakpoint_]||'';};Player.getTagSettings=function getTagSettings(tag){var baseOptions={sources:[],tracks:[]};var tagOptions=getAttributes(tag);var dataSetup=tagOptions['data-setup'];if(hasClass(tag,'vjs-fill')){tagOptions.fill=true;}
if(hasClass(tag,'vjs-fluid')){tagOptions.fluid=true;}
if(dataSetup!==null){var _safeParseTuple=tuple(dataSetup||'{}'),err=_safeParseTuple[0],data=_safeParseTuple[1];if(err){log.error(err);}
assign(tagOptions,data);}
assign(baseOptions,tagOptions);if(tag.hasChildNodes()){var children=tag.childNodes;for(var i=0,j=children.length;i<j;i++){var child=children[i];var childName=child.nodeName.toLowerCase();if(childName==='source'){baseOptions.sources.push(getAttributes(child));}else if(childName==='track'){baseOptions.tracks.push(getAttributes(child));}}}
return baseOptions;};Player.prototype.flexNotSupported_=function flexNotSupported_(){var elem=document_1.createElement('i');return!('flexBasis'in elem.style||'webkitFlexBasis'in elem.style||'mozFlexBasis'in elem.style||'msFlexBasis'in elem.style||'msFlexOrder'in elem.style);};return Player;}(Component);ALL.names.forEach(function(name$$1){var props=ALL[name$$1];Player.prototype[props.getterName]=function(){if(this.tech_){return this.tech_[props.getterName]();}
this[props.privateName]=this[props.privateName]||new props.ListClass();return this[props.privateName];};});Player.players={};var navigator$1=window_1.navigator;Player.prototype.options_={techOrder:Tech.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2000,playbackRates:[],children:['mediaLoader','posterImage','textTrackDisplay','loadingSpinner','bigPlayButton','controlBar','errorDisplay','textTrackSettings'],language:navigator$1&&(navigator$1.languages&&navigator$1.languages[0]||navigator$1.userLanguage||navigator$1.language)||'en',languages:{},notSupportedMessage:'No compatible source was found for this media.',breakpoints:{},responsive:false};if(!IS_IE8){Player.prototype.options_.children.push('resizeManager');}
['ended','seeking','seekable','networkState','readyState'].forEach(function(fn){Player.prototype[fn]=function(){return this.techGet_(fn);};});TECH_EVENTS_RETRIGGER.forEach(function(event){Player.prototype['handleTech'+toTitleCase(event)+'_']=function(){return this.trigger(event);};});Component.registerComponent('Player',Player);var BASE_PLUGIN_NAME='plugin';var PLUGIN_CACHE_KEY='activePlugins_';var pluginStorage={};var pluginExists=function pluginExists(name){return pluginStorage.hasOwnProperty(name);};var getPlugin=function getPlugin(name){return pluginExists(name)?pluginStorage[name]:undefined;};var markPluginAsActive=function markPluginAsActive(player,name){player[PLUGIN_CACHE_KEY]=player[PLUGIN_CACHE_KEY]||{};player[PLUGIN_CACHE_KEY][name]=true;};var triggerSetupEvent=function triggerSetupEvent(player,hash,before){var eventName=(before?'before':'')+'pluginsetup';player.trigger(eventName,hash);player.trigger(eventName+':'+hash.name,hash);};var createBasicPlugin=function createBasicPlugin(name,plugin){var basicPluginWrapper=function basicPluginWrapper(){triggerSetupEvent(this,{name:name,plugin:plugin,instance:null},true);var instance=plugin.apply(this,arguments);markPluginAsActive(this,name);triggerSetupEvent(this,{name:name,plugin:plugin,instance:instance});return instance;};Object.keys(plugin).forEach(function(prop){basicPluginWrapper[prop]=plugin[prop];});return basicPluginWrapper;};var createPluginFactory=function createPluginFactory(name,PluginSubClass){PluginSubClass.prototype.name=name;return function(){triggerSetupEvent(this,{name:name,plugin:PluginSubClass,instance:null},true);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}
var instance=new(Function.prototype.bind.apply(PluginSubClass,[null].concat([this].concat(args))))();this[name]=function(){return instance;};triggerSetupEvent(this,instance.getEventHash());return instance;};};var Plugin=function(){function Plugin(player){classCallCheck(this,Plugin);if(this.constructor===Plugin){throw new Error('Plugin must be sub-classed; not directly instantiated.');}
this.player=player;evented(this);delete this.trigger;stateful(this,this.constructor.defaultState);markPluginAsActive(player,this.name);this.dispose=bind(this,this.dispose);player.on('dispose',this.dispose);}
Plugin.prototype.version=function version(){return this.constructor.VERSION;};Plugin.prototype.getEventHash=function getEventHash(){var hash=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};hash.name=this.name;hash.plugin=this.constructor;hash.instance=this;return hash;};Plugin.prototype.trigger=function trigger$$1(event){var hash=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return trigger(this.eventBusEl_,event,this.getEventHash(hash));};Plugin.prototype.handleStateChanged=function handleStateChanged(e){};Plugin.prototype.dispose=function dispose(){var name=this.name,player=this.player;this.trigger('dispose');this.off();player.off('dispose',this.dispose);player[PLUGIN_CACHE_KEY][name]=false;this.player=this.state=null;player[name]=createPluginFactory(name,pluginStorage[name]);};Plugin.isBasic=function isBasic(plugin){var p=typeof plugin==='string'?getPlugin(plugin):plugin;return typeof p==='function'&&!Plugin.prototype.isPrototypeOf(p.prototype);};Plugin.registerPlugin=function registerPlugin(name,plugin){if(typeof name!=='string'){throw new Error('Illegal plugin name, "'+name+'", must be a string, was '+(typeof name==='undefined'?'undefined':_typeof(name))+'.');}
if(pluginExists(name)){log.warn('A plugin named "'+name+'" already exists. You may want to avoid re-registering plugins!');}else if(Player.prototype.hasOwnProperty(name)){throw new Error('Illegal plugin name, "'+name+'", cannot share a name with an existing player method!');}
if(typeof plugin!=='function'){throw new Error('Illegal plugin for "'+name+'", must be a function, was '+(typeof plugin==='undefined'?'undefined':_typeof(plugin))+'.');}
pluginStorage[name]=plugin;if(name!==BASE_PLUGIN_NAME){if(Plugin.isBasic(plugin)){Player.prototype[name]=createBasicPlugin(name,plugin);}else{Player.prototype[name]=createPluginFactory(name,plugin);}}
return plugin;};Plugin.deregisterPlugin=function deregisterPlugin(name){if(name===BASE_PLUGIN_NAME){throw new Error('Cannot de-register base plugin.');}
if(pluginExists(name)){delete pluginStorage[name];delete Player.prototype[name];}};Plugin.getPlugins=function getPlugins(){var names=arguments.length>0&&arguments[0]!==undefined?arguments[0]:Object.keys(pluginStorage);var result=void 0;names.forEach(function(name){var plugin=getPlugin(name);if(plugin){result=result||{};result[name]=plugin;}});return result;};Plugin.getPluginVersion=function getPluginVersion(name){var plugin=getPlugin(name);return plugin&&plugin.VERSION||'';};return Plugin;}();Plugin.getPlugin=getPlugin;Plugin.BASE_PLUGIN_NAME=BASE_PLUGIN_NAME;Plugin.registerPlugin(BASE_PLUGIN_NAME,Plugin);Player.prototype.usingPlugin=function(name){return!!this[PLUGIN_CACHE_KEY]&&this[PLUGIN_CACHE_KEY][name]===true;};Player.prototype.hasPlugin=function(name){return!!pluginExists(name);};var _inherits=function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+(typeof superClass==='undefined'?'undefined':_typeof(superClass)));}
subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass){subClass.super_=superClass;}};var extendFn=function extendFn(superClass){var subClassMethods=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var subClass=function subClass(){superClass.apply(this,arguments);};var methods={};if((typeof subClassMethods==='undefined'?'undefined':_typeof(subClassMethods))==='object'){if(subClassMethods.constructor!==Object.prototype.constructor){subClass=subClassMethods.constructor;}
methods=subClassMethods;}else if(typeof subClassMethods==='function'){subClass=subClassMethods;}
_inherits(subClass,superClass);for(var name in methods){if(methods.hasOwnProperty(name)){subClass.prototype[name]=methods[name];}}
return subClass;};if(typeof HTMLVideoElement==='undefined'&&isReal()){document_1.createElement('video');document_1.createElement('audio');document_1.createElement('track');document_1.createElement('video-js');}
var normalizeId=function normalizeId(id){return id.indexOf('#')===0?id.slice(1):id;};function videojs(id,options,ready){var player=videojs.getPlayer(id);if(player){if(options){log.warn('Player "'+id+'" is already initialised. Options will not be applied.');}
if(ready){player.ready(ready);}
return player;}
var el=typeof id==='string'?$('#'+normalizeId(id)):id;if(!isEl(el)){throw new TypeError('The element or ID supplied is not valid. (videojs)');}
if(!document_1.body.contains(el)){log.warn('The element supplied is not included in the DOM');}
options=options||{};videojs.hooks('beforesetup').forEach(function(hookFunction){var opts=hookFunction(el,mergeOptions(options));if(!isObject(opts)||Array.isArray(opts)){log.error('please return an object in beforesetup hooks');return;}
options=mergeOptions(options,opts);});var PlayerComponent=Component.getComponent('Player');player=new PlayerComponent(el,options,ready);videojs.hooks('setup').forEach(function(hookFunction){return hookFunction(player);});return player;}
videojs.hooks_={};videojs.hooks=function(type,fn){videojs.hooks_[type]=videojs.hooks_[type]||[];if(fn){videojs.hooks_[type]=videojs.hooks_[type].concat(fn);}
return videojs.hooks_[type];};videojs.hook=function(type,fn){videojs.hooks(type,fn);};videojs.hookOnce=function(type,fn){videojs.hooks(type,[].concat(fn).map(function(original){var wrapper=function wrapper(){videojs.removeHook(type,wrapper);return original.apply(undefined,arguments);};return wrapper;}));};videojs.removeHook=function(type,fn){var index=videojs.hooks(type).indexOf(fn);if(index<=-1){return false;}
videojs.hooks_[type]=videojs.hooks_[type].slice();videojs.hooks_[type].splice(index,1);return true;};if(window_1.VIDEOJS_NO_DYNAMIC_STYLE!==true&&isReal()){var style=$('.vjs-styles-defaults');if(!style){style=createStyleElement('vjs-styles-defaults');var head=$('head');if(head){head.insertBefore(style,head.firstChild);}
setTextContent(style,'\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ');}}
autoSetupTimeout(1,videojs);videojs.VERSION=version;videojs.options=Player.prototype.options_;videojs.getPlayers=function(){return Player.players;};videojs.getPlayer=function(id){var players=Player.players;var tag=void 0;if(typeof id==='string'){var nId=normalizeId(id);var player=players[nId];if(player){return player;}
tag=$('#'+nId);}else{tag=id;}
if(isEl(tag)){var _tag=tag,_player=_tag.player,playerId=_tag.playerId;if(_player||players[playerId]){return _player||players[playerId];}}};videojs.getAllPlayers=function(){return(Object.keys(Player.players).map(function(k){return Player.players[k];}).filter(Boolean));};videojs.players=Player.players;videojs.getComponent=Component.getComponent;videojs.registerComponent=function(name$$1,comp){if(Tech.isTech(comp)){log.warn('The '+name$$1+' tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)');}
Component.registerComponent.call(Component,name$$1,comp);};videojs.getTech=Tech.getTech;videojs.registerTech=Tech.registerTech;videojs.use=use;if(!IS_IE8&&Object.defineProperty){Object.defineProperty(videojs,'middleware',{value:{},writeable:false,enumerable:true});Object.defineProperty(videojs.middleware,'TERMINATOR',{value:TERMINATOR,writeable:false,enumerable:true});}else{videojs.middleware={TERMINATOR:TERMINATOR};}
videojs.browser=browser;videojs.TOUCH_ENABLED=TOUCH_ENABLED;videojs.extend=extendFn;videojs.mergeOptions=mergeOptions;videojs.bind=bind;videojs.registerPlugin=Plugin.registerPlugin;videojs.deregisterPlugin=Plugin.deregisterPlugin;videojs.plugin=function(name$$1,plugin){log.warn('videojs.plugin() is deprecated; use videojs.registerPlugin() instead');return Plugin.registerPlugin(name$$1,plugin);};videojs.getPlugins=Plugin.getPlugins;videojs.getPlugin=Plugin.getPlugin;videojs.getPluginVersion=Plugin.getPluginVersion;videojs.addLanguage=function(code,data){var _mergeOptions;code=(''+code).toLowerCase();videojs.options.languages=mergeOptions(videojs.options.languages,(_mergeOptions={},_mergeOptions[code]=data,_mergeOptions));return videojs.options.languages[code];};videojs.log=log;videojs.createLogger=createLogger;videojs.createTimeRange=videojs.createTimeRanges=createTimeRanges;videojs.formatTime=formatTime;videojs.setFormatTime=setFormatTime;videojs.resetFormatTime=resetFormatTime;videojs.parseUrl=parseUrl;videojs.isCrossOrigin=isCrossOrigin;videojs.EventTarget=EventTarget;videojs.on=on;videojs.one=one;videojs.off=off;videojs.trigger=trigger;videojs.xhr=xhr;videojs.TextTrack=TextTrack;videojs.AudioTrack=AudioTrack;videojs.VideoTrack=VideoTrack;['isEl','isTextNode','createEl','hasClass','addClass','removeClass','toggleClass','setAttributes','getAttributes','emptyEl','appendContent','insertContent'].forEach(function(k){videojs[k]=function(){log.warn('videojs.'+k+'() is deprecated; use videojs.dom.'+k+'() instead');return Dom[k].apply(null,arguments);};});videojs.computedStyle=computedStyle;videojs.dom=Dom;videojs.url=Url;return videojs;})));




/********** https://www.aufeminin.com/reloaded/static/preconcat_%2Freloaded%2Fstatic%2FFront%2FVendor%2Fvideo-js%2Fplugins%2Fvideojs-ima%2F1.2.1%2Fvideojs.ima-updated.js.202002281736.js**********/

/** https://www.aufeminin.com/reloaded/static/Front/Vendor/video-js/plugins/videojs-ima/1.2.1/videojs.ima-updated.js?v=202002281736 **/
(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?factory(require('video.js')):typeof define==='function'&&define.amd?define(['video.js'],factory):(factory(global.videojs));}(this,(function(videojs){'use strict';videojs=videojs&&videojs.hasOwnProperty('default')?videojs['default']:videojs;var PlayerWrapper=function PlayerWrapper(player,adsPluginSettings,controller){this.vjsPlayer=player;this.controller=controller;this.contentTrackingTimer=null;this.contentComplete=false;this.updateTimeIntervalHandle=null;this.updateTimeInterval=1000;this.seekCheckIntervalHandle=null;this.seekCheckInterval=1000;this.resizeCheckIntervalHandle=null;this.resizeCheckInterval=250;this.seekThreshold=100;this.contentEndedListeners=[];this.contentSource='';this.contentPlayheadTracker={currentTime:0,previousTime:0,seeking:false,duration:0};this.vjsPlayerDimensions={width:this.getPlayerWidth(),height:this.getPlayerHeight()};this.vjsControls=this.vjsPlayer.getChild('controlBar');this.h5Player=document.getElementById(this.controller.getSettings().id).getElementsByClassName('vjs-tech')[0];if(this.h5Player.hasAttribute('autoplay')){this.controller.setSetting('adWillAutoPlay',true);}
this.vjsPlayer.one('play',this.setUpPlayerIntervals.bind(this));this.boundContentEndedListener=this.localContentEndedListener.bind(this);this.vjsPlayer.on('ended',this.boundContentEndedListener);this.vjsPlayer.on('dispose',this.playerDisposedListener.bind(this));this.vjsPlayer.on('readyforpreroll',this.onReadyForPreroll.bind(this));this.vjsPlayer.ready(this.onPlayerReady.bind(this));this.vjsPlayer.ads(adsPluginSettings);};PlayerWrapper.prototype.setUpPlayerIntervals=function(){this.updateTimeIntervalHandle=setInterval(this.updateCurrentTime.bind(this),this.updateTimeInterval);this.seekCheckIntervalHandle=setInterval(this.checkForSeeking.bind(this),this.seekCheckInterval);this.resizeCheckIntervalHandle=setInterval(this.checkForResize.bind(this),this.resizeCheckInterval);};PlayerWrapper.prototype.updateCurrentTime=function(){if(!this.contentPlayheadTracker.seeking){this.contentPlayheadTracker.currentTime=this.vjsPlayer.currentTime();}};PlayerWrapper.prototype.checkForSeeking=function(){var tempCurrentTime=this.vjsPlayer.currentTime();var diff=(tempCurrentTime-this.contentPlayheadTracker.previousTime)*1000;if(Math.abs(diff)>this.seekCheckInterval+this.seekThreshold){this.contentPlayheadTracker.seeking=true;}else{this.contentPlayheadTracker.seeking=false;}
this.contentPlayheadTracker.previousTime=this.vjsPlayer.currentTime();};PlayerWrapper.prototype.checkForResize=function(){var currentWidth=this.getPlayerWidth();var currentHeight=this.getPlayerHeight();if(currentWidth!=this.vjsPlayerDimensions.width||currentHeight!=this.vjsPlayerDimensions.height){this.vjsPlayerDimensions.width=currentWidth;this.vjsPlayerDimensions.height=currentHeight;this.controller.onPlayerResize(currentWidth,currentHeight);}};PlayerWrapper.prototype.localContentEndedListener=function(){if(!this.contentComplete){this.contentComplete=true;this.controller.onContentComplete();}
for(var index in this.contentEndedListeners){if(typeof this.contentEndedListeners[index]==='function'){this.contentEndedListeners[index]();}}
clearInterval(this.updateTimeIntervalHandle);clearInterval(this.seekCheckIntervalHandle);clearInterval(this.resizeCheckIntervalHandle);if(this.vjsPlayer.el()){this.vjsPlayer.one('play',this.setUpPlayerIntervals.bind(this));}};PlayerWrapper.prototype.playerDisposedListener=function(){this.contentEndedListeners=[];this.controller.onPlayerDisposed();this.contentComplete=true;this.vjsPlayer.off('ended',this.localContentEndedListener);if(this.vjsPlayer.ads.adTimeoutTimeout){clearTimeout(this.vjsPlayer.ads.adTimeoutTimeout);}
var intervalsToClear=[this.updateTimeIntervalHandle,this.seekCheckIntervalHandle,this.resizeCheckIntervalHandle];for(var index in intervalsToClear){if(intervalsToClear[index]){clearInterval(intervalsToClear[index]);}}};PlayerWrapper.prototype.onReadyForPreroll=function(){this.controller.onPlayerReadyForPreroll();};PlayerWrapper.prototype.onPlayerReady=function(){this.onVolumeChange();this.vjsPlayer.on('fullscreenchange',this.onFullscreenChange.bind(this));this.vjsPlayer.on('volumechange',this.onVolumeChange.bind(this));};PlayerWrapper.prototype.onFullscreenChange=function(){if(this.vjsPlayer.isFullscreen()){this.controller.onPlayerEnterFullscreen();}else{this.controller.onPlayerExitFullscreen();}};PlayerWrapper.prototype.onVolumeChange=function(){var newVolume=this.vjsPlayer.muted()?0:this.vjsPlayer.volume();this.controller.onPlayerVolumeChanged(newVolume);};PlayerWrapper.prototype.injectAdContainerDiv=function(adContainerDiv){this.vjsControls.el().parentNode.appendChild(adContainerDiv);};PlayerWrapper.prototype.getContentPlayer=function(){return this.h5Player;};PlayerWrapper.prototype.getVolume=function(){return this.vjsPlayer.muted()?0:this.vjsPlayer.volume();};PlayerWrapper.prototype.setVolume=function(volume){this.vjsPlayer.volume(volume);if(volume==0){this.vjsPlayer.muted(true);}else{this.vjsPlayer.muted(false);}};PlayerWrapper.prototype.unmute=function(){this.vjsPlayer.muted(false);};PlayerWrapper.prototype.mute=function(){this.vjsPlayer.muted(true);};PlayerWrapper.prototype.play=function(){this.vjsPlayer.play();};PlayerWrapper.prototype.getPlayerWidth=function(){var boundingRect=this.vjsPlayer.el().getBoundingClientRect()||{};return parseInt(boundingRect.width,10)||this.vjsPlayer.width();};PlayerWrapper.prototype.getPlayerHeight=function(){var boundingRect=this.vjsPlayer.el().getBoundingClientRect()||{};return parseInt(boundingRect.height,10)||this.vjsPlayer.height();};PlayerWrapper.prototype.toggleFullscreen=function(){if(this.vjsPlayer.isFullscreen()){this.vjsPlayer.exitFullscreen();}else{this.vjsPlayer.requestFullscreen();}};PlayerWrapper.prototype.getContentPlayheadTracker=function(){return this.contentPlayheadTracker;};PlayerWrapper.prototype.onAdError=function(adErrorEvent){this.vjsControls.show();var errorMessage=adErrorEvent.getError!==undefined?adErrorEvent.getError():adErrorEvent.stack;this.vjsPlayer.trigger({type:'adserror',data:{AdError:errorMessage,AdErrorEvent:adErrorEvent}});};PlayerWrapper.prototype.onAdBreakStart=function(adEvent){this.contentSource=this.vjsPlayer.currentSrc();this.vjsPlayer.off('ended',this.boundContentEndedListener);if(adEvent.getAd().getAdPodInfo().getPodIndex()!=-1){this.vjsPlayer.ads.startLinearAdMode();}
this.vjsControls.hide();this.vjsPlayer.pause();};PlayerWrapper.prototype.onAdBreakEnd=function(){this.vjsPlayer.on('ended',this.boundContentEndedListener);this.vjsPlayer.ads.endLinearAdMode();this.vjsControls.show();};PlayerWrapper.prototype.onAdStart=function(){this.vjsPlayer.trigger('ads-ad-started');};PlayerWrapper.prototype.onAllAdsCompleted=function(){if(this.contentComplete==true){if(this.h5Player.src!=this.contentSource){this.vjsPlayer.src(this.contentSource);}
this.controller.onContentAndAdsCompleted();}};PlayerWrapper.prototype.onAdsReady=function(){this.vjsPlayer.trigger('adsready');};PlayerWrapper.prototype.changeSource=function(contentSrc,playOnLoad){if(this.vjsPlayer.currentSrc()){this.vjsPlayer.currentTime(0);this.vjsPlayer.pause();}
if(contentSrc){this.vjsPlayer.src(contentSrc);}
if(playOnLoad){this.vjsPlayer.one('loadedmetadata',this.playContentFromZero.bind(this));}else{this.vjsPlayer.one('loadedmetadata',this.seekContentToZero.bind(this));}};PlayerWrapper.prototype.seekContentToZero=function(){this.vjsPlayer.currentTime(0);};PlayerWrapper.prototype.playContentFromZero=function(){this.vjsPlayer.currentTime(0);this.vjsPlayer.play();};PlayerWrapper.prototype.addContentEndedListener=function(listener){this.contentEndedListeners.push(listener);};PlayerWrapper.prototype.reset=function(){this.vjsPlayer.on('ended',this.boundContentEndedListener);this.vjsControls.show();this.vjsPlayer.ads.endLinearAdMode();this.contentPlayheadTracker.currentTime=0;};var AdUi=function AdUi(controller){this.controller=controller;this.adContainerDiv=document.createElement('div');this.controlsDiv=document.createElement('div');this.countdownDiv=document.createElement('div');this.seekBarDiv=document.createElement('div');this.progressDiv=document.createElement('div');this.playPauseDiv=document.createElement('div');this.muteDiv=document.createElement('div');this.sliderDiv=document.createElement('div');this.sliderLevelDiv=document.createElement('div');this.fullscreenDiv=document.createElement('div');this.boundOnMouseUp=this.onMouseUp.bind(this);this.boundOnMouseUp=this.onMouseMove.bind(this);this.adPlayheadTracker={'currentTime':0,'duration':0,'isPod':false,'adPosition':0,'totalAds':0};this.controlPrefix=this.controller.getSettings().id?this.controller.getSettings().id+'_':'';this.showCountdown=true;if(this.controller.getSettings().showCountdown===false){this.showCountdown=false;}
this.createAdContainer();};AdUi.prototype.createAdContainer=function(){this.assignControlAttributes(this.adContainerDiv,'ima-ad-container');this.adContainerDiv.style.position='absolute';this.adContainerDiv.style.zIndex=1111;this.adContainerDiv.addEventListener('mouseenter',this.showAdControls.bind(this),false);this.adContainerDiv.addEventListener('mouseleave',this.hideAdControls.bind(this),false);this.createControls();this.controller.injectAdContainerDiv(this.adContainerDiv);};AdUi.prototype.createControls=function(){this.assignControlAttributes(this.controlsDiv,'ima-controls-div');this.controlsDiv.style.width='100%';this.assignControlAttributes(this.countdownDiv,'ima-countdown-div');this.countdownDiv.innerHTML=this.controller.getSettings().adLabel;this.countdownDiv.style.display=this.showCountdown?'block':'none';this.assignControlAttributes(this.seekBarDiv,'ima-seek-bar-div');this.seekBarDiv.style.width='100%';this.assignControlAttributes(this.progressDiv,'ima-progress-div');this.assignControlAttributes(this.playPauseDiv,'ima-play-pause-div');this.addClass(this.playPauseDiv,'ima-playing');this.playPauseDiv.addEventListener('click',this.onAdPlayPauseClick.bind(this),false);this.assignControlAttributes(this.muteDiv,'ima-mute-div');this.addClass(this.muteDiv,'ima-non-muted');this.muteDiv.addEventListener('click',this.onAdMuteClick.bind(this),false);this.assignControlAttributes(this.sliderDiv,'ima-slider-div');this.sliderDiv.addEventListener('mousedown',this.onAdVolumeSliderMouseDown.bind(this),false);this.assignControlAttributes(this.sliderLevelDiv,'ima-slider-level-div');this.assignControlAttributes(this.fullscreenDiv,'ima-fullscreen-div');this.addClass(this.fullscreenDiv,'ima-non-fullscreen');this.fullscreenDiv.addEventListener('click',this.onAdFullscreenClick.bind(this),false);this.adContainerDiv.appendChild(this.controlsDiv);this.controlsDiv.appendChild(this.countdownDiv);this.controlsDiv.appendChild(this.seekBarDiv);this.controlsDiv.appendChild(this.playPauseDiv);this.controlsDiv.appendChild(this.muteDiv);this.controlsDiv.appendChild(this.sliderDiv);this.controlsDiv.appendChild(this.fullscreenDiv);this.seekBarDiv.appendChild(this.progressDiv);this.sliderDiv.appendChild(this.sliderLevelDiv);};AdUi.prototype.onAdPlayPauseClick=function(){this.controller.onAdPlayPauseClick();};AdUi.prototype.onAdMuteClick=function(){this.controller.onAdMuteClick();};AdUi.prototype.onAdFullscreenClick=function(){this.controller.toggleFullscreen();};AdUi.prototype.onAdsPaused=function(){this.addClass(this.playPauseDiv,'ima-paused');this.removeClass(this.playPauseDiv,'ima-playing');this.showAdControls();};AdUi.prototype.onAdsResumed=function(){this.onAdsPlaying();this.showAdControls();};AdUi.prototype.onAdsPlaying=function(){this.addClass(this.playPauseDiv,'ima-playing');this.removeClass(this.playPauseDiv,'ima-paused');};AdUi.prototype.updateAdUi=function(currentTime,remainingTime,duration,adPosition,totalAds){var remainingMinutes=Math.floor(remainingTime/60);var remainingSeconds=Math.floor(remainingTime%60);if(remainingSeconds.toString().length<2){remainingSeconds='0'+remainingSeconds;}
var podCount=': ';if(totalAds>1){podCount=' ('+adPosition+' of '+totalAds+'): ';}
this.countdownDiv.innerHTML=this.controller.getSettings().adLabel+podCount+remainingMinutes+':'+remainingSeconds;var playProgressRatio=currentTime/duration;var playProgressPercent=playProgressRatio*100;this.progressDiv.style.width=playProgressPercent+'%';};AdUi.prototype.unmute=function(){this.addClass(this.muteDiv,'ima-non-muted');this.removeClass(this.muteDiv,'ima-muted');this.sliderLevelDiv.style.width=this.controller.getPlayerVolume()*100+'%';};AdUi.prototype.mute=function(){this.addClass(this.muteDiv,'ima-muted');this.removeClass(this.muteDiv,'ima-non-muted');this.sliderLevelDiv.style.width='0%';};AdUi.prototype.onAdVolumeSliderMouseDown=function(){document.addEventListener('mouseup',this.boundOnMouseUp,false);document.addEventListener('mousemove',this.boundOnMouseMove,false);};AdUi.prototype.onMouseMove=function(event){this.changeVolume(event);};AdUi.prototype.onMouseUp=function(event){this.changeVolume(event);document.removeEventListener('mouseup',this.boundOnMouseUp);document.removeEventListener('mousemove',this.boundOnMouseMove);};AdUi.prototype.changeVolume=function(event){var percent=(event.clientX-this.sliderDiv.getBoundingClientRect().left)/this.sliderDiv.offsetWidth;percent*=100;percent=Math.min(Math.max(percent,0),100);this.sliderLevelDiv.style.width=percent+'%';if(this.percent==0){this.addClass(this.muteDiv,'ima-muted');this.removeClass(this.muteDiv,'ima-non-muted');}else{this.addClass(this.muteDiv,'ima-non-muted');this.removeClass(this.muteDiv,'ima-muted');}
this.controller.setVolume(percent/100);};AdUi.prototype.showAdContainer=function(){this.adContainerDiv.style.display='block';};AdUi.prototype.onAdError=function(){this.adContainerDiv.style.display='none';};AdUi.prototype.onAdBreakStart=function(adEvent){this.adContainerDiv.style.display='block';var contentType=adEvent.getAd().getContentType();if(contentType==='application/javascript'&&!this.controller.getSettings().showControlsForJSAds){this.controlsDiv.style.display='none';}else{this.controlsDiv.style.display='block';}
this.onAdsPlaying();this.hideAdControls();};AdUi.prototype.onAdBreakEnd=function(){var currentAd=this.controller.getCurrentAd();if(currentAd==null||currentAd.isLinear()){this.adContainerDiv.style.display='none';}
this.controlsDiv.style.display='none';this.countdownDiv.innerHTML='';};AdUi.prototype.onAllAdsCompleted=function(){this.adContainerDiv.style.display='none';};AdUi.prototype.onLinearAdStart=function(){this.removeClass(this.adContainerDiv,'bumpable-ima-ad-container');};AdUi.prototype.onNonLinearAdLoad=function(){this.adContainerDiv.style.display='block';this.addClass(this.adContainerDiv,'bumpable-ima-ad-container');};AdUi.prototype.onPlayerEnterFullscreen=function(){this.addClass(this.fullscreenDiv,'ima-fullscreen');this.removeClass(this.fullscreenDiv,'ima-non-fullscreen');};AdUi.prototype.onPlayerExitFullscreen=function(){this.addClass(this.fullscreenDiv,'ima-non-fullscreen');this.removeClass(this.fullscreenDiv,'ima-fullscreen');};AdUi.prototype.onPlayerVolumeChanged=function(volume){if(volume==0){this.addClass(this.muteDiv,'ima-muted');this.removeClass(this.muteDiv,'ima-non-muted');this.sliderLevelDiv.style.width='0%';}else{this.addClass(this.muteDiv,'ima-non-muted');this.removeClass(this.muteDiv,'ima-muted');this.sliderLevelDiv.style.width=volume*100+'%';}};AdUi.prototype.showAdControls=function(){this.addClass(this.controlsDiv,'ima-controls-div-showing');this.playPauseDiv.style.display='block';this.muteDiv.style.display='block';this.sliderDiv.style.display='block';this.fullscreenDiv.style.display='block';};AdUi.prototype.hideAdControls=function(){this.removeClass(this.controlsDiv,'ima-controls-div-showing');this.playPauseDiv.style.display='none';this.muteDiv.style.display='none';this.sliderDiv.style.display='none';this.fullscreenDiv.style.display='none';};AdUi.prototype.assignControlAttributes=function(element,controlName){element.id=this.controlPrefix+controlName;element.className=this.controlPrefix+controlName+' '+controlName;};AdUi.prototype.getClassRegexp=function(className){return new RegExp('(^|[^A-Za-z-])'+className+'((?![A-Za-z-])|$)','gi');};AdUi.prototype.elementHasClass=function(element,className){var classRegexp=this.getClassRegexp(className);return classRegexp.test(element.className);};AdUi.prototype.addClass=function(element,classToAdd){element.className=element.className.trim()+' '+classToAdd;};AdUi.prototype.removeClass=function(element,classToRemove){var classRegexp=this.getClassRegexp(classToRemove);element.className=element.className.trim().replace(classRegexp,'');};AdUi.prototype.getAdContainerDiv=function(){return this.adContainerDiv;};AdUi.prototype.setShowCountdown=function(showCountdownIn){this.showCountdown=showCountdownIn;this.countdownDiv.style.display=this.showCountdown?'block':'none';};var name="videojs-ima";var version="1.2.1";var license="Apache-2.0";var main="./dist/videojs.ima.js";var author={"name":"Google Inc."};var engines={"node":">=0.8.0"};var scripts={"contBuild":"watch 'npm run rollup:max' src","predevServer":"echo \"Starting up server on localhost:8000.\"","devServer":"forever start ./node_modules/http-server/bin/http-server -p 8000 && npm run contBuild","postdevServer":"forever stop ./node_modules/http-server/bin/http-server","lint":"eslint \"src/*.js\"","rollup":"npm-run-all rollup:*","rollup:max":"rollup -c configs/rollup.config.js","rollup:min":"rollup -c configs/rollup.config.min.js","pretest":"npm run rollup","test":"npm-run-all test:*","test:vjs5":"npm install video.js@5.19.2 --no-save && npm-run-all -p -r testServer webdriver","test:vjs6":"npm install video.js@6 --no-save && npm-run-all -p -r testServer webdriver","testServer":"http-server --cors -p 8000 --silent","preversion":"node scripts/preversion.js && npm run lint && npm test","version":"node scripts/version.js","postversion":"node scripts/postversion.js","webdriver":"mocha test/webdriver/*.js --no-timeouts"};var repository={"type":"git","url":"https://github.com/googleads/videojs-ima"};var files=["CHANGELOG.md","LICENSE","README.md","dist/","src/"];var dependencies={"video.js":"^5.19.2 || ^6","videojs-contrib-ads":"^6"};var devDependencies={"babel-core":"^6.26.0","babel-preset-env":"^1.6.1","child_process":"^1.0.2","chromedriver":"^2.33.2","conventional-changelog-cli":"^1.3.5","conventional-changelog-videojs":"^3.0.0","eslint":"^4.11.0","eslint-config-google":"^0.9.1","eslint-plugin-jsdoc":"^3.2.0","forever":"^0.15.3","geckodriver":"^1.10.0","http-server":"^0.10.0","mocha":"^4.0.1","npm-run-all":"^4.1.2","path":"^0.12.7","rimraf":"^2.6.2","rollup":"^0.51.8","rollup-plugin-babel":"^3.0.3","rollup-plugin-copy":"^0.2.3","rollup-plugin-json":"^2.3.0","rollup-plugin-uglify":"^2.0.1","selenium-webdriver":"^3.6.0","uglify-es":"^3.1.10","watch":"^1.0.2"};var keywords=["videojs","videojs-plugin"];var pkg={name:name,version:version,license:license,main:main,author:author,engines:engines,scripts:scripts,repository:repository,files:files,dependencies:dependencies,devDependencies:devDependencies,keywords:keywords};var SdkImpl=function SdkImpl(controller){this.controller=controller;this.adDisplayContainer=null;this.adDisplayContainerInitialized=false;this.adsLoader=null;this.adsManager=null;this.adsRenderingSettings=null;this.adTagUrl=null;this.adsResponse=null;this.currentAd=null;this.adTrackingTimer=null;this.allAdsCompleted=false;this.adsActive=false;this.adPlaying=false;this.adMuted=false;this.adBreakReadyListener=undefined;this.contentCompleteCalled=false;this.adsManagerDimensions={width:0,height:0};this.autoPlayAdBreaks=true;if(this.controller.getSettings().autoPlayAdBreaks===false){this.autoPlayAdBreaks=false;}
if(this.controller.getSettings().locale){google.ima.settings.setLocale(this.controller.getSettings().locale);}
if(this.controller.getSettings().disableFlashAds){google.ima.settings.setDisableFlashAds(this.controller.getSettings().disableFlashAds);}
if(this.controller.getSettings().disableCustomPlaybackForIOS10Plus){google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.controller.getSettings().disableCustomPlaybackForIOS10Plus);}
this.initAdObjects();if(this.controller.getSettings().adTagUrl||this.controller.getSettings().adsResponse){this.requestAds();}};SdkImpl.prototype.initAdObjects=function(){this.adDisplayContainer=new google.ima.AdDisplayContainer(this.controller.getAdContainerDiv(),this.controller.getContentPlayer());this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer);this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED);if(this.controller.getSettings().vpaidAllowed==false){this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.DISABLED);}
if(this.controller.getSettings().vpaidMode){this.adsLoader.getSettings().setVpaidMode(this.controller.getSettings().vpaidMode);}
if(this.controller.getSettings().locale){this.adsLoader.getSettings().setLocale(this.controller.getSettings().locale);}
if(this.controller.getSettings().numRedirects){this.adsLoader.getSettings().setNumRedirects(this.controller.getSettings().numRedirects);}
this.adsLoader.getSettings().setPlayerType('videojs-ima');this.adsLoader.getSettings().setPlayerVersion(pkg.version);this.adsLoader.getSettings().setAutoPlayAdBreaks(this.autoPlayAdBreaks);this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),false);this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsLoaderError.bind(this),false);};SdkImpl.prototype.requestAds=function(){var adsRequest=new google.ima.AdsRequest();if(this.controller.getSettings().adTagUrl){adsRequest.adTagUrl=this.controller.getSettings().adTagUrl;}else{adsRequest.adsResponse=this.controller.getSettings().adsResponse;}
if(this.controller.getSettings().forceNonLinearFullSlot){adsRequest.forceNonLinearFullSlot=true;}
if(this.controller.getSettings().vastLoadTimeout){adsRequest.vastLoadTimeout=this.controller.getSettings().vastLoadTimeout;}
adsRequest.linearAdSlotWidth=this.controller.getPlayerWidth();adsRequest.linearAdSlotHeight=this.controller.getPlayerHeight();adsRequest.nonLinearAdSlotWidth=this.controller.getSettings().nonLinearWidth||this.controller.getPlayerWidth();adsRequest.nonLinearAdSlotHeight=this.controller.getSettings().nonLinearHeight||this.controller.getPlayerHeight();adsRequest.setAdWillAutoPlay(this.controller.getSettings().adWillAutoPlay);var adWillPlayMuted=this.controller.getSettings().adWillPlayMuted!==undefined?this.controller.getSettings().adWillPlayMuted:this.controller.getPlayerVolume()==0;adsRequest.setAdWillPlayMuted(adWillPlayMuted);this.adsLoader.requestAds(adsRequest);};SdkImpl.prototype.onAdsManagerLoaded=function(adsManagerLoadedEvent){this.createAdsRenderingSettings();this.adsManager=adsManagerLoadedEvent.getAdsManager(this.controller.getContentPlayheadTracker(),this.adsRenderingSettings);this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.AD_BREAK_READY,this.onAdBreakReady.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,this.onAllAdsCompleted.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,this.onAdLoaded.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,this.onAdStarted.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,this.onAdPaused.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.onAdComplete.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,this.onAdComplete.bind(this));if(this.controller.getIsMobile()){this.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,this.onAdPaused.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,this.onAdResumed.bind(this));}
if(!this.autoPlayAdBreaks){this.initAdsManager();}
this.controller.onAdsReady();if(this.controller.getSettings().adsManagerLoadedCallback){this.controller.getSettings().adsManagerLoadedCallback();}};SdkImpl.prototype.onAdsLoaderError=function(event){window.console.warn('AdsLoader error: '+event.getError());this.controller.onErrorLoadingAds(event);if(this.adsManager){this.adsManager.destroy();}};SdkImpl.prototype.initAdsManager=function(){try{var initWidth=this.controller.getPlayerWidth();var initHeight=this.controller.getPlayerHeight();this.adsManagerDimensions.width=initWidth;this.adsManagerDimensions.height=initHeight;this.adsManager.init(initWidth,initHeight,google.ima.ViewMode.NORMAL);this.adsManager.setVolume(this.controller.getPlayerVolume());if(!this.adDisplayContainerInitialized){this.adDisplayContainer.initialize();this.adDisplayContainer.initialized=true;}}catch(adError){this.onAdError(adError);}};SdkImpl.prototype.createAdsRenderingSettings=function(){this.adsRenderingSettings=new google.ima.AdsRenderingSettings();this.adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete=true;if(this.controller.getSettings().adsRenderingSettings){for(var setting in this.controller.getSettings().adsRenderingSettings){if(setting!==''){this.adsRenderingSettings[setting]=this.controller.getSettings().adsRenderingSettings[setting];}}}};SdkImpl.prototype.onAdError=function(adErrorEvent){var errorMessage=adErrorEvent.getError!==undefined?adErrorEvent.getError():adErrorEvent.stack;window.console.warn('Ad error: '+errorMessage);this.adsManager.destroy();this.controller.onAdError(adErrorEvent);};SdkImpl.prototype.onAdBreakReady=function(adEvent){this.adBreakReadyListener(adEvent);};SdkImpl.prototype.onContentPauseRequested=function(adEvent){this.adsActive=true;this.adPlaying=true;this.controller.onAdBreakStart(adEvent);};SdkImpl.prototype.onContentResumeRequested=function(adEvent){this.adsActive=false;this.adPlaying=false;this.controller.onAdBreakEnd();};SdkImpl.prototype.onAllAdsCompleted=function(adEvent){this.allAdsCompleted=true;this.controller.onAllAdsCompleted();};SdkImpl.prototype.onAdLoaded=function(adEvent){if(!adEvent.getAd().isLinear()){this.controller.onNonLinearAdLoad();this.controller.playContent();}};SdkImpl.prototype.onAdStarted=function(adEvent){this.currentAd=adEvent.getAd();if(this.currentAd.isLinear()){this.adTrackingTimer=setInterval(this.onAdPlayheadTrackerInterval.bind(this),250);this.controller.onLinearAdStart();}else{this.controller.onNonLinearAdStart();}};SdkImpl.prototype.onAdPaused=function(){this.controller.onAdsPaused();};SdkImpl.prototype.onAdResumed=function(adEvent){this.controller.onAdsResumed();};SdkImpl.prototype.onAdComplete=function(){if(this.currentAd.isLinear()){clearInterval(this.adTrackingTimer);}};SdkImpl.prototype.onAdPlayheadTrackerInterval=function(){var remainingTime=this.adsManager.getRemainingTime();var duration=this.currentAd.getDuration();var currentTime=duration-remainingTime;currentTime=currentTime>0?currentTime:0;var totalAds=0;var adPosition=void 0;if(this.currentAd.getAdPodInfo()){adPosition=this.currentAd.getAdPodInfo().getAdPosition();totalAds=this.currentAd.getAdPodInfo().getTotalAds();}
this.controller.onAdPlayheadUpdated(currentTime,remainingTime,duration,adPosition,totalAds);};SdkImpl.prototype.onContentComplete=function(){if(this.adsLoader){this.adsLoader.contentComplete();this.contentCompleteCalled=true;}
if(this.allAdsCompleted){this.controller.onContentAndAdsCompleted();}};SdkImpl.prototype.onPlayerDisposed=function(){if(this.adTrackingTimer){clearInterval(this.adTrackingTimer);}
if(this.adsManager){this.adsManager.destroy();this.adsManager=null;}};SdkImpl.prototype.onPlayerReadyForPreroll=function(){if(this.autoPlayAdBreaks){this.initAdsManager();try{this.controller.showAdContainer();this.adsManager.setVolume(this.controller.getPlayerVolume());this.adsManager.start();}catch(adError){this.onAdError(adError);}}};SdkImpl.prototype.onPlayerEnterFullscreen=function(){if(this.adsManager){this.adsManager.resize(window.screen.width,window.screen.height,google.ima.ViewMode.FULLSCREEN);}};SdkImpl.prototype.onPlayerExitFullscreen=function(){if(this.adsManager){this.adsManager.resize(this.controller.getPlayerWidth(),this.controller.getPlayerHeight(),google.ima.ViewMode.NORMAL);}};SdkImpl.prototype.onPlayerVolumeChanged=function(volume){if(this.adsManager){this.adsManager.setVolume(volume);}
if(volume==0){this.adMuted=true;}else{this.adMuted=false;}};SdkImpl.prototype.onPlayerResize=function(width,height){if(this.adsManager){this.adsManagerDimensions.width=width;this.adsManagerDimensions.height=height;this.adsManager.resize(width,height,google.ima.ViewMode.NORMAL);}};SdkImpl.prototype.getCurrentAd=function(){return this.currentAd;};SdkImpl.prototype.setAdBreakReadyListener=function(listener){this.adBreakReadyListener=listener;};SdkImpl.prototype.isAdPlaying=function(){return this.adPlaying;};SdkImpl.prototype.isAdMuted=function(){return this.adMuted;};SdkImpl.prototype.pauseAds=function(){this.adsManager.pause();this.adPlaying=false;};SdkImpl.prototype.resumeAds=function(){this.adsManager.resume();this.adPlaying=true;};SdkImpl.prototype.unmute=function(){this.adsManager.setVolume(1);this.adMuted=false;};SdkImpl.prototype.mute=function(){this.adsManager.setVolume(0);this.adMuted=true;};SdkImpl.prototype.setVolume=function(volume){this.adsManager.setVolume(volume);if(volume==0){this.adMuted=true;}else{this.adMuted=false;}};SdkImpl.prototype.initializeAdDisplayContainer=function(){this.adDisplayContainerInitialized=true;this.adDisplayContainer.initialize();};SdkImpl.prototype.playAdBreak=function(){if(!this.autoPlayAdBreaks){this.controller.showAdContainer();this.adsManager.setVolume(this.controller.getPlayerVolume());this.adsManager.start();}};SdkImpl.prototype.addEventListener=function(event,callback){if(this.adsManager){this.adsManager.addEventListener(event,callback);}};SdkImpl.prototype.getAdsManager=function(){return this.adsManager;};SdkImpl.prototype.reset=function(){this.adsActive=false;this.adPlaying=false;if(this.adTrackingTimer){clearInterval(this.adTrackingTimer);}
if(this.adsManager){this.adsManager.destroy();this.adsManager=null;}
if(this.adsLoader&&!this.contentCompleteCalled){this.adsLoader.contentComplete();}
this.contentCompleteCalled=false;this.allAdsCompleted=false;};var Controller=function Controller(player,options){this.settings={};this.contentAndAdsEndedListeners=[];this.isMobile=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i);this.initWithSettings(options);var contribAdsDefaults={debug:this.settings.debug,timeout:this.settings.timeout,prerollTimeout:this.settings.prerollTimeout};var adsPluginSettings=this.extend({},contribAdsDefaults,options.contribAdsSettings||{});this.playerWrapper=new PlayerWrapper(player,adsPluginSettings,this);this.adUi=new AdUi(this);this.sdkImpl=new SdkImpl(this);};Controller.IMA_DEFAULTS={debug:false,timeout:5000,prerollTimeout:1000,adLabel:'Advertisement',showControlsForJSAds:true,adWillPlayMuted:false};Controller.prototype.initWithSettings=function(options){this.settings=this.extend({},Controller.IMA_DEFAULTS,options||{});if(!this.settings.id){window.console.error('Error: must provide id of video.js div');return;}
this.showCountdown=true;if(this.settings.showCountdown===false){this.showCountdown=false;}};Controller.prototype.getSettings=function(){return this.settings;};Controller.prototype.getIsMobile=function(){return this.isMobile;};Controller.prototype.injectAdContainerDiv=function(adContainerDiv){this.playerWrapper.injectAdContainerDiv(adContainerDiv);};Controller.prototype.getAdContainerDiv=function(){return this.adUi.getAdContainerDiv();};Controller.prototype.getContentPlayer=function(){return this.playerWrapper.getContentPlayer();};Controller.prototype.getContentPlayheadTracker=function(){return this.playerWrapper.getContentPlayheadTracker();};Controller.prototype.requestAds=function(){this.sdkImpl.requestAds();};Controller.prototype.setSetting=function(key,value){this.settings[key]=value;};Controller.prototype.onErrorLoadingAds=function(adErrorEvent){this.adUi.onAdError();this.playerWrapper.onAdError(adErrorEvent);};Controller.prototype.onAdPlayPauseClick=function(){if(this.sdkImpl.isAdPlaying()){this.adUi.onAdsPaused();this.sdkImpl.pauseAds();}else{this.adUi.onAdsPlaying();this.sdkImpl.resumeAds();}};Controller.prototype.onAdMuteClick=function(){if(this.sdkImpl.isAdMuted()){this.playerWrapper.unmute();this.adUi.unmute();this.sdkImpl.unmute();}else{this.playerWrapper.mute();this.adUi.mute();this.sdkImpl.mute();}};Controller.prototype.setVolume=function(volume){this.playerWrapper.setVolume(volume);this.sdkImpl.setVolume(volume);};Controller.prototype.getPlayerVolume=function(){return this.playerWrapper.getVolume();};Controller.prototype.toggleFullscreen=function(){this.playerWrapper.toggleFullscreen();};Controller.prototype.onAdError=function(adErrorEvent){this.adUi.onAdError();this.playerWrapper.onAdError(adErrorEvent);};Controller.prototype.onAdBreakStart=function(adEvent){this.playerWrapper.onAdBreakStart(adEvent);this.adUi.onAdBreakStart(adEvent);};Controller.prototype.showAdContainer=function(){this.adUi.showAdContainer();};Controller.prototype.onAdBreakEnd=function(){this.playerWrapper.onAdBreakEnd();this.adUi.onAdBreakEnd();};Controller.prototype.onAllAdsCompleted=function(){this.adUi.onAllAdsCompleted();this.playerWrapper.onAllAdsCompleted();};Controller.prototype.onAdsPaused=function(){this.adUi.onAdsPaused();};Controller.prototype.onAdsResumed=function(){this.adUi.onAdsResumed();};Controller.prototype.onAdPlayheadUpdated=function(currentTime,remainingTime,duration,adPosition,totalAds){this.adUi.updateAdUi(currentTime,remainingTime,duration,adPosition,totalAds);};Controller.prototype.getCurrentAd=function(){return this.sdkImpl.getCurrentAd();};Controller.prototype.playContent=function(){this.playerWrapper.play();};Controller.prototype.onLinearAdStart=function(){this.adUi.onLinearAdStart();this.playerWrapper.onAdStart();};Controller.prototype.onNonLinearAdLoad=function(){this.adUi.onNonLinearAdLoad();};Controller.prototype.onNonLinearAdStart=function(){this.adUi.onNonLinearAdLoad();this.playerWrapper.onAdStart();};Controller.prototype.getPlayerWidth=function(){return this.playerWrapper.getPlayerWidth();};Controller.prototype.getPlayerHeight=function(){return this.playerWrapper.getPlayerHeight();};Controller.prototype.onAdsReady=function(){this.playerWrapper.onAdsReady();};Controller.prototype.onPlayerResize=function(width,height){this.sdkImpl.onPlayerResize(width,height);};Controller.prototype.onContentComplete=function(){this.sdkImpl.onContentComplete();};Controller.prototype.onContentAndAdsCompleted=function(){for(var index in this.contentAndAdsEndedListeners){if(typeof this.contentAndAdsEndedListeners[index]==='function'){this.contentAndAdsEndedListeners[index]();}}};Controller.prototype.onPlayerDisposed=function(){this.contentAndAdsEndedListeners=[];this.sdkImpl.onPlayerDisposed();};Controller.prototype.onPlayerReadyForPreroll=function(){this.sdkImpl.onPlayerReadyForPreroll();};Controller.prototype.onPlayerEnterFullscreen=function(){this.adUi.onPlayerEnterFullscreen();this.sdkImpl.onPlayerEnterFullscreen();};Controller.prototype.onPlayerExitFullscreen=function(){this.adUi.onPlayerExitFullscreen();this.sdkImpl.onPlayerExitFullscreen();};Controller.prototype.onPlayerVolumeChanged=function(volume){this.adUi.onPlayerVolumeChanged(volume);this.sdkImpl.onPlayerVolumeChanged(volume);};Controller.prototype.setContentWithAdTag=function(contentSrc,adTag,playOnLoad){this.reset();this.settings.adTagUrl=adTag?adTag:this.settings.adTagUrl;this.playerWrapper.changeSource(contentSrc,playOnLoad);};Controller.prototype.setContentWithAdsResponse=function(contentSrc,adsResponse,playOnLoad){this.reset();this.settings.adsResponse=adsResponse?adsResponse:this.settings.adsResponse;this.playerWrapper.changeSource(contentSrc,playOnLoad);};Controller.prototype.reset=function(){this.sdkImpl.reset();this.playerWrapper.reset();};Controller.prototype.addContentEndedListener=function(listener){this.playerWrapper.addContentEndedListener(listener);};Controller.prototype.addContentAndAdsEndedListener=function(listener){this.contentAndAdsEndedListeners.push(listener);};Controller.prototype.setAdBreakReadyListener=function(listener){this.sdkImpl.setAdBreakReadyListener(listener);};Controller.prototype.setShowCountdown=function(showCountdownIn){this.adUi.setShowCountdown(showCountdownIn);this.showCountdown=showCountdownIn;this.countdownDiv.style.display=this.showCountdown?'block':'none';};Controller.prototype.initializeAdDisplayContainer=function(){this.sdkImpl.initializeAdDisplayContainer();};Controller.prototype.playAdBreak=function(){this.sdkImpl.playAdBreak();};Controller.prototype.addEventListener=function(event,callback){this.sdkImpl.addEventListener(event,callback);};Controller.prototype.getAdsManager=function(){return this.sdkImpl.getAdsManager();};Controller.prototype.changeAdTag=function(adTag){this.reset();this.settings.adTagUrl=adTag;};Controller.prototype.pauseAd=function(){this.adUi.onAdsPaused();this.sdkImpl.pauseAds();};Controller.prototype.resumeAd=function(){this.adUi.onAdsPlaying();this.sdkImpl.resumeAds();};Controller.prototype.extend=function(obj){var arg=void 0;var index=void 0;var key=void 0;for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key];}
for(index=0;index<args.length;index++){arg=args[index];for(key in arg){if(arg.hasOwnProperty(key)){obj[key]=arg[key];}}}
return obj;};var ImaPlugin=function ImaPlugin(player,options){this.controller=new Controller(player,options);this.addContentAndAdsEndedListener=function(listener){this.controller.addContentAndAdsEndedListener(listener);}.bind(this);this.addContentEndedListener=function(listener){this.controller.addContentEndedListener(listener);}.bind(this);this.addEventListener=function(event,callback){this.controller.addEventListener(event,callback);}.bind(this);this.changeAdTag=function(adTag){this.controller.changeAdTag(adTag);}.bind(this);this.getAdsManager=function(){return this.controller.getAdsManager();}.bind(this);this.initializeAdDisplayContainer=function(){this.controller.initializeAdDisplayContainer();}.bind(this);this.pauseAd=function(){this.controller.pauseAd();}.bind(this);this.playAdBreak=function(){this.controller.playAdBreak();}.bind(this);this.requestAds=function(){this.controller.requestAds();}.bind(this);this.resumeAd=function(){this.controller.resumeAd();}.bind(this);this.setAdBreakReadyListener=function(listener){this.controller.setAdBreakReadyListener(listener);}.bind(this);this.setContentWithAdTag=function(contentSrc,adTag,playOnLoad){this.controller.setContentWithAdTag(contentSrc,adTag,playOnLoad);}.bind(this);this.setContentWithAdsResponse=function(contentSrc,adsResponse,playOnLoad){this.controller.setContentWithAdsResponse(contentSrc,adsResponse,playOnLoad);}.bind(this);this.setShowCountdown=function(showCountdownIn){this.controller.setShowCountdown(showCountdownIn);}.bind(this);};var init=function init(options){this.ima=new ImaPlugin(this,options);};var registerPlugin=videojs.registerPlugin||videojs.plugin;registerPlugin('ima',init);})));




/********** https://www.aufeminin.com/reloaded/static/preconcat_%2Freloaded%2Fstatic%2FFront%2FVendor%2Fvideo-js%2Fplugins%2Fvideojs-contrib-ads%2F5.1.6%2Fvideojs-contrib-ads.js.202002281736.js**********/

/** https://www.aufeminin.com/reloaded/static/Front/Vendor/video-js/plugins/videojs-contrib-ads/5.1.6/videojs-contrib-ads.js?v=202002281736 **/
(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?module.exports=factory(require('video.js')):typeof define==='function'&&define.amd?define(['video.js'],factory):(global.videojsContribAds=factory(global.videojs));}(this,(function(videojs){'use strict';videojs=videojs&&videojs.hasOwnProperty('default')?videojs['default']:videojs;var commonjsGlobal=typeof window!=='undefined'?window:typeof global!=='undefined'?global:typeof self!=='undefined'?self:{};var win;if(typeof window!=="undefined"){win=window;}else if(typeof commonjsGlobal!=="undefined"){win=commonjsGlobal;}else if(typeof self!=="undefined"){win=self;}else{win={};}
var window_1=win;var cancelEvent=function cancelEvent(player,event){event.isImmediatePropagationStopped=function(){return true;};event.cancelBubble=true;event.isPropagationStopped=function(){return true;};};var prefixEvent=function prefixEvent(player,prefix,event){cancelEvent(player,event);player.trigger({type:prefix+event.type,state:player.ads.state,originalEvent:event});};var handlePlaying=function handlePlaying(player,event){if(player.ads.isInAdMode()){if(player.ads.isContentResuming()){if(player.ads._contentEnding){prefixEvent(player,'content',event);}}else if(player.ads._cancelledPlay){cancelEvent(player,event);}else{prefixEvent(player,'ad',event);}}};var handleEnded=function handleEnded(player,event){if(player.ads.isInAdMode()){if(player.ads.isContentResuming()){return;}
prefixEvent(player,'ad',event);}else{prefixEvent(player,'content',event);}};var handleLoadEvent=function handleLoadEvent(player,event){if(event.type==='loadstart'&&!player.ads._hasThereBeenALoadStartDuringPlayerLife||event.type==='loadeddata'&&!player.ads._hasThereBeenALoadedData||event.type==='loadedmetadata'&&!player.ads._hasThereBeenALoadedMetaData){return;}else if(player.ads.isAdPlaying()){prefixEvent(player,'ad',event);}else if(player.currentSrc()!==player.ads.contentSrc){return;}else{prefixEvent(player,'content',event);}};var handlePlay=function handlePlay(player,event){var resumingAfterNoPreroll=player.ads._cancelledPlay&&!player.ads.isInAdMode();if(player.ads.isAdPlaying()){prefixEvent(player,'ad',event);}else if(player.ads.isContentResuming()||resumingAfterNoPreroll){prefixEvent(player,'content',event);}};function redispatch(event){if(event.type==='playing'){handlePlaying(this,event);}else if(event.type==='ended'){handleEnded(this,event);}else if(event.type==='loadstart'||event.type==='loadeddata'||event.type==='loadedmetadata'){handleLoadEvent(this,event);}else if(event.type==='play'){handlePlay(this,event);}else if(this.ads.isInAdMode()){if(this.ads.isContentResuming()){prefixEvent(this,'content',event);}else{prefixEvent(this,'ad',event);}}}
function getPlayerSnapshot(player){var currentTime=void 0;if(videojs.browser.IS_IOS&&player.ads.isLive(player)){if(player.seekable().length>0){currentTime=player.currentTime()-player.seekable().end(0);}else{currentTime=player.currentTime();}}else{currentTime=player.currentTime();}
var tech=player.$('.vjs-tech');var tracks=player.textTracks?player.textTracks():[];var suppressedTracks=[];var snapshotObject={ended:player.ended(),currentSrc:player.currentSrc(),src:player.tech_.src(),currentTime:currentTime,type:player.currentType()};if(tech){snapshotObject.nativePoster=tech.poster;snapshotObject.style=tech.getAttribute('style');}
for(var i=0;i<tracks.length;i++){var track=tracks[i];suppressedTracks.push({track:track,mode:track.mode});track.mode='disabled';}
snapshotObject.suppressedTracks=suppressedTracks;return snapshotObject;}
function restorePlayerSnapshot(player,snapshotObject){if(player.ads.disableNextSnapshotRestore===true){player.ads.disableNextSnapshotRestore=false;return;}
var tech=player.$('.vjs-tech');var attempts=20;var suppressedTracks=snapshotObject.suppressedTracks;var trackSnapshot=void 0;var restoreTracks=function restoreTracks(){for(var i=0;i<suppressedTracks.length;i++){trackSnapshot=suppressedTracks[i];trackSnapshot.track.mode=trackSnapshot.mode;}};var resume=function resume(){var currentTime=void 0;if(videojs.browser.IS_IOS&&player.ads.isLive(player)){if(snapshotObject.currentTime<0){if(player.seekable().length>0){currentTime=player.seekable().end(0)+snapshotObject.currentTime;}else{currentTime=player.currentTime();}
player.currentTime(currentTime);}}else if(snapshotObject.ended){player.currentTime(player.duration());}else{player.currentTime(snapshotObject.currentTime);}
if(!snapshotObject.ended){player.play();}
if(player.ads.shouldRemoveAutoplay_){player.autoplay(false);player.ads.shouldRemoveAutoplay_=false;}};var tryToResume=function tryToResume(){player.off('contentcanplay',tryToResume);if(player.ads.tryToResumeTimeout_){player.clearTimeout(player.ads.tryToResumeTimeout_);player.ads.tryToResumeTimeout_=null;}
tech=player.el().querySelector('.vjs-tech');if(tech.readyState>1){return resume();}
if(tech.seekable===undefined){return resume();}
if(tech.seekable.length>0){return resume();}
if(attempts--){window_1.setTimeout(tryToResume,50);}else{try{resume();}catch(e){videojs.log.warn('Failed to resume the content after an advertisement',e);}}};if(snapshotObject.nativePoster){tech.poster=snapshotObject.nativePoster;}
if('style'in snapshotObject){tech.setAttribute('style',snapshotObject.style||'');}
if(player.ads.videoElementRecycled()){player.one('contentloadedmetadata',restoreTracks);if(videojs.browser.IS_IOS&&!player.autoplay()){player.autoplay(true);player.ads.shouldRemoveAutoplay_=true;}
player.src({src:snapshotObject.currentSrc,type:snapshotObject.type});player.one('contentcanplay',tryToResume);player.ads.tryToResumeTimeout_=player.setTimeout(tryToResume,2000);}else{restoreTracks();if(!player.ended()){player.play();}}}
function initializeContentupdate(player){player.ads.contentSrc=player.currentSrc();var checkSrc=function checkSrc(){if(player.ads.state!=='ad-playback'){var src=player.currentSrc();if(src!==player.ads.contentSrc){player.trigger({type:'contentupdate',oldValue:player.ads.contentSrc,newValue:src});player.ads.contentSrc=src;}}};player.on('loadstart',checkSrc);window_1.setTimeout(checkSrc,1);}
function cancelContentPlay(player){if(player.ads.cancelPlayTimeout){return;}
player.ads.cancelPlayTimeout=window_1.setTimeout(function(){player.ads.cancelPlayTimeout=null;if(!player.paused()){player.pause();}
player.ads._cancelledPlay=true;},1);}
var empty={};var empty$1=(Object.freeze||Object)({'default':empty});var minDoc=(empty$1&&empty)||empty$1;var topLevel=typeof commonjsGlobal!=='undefined'?commonjsGlobal:typeof window!=='undefined'?window:{};var doccy;if(typeof document!=='undefined'){doccy=document;}else{doccy=topLevel['__GLOBAL_DOCUMENT_CACHE@4'];if(!doccy){doccy=topLevel['__GLOBAL_DOCUMENT_CACHE@4']=minDoc;}}
var document_1=doccy;var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};var uriEncodeIfNeeded=function uriEncodeIfNeeded(value,uriEncode){if(uriEncode){return encodeURIComponent(value);}
return value;};var customFields=function customFields(mediainfo,macros,customFieldsName){if(mediainfo&&mediainfo[customFieldsName]){var fields=mediainfo[customFieldsName];var fieldNames=Object.keys(fields);for(var i=0;i<fieldNames.length;i++){var tag='{mediainfo.'+customFieldsName+'.'+fieldNames[i]+'}';macros[tag]=fields[fieldNames[i]];}}};function adMacroReplacement(string,uriEncode,customMacros){if(uriEncode===undefined){uriEncode=false;}
var macros={};if(customMacros!==undefined){macros=customMacros;}
macros['{player.id}']=this.options_['data-player'];macros['{mediainfo.id}']=this.mediainfo?this.mediainfo.id:'';macros['{mediainfo.name}']=this.mediainfo?this.mediainfo.name:'';macros['{mediainfo.description}']=this.mediainfo?this.mediainfo.description:'';macros['{mediainfo.tags}']=this.mediainfo?this.mediainfo.tags:'';macros['{mediainfo.reference_id}']=this.mediainfo?this.mediainfo.reference_id:'';macros['{mediainfo.duration}']=this.mediainfo?this.mediainfo.duration:'';macros['{mediainfo.ad_keys}']=this.mediainfo?this.mediainfo.ad_keys:'';macros['{player.duration}']=this.duration();macros['{timestamp}']=new Date().getTime();macros['{document.referrer}']=document_1.referrer;macros['{window.location.href}']=window_1.location.href;macros['{random}']=Math.floor(Math.random()*1000000000000);customFields(this.mediainfo,macros,'custom_fields');customFields(this.mediainfo,macros,'customFields');for(var i in macros){string=string.split(i).join(uriEncodeIfNeeded(macros[i],uriEncode));}
string=string.replace(/{pageVariable\.([^}]+)}/g,function(match,name){var value=void 0;var context=window_1;var names=name.split('.');for(var _i=0;_i<names.length;_i++){if(_i===names.length-1){value=context[names[_i]];}else{context=context[names[_i]];}}
var type=typeof value==='undefined'?'undefined':_typeof(value);if(value===null){return'null';}else if(value===undefined){videojs.log.warn('Page variable "'+name+'" not found');return'';}else if(type!=='string'&&type!=='number'&&type!=='boolean'){videojs.log.warn('Page variable "'+name+'" is not a supported type');return'';}
return uriEncodeIfNeeded(String(value),uriEncode);});return string;}
var cueTextTracks={};cueTextTracks.processMetadataTracks=function(player,processMetadataTrack){var tracks=player.textTracks();var setModeAndProcess=function setModeAndProcess(track){if(track.kind==='metadata'){player.ads.cueTextTracks.setMetadataTrackMode(track);processMetadataTrack(player,track);}};for(var i=0;i<tracks.length;i++){setModeAndProcess(tracks[i]);}
tracks.addEventListener('addtrack',function(event){setModeAndProcess(event.track);});};cueTextTracks.setMetadataTrackMode=function(track){return;};cueTextTracks.getSupportedAdCue=function(player,cue){return cue;};cueTextTracks.isSupportedAdCue=function(player,cue){return true;};cueTextTracks.getCueId=function(player,cue){return cue.id;};var cueAlreadySeen=function cueAlreadySeen(player,cueId){return cueId!==undefined&&player.ads.includedCues[cueId];};var setCueAlreadySeen=function setCueAlreadySeen(player,cueId){if(cueId!==undefined&&cueId!==''){player.ads.includedCues[cueId]=true;}};cueTextTracks.processAdTrack=function(player,cues,processCue,cancelAdsHandler){player.ads.includedCues={};for(var i=0;i<cues.length;i++){var cue=cues[i];var cueData=this.getSupportedAdCue(player,cue);if(!this.isSupportedAdCue(player,cue)){videojs.log.warn('Skipping as this is not a supported ad cue.',cue);return;}
var cueId=this.getCueId(player,cue);var startTime=cue.startTime;if(cueAlreadySeen(player,cueId)){videojs.log('Skipping ad already seen with ID '+cueId);return;}
if(cancelAdsHandler){cancelAdsHandler(player,cueData,cueId,startTime);}
processCue(player,cueData,cueId,startTime);setCueAlreadySeen(player,cueId);}};var VIDEO_EVENTS=videojs.getTech('Html5').Events;var removeNativePoster=function removeNativePoster(player){var tech=player.$('.vjs-tech');if(tech){tech.removeAttribute('poster');}};var defaults={timeout:5000,prerollTimeout:100,postrollTimeout:100,debug:false,stitchedAds:false};var contribAdsPlugin=function contribAdsPlugin(options){var player=this;var settings=videojs.mergeOptions(defaults,options);var videoEvents=VIDEO_EVENTS.concat(['firstplay','loadedalldata','playing']);player.on(videoEvents,redispatch);window_1.setTimeout(function(){if(!player.ads._hasThereBeenALoadStartDuringPlayerLife&&player.src()!==''){videojs.log.error('videojs-contrib-ads has not seen a loadstart event 5 seconds '+'after being initialized, but a source is present. This indicates that '+'videojs-contrib-ads was initialized too late. It must be initialized '+'immediately after video.js in the same tick. As a result, some ads will not '+'play and some media events will be incorrect. For more information, see '+'https://github.com/videojs/videojs-contrib-ads#important-note-about-initialization');}},5000);player.on('ended',function(){if(!player.hasClass('vjs-has-started')){player.addClass('vjs-has-started');}});player.on(['addurationchange','adcanplay'],function(){if(player.ads.snapshot&&player.currentSrc()===player.ads.snapshot.currentSrc){return;}
if(!player.ads.isAdPlaying()){return;}
player.play();});player.on('nopreroll',function(){player.ads.nopreroll_=true;});player.on('nopostroll',function(){player.ads.nopostroll_=true;});player.on(['ads-ad-started','playing'],function(){player.removeClass('vjs-ad-loading');});player.on('playing',function(){player.ads._cancelledPlay=false;});player.one('loadstart',function(){player.ads._hasThereBeenALoadStartDuringPlayerLife=true;});player.on('loadeddata',function(){player.ads._hasThereBeenALoadedData=true;});player.on('loadedmetadata',function(){player.ads._hasThereBeenALoadedMetaData=true;});player.ads={state:'content-set',disableNextSnapshotRestore:false,_contentEnding:false,_contentHasEnded:false,_hasThereBeenALoadStartDuringPlayerLife:false,_hasThereBeenALoadedData:false,_hasThereBeenALoadedMetaData:false,_inLinearAdMode:false,adType:null,VERSION:'__VERSION__',reset:function reset(){player.ads.disableNextSnapshotRestore=false;player.ads._contentEnding=false;player.ads._contentHasEnded=false;player.ads.snapshot=null;player.ads.adType=null;player.ads._hasThereBeenALoadedData=false;player.ads._hasThereBeenALoadedMetaData=false;player.ads._cancelledPlay=false;},startLinearAdMode:function startLinearAdMode(){if(player.ads.state==='preroll?'||player.ads.state==='content-playback'||player.ads.state==='postroll?'){player.ads._inLinearAdMode=true;player.trigger('adstart');}},endLinearAdMode:function endLinearAdMode(){if(player.ads.state==='ad-playback'){player.ads._inLinearAdMode=false;player.trigger('adend');player.removeClass('vjs-ad-loading');}},skipLinearAdMode:function skipLinearAdMode(){if(player.ads.state!=='ad-playback'){player.trigger('adskip');}},stitchedAds:function stitchedAds(arg){if(arg!==undefined){this._stitchedAds=!!arg;}
return this._stitchedAds;},videoElementRecycled:function videoElementRecycled(){if(player.ads.shouldPlayContentBehindAd(player)){return false;}
if(!this.snapshot){throw new Error('You cannot use videoElementRecycled while there is no snapshot.');}
var srcChanged=player.tech_.src()!==this.snapshot.src;var currentSrcChanged=player.currentSrc()!==this.snapshot.currentSrc;return srcChanged||currentSrcChanged;},isLive:function isLive(somePlayer){if(somePlayer.duration()===Infinity){return true;}else if(videojs.browser.IOS_VERSION==='8'&&somePlayer.duration()===0){return true;}
return false;},shouldPlayContentBehindAd:function shouldPlayContentBehindAd(somePlayer){return!videojs.browser.IS_IOS&&!videojs.browser.IS_ANDROID&&somePlayer.duration()===Infinity;},isInAdMode:function isInAdMode(){return player.ads.state==='ads-ready?'||player.ads.state==='preroll?'||player.ads.state==='ad-playback'||player.ads.state==='content-resuming';},isContentResuming:function isContentResuming(){return player.ads.state==='content-resuming';},isAdPlaying:function isAdPlaying(){return this._inLinearAdMode;}};player.ads.stitchedAds(settings.stitchedAds);player.ads.cueTextTracks=cueTextTracks;player.ads.adMacroReplacement=adMacroReplacement.bind(player);initializeContentupdate(player);player.on('contentupdate',player.ads.reset);var states={'content-set':{events:{adscanceled:function adscanceled(){this.state='content-playback';},adsready:function adsready(){this.state='ads-ready';},play:function play(){this.state='ads-ready?';cancelContentPlay(player);removeNativePoster(player);},adserror:function adserror(){this.state='content-playback';},adskip:function adskip(){this.state='content-playback';}}},'ads-ready':{events:{play:function play(){this.state='preroll?';cancelContentPlay(player);},adskip:function adskip(){this.state='content-playback';},adserror:function adserror(){this.state='content-playback';}}},'preroll?':{enter:function enter(){if(player.ads.nopreroll_){player.trigger('readyforpreroll');window_1.setTimeout(function(){player.trigger('nopreroll');},1);}else{player.addClass('vjs-ad-loading');player.ads.adTimeoutTimeout=window_1.setTimeout(function(){player.trigger('adtimeout');},settings.prerollTimeout);if(player.ads._hasThereBeenALoadStartDuringPlayerLife){player.trigger('readyforpreroll');}else{player.one('loadstart',function(){player.trigger('readyforpreroll');});}}},leave:function leave(){window_1.clearTimeout(player.ads.adTimeoutTimeout);},events:{play:function play(){cancelContentPlay(player);},adstart:function adstart(){this.state='ad-playback';player.ads.adType='preroll';},adskip:function adskip(){this.state='content-playback';},adtimeout:function adtimeout(){this.state='content-playback';},adserror:function adserror(){this.state='content-playback';},nopreroll:function nopreroll(){this.state='content-playback';}}},'ads-ready?':{enter:function enter(){player.addClass('vjs-ad-loading');player.ads.adTimeoutTimeout=window_1.setTimeout(function(){player.trigger('adtimeout');},settings.timeout);},leave:function leave(){window_1.clearTimeout(player.ads.adTimeoutTimeout);player.removeClass('vjs-ad-loading');},events:{play:function play(){cancelContentPlay(player);},adscanceled:function adscanceled(){this.state='content-playback';},adsready:function adsready(){this.state='preroll?';},adskip:function adskip(){this.state='content-playback';},adtimeout:function adtimeout(){this.state='content-playback';},adserror:function adserror(){this.state='content-playback';}}},'ad-playback':{enter:function enter(){if(!player.ads.shouldPlayContentBehindAd(player)){this.snapshot=getPlayerSnapshot(player);}
if(player.ads.shouldPlayContentBehindAd(player)){this.preAdVolume_=player.volume();player.volume(0);}
player.addClass('vjs-ad-playing');if(player.hasClass('vjs-live')){player.removeClass('vjs-live');}
removeNativePoster(player);if(player.ads.cancelPlayTimeout){window_1.setTimeout(function(){window_1.clearTimeout(player.ads.cancelPlayTimeout);player.ads.cancelPlayTimeout=null;},1);}},leave:function leave(){player.removeClass('vjs-ad-playing');if(player.ads.isLive(player)){player.addClass('vjs-live');}
if(!player.ads.shouldPlayContentBehindAd(player)){restorePlayerSnapshot(player,this.snapshot);}
if(player.ads.shouldPlayContentBehindAd(player)){player.volume(this.preAdVolume_);}},events:{adend:function adend(){this.state='content-resuming';player.ads.adType=null;},adserror:function adserror(){player.ads.endLinearAdMode();}}},'content-resuming':{enter:function enter(){if(this._contentHasEnded){window_1.clearTimeout(player.ads._fireEndedTimeout);player.ads._fireEndedTimeout=window_1.setTimeout(function(){player.trigger('ended');},1000);}},leave:function leave(){window_1.clearTimeout(player.ads._fireEndedTimeout);},events:{contentupdate:function contentupdate(){this.state='content-set';},contentresumed:function contentresumed(){this.state='content-playback';},playing:function playing(){this.state='content-playback';},ended:function ended(){this.state='content-playback';}}},'postroll?':{enter:function enter(){player.ads._contentEnding=true;if(player.ads.nopostroll_){window_1.setTimeout(function(){player.ads.state='content-resuming';player.trigger('ended');},1);}else{player.addClass('vjs-ad-loading');player.ads.adTimeoutTimeout=window_1.setTimeout(function(){player.trigger('adtimeout');},settings.postrollTimeout);}},leave:function leave(){window_1.clearTimeout(player.ads.adTimeoutTimeout);player.removeClass('vjs-ad-loading');},events:{adstart:function adstart(){this.state='ad-playback';player.ads.adType='postroll';},adskip:function adskip(){this.state='content-resuming';window_1.setTimeout(function(){player.trigger('ended');},1);},adtimeout:function adtimeout(){this.state='content-resuming';window_1.setTimeout(function(){player.trigger('ended');},1);},adserror:function adserror(){this.state='content-resuming';window_1.setTimeout(function(){player.trigger('ended');},1);},contentupdate:function contentupdate(){this.state='ads-ready?';}}},'content-playback':{enter:function enter(){if(player.ads.cancelPlayTimeout){window_1.clearTimeout(player.ads.cancelPlayTimeout);player.ads.cancelPlayTimeout=null;}
player.trigger({type:'contentplayback',triggerevent:player.ads.triggerevent});if(player.ads._cancelledPlay){if(player.paused()){player.play();}}},events:{adsready:function adsready(){player.trigger('readyforpreroll');},adstart:function adstart(){this.state='ad-playback';if(player.ads.adType!=='preroll'){player.ads.adType='midroll';}},contentupdate:function contentupdate(){if(player.paused()){this.state='content-set';}else{this.state='ads-ready?';}},contentended:function contentended(){if(this._contentHasEnded){this.state='content-resuming';return;}
this._contentEnding=false;this._contentHasEnded=true;this.state='postroll?';}}}};var processEvent=function processEvent(event){var state=player.ads.state;var eventHandlers=states[state].events;if(eventHandlers){var handler=eventHandlers[event.type];if(handler){handler.apply(player.ads);}}
if(state!==player.ads.state){var previousState=state;var newState=player.ads.state;player.ads.triggerevent=event.type;if(states[previousState].leave){states[previousState].leave.apply(player.ads);}
if(states[newState].enter){states[newState].enter.apply(player.ads);}
if(settings.debug){videojs.log('ads',player.ads.triggerevent+' triggered: '+previousState+' -> '+newState);}}};var shouldDisableTracks=function shouldDisableTracks(){return!player.ads.shouldPlayContentBehindAd(player)&&player.ads.isAdPlaying()&&player.tech_.featuresNativeTextTracks&&videojs.browser.IS_IOS&&!Array.isArray(player.textTracks());};var textTrackChangeHandler=function textTrackChangeHandler(){var textTrackList=player.textTracks();if(shouldDisableTracks()){for(var i=0;i<textTrackList.length;i++){var track=textTrackList[i];if(track.mode==='showing'){track.mode='disabled';}}}};player.ready(function(){player.textTracks().addEventListener('change',textTrackChangeHandler);});player.on(VIDEO_EVENTS.concat(['adtimeout','contentupdate','contentplaying','contentended','contentresumed','adstart','adend','adskip','adsready','adserror','adscanceled','nopreroll']),processEvent);player.on('dispose',function(){if(player.ads.adTimeoutTimeout){window_1.clearTimeout(player.ads.adTimeoutTimeout);}
if(player.ads._fireEndedTimeout){window_1.clearTimeout(player.ads._fireEndedTimeout);}
if(player.ads.cancelPlayTimeout){window_1.clearTimeout(player.ads.cancelPlayTimeout);}
if(player.ads.tryToResumeTimeout_){player.clearTimeout(player.ads.tryToResumeTimeout_);}
player.textTracks().removeEventListener('change',textTrackChangeHandler);});if(!player.paused()){processEvent({type:'play'});}};var registerPlugin=videojs.registerPlugin||videojs.plugin;registerPlugin('ads',contribAdsPlugin);return contribAdsPlugin;})));




/********** https://www.aufeminin.com/reloaded/static/preconcat_%2Freloaded%2Fstatic%2FFront%2FComponent%2FvideoPlayer%2FadPlayers%2Fima.js.202002281736.js**********/

/** https://www.aufeminin.com/reloaded/static/Front/Component/videoPlayer/adPlayers/ima.js?v=202002281736 **/
var AufVideo=AufVideo||{};AufVideo.IMA=(function(){var IMA_UNFILLED_ERROR_CODES={1009:'Empty VAST response.'};var _getAdData=function(data){try{var ad=data.getAd();var adId=ad.getAdId();var adSystem=ad.getAdSystem();var creativeId=ad.getCreativeId();var wrapperAdIds=ad.getWrapperAdIds().toString();var wrapperAdSystems=ad.getWrapperAdSystems().toString();var wrapperCreativeIds=ad.getWrapperCreativeIds().toString();return{adId:adId,adSystem:adSystem,creativeId:creativeId,wrapperAdIds:wrapperAdIds,wrapperAdSystems:wrapperAdSystems,wrapperCreativeIds:wrapperCreativeIds,};}catch(e){return;}};var adPlayer=function(opts){this.opts=opts||{};};adPlayer.prototype={constructor:adPlayer,onPlayerInit:function(player){if(!window.google||!player||!player.playerInstance||typeof player.playerInstance.ima!=='function'){this.publish('video.ad.setupError',{message:'no ima player'});return;}
if(!this.opts.adTagUrl){this.publish('video.ad.setupError',{message:'no ima tag url'});return;}
var that=this;var options={id:this.opts.id,adLabel:this.opts.adLabel,adWillAutoPlay:this.opts.adWillAutoPlay,adWillPlayMuted:this.opts.adWillPlayMuted,adsRenderingSettings:{enablePreloading:true,loadVideoTimeout:this.opts.loadVideoTimeout||10000},disableCustomPlaybackForIOS10Plus:true,disableFlashAds:true,prerollTimeout:5000,showCountdown:this.opts.showCountdown,vastLoadTimeout:15000,adsManagerLoadedCallback:function(){that.initIMAListeners();player.mute=that.mute;}};if(this.opts.language){options.locale=this.opts.language.toLowerCase();}
if(this.opts.numRedirects){options.numRedirects=this.opts.numRedirects;}
this.player=player;this.playerInstance=player.playerInstance;this.playerInstance.ima(options);if(player.isAutoplay()){if(!this.opts.noPrefetch){this.playerInstance.one('ready',function(){this.requestAds();}.bind(this));}}else{var startEvent='click';if(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i)){startEvent='touchend';}
this.playerInstance.one(startEvent,function(){this.playerInstance.ima.initializeAdDisplayContainer();this.requestAds();}.bind(this));}
this.initErrorsListeners();},initErrorsListeners:function(){var that=this;this.playerInstance.on('adserror',function(error){if(IMA_UNFILLED_ERROR_CODES[error.data.AdError.getErrorCode()]){that.publish('video.ad.unfilled');}else{that.publish('video.ad.error',{message:'['+error.data.AdError.getErrorCode()+'] '+error.data.AdError.getMessage()});}});},initIMAListeners:function(){var that=this;this.playerInstance.ima.addEventListener(google.ima.AdEvent.Type.LOADED,function(data){that.publish('video.ad.ready',{ad:_getAdData(data),videoBreak:that.getState(data),});});this.playerInstance.ima.addEventListener(google.ima.AdEvent.Type.STARTED,function(data){that.publish('video.ad.start',{ad:_getAdData(data),file:that.player.getFile(),videoBreak:that.getState(data),});});this.playerInstance.ima.addEventListener(google.ima.AdEvent.Type.COMPLETE,function(data){that.publish('video.ad.end',{ad:_getAdData(data),videoBreak:that.getState(data),});});this.playerInstance.ima.addEventListener(google.ima.AdEvent.Type.CLICK,function(data){that.publish('video.ad.click',{ad:_getAdData(data),videoBreak:that.getState(data),});});this.playerInstance.ima.addEventListener(google.ima.AdEvent.Type.IMPRESSION,function(data){that.publish('video.ad.impression',{ad:_getAdData(data),videoBreak:that.getState(data),});});this.playerInstance.ima.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(){that.publish('video.ad.contentresume');});},requestAdsDone:false,requestAds:function(){if(this.requestAdsDone){return;}
this.requestAdsDone=true;this.playerInstance.ima.setContentWithAdTag(null,this.getUpdatedAdTagUrl(),false);this.playerInstance.ima.requestAds();},getUpdatedAdTagUrl:function(){var custParamsKey='cust_params=';var custParamsIndex=this.opts.adTagUrl.indexOf(custParamsKey);if(custParamsIndex!==-1){var custParamsKeyPos=custParamsIndex+custParamsKey.length;this.opts.adTagUrl=this.opts.adTagUrl.substr(0,custParamsKeyPos)
+encodeURIComponent('playerheight='+(this.player.getHeight()||480)+'&')
+encodeURIComponent('playerwidth='+(this.player.getWidth()||640)+'&')
+this.opts.adTagUrl.substr(custParamsKeyPos);}
return this.opts.adTagUrl;},getState:function(data){switch(data.getAd().getAdPodInfo().getPodIndex()){case 0:return'preroll';case-1:return'postroll';default:return'midroll';}},mute:function(){if(!this.playerInstance.ima.controller.sdkImpl.isAdMuted()){this.playerInstance.ima.controller.adUi.muteDiv.click();}
if(!this.playerInstance.muted()){this.playerInstance.muted(true);}},publish:function(event,data){data=data||{};data.adPlayerName=this.opts.name;data.player=this.player;data.playerId=this.opts.id;PubSub.publish(event,data);}};return adPlayer;})();




/********** https://www.aufeminin.com/reloaded/static/preconcat_%2Freloaded%2Fstatic%2FFront%2FVendor%2Fima%2F3.367.1%2Fima3.js.202002281736.js**********/

/** https://www.aufeminin.com/reloaded/static/Front/Vendor/ima/3.367.1/ima3.js?v=202002281736 **/
!function(){var k,aa=function(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}},ba="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},ca=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis},da=ca(this),ea=function(){ea=function(){},da.Symbol||(da.Symbol=fa)},ha=function(t,e){this.g=t,ba(this,"description",{configurable:!0,writable:!0,value:e})};ha.prototype.toString=function(){return this.g};var fa=(n=0,function t(e){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new ha("jscomp_symbol_"+(e||"")+"_"+n++,e)}),ka=function(){ea();var t=da.Symbol.iterator;t=t||(da.Symbol.iterator=da.Symbol("Symbol.iterator")),"function"!=typeof Array.prototype[t]&&ba(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return ia(aa(this))}}),ka=function(){}},ia=function(t){return ka(),(t={next:t})[da.Symbol.iterator]=function(){return this},t},la=function(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:aa(t)}},ma=function(t){if(!(t instanceof Array)){t=la(t);for(var e,n=[];!(e=t.next()).done;)n.push(e.value);t=n}return t},na="function"==typeof Object.create?Object.create:function(t){function e(){}return e.prototype=t,new e},oa,n;if("function"==typeof Object.setPrototypeOf)oa=Object.setPrototypeOf;else{var pa;t:{var qa={Rd:!0},ra={};try{ra.__proto__=qa,pa=ra.Rd;break t}catch(t){}pa=!1}oa=pa?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var sa=oa,p=function(t,e){if(t.prototype=na(e.prototype),t.prototype.constructor=t,sa)sa(t,e);else for(var n in e)if("prototype"!=n)if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(e,n);i&&Object.defineProperty(t,n,i)}else t[n]=e[n];t.Wa=e.prototype},ta=function(t,e){if(e){var n=da;t=t.split(".");for(var i=0;i<t.length-1;i++){var o=t[i];o in n||(n[o]={}),n=n[o]}(e=e(i=n[t=t[t.length-1]]))!=i&&null!=e&&ba(n,t,{configurable:!0,writable:!0,value:e})}};ta("globalThis",function(t){return t||da}),ta("Array.prototype.find",function(t){return t||function(t,e){t:{var n=this;n instanceof String&&(n=String(n));for(var i=n.length,o=0;o<i;o++){var r=n[o];if(t.call(e,r,o,n)){t=r;break t}}t=void 0}return t}});var ua=function(t,e,n){if(null==t)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return t+""};ta("String.prototype.repeat",function(t){return t||function(t){var e=ua(this,null,"repeat");if(t<0||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var n="";t;)1&t&&(n+=e),(t>>>=1)&&(e+=e);return n}});var va=function(e,n){ka(),e instanceof String&&(e+="");var i=0,o={next:function(){if(i<e.length){var t=i++;return{value:n(t,e[t]),done:!1}}return o.next=function(){return{done:!0,value:void 0}},o.next()}};return o[Symbol.iterator]=function(){return o},o};ta("Array.prototype.keys",function(t){return t||function(){return va(this,function(t){return t})}}),ta("Array.prototype.values",function(t){return t||function(){return va(this,function(t,e){return e})}});var wa=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},xa="function"==typeof Object.assign?Object.assign:function(t,e){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var o in i)wa(i,o)&&(t[o]=i[o])}return t};ta("Object.assign",function(t){return t||xa}),ta("Object.is",function(t){return t||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}}),ta("Array.prototype.includes",function(t){return t||function(t,e){var n=this;n instanceof String&&(n=String(n));var i=n.length;for((e=e||0)<0&&(e=Math.max(e+i,0));e<i;e++){var o=n[e];if(o===t||Object.is(o,t))return!0}return!1}}),ta("String.prototype.includes",function(t){return t||function(t,e){return-1!==ua(this,t,"includes").indexOf(t,e||0)}}),ta("WeakMap",function(i){function n(){}function o(t){var e=typeof t;return"object"==e&&null!==t||"function"==e}function r(t){if(!wa(t,a)){var e=new n;ba(t,a,{value:e})}}function t(t){var e=Object[t];e&&(Object[t]=function(t){return t instanceof n?t:(r(t),e(t))})}if(function(){if(i&&Object.seal)try{var t=Object.seal({}),e=Object.seal({}),n=new i([[t,2],[e,3]]);return 2!=n.get(t)||3!=n.get(e)?void 0:(n.delete(t),n.set(e,4),!n.has(t)&&4==n.get(e))}catch(t){return}}())return i;var a="$jscomp_hidden_"+Math.random();t("freeze"),t("preventExtensions"),t("seal");function e(t){if(this.g=(s+=Math.random()+1).toString(),t){t=la(t);for(var e;!(e=t.next()).done;)e=e.value,this.set(e[0],e[1])}}var s=0;return e.prototype.set=function(t,e){if(!o(t))throw Error("Invalid WeakMap key");if(r(t),!wa(t,a))throw Error("WeakMap key fail: "+t);return t[a][this.g]=e,this},e.prototype.get=function(t){return o(t)&&wa(t,a)?t[a][this.g]:void 0},e.prototype.has=function(t){return o(t)&&wa(t,a)&&wa(t[a],this.g)},e.prototype.delete=function(t){return!!(o(t)&&wa(t,a)&&wa(t[a],this.g))&&delete t[a][this.g]},e}),ta("Map",function(o){if(function(){if(o&&"function"==typeof o&&o.prototype.entries&&"function"==typeof Object.seal)try{var t=Object.seal({x:4}),e=new o(la([[t,"s"]]));if("s"!=e.get(t)||1!=e.size||e.get({x:4})||e.set({x:4},"t")!=e||2!=e.size)return;var n=e.entries(),i=n.next();return i.done||i.value[0]!=t||"s"!=i.value[1]?void 0:!((i=n.next()).done||4!=i.value[0].x||"t"!=i.value[1]||!n.next().done)}catch(t){return}}())return o;ka();function t(t){if(this.h={},this.g=n(),this.size=0,t){t=la(t);for(var e;!(e=t.next()).done;)e=e.value,this.set(e[0],e[1])}}var r=new WeakMap;t.prototype.set=function(t,e){var n=i(this,t=0===t?0:t);return n.list||(n.list=this.h[n.id]=[]),n.ma?n.ma.value=e:(n.ma={next:this.g,Ha:this.g.Ha,head:this.g,key:t,value:e},n.list.push(n.ma),this.g.Ha.next=n.ma,this.g.Ha=n.ma,this.size++),this},t.prototype.delete=function(t){return!(!(t=i(this,t)).ma||!t.list)&&(t.list.splice(t.index,1),t.list.length||delete this.h[t.id],t.ma.Ha.next=t.ma.next,t.ma.next.Ha=t.ma.Ha,t.ma.head=null,this.size--,!0)},t.prototype.clear=function(){this.h={},this.g=this.g.Ha=n(),this.size=0},t.prototype.has=function(t){return!!i(this,t).ma},t.prototype.get=function(t){return(t=i(this,t).ma)&&t.value},t.prototype.entries=function(){return e(this,function(t){return[t.key,t.value]})},t.prototype.keys=function(){return e(this,function(t){return t.key})},t.prototype.values=function(){return e(this,function(t){return t.value})},t.prototype.forEach=function(t,e){for(var n,i=this.entries();!(n=i.next()).done;)n=n.value,t.call(e,n[1],n[0],this)},t.prototype[Symbol.iterator]=t.prototype.entries;var i=function(t,e){var n=e&&typeof e;"object"==n||"function"==n?r.has(e)?n=r.get(e):(n=""+ ++a,r.set(e,n)):n="p_"+e;var i=t.h[n];if(i&&wa(t.h,n))for(t=0;t<i.length;t++){var o=i[t];if(e!=e&&o.key!=o.key||e===o.key)return{id:n,list:i,index:t,ma:o}}return{id:n,list:i,index:-1,ma:void 0}},e=function(t,e){var n=t.g;return ia(function(){if(n){for(;n.head!=t.g;)n=n.Ha;if(n.next!=n.head)return n=n.next,{done:!1,value:e(n)};n=null}return{done:!0,value:void 0}})},n=function(){var t={};return t.Ha=t.next=t.head=t},a=0;return t}),ta("Promise",function(t){function e(){this.g=null}function s(e){return e instanceof u?e:new u(function(t){t(e)})}if(t)return t;e.prototype.h=function(t){if(null==this.g){this.g=[];var e=this;this.l(function(){e.w()})}this.g.push(t)};var n=da.setTimeout;e.prototype.l=function(t){n(t,0)},e.prototype.w=function(){for(;this.g&&this.g.length;){var t=this.g;this.g=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.o(t)}}}this.g=null},e.prototype.o=function(t){this.l(function(){throw t})};function u(t){this.h=0,this.l=void 0,this.g=[];var e=this.o();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}u.prototype.o=function(){function t(e){return function(t){i||(i=!0,e.call(n,t))}}var n=this,i=!1;return{resolve:t(this.D),reject:t(this.w)}},u.prototype.D=function(t){if(t===this)this.w(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof u)this.H(t);else{t:switch(typeof t){case"object":var e=null!=t;break t;case"function":e=!0;break t;default:e=!1}e?this.C(t):this.A(t)}},u.prototype.C=function(t){var e=void 0;try{e=t.then}catch(t){return void this.w(t)}"function"==typeof e?this.I(e,t):this.A(t)},u.prototype.w=function(t){this.F(2,t)},u.prototype.A=function(t){this.F(1,t)},u.prototype.F=function(t,e){if(0!=this.h)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.h);this.h=t,this.l=e,this.J()},u.prototype.J=function(){if(null!=this.g){for(var t=0;t<this.g.length;++t)o.h(this.g[t]);this.g=null}};var o=new e;return u.prototype.H=function(t){var e=this.o();t.Ab(e.resolve,e.reject)},u.prototype.I=function(t,e){var n=this.o();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},u.prototype.then=function(t,e){function n(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(t){o(t)}}:t}var i,o,r=new u(function(t,e){i=t,o=e});return this.Ab(n(t,i),n(e,o)),r},u.prototype.catch=function(t){return this.then(void 0,t)},u.prototype.Ab=function(t,e){function n(){switch(i.h){case 1:t(i.l);break;case 2:e(i.l);break;default:throw Error("Unexpected state: "+i.h)}}var i=this;null==this.g?o.h(n):this.g.push(n)},u.resolve=s,u.reject=function(n){return new u(function(t,e){e(n)})},u.race=function(o){return new u(function(t,e){for(var n=la(o),i=n.next();!i.done;i=n.next())s(i.value).Ab(t,e)})},u.all=function(t){var r=la(t),a=r.next();return a.done?s([]):new u(function(n,t){function e(e){return function(t){i[e]=t,0==--o&&n(i)}}for(var i=[],o=0;i.push(void 0),o++,s(a.value).Ab(e(i.length-1),t),!(a=r.next()).done;);})},u}),ta("Math.trunc",function(t){return t||function(t){if(t=Number(t),isNaN(t)||1/0===t||-1/0===t||0===t)return t;var e=Math.floor(Math.abs(t));return t<0?-e:e}}),ta("Array.prototype.fill",function(t){return t||function(t,e,n){var i=this.length||0;for(e<0&&(e=Math.max(0,i+e)),(null==n||i<n)&&(n=i),(n=Number(n))<0&&(n=Math.max(0,i+n)),e=Number(e||0);e<n;e++)this[e]=t;return this}}),ta("Array.from",function(t){return t||function(t,e,n){e=null!=e?e:function(t){return t};var i=[],o="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];if("function"==typeof o){t=o.call(t);for(var r=0;!(o=t.next()).done;)i.push(e.call(n,o.value,r++))}else for(o=t.length,r=0;r<o;r++)i.push(e.call(n,t[r],r));return i}}),ta("Object.entries",function(t){return t||function(t){var e,n=[];for(e in t)wa(t,e)&&n.push([e,t[e]]);return n}});var ya=ya||{},q=this||self,u=function(t,e,n){t=t.split("."),n=n||q,t[0]in n||void 0===n.execScript||n.execScript("var "+t[0]);for(var i;t.length&&(i=t.shift());)t.length||void 0===e?n=n[i]&&n[i]!==Object.prototype[i]?n[i]:n[i]={}:n[i]=e},Ca=function(){if(null===za){var t=q.document;(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&Ba.test(t)?za=t:za=""}return za},Ba=/^[\w+/_-]+[=]{0,2}$/,za=null,Da=function(t,e){t=t.split("."),e=e||q;for(var n=0;n<t.length;n++)if(null==(e=e[t[n]]))return null;return e},Ea=function(){},Fa=function(t){t.lc=void 0,t.B=function(){return t.lc?t.lc:t.lc=new t}},Ga=function(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e},Ha=function(t){return"array"==Ga(t)},Ia=function(t){var e=Ga(t);return"array"==e||"object"==e&&"number"==typeof t.length},v=function(t){return"function"==Ga(t)},Ja=function(t){var e=typeof t;return"object"==e&&null!=t||"function"==e},Ka="closure_uid_"+(1e9*Math.random()>>>0),La=0,Ma=function(t,e,n){return t.call.apply(t.bind,arguments)},Na=function(e,n,t){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,i),e.apply(n,t)}}return function(){return e.apply(n,arguments)}},Oa=function(t,e,n){return(Oa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ma:Na).apply(null,arguments)},Qa=function(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}},w=Date.now||function(){return+new Date},Ra=function(t,e){function n(){}n.prototype=e.prototype,t.Wa=e.prototype,t.prototype=new n,t.prototype.constructor=t},Sa,Ta=function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},x=function(t,e,n){for(var i=t.length,o="string"==typeof t?t.split(""):t,r=0;r<i;r++)r in o&&e.call(n,o[r],r,t)},Ua=function(t,e){for(var n="string"==typeof t?t.split(""):t,i=t.length-1;0<=i;--i)i in n&&e.call(void 0,n[i],i,t)},Va=function(t,e){for(var n=t.length,i=[],o=0,r="string"==typeof t?t.split(""):t,a=0;a<n;a++)if(a in r){var s=r[a];e.call(void 0,s,a,t)&&(i[o++]=s)}return i},Wa=function(t,e){for(var n=t.length,i=Array(n),o="string"==typeof t?t.split(""):t,r=0;r<n;r++)r in o&&(i[r]=e.call(void 0,o[r],r,t));return i},Xa=function(n,i,t){var o=t;return x(n,function(t,e){o=i.call(void 0,o,t,e,n)}),o},Ya=function(t,e){for(var n=t.length,i="string"==typeof t?t.split(""):t,o=0;o<n;o++)if(o in i&&e.call(void 0,i[o],o,t))return!0;return!1},$a=function(t,e){return(e=Za(t,e,void 0))<0?null:"string"==typeof t?t.charAt(e):t[e]},Za=function(t,e,n){for(var i=t.length,o="string"==typeof t?t.split(""):t,r=0;r<i;r++)if(r in o&&e.call(n,o[r],r,t))return r;return-1},ab=function(t,e){for(var n="string"==typeof t?t.split(""):t,i=t.length-1;0<=i;i--)if(i in n&&e.call(void 0,n[i],i,t))return i;return-1},bb=function(t,e){return 0<=Ta(t,e)},cb=function(t,e){var n;return(n=0<=(e=Ta(t,e)))&&Array.prototype.splice.call(t,e,1),n},db=function(n,i){Ua(n,function(t,e){i.call(void 0,t,e,n)&&1==Array.prototype.splice.call(n,e,1).length&&0})},eb=function(t){return Array.prototype.concat.apply([],arguments)},fb=function(t){var e=t.length;if(0<e){for(var n=Array(e),i=0;i<e;i++)n[i]=t[i];return n}return[]},gb=function(t){for(var e={},n=0,i=0;i<t.length;){var o=t[i++],r=o;r=Ja(r)?"o"+(Object.prototype.hasOwnProperty.call(r,Ka)&&r[Ka]||(r[Ka]=++La)):(typeof r).charAt(0)+r,Object.prototype.hasOwnProperty.call(e,r)||(e[r]=!0,t[n++]=o)}t.length=n},jb=function(t,e){t.sort(e||ib)},ib=function(t,e){return e<t?1:t<e?-1:0},kb=function(t){for(var e=[],n=0;n<t;n++)e[n]="";return e},lb=function(t,e){var n=t.length-e.length;return 0<=n&&t.indexOf(e,n)==n},nb=function(t){return /^[\s\xa0]*$/.test(t)},ob=String.prototype.trim?function(t){return t.trim()}:function(t){return /^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},wb=function(t,e){if(e)t=t.replace(pb,"&amp;").replace(qb,"&lt;").replace(rb,"&gt;").replace(sb,"&quot;").replace(tb,"&#39;").replace(ub,"&#0;");else{if(!vb.test(t))return t;-1!=t.indexOf("&")&&(t=t.replace(pb,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(qb,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(rb,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(sb,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(tb,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(ub,"&#0;"))}return t},pb=/&/g,qb=/</g,rb=/>/g,sb=/"/g,tb=/'/g,ub=/\x00/g,vb=/[\x00&<>"']/,y=function(t,e){return-1!=t.toLowerCase().indexOf(e.toLowerCase())},yb=function(t,e){var n=0;t=ob(String(t)).split("."),e=ob(String(e)).split(".");for(var i=Math.max(t.length,e.length),o=0;0==n&&o<i;o++){var r=t[o]||"",a=e[o]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==r[0].length&&0==a[0].length)break;n=xb(0==r[1].length?0:parseInt(r[1],10),0==a[1].length?0:parseInt(a[1],10))||xb(0==r[2].length,0==a[2].length)||xb(r[2],a[2]),r=r[3],a=a[3]}while(0==n)}return n},xb=function(t,e){return t<e?-1:e<t?1:0},zb;t:{var Ab=q.navigator;if(Ab){var Bb=Ab.userAgent;if(Bb){zb=Bb;break t}}zb=""}var C=function(t){return-1!=zb.indexOf(t)},Cb=function(t,e,n){for(var i in t)e.call(n,t[i],i,t)},Db=function(t,e){var n,i={};for(n in t)e.call(void 0,t[n],n,t)&&(i[n]=t[n]);return i},Fb=function(t){var e,n=Eb;for(e in n)if(t.call(void 0,n[e],e,n))return!0;return!1},Hb=function(t){var e,n=Gb;for(e in n)if(!t.call(void 0,n[e],e,n))return!1;return!0},Ib=function(t){var e,n=[],i=0;for(e in t)n[i++]=t[e];return n},Jb=function(t){var e,n=[],i=0;for(e in t)n[i++]=e;return n},Kb=function(t,e){var n=Ia(e),i=n?e:arguments;for(n=n?0:1;n<i.length;n++){if(null==t)return;t=t[i[n]]}return t},Lb=function(t,e){return null!==t&&e in t},Mb=function(t,e){for(var n in t)if(t[n]==e)return!0;return!1},Ob=function(t){var e,n=Nb;for(e in n)if(t.call(void 0,n[e],e,n))return e},Pb=function(t){for(var e in t)return!1;return!0},Qb=function(t){for(var e in t)delete t[e]},Rb=function(t,e,n){return null!==t&&e in t?t[e]:n},Sb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),Tb=function(t,e){for(var n,i,o=1;o<arguments.length;o++){for(n in i=arguments[o])t[n]=i[n];for(var r=0;r<Sb.length;r++)n=Sb[r],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}},Ub=function(){return C("Trident")||C("MSIE")},Vb=function(){return C("Firefox")||C("FxiOS")},Xb=function(){return C("Safari")&&!(Wb()||C("Coast")||C("Opera")||C("Edge")||C("Edg/")||C("OPR")||Vb()||C("Silk")||C("Android"))},Wb=function(){return(C("Chrome")||C("CriOS"))&&!C("Edge")},Yb=function(t){return function(){return t}},Zb=function(t){var e,n=!1;return function(){return n||(e=t(),n=!0),e}},$b=function(t){var e=t;return function(){if(e){var t=e;e=null,t()}}},ac=function(t){function e(){n=0,i&&(i=!1,r())}var n=0,i=!1,o=[],r=function(){n=q.setTimeout(e,1e3),t.apply(void 0,o)};return function(t){o=arguments,n?i=!0:r()}},fc=function(t,e){this.g=t===dc&&e||"",this.h=ec};fc.prototype.Ma=!0,fc.prototype.Da=function(){return this.g};var gc=function(t){return t instanceof fc&&t.constructor===fc&&t.h===ec?t.g:"type_error:Const"},hc=function(t){return new fc(dc,t)},ec={},dc={},kc=function(t,e){this.g=t===ic&&e||"",this.h=jc};kc.prototype.Ma=!0,kc.prototype.Da=function(){return this.g.toString()},kc.prototype.hc=!0,kc.prototype.cc=function(){return 1};var lc=function(t){return t instanceof kc&&t.constructor===kc&&t.h===jc?t.g:(Ga(t),"type_error:TrustedResourceUrl")},jc={},mc=function(t){return new kc(ic,t)},ic={},pc=function(t,e){this.g=t===nc&&e||"",this.h=oc};pc.prototype.Ma=!0,pc.prototype.Da=function(){return this.g.toString()},pc.prototype.hc=!0,pc.prototype.cc=function(){return 1};var qc=function(t){return t instanceof pc&&t.constructor===pc&&t.h===oc?t.g:(Ga(t),"type_error:SafeUrl")},rc=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,sc=function(t){return t instanceof pc?t:(t="object"==typeof t&&t.Ma?t.Da():String(t),rc.test(t)||(t="about:invalid#zClosurez"),new pc(nc,t))},oc={},nc={},uc=function(){this.g="",this.h=tc};uc.prototype.Ma=!0;var tc={};uc.prototype.Da=function(){return this.g};var vc=function(t){var e=new uc;return e.g=t,e},wc=vc(""),yc=function(){this.g="",this.l=xc,this.h=null};yc.prototype.hc=!0,yc.prototype.cc=function(){return this.h},yc.prototype.Ma=!0,yc.prototype.Da=function(){return this.g.toString()};var zc=function(t){return t instanceof yc&&t.constructor===yc&&t.l===xc?t.g:(Ga(t),"type_error:SafeHtml")},xc={},Ac=function(t,e){var n=new yc;return n.g=t,n.h=e,n};Ac("<!DOCTYPE html>",0),Ac("",0),Ac("<br>",0);var Bc=function(t,e){t.src=lc(e),(e=Ca())&&t.setAttribute("nonce",e)},Cc=function(t){return decodeURIComponent(t.replace(/\+/g," "))},Dc=function(t){return wb(t,void 0)},Ec=function(t,e){return t.length>e&&(t=t.substring(0,e-3)+"..."),t},Fc=String.prototype.repeat?function(t,e){return t.repeat(e)}:function(t,e){return Array(e+1).join(t)},Gc=function(t){return null==t?"":String(t)},Hc=2147483648*Math.random()|0,Ic=function(t){return String(t).replace(/\-([a-z])/g,function(t,e){return e.toUpperCase()})},Jc=function(){return"googleAvInapp".replace(/([A-Z])/g,"-$1").toLowerCase()},Kc=function(t){return t.replace(/(^|[\s]+)([a-z])/g,function(t,e,n){return e+n.toUpperCase()})},Lc=function(){return C("iPhone")&&!C("iPod")&&!C("iPad")},Mc=function(){return Lc()||C("iPad")||C("iPod")},Nc=function(t){return Nc[" "](t),t};Nc[" "]=Ea;var Oc=function(t,e){try{return Nc(t[e]),!0}catch(t){}return!1},Qc=function(t,e){var n=Pc;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)},Rc=C("Opera"),Sc=Ub(),Tc=C("Edge"),Uc=C("Gecko")&&!(y(zb,"WebKit")&&!C("Edge"))&&!(C("Trident")||C("MSIE"))&&!C("Edge"),Vc=y(zb,"WebKit")&&!C("Edge"),Wc=C("Macintosh"),Xc=C("Android"),Yc=Lc(),Zc=C("iPad"),$c=C("iPod"),ad=Mc(),bd=function(){var t=q.document;return t?t.documentMode:void 0},cd,qD;t:{var gd="",hd=(qD=zb,Uc?/rv:([^\);]+)(\)|;)/.exec(qD):Tc?/Edge\/([\d\.]+)/.exec(qD):Sc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(qD):Vc?/WebKit\/(\S+)/.exec(qD):Rc?/(?:Version)[ \/]?(\S+)/.exec(qD):void 0);if(hd&&(gd=hd?hd[1]:""),Sc){var id=bd();if(null!=id&&id>parseFloat(gd)){cd=String(id);break t}}cd=gd}var jd=cd,Pc={},kd=function(t){return Qc(t,function(){return 0<=yb(jd,t)})},ld;ld=q.document&&Sc?bd():void 0;var md=Vb(),nd=Lc()||C("iPod"),od=C("iPad"),pd=C("Android")&&!(Wb()||Vb()||C("Opera")||C("Silk")),qd=Wb(),rd=Xb()&&!Mc(),sd=function(t){return Wa(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")},td={},ud=null,vd=function(t,e){if(void 0===e&&(e=0),!ud){ud={};for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),i=["+/=","+/","-_=","-_.","-_"],o=0;o<5;o++){var r=n.concat(i[o].split(""));td[o]=r;for(var a=0;a<r.length;a++){var s=r[a];void 0===ud[s]&&(ud[s]=a)}}}for(e=td[e],n=[],i=0;i<t.length;i+=3){var u=t[i],h=(o=i+1<t.length)?t[i+1]:0;a=u>>2,u=(3&u)<<4|h>>4,h=(15&h)<<2|(s=(r=i+2<t.length)?t[i+2]:0)>>6,s&=63,r||(s=64,o||(h=64)),n.push(e[a],e[u],e[h]||"",e[s]||"")}return n.join("")},wd=0,xd=0,yd=function(){this.g=[]};yd.prototype.length=function(){return this.g.length},yd.prototype.end=function(){var t=this.g;return this.g=[],t};var zd=function(t,e){for(;127<e;)t.g.push(127&e|128),e>>>=7;t.g.push(e)},Ad=function(t,e){t.g.push(e>>>0&255),t.g.push(e>>>8&255),t.g.push(e>>>16&255),t.g.push(e>>>24&255)},Bd=function(){this.h=[],this.l=0,this.g=new yd};Bd.prototype.reset=function(){this.h=[],this.g.end(),this.l=0};var Cd=function(t,e,n){if(null!=n){zd(t.g,8*e),t=t.g;var i=n;for(n=i<0,e=(i=Math.abs(i))>>>0,i=Math.floor((i-e)/4294967296),i>>>=0,n&&(i=~i>>>0,4294967295<(e=1+(~e>>>0))&&(e=0,4294967295<++i&&(i=0))),n=wd=e,e=xd=i;0<e||127<n;)t.g.push(127&n|128),n=(n>>>7|e<<25)>>>0,e>>>=7;t.g.push(n)}};ea(),"undefined"!=typeof Symbol&&(ea(),ka());var Dd=function(){},Ed="function"==typeof Uint8Array,Jd=function(t,e,n,i){t.h=null,e=e||[],t.F=void 0,t.o=-1,t.g=e;t:{if(e=t.g.length){--e;var o=t.g[e];if(!(null===o||"object"!=typeof o||Ha(o)||Ed&&o instanceof Uint8Array)){t.w=e-t.o,t.l=o;break t}}t.w=Number.MAX_VALUE}if(t.A={},n)for(e=0;e<n.length;e++)(o=n[e])<t.w?(o+=t.o,t.g[o]=t.g[o]||Fd):(Gd(t),t.l[o]=t.l[o]||Fd);if(i&&i.length)for(e=0;e<i.length;e++){o=n=void 0;for(var r=t,a=i[e],s=0;s<a.length;s++){var u=a[s],h=Hd(r,u);null!=h&&(n=h,Id(r,o=u,void 0))}o&&Id(r,o,n)}},Fd=[],Gd=function(t){var e=t.w+t.o;t.g[e]||(t.l=t.g[e]={})},Hd=function(t,e){if(e<t.w){e+=t.o;var n=t.g[e];return n===Fd?t.g[e]=[]:n}if(t.l)return(n=t.l[e])===Fd?t.l[e]=[]:n},Kd=function(t,e){return null==(t=Hd(t,e))?0:t},Id=function(t,e,n){e<t.w?t.g[e+t.o]=n:(Gd(t),t.l[e]=n)},Ld=function(t,e,n){return 0!==n?Id(t,e,n):t.g[e+t.o]=null,t},Nd=function(t){if(t.h)for(var e in t.h){var n=t.h[e];if(Ha(n))for(var i=0;i<n.length;i++)n[i]&&Md(n[i]);else n&&Md(n)}},Md=function(t){return Nd(t),t.g};Dd.prototype.toString=function(){return Nd(this),this.g.toString()},Dd.prototype.clone=function(){return new this.constructor(Od(Md(this)))};var Od=function(t){if(Ha(t)){for(var e=Array(t.length),n=0;n<t.length;n++){var i=t[n];null!=i&&(e[n]="object"==typeof i?Od(i):i)}return e}if(Ed&&t instanceof Uint8Array)return new Uint8Array(t);for(n in e={},t)null!=(i=t[n])&&(e[n]="object"==typeof i?Od(i):i);return e},Pd=document,D=window,Rd=function(t){Jd(this,t,null,Qd)};Ra(Rd,Dd);var Sd=function(t){Jd(this,t,null,null)};Ra(Sd,Dd);var Qd=[[3,4,5]],Td=function(t){this.g=t||{cookie:""}};Td.prototype.set=function(t,e,n){var i=!1;if("object"==typeof n){var o=n.mh;i=n.oh||!1;var r=n.domain||void 0,a=n.path||void 0,s=n.ed}if(/[;=\s]/.test(t))throw Error('Invalid cookie name "'+t+'"');if(/[;\r\n]/.test(e))throw Error('Invalid cookie value "'+e+'"');void 0===s&&(s=-1),n=r?";domain="+r:"",a=a?";path="+a:"",i=i?";secure":"",s=s<0?"":0==s?";expires="+new Date(1970,1,1).toUTCString():";expires="+new Date(w()+1e3*s).toUTCString(),this.g.cookie=t+"="+e+n+a+s+i+(null!=o?";samesite="+o:"")},Td.prototype.get=function(t,e){for(var n,i=t+"=",o=(this.g.cookie||"").split(";"),r=0;r<o.length;r++){if(0==(n=ob(o[r])).lastIndexOf(i,0))return n.substr(i.length);if(n==t)return""}return e};var Ud=function(t,e){t.get(e),t.set(e,"",{ed:0,path:void 0,domain:void 0})};Td.prototype.ya=function(){return Vd(this).keys},Td.prototype.ga=function(){return Vd(this).values},Td.prototype.isEmpty=function(){return!this.g.cookie},Td.prototype.clear=function(){for(var t=Vd(this).keys,e=t.length-1;0<=e;e--)Ud(this,t[e])};var Vd=function(t){t=(t.g.cookie||"").split(";");for(var e,n,i=[],o=[],r=0;r<t.length;r++)-1==(e=(n=ob(t[r])).indexOf("="))?(i.push(""),o.push(n)):(i.push(n.substring(0,e)),o.push(n.substring(e+1)));return{keys:i,values:o}},Wd=new Td("undefined"==typeof document?null:document),Xd=function(t){return(t=new Td(t).get("DATA_USE_CONSENT",""))?t:null},Yd=function(t){var e=(e=new Td(t).get("FCCDCF",""))?e:null;try{var n=e?new Rd(e?JSON.parse(e):null):null}catch(t){n=null}return n?(n.h||(n.h={}),n.h[3]||(e=Hd(n,3))&&(n.h[3]=new Sd(e)),(n=n.h[3])&&null!=Hd(n,1)?(t=Hd(n,2),e=Date.now(),t?e<t||t+33696e6<e?null:Hd(n,1):null):Xd(t)):Xd(t)},$d=function(t){Jd(this,t,Zd,null)};Ra($d,Dd);var Zd=[1,2,3,4];try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(t){}var ae=!Sc||9<=Number(ld),be=Sc||Rc||Vc,ce=function(t,e){this.x=void 0!==t?t:0,this.y=void 0!==e?e:0};k=ce.prototype,k.clone=function(){return new ce(this.x,this.y)},k.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},k.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},k.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},k.scale=function(t,e){return this.x*=t,this.y*="number"==typeof e?e:t,this};var E=function(t,e){this.width=t,this.height=e};k=E.prototype,k.clone=function(){return new E(this.width,this.height)},k.aspectRatio=function(){return this.width/this.height},k.isEmpty=function(){return!(this.width*this.height)},k.ceil=function(){return this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},k.floor=function(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},k.round=function(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this},k.scale=function(t,e){return this.width*=t,this.height*="number"==typeof e?e:t,this};var fe=function(t){return t?new de(ee(t)):Sa=Sa||new de},ge=function(){var t=document;return t.querySelectorAll&&t.querySelector?t.querySelectorAll("SCRIPT"):t.getElementsByTagName("SCRIPT")},ie=function(n,t){Cb(t,function(t,e){t&&"object"==typeof t&&t.Ma&&(t=t.Da()),"style"==e?n.style.cssText=t:"class"==e?n.className=t:"for"==e?n.htmlFor=t:he.hasOwnProperty(e)?n.setAttribute(he[e],t):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?n.setAttribute(e,t):n[e]=t})},he={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},je=function(t){return t="CSS1Compat"==(t=t.document).compatMode?t.documentElement:t.body,new E(t.clientWidth,t.clientHeight)},ke=function(t){var e=t.scrollingElement?t.scrollingElement:(Vc||"CSS1Compat"!=t.compatMode)&&t.body||t.documentElement;return t=t.parentWindow||t.defaultView,Sc&&kd("10")&&t.pageYOffset!=e.scrollTop?new ce(e.scrollLeft,e.scrollTop):new ce(t.pageXOffset||e.scrollLeft,t.pageYOffset||e.scrollTop)},F=function(t){return t?t.parentWindow||t.defaultView:window},ne=function(t,e,n){var i=arguments,o=document,r=String(i[0]),a=i[1];if(!ae&&a&&(a.name||a.type)){if(r=["<",r],a.name&&r.push(' name="',Dc(a.name),'"'),a.type){r.push(' type="',Dc(a.type),'"');var s={};Tb(s,a),delete s.type,a=s}r.push(">"),r=r.join("")}return r=le(o,r),a&&("string"==typeof a?r.className=a:Ha(a)?r.className=a.join(" "):ie(r,a)),2<i.length&&me(o,r,i),r},me=function(e,n,t){function i(t){t&&n.appendChild("string"==typeof t?e.createTextNode(t):t)}for(var o=2;o<t.length;o++){var r=t[o];!Ia(r)||Ja(r)&&0<r.nodeType?i(r):x(oe(r)?fb(r):r,i)}},le=function(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)},pe=function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},qe=function(t){var e;return!be||Sc&&kd("9")&&!kd("10")&&q.SVGElement&&t instanceof q.SVGElement||!(e=t.parentElement)?(e=t.parentNode,Ja(e)&&1==e.nodeType?e:null):e},re=function(t,e){if(!t||!e)return!1;if(t.contains&&1==e.nodeType)return t==e||t.contains(e);if(void 0!==t.compareDocumentPosition)return t==e||!!(16&t.compareDocumentPosition(e));for(;e&&t!=e;)e=e.parentNode;return e==t},ee=function(t){return 9==t.nodeType?t:t.ownerDocument||t.document},se=function(t){try{return t.contentWindow||(t.contentDocument?F(t.contentDocument):null)}catch(t){}return null},oe=function(t){if(t&&"number"==typeof t.length){if(Ja(t))return"function"==typeof t.item||"string"==typeof t.item;if(v(t))return"function"==typeof t.item}return!1},te=function(t,e){t=t&&t.parentNode;for(;t;){if(e(t))return t;t=t.parentNode,0}return null},de=function(t){this.g=t||q.document||document};de.prototype.createElement=function(t){return le(this.g,t)},de.prototype.appendChild=function(t,e){t.appendChild(e)},de.prototype.contains=re;var ve=function(){return!ue()&&(C("iPod")||C("iPhone")||C("Android")||C("IEMobile"))},ue=function(){return C("iPad")||C("Android")&&!C("Mobile")||C("Silk")},we=Zb(function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});q.addEventListener("test",null,e)}catch(t){}return t});function xe(t){return!!t&&(t.passive&&we()?t:t.capture||!1)}var ye=function(t,e,n,i){return!!t.addEventListener&&(t.addEventListener(e,n,xe(i)),!0)},ze=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,xe(void 0))},Ae=function(t){var e=void 0===e?{}:e;if(v(window.CustomEvent))var n=new CustomEvent("rum_blp",e);else(n=document.createEvent("CustomEvent")).initCustomEvent("rum_blp",!!e.bubbles,!!e.cancelable,e.detail);t.dispatchEvent(n)},Ce=function(t){return Be(),mc(t)},Be=Ea,De=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/,Ee=function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),o=null;if(0<=i){var r=t[n].substring(0,i);o=t[n].substring(i+1)}else r=t[n];e(r,o?Cc(o):"")}}},Fe=/#|$/,Ge=function(t,e){var n=t.search(Fe);t:{for(var i=0,o=e.length;0<=(i=t.indexOf(e,i))&&i<n;){var r=t.charCodeAt(i-1);if((38==r||63==r)&&(!(r=t.charCodeAt(i+o))||61==r||38==r||35==r))break t;i+=o+1}i=-1}return i<0?null:(((o=t.indexOf("&",i))<0||n<o)&&(o=n),i+=e.length+1,Cc(t.substr(i,o-i)))},He=function(t){try{return!!t&&null!=t.location.href&&Oc(t,"foo")}catch(t){return!1}},Ie=function(t,e){if(t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.call(void 0,t[n],n,t)},Je=/https?:\/\/[^\/]+/,Ke=function(t){return(t=Je.exec(t))&&t[0]||""},Le=function(){var t=q,e=void 0===e||e;try{for(var n=null;n!=t;t=(n=t).parent)switch(t.location.protocol){case"https:":return!0;case"file:":return e;case"http:":return!1}}catch(t){}return!0},Ne=function(){var t=Me;if(!t)return"";try{var e=/.*[&#?]google_debug(=[^&]*)?(&.*)?$/.exec(decodeURIComponent(t));if(e)return e[1]&&1<e[1].length?e[1].substring(1):"true"}catch(t){}return""},Oe=function(t,e){try{return!(!t.frames||!t.frames[e])}catch(t){return!1}},Pe=function(t,e){for(var n=0;n<50;++n){if(Oe(t,e))return t;t:{try{var i=t.parent;if(i&&i!=t){var o=i;break t}}catch(t){}o=null}if(!(t=o))break}return null},Qe=function(t){var e=document;try{var n=Yd(e),i=n?new $d(n?JSON.parse(n):null):null}catch(t){i=null}if(!i)return 0;if(e=Hd(i,7))return 4;if(6048e5<w()-(Hd(i,5)||0))return 0;if(t){if(bb(Hd(i,3),t))return 2;if(bb(Hd(i,4),t))return 3}return 1},Re={Vg:1,jh:2,Lg:3},G=function(t,e,n,i){this.top=t,this.right=e,this.bottom=n,this.left=i},Se=function(t){return t.right-t.left},Te=function(t){return t.bottom-t.top};k=G.prototype,k.clone=function(){return new G(this.top,this.right,this.bottom,this.left)},k.contains=function(t){return!(!this||!t)&&(t instanceof G?t.left>=this.left&&t.right<=this.right&&t.top>=this.top&&t.bottom<=this.bottom:t.x>=this.left&&t.x<=this.right&&t.y>=this.top&&t.y<=this.bottom)},k.ceil=function(){return this.top=Math.ceil(this.top),this.right=Math.ceil(this.right),this.bottom=Math.ceil(this.bottom),this.left=Math.ceil(this.left),this},k.floor=function(){return this.top=Math.floor(this.top),this.right=Math.floor(this.right),this.bottom=Math.floor(this.bottom),this.left=Math.floor(this.left),this},k.round=function(){return this.top=Math.round(this.top),this.right=Math.round(this.right),this.bottom=Math.round(this.bottom),this.left=Math.round(this.left),this};var Ue=function(t,e,n){return e instanceof ce?(t.left+=e.x,t.right+=e.x,t.top+=e.y,t.bottom+=e.y):(t.left+=e,t.right+=e,"number"==typeof n&&(t.top+=n,t.bottom+=n)),t};G.prototype.scale=function(t,e){return e="number"==typeof e?e:t,this.left*=t,this.right*=t,this.top*=e,this.bottom*=e,this};var Ve=function(t,e,n,i){this.left=t,this.top=e,this.width=n,this.height=i};Ve.prototype.clone=function(){return new Ve(this.left,this.top,this.width,this.height)};var We=function(t){return new G(t.top,t.left+t.width,t.top+t.height,t.left)};k=Ve.prototype,k.contains=function(t){return t instanceof ce?t.x>=this.left&&t.x<=this.left+this.width&&t.y>=this.top&&t.y<=this.top+this.height:this.left<=t.left&&this.left+this.width>=t.left+t.width&&this.top<=t.top&&this.top+this.height>=t.top+t.height},k.ceil=function(){return this.left=Math.ceil(this.left),this.top=Math.ceil(this.top),this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},k.floor=function(){return this.left=Math.floor(this.left),this.top=Math.floor(this.top),this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},k.round=function(){return this.left=Math.round(this.left),this.top=Math.round(this.top),this.width=Math.round(this.width),this.height=Math.round(this.height),this},k.scale=function(t,e){return e="number"==typeof e?e:t,this.left*=t,this.width*=t,this.top*=e,this.height*=e,this};var Ye=function(t,e){if("string"==typeof e)(e=Xe(t,e))&&(t.style[e]=void 0);else for(var n in e){var i=t,o=e[n],r=Xe(i,n);r&&(i.style[r]=o)}},Ze={},Xe=function(t,e){var n=Ze[e];if(!n){var i=Ic(e);n=i,void 0===t.style[i]&&(i=(Vc?"Webkit":Uc?"Moz":Sc?"ms":Rc?"O":null)+Kc(i),void 0!==t.style[i]&&(n=i)),Ze[e]=n}return n},$e=function(t,e){var n=t.style[Ic(e)];return void 0!==n?n:t.style[Xe(t,e)]||""},af=function(t){try{var e=t.getBoundingClientRect()}catch(t){return{left:0,top:0,right:0,bottom:0}}return Sc&&t.ownerDocument.body&&(t=t.ownerDocument,e.left-=t.documentElement.clientLeft+t.body.clientLeft,e.top-=t.documentElement.clientTop+t.body.clientTop),e},bf=function(t){var e=ee(t),n=new ce(0,0),i=e?ee(e):document;return t==(i=!Sc||9<=Number(ld)||"CSS1Compat"==fe(i).g.compatMode?i.documentElement:i.body)||(t=af(t),e=ke(fe(e).g),n.x=t.left+e.x,n.y=t.top+e.y),n},cf=function(t,e){var n=new ce(0,0),i=F(ee(t));if(!Oc(i,"parent"))return n;do{if(i==e)var o=bf(t);else o=af(t),o=new ce(o.left,o.top);n.x+=o.x,n.y+=o.y}while(i&&i!=e&&i!=i.parent&&(t=i.frameElement)&&(i=i.parent));return n},df=function(t){var e=t.offsetWidth,n=t.offsetHeight;return(void 0===e||Vc&&!e&&!n)&&t.getBoundingClientRect?(t=af(t),new E(t.right-t.left,t.bottom-t.top)):new E(e,n)},ef=function(t){var e=(t=void 0===t?q:t).context||t.AMP_CONTEXT_DATA;if(!e)try{e=t.parent.context||t.parent.AMP_CONTEXT_DATA}catch(t){}try{if(e&&e.pageViewId&&e.canonicalUrl)return e}catch(t){}return null},ff=function(t,e){t.google_image_requests||(t.google_image_requests=[]);var n=t.document.createElement("img");n.src=e,t.google_image_requests.push(n)},gf=/^((market|itms|intent|itms-appss):\/\/)/i,hf=!!window.google_async_iframe_id,jf=hf&&window.parent||window,kf=function(){if(hf&&!He(jf)){var t="."+Pd.domain;try{for(;2<t.split(".").length&&!He(jf);)Pd.domain=t=t.substr(t.indexOf(".")+1),jf=window.parent}catch(t){}He(jf)||(jf=window)}return jf};mc(gc(hc("//fonts.googleapis.com/css")));var lf=function(t,e,n){n=void 0===n?{}:n,this.error=t,this.context=e.context,this.msg=e.message||"",this.id=e.id||"jserror",this.meta=n},mf=function(t){return!!(t.error&&t.meta&&t.id)},nf=/^https?:\/\/(\w|-)+\.cdn\.ampproject\.(net|org)(\?|\/|$)/,rf=function(t){t=t||of();for(var e=new pf(q.location.href,q,!1),n=null,i=t.length-1,o=i;0<=o;--o){var r=t[o];if(!n&&nf.test(r.url)&&(n=r),r.url&&!r.qc){e=r;break}}return o=null,r=t.length&&t[i].url,0!=e.depth&&r&&(o=t[i]),new qf(e,o,n)},of=function(){var e=q,t=[],n=null;do{var i=e;if(He(i)){var o=i.location.href;n=i.document&&i.document.referrer||null}else o=n,n=null;t.push(new pf(o||"",i));try{e=i.parent}catch(t){e=null}}while(e&&i!=e);for(i=0,e=t.length-1;i<=e;++i)t[i].depth=e-i;if((i=q).location&&i.location.ancestorOrigins&&i.location.ancestorOrigins.length==t.length-1)for(e=1;e<t.length;++e)(o=t[e]).url||(o.url=i.location.ancestorOrigins[e-1]||"",o.qc=!0);return t},qf=function(t,e,n){this.g=t,this.h=e,this.l=n},pf=function(t,e,n){this.url=t,this.ka=e,this.qc=!!n,this.depth=null},sf=function(){this.h="&",this.o=!1,this.l={},this.w=0,this.g=[]},tf=function(t,e){var n={};return n[t]=e,[n]},vf=function(t,n,i,o,r){var a=[];return Ie(t,function(t,e){(t=uf(t,n,i,o,r))&&a.push(e+"="+t)}),a.join(n)},uf=function(t,e,n,i,o){if(null==t)return"";if(e=e||"&","string"==typeof(n=n||",$")&&(n=n.split("")),t instanceof Array){if((i=i||0)<n.length){for(var r=[],a=0;a<t.length;a++)r.push(uf(t[a],e,n,i+1,o));return r.join(n[i])}}else if("object"==typeof t)return(o=o||0)<2?encodeURIComponent(vf(t,e,n,i,o+1)):"...";return encodeURIComponent(String(t))},wf=function(t,e,n){t.g.push(e),t.l[e]=n},xf=function(t,e,n,i){t.g.push(e),t.l[e]=tf(n,i)},zf=function(t,e,n){e=e+"//pagead2.googlesyndication.com"+n;var i=yf(t)-n.length;if(i<0)return"";t.g.sort(function(t,e){return t-e}),n=null;for(var o="",r=0;r<t.g.length;r++)for(var a=t.g[r],s=t.l[a],u=0;u<s.length;u++){if(!i){n=null==n?a:n;break}var h=vf(s[u],t.h,",$");if(h){if(i>=(h=o+h).length){i-=h.length,e+=h,o=t.h;break}t.o&&(h[(o=i)-1]==t.h&&--o,e+=h.substr(0,o),o=t.h,i=0),n=null==n?a:n}}return t="",null!=n&&(t=o+"trn="+n),e+t+""},yf=function(t){var e,n=1;for(e in t.l)n=e.length>n?e.length:n;return 3997-n-t.h.length-1},Af=function(){var t=void 0===t?D:t;this.h="http:"===t.location.protocol?"http:":"https:",this.g=Math.random()},Df=function(){var t=Bf,e=Cf.google_srt;0<=e&&e<=1&&(t.g=e)},Ef=function(t,e,n,i,o){if((i?t.g:Math.random())<(o||.01))try{if(n instanceof sf)var r=n;else r=new sf,Ie(n,function(t,e){var n=r,i=n.w++;wf(n,i,tf(e,t))});var a=zf(r,t.h,"/pagead/gen_204?id="+e+"&");a&&ff(q,a)}catch(t){}},Ff=null,Gf=function(){var t=q.performance;return t&&t.now&&t.timing?Math.floor(t.now()+t.timing.navigationStart):w()},Hf=function(){var t=void 0===t?q:t;return(t=t.performance)&&t.now?t.now():null},If=function(t){var e=q.performance;return e&&e.timing&&e.timing[t]||0},Jf=function(){var t=Math.min(If("domLoading")||1/0,If("domInteractive")||1/0);return 1/0==t?Math.max(If("responseEnd"),If("navigationStart")):t},Kf=function(t,e,n,i,o){this.label=t,this.type=e,this.value=n,this.duration=void 0===i?0:i,this.uniqueId=Math.random(),this.slotId=o},Lf=q.performance,Mf=!!(Lf&&Lf.mark&&Lf.measure&&Lf.clearMarks),Nf=Zb(function(){var e;if(e=Mf){var t;if(null===Ff){Ff="";try{e="";try{e=q.top.location.hash}catch(t){e=q.location.hash}e&&(Ff=(t=e.match(/\bdeid=([\d,]+)/))?t[1]:"")}catch(t){}}e=!!(t=Ff).indexOf&&0<=t.indexOf("1337")}return e}),Of=function(t,e){this.events=[],this.g=e||q;var n=null;e&&(e.google_js_reporting_queue=e.google_js_reporting_queue||[],this.events=e.google_js_reporting_queue,n=e.google_measure_js_timing),this.h=Nf()||(null!=n?n:Math.random()<t)};Of.prototype.F=function(){this.h=!1,this.events!=this.g.google_js_reporting_queue&&(Nf()&&x(this.events,Pf),this.events.length=0)},Of.prototype.J=function(t){!this.h||2048<this.events.length||this.events.push(t)};var Pf=function(t){t&&Lf&&Nf()&&(Lf.clearMarks("goog_"+t.label+"_"+t.uniqueId+"_start"),Lf.clearMarks("goog_"+t.label+"_"+t.uniqueId+"_end"))};Of.prototype.start=function(t,e){if(!this.h)return null;var n=Hf()||Gf();return e="goog_"+(t=new Kf(t,e,n)).label+"_"+t.uniqueId+"_start",Lf&&Nf()&&Lf.mark(e),t},Of.prototype.end=function(t){if(this.h&&"number"==typeof t.value){var e=Hf()||Gf();t.duration=e-t.value,e="goog_"+t.label+"_"+t.uniqueId+"_end",Lf&&Nf()&&Lf.mark(e),this.J(t)}};var Rf=function(){var t=Qf;this.l=Bf,this.A="jserror",this.o=!0,this.h=null,this.F=this.Ga,this.g=void 0===t?null:t,this.w=!1};k=Rf.prototype,k.pinger=function(){return this.l},k.Vb=function(t){this.h=t},k.Lc=function(t){this.A=t},k.Mc=function(t){this.o=t},k.Nc=function(t){this.w=t},k.Va=function(e,n,i){try{if(this.g&&this.g.h){var o=this.g.start(e.toString(),3),t=n();this.g.end(o)}else t=n()}catch(t){n=this.o;try{Pf(o);var r=new lf(t,{message:Sf(t)});n=this.F(e,r,void 0,i)}catch(t){this.Ga(217,t)}if(!n)throw t}return t},k.Ic=function(i,o,r,a){var s=this;return function(t){for(var e=[],n=0;n<arguments.length;++n)e[+n]=arguments[n];return s.Va(i,function(){return o.apply(r,e)},a)}},k.Ga=function(e,t,n,i,o){o=o||this.A;try{var r=new sf;r.o=!0,xf(r,1,"context",e),mf(t)||(t=new lf(t,{message:Sf(t)})),t.msg&&xf(r,2,"msg",t.msg.substring(0,512));var a=t.meta||{};if(this.h)try{this.h(a)}catch(t){}if(i)try{i(a)}catch(t){}wf(r,3,[a]);var s=rf();s.h&&xf(r,4,"top",s.h.url||""),xf(r,5,"url",s.g.url||""),Ef(this.l,o,r,this.w,n)}catch(t){try{Ef(this.l,o,{context:"ecmserr",rctx:e,msg:Sf(t),url:s&&s.g.url},this.w,n)}catch(t){}}return this.o};var Sf=function(t){var e=t.toString();if(t.name&&-1==e.indexOf(t.name)&&(e+=": "+t.name),t.message&&-1==e.indexOf(t.message)&&(e+=": "+t.message),t.stack){t=t.stack;var n=e;try{-1==t.indexOf(n)&&(t=n+"\n"+t);for(var i;t!=i;)t=(i=t).replace(/((https?:\/..*\/)[^\/:]*:\d+(?:.|\n)*)\2/,"$1");e=t.replace(/\n */g,"\n")}catch(t){e=n}}return e},Tf=function(){this.h="jserror",this.l=!1,this.g=null,this.o=!1,this.A=Math.random(),this.w=this.Ga};k=Tf.prototype,k.Lc=function(t){this.h=t},k.Vb=function(t){this.g=t},k.Mc=function(t){this.l=t},k.Nc=function(t){this.o=t},k.Ga=function(t,e,n,i,o){return o=void 0===o?this.h:o,(this.o?this.A:Math.random())>(void 0===n?.01:n)||(mf(e)||(e=new lf(e,{context:t,id:o})),(i||this.g)&&(e.meta={},this.g&&this.g(e.meta),i&&i(e.meta)),q.google_js_errors=q.google_js_errors||[],q.google_js_errors.push(e),q.error_rep_loaded||(t=(e=q.document).createElement("script"),Bc(t,Ce(q.location.protocol+"//pagead2.googlesyndication.com/pagead/js/err_rep.js")),(e=e.getElementsByTagName("script")[0])&&e.parentNode&&e.parentNode.insertBefore(t,e),q.error_rep_loaded=!0)),this.l},k.Va=function(e,t,n){try{var i=t()}catch(t){if(!this.w(e,t,.01,n,this.h))throw t}return i},k.Ic=function(i,o,r,a){var s=this;return function(t){for(var e=[],n=0;n<arguments.length;++n)e[+n]=arguments[n];return s.Va(i,function(){return o.apply(r,e)},a)}};var Bf,Uf,Vf,Cf=kf(),Qf=new Of(1,Cf);!function(){Bf=new Af,"number"!=typeof Cf.google_srt&&(Cf.google_srt=Math.random()),Df(),(Uf=new Rf).Vb(function(t){var e=D.jerExpIds;if(Ha(e)&&0!==e.length){var n=t.eid;n&&(e=[].concat(ma(n.split(",")),ma(e)),gb(e)),t.eid=e.join(",")}Vf&&(t.jc=Vf),(e=D.jerUserAgent)&&(t.useragent=e)}),Uf.Nc(!0),"complete"==Cf.document.readyState?Cf.google_measure_js_timing||Qf.F():Qf.h&&ye(Cf,"load",function(){Cf.google_measure_js_timing||Qf.F()});var t=Pd.currentScript;Vf=t?t.dataset.jc:""}();var Wf=function(t){for(var e=0,n=t,i=0;t&&t!=t.parent;)t=t.parent,i++,He(t)&&(n=t,e=i);return{ka:n,level:e}},Xf=function(){this.S={}},$f=function(){if(Yf)var t=Yf;else{var e=(t=((t=ef())&&He(t.master)?t.master:null)||kf()).google_persistent_state_async;t=null!=e&&"object"==typeof e&&null!=e.S&&"object"==typeof e.S?Yf=e:t.google_persistent_state_async=Yf=new Xf}e=kf();var n=ef(e);e=n?((n=n||ef())?(e=n.pageViewId,"string"==typeof(n=n.clientId)&&(e+=n.replace(/\D/g,"").substr(0,6))):e=null,+e):((n=(e=Wf(e).ka).google_global_correlator)||(e.google_global_correlator=n=1+Math.floor(Math.random()*Math.pow(2,43))),n),n=Zf[7]||"google_ps_7";var i=(t=t.S)[n];return t=void 0===i?t[n]=e:i},Yf=null,ag={},Zf=(ag[8]="google_prev_ad_formats_by_region",ag[9]="google_prev_ad_slotnames_by_region",ag),dg=function(t){var e=[];return bg(new cg,t,e),e.join("")},cg=function(){},bg=function(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Ha(e)){var i=e;e=i.length,n.push("[");for(var o="",r=0;r<e;r++)n.push(o),bg(t,i[r],n),o=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(i in n.push("{"),o="",e)Object.prototype.hasOwnProperty.call(e,i)&&("function"!=typeof(r=e[i])&&(n.push(o),eg(i,n),n.push(":"),bg(t,r,n),o=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":eg(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}},fg={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},gg=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g,eg=function(t,e){e.push('"',t.replace(gg,function(t){var e=fg[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),fg[t]=e),e}),'"')},hg=function(){this.g=null,this.h="missing-id"},jg=function(e){var t=null;try{t=document.getElementsByClassName("lima-exp-data")}catch(t){return ig("missing-element",e.h),e.g="",null}return 1<t.length?(ig("multiple-elements",e.h),e.g="",null):(t=t[0])?t.innerHTML:(ig("missing-element",e.h),e.g="",null)},lg=function(){var t=kg,e=jg(t);if(null!==e)if(!/^\s*$/.test(e)&&/^[\],:{}\s\u2028\u2029]*$/.test(e.replace(/\\["\\\/bfnrtu]/g,"@").replace(/(?:"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)[\s\u2028\u2029]*(?=:|,|]|}|$)/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,""))){var n=JSON.parse(e);e=n.experimentFlags;var i="string"==typeof(n=n.binaryIdentifier);i&&(t.h=n),"string"!=typeof e?(ig("missing-flags",t.h),t.g=""):(i||ig("missing-binary-id",t.h),t.g=e)}else ig("invalid-json",t.h),t.g=""};hg.prototype.reset=function(){this.g=null,this.h="missing-id"};var mg=function(t,e,n){this.id=t,this.G=e,this.g=n,this.Ub=!1},ng=function(t){return t.Ub||t.g},og=function(){this.g=[]},pg=function(){this.g=new Map,this.h=!1,this.o=new og,this.w=new mg(0,0,!1),this.l=[this.o]},H=function(t){var e=qg;if(e.h||e.g.has(t.id)||null==t.G&&null==t.control||0==t.Yc)return e.w;var n=e.o;if(null!=t.control){for(var i=la(e.l),o=i.next();!o.done;o=i.next())if((o=o.value).g.includes(t.control)){n=o;break}}else null!=t.va&&(n=t.va);return i=0,null!=t.control?i=t.control.G:null!=t.G&&(i=t.G),t=new mg(t.id,i,!!t.lh),n.g.push(t),e.l.includes(n)||e.l.push(n),e.g.set(t.id,t),t},rg=function(){var t=qg;return[].concat(ma(t.g.keys())).filter(function(t){return ng(this.g.get(t))},t)},sg=function(t){var e=qg;e.h||(t.g(e.l,e.g),e.h=!0)};pg.prototype.reset=function(){for(var t=la(this.g),e=t.next();!e.done;e=t.next())(e=la(e.value)).next(),e.next().value.Ub=!1;this.h=!1};var qg=new pg,ug=function(){return tg.g.filter(function(t){return ng(t)}).map(function(t){return t.id})},vg=function(){};vg.prototype.g=function(t){for(var e=(t=la(t)).next();!e.done;e=t.next())for(var n=0,i=Math.floor(1e3*Math.random()),o=(e=la(e.value.g)).next();!o.done;o=e.next())if(i<(n+=(o=o.value).G)){o.Ub=!0;break}};var wg=function(t){this.h=t};wg.prototype.g=function(t,e){for(var n=(t=la(this.h)).next();!n.done;n=t.next())(n=e.get(n.value))&&(n.Ub=!0)};var xg=function(t){return{visible:1,hidden:2,prerender:3,preview:4,unloaded:5}[t.visibilityState||t.webkitVisibilityState||t.mozVisibilityState||""]||0},yg=function(t){var e;return t.visibilityState?e="visibilitychange":t.mozVisibilityState?e="mozvisibilitychange":t.webkitVisibilityState&&(e="webkitvisibilitychange"),e},zg=function(t){return(t=t._google_rum_ns_=t._google_rum_ns_||{}).pq=t.pq||[]},Ag=function(i,t,o){return Ie(t,function(t,e){var n=o&&o[e];!t&&0!==t||n||(i+="&"+encodeURIComponent(e)+"="+encodeURIComponent(String(t)),o&&(o[e]=!0))}),i},Hg=function(t,e,n,i,o,r,a,s){r=void 0===r?1/0:r,a=void 0!==a&&a,Of.call(this,t,s);var u=this;this.C=0,this.K=r,this.$=e,this.L=n,this.Z=i,this.aa=o,t=this.g.navigator,this.W=!("csi.gstatic.com"!==this.L||!t||!t.sendBeacon),this.w={},this.I={},this.g.performance&&this.g.performance.now||Bg(this,"dat",1),t&&t.deviceMemory&&Bg(this,"dmc",t.deviceMemory),this.P=!a,this.M=function(){u.g.setTimeout(function(){return Cg(u)},1100)},this.pa=[],this.X=function(){Dg(u,1)},this.O=function(){Dg(u,2)},this.la=ac(function(){Cg(u)}),this.sa=function(){var t=u.g.document;(null!=t.hidden?t.hidden:null!=t.mozHidden?t.mozHidden:null!=t.webkitHidden&&t.webkitHidden)&&u.la()},this.D=this.g.setTimeout(function(){return Cg(u)},5e3),this.A={},this.o=e.length+n.length+i.length+o.length+3,this.l=0,x(this.events,function(t){return Eg(u,t)}),this.H=[],e=zg(this.g);function h(t){var e=t[0];t=t[1];var n=e.length+t.length+2;return 8e3<u.o+u.l+n&&Cg(u),u.H.push([e,t]),u.l+=n,6e3<=u.o+u.l&&Cg(u),0}x(e,function(t){return h(t)}),e.length=0,e.push=h,Fg(this),Gg(this)};p(Hg,Of);var Gg=function(t){"complete"===t.g.document.readyState?t.g.setTimeout(function(){return Cg(t)},0):ye(t.g,"load",t.M);var e=yg(t.g.document);void 0!==e&&ye(t.g,e,t.sa),ye(t.g,"unload",t.X),ye(t.g,"pagehide",t.O)},Bg=function(t,e,n){n=String(n),t.o=null!=t.w[e]?t.o+(n.length-t.w[e].length):t.o+(e.length+n.length+2),t.w[e]=n},Ig=function(t){null!=t.w.uet&&(t.o-=3+t.w.uet.length+2,delete t.w.uet)},Jg=function(t,e,n,i,o){o=void 0===o?"":o;var r=null==t.A[e]?e.length+n.length+2:i?n.length+o.length:n.length-t.A[e].length;8e3<t.o+t.l+r&&(Cg(t),r=e.length+n.length+2),t.A[e]=i&&null!=t.A[e]?t.A[e]+""+o+n:n,t.l+=r,6e3<=t.o+t.l&&Cg(t)},Cg=function(e){if(e.h&&e.P){try{if(e.l){var t=e.A;e.C++;var n=Kg(e,t);t=!1;try{t=!!(e.W&&e.g.navigator&&e.g.navigator.sendBeacon(n,null))}catch(t){e.W=!1}t||ff(e.g,n),Fg(e),e.C===e.K&&e.F()}}catch(t){(new Tf).Ga(358,t)}e.A={},e.l=0,e.events.length=0,e.g.clearTimeout(e.D),e.D=0}},Kg=function(t,e){var i=t.$+"//"+t.L+t.Z+t.aa,n={};return i=Ag(i,t.w,n),i=Ag(i,e,n),t.g.google_timing_params&&(i=Ag(i,t.g.google_timing_params,n),t.g.google_timing_params=void 0),x(t.H,function(t){var e=la(t);t=e.next().value,e=e.next().value;var n={};i=Ag(i,(n[t]=e,n))}),t.H.length=0,i},Fg=function(t){Bg(t,"puid",(t.C+1).toString(36)+"~"+w().toString(36))},Eg=function(t,e){var n="met."+e.type,i="number"==typeof e.value?Math.round(e.value).toString(36):e.value,o=Math.round(e.duration);e=e.label+(null!=e.slotId?"_"+e.slotId:"")+"."+i+(0<o?"_"+o.toString(36):""),Jg(t,n,e,!0,"~")};Hg.prototype.J=function(t){this.h&&this.C<this.K&&(Of.prototype.J.call(this,t),Eg(this,t))},Hg.prototype.F=function(){Of.prototype.F.call(this),this.g.clearTimeout(this.D),this.l=this.D=0,this.A={},Qb(this.I),Qb(this.w),ze(this.g,"load",this.M),ze(this.g,"unload",this.X),ze(this.g,"pagehide",this.O)};var Dg=function(t,e){Bg(t,"uet",e),x(t.pa,function(t){try{t()}catch(t){}}),Ae(t.g),Cg(t),Ig(t)},I=function(){this.g=new Hg(1,"https:","csi.gstatic.com","/csi?v=2&s=","ima",void 0,!0);var t=$f();null!=t&&Bg(this.g,"c",t)},Lg=function(t,e,n){if(null!=n){var i=e+"="+n;(t=t.g).I[i]||(Jg(t,e,n,!1),i.length<1e3&&(t.I[i]=!0))}},Mg=function(t,e){t=t.g;var n=+Gf();t.h&&t.J(new Kf(e,4,n,0,void 0))};Fa(I);var Ng=function(t,e){this.h=t,this.l=e};p(Ng,wg),Ng.prototype.g=function(t,e){wg.prototype.g.call(this,t,e);var n=[];t=[];for(var i=la(this.h),o=i.next();!o.done;o=i.next())o=o.value,e.get(o)?n.push(o):t.push(o);e=n.map(String).join(","),t=t.map(String).join(","),Lg(I.B(),"sei",e),Lg(I.B(),"nsei",t),Lg(I.B(),"bi",this.l)};var Og=function(){hg.apply(this,arguments)};p(Og,hg);var ig=function(t,e){var n=I.B();Lg(n,"eee",t),Lg(n,"bi",e)};function Pg(){return Qg.split(",").map(function(t){return parseInt(t,10)}).filter(function(t){return!isNaN(t)})}Fa(Og);var tg=new og;H({id:418572103,G:0}),H({id:420706097,G:10}),H({id:420706098,G:10}),H({id:21061786,G:10}),H({id:21061817,G:10}),H({id:21061824,G:50}),H({id:21061888,G:10}),H({id:21061893,G:10}),H({id:21062100,G:0}),H({id:21063062,G:0}),H({id:420706109,G:10}),H({id:420706110,G:10}),H({id:21062347,G:0}),H({id:21063070,G:0}),H({id:21063072,G:0}),H({id:21063100,G:0}),H({id:420706116,G:0}),H({id:420706105,G:10}),H({id:420706106,G:10}),H({id:75259402,G:10}),H({id:75259403,G:10}),H({id:21064018,G:0}),H({id:21064020,G:0}),H({id:21064022,G:0}),H({id:21064024,G:0}),H({id:21064075,G:0}),H({id:21064201,G:50});var Rg=H({id:210640812,G:10});H({id:420706142,G:0}),H({id:21064347,G:0}),H({id:21064362,G:0}),H({id:72811302,G:0}),H({id:72811303,G:0}),H({id:72811304,G:0}),H({id:72811305,G:0}),H({id:72811306,G:0}),H({id:72811307,G:0}),H({id:21064565,G:0}),H({id:21064567,G:0}),H({id:21064572,G:10}),H({id:21064573,G:10}),H({id:40819804,G:10});var Sg=H({id:40819805,G:10});H({id:418572006,G:10}),H({id:44711678,G:10}),H({id:420706136,G:10}),H({id:420706137,G:10}),H({id:44714708,G:10}),H({id:44714709,G:10}),H({id:420706138,G:10}),H({id:420706139,G:10}),H({id:420706140,G:10}),H({id:420706141,G:10}),H({id:21065285,G:1}),H({id:21065286,G:1}),H({id:21065287,G:10,Yc:md}),H({id:21065288,G:10,Yc:md}),H({id:72811314,G:0});var Tg=H({id:72811689,G:0});H({id:44713198,G:0}),H({id:44713399,G:50}),H({id:44713400,G:50}),H({id:44714721,G:10});var Ug=H({id:44714722,G:10});H({id:44714510,G:0}),H({id:44714743,G:0}),H({id:42530094,G:50,va:tg}),H({id:42530095,G:50,va:tg}),H({id:42530173,G:10,va:tg}),H({id:42530174,G:10,va:tg}),H({id:668123728,G:10,va:tg}),H({id:668123729,G:10,va:tg}),H({id:370204080,G:1,va:tg}),H({id:370204081,G:0,va:tg}),H({id:44710407,G:10,va:tg}),H({id:44710408,G:10,va:tg}),H({id:31061774,G:10});var Vg=H({id:31061775,G:10});H({id:504733015,G:0});var Wg=H({id:504733016,G:0});H({id:189176e3,G:50}),H({id:189176001,G:50}),H({id:40819802,G:10}),H({id:40819803,G:10}),H({id:44712632,G:10}),H({id:44712633,G:10}),H({id:44714545,G:10});var Xg=H({id:44714546,G:10});if(void 0===window.v8_flag_map){var kg=Og.B();null===kg.g&&lg();var Qg=kg.g,Yg;if(null===kg.g&&lg(),Yg=kg.h,Qg){var Zg=new Ng(Pg(),Yg);sg(Zg)}}qg.reset(),sg(new vg);var J=function(){this.J=this.J,this.F=this.F};J.prototype.J=!1,J.prototype.pb=function(){return this.J},J.prototype.U=function(){this.J||(this.J=!0,this.R())};var ah=function(t,e){e=Qa($g,e),t.J?e():(t.F||(t.F=[]),t.F.push(e))};J.prototype.R=function(){if(this.F)for(;this.F.length;)this.F.shift()()};var $g=function(t){t&&"function"==typeof t.U&&t.U()},bh=function(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1};bh.prototype.l=function(){this.defaultPrevented=!0},q.console&&"function"==typeof q.console.log&&Oa(q.console.log,q.console);var ch=function(t){for(var e=[],n=t=F(t.ownerDocument);n!=t.top&&n.frameElement;n=n.parent)e.push(n.frameElement);return e},dh=!Sc||9<=Number(ld),eh=Sc&&!kd("9"),fh=function(){if(!q.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{q.addEventListener("test",Ea,e),q.removeEventListener("test",Ea,e)}catch(t){}return t}(),hh=function(t,e){if(bh.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.h=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;this.target=t.target||t.srcElement,this.g=e,(e=t.relatedTarget)?Uc&&(Oc(e,"nodeName")||(e=null)):"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement),this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:gh[t.pointerType]||"",this.state=t.state,(this.h=t).defaultPrevented&&this.l()}};Ra(hh,bh);var gh={2:"touch",3:"pen",4:"mouse"};hh.prototype.l=function(){hh.Wa.l.call(this);var t=this.h;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,eh)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var ih="closure_listenable_"+(1e6*Math.random()|0),jh=function(t){return!(!t||!t[ih])},kh=0,lh=function(t,e,n,i,o){this.listener=t,this.g=null,this.src=e,this.type=n,this.capture=!!i,this.Fb=o,this.key=++kh,this.bb=this.zb=!1},mh=function(t){t.bb=!0,t.listener=null,t.g=null,t.src=null,t.Fb=null},nh=function(t){this.src=t,this.g={},this.h=0};nh.prototype.add=function(t,e,n,i,o){var r=t.toString();(t=this.g[r])||(t=this.g[r]=[],this.h++);var a=oh(t,e,i,o);return-1<a?(e=t[a],n||(e.zb=!1)):((e=new lh(e,this.src,r,!!i,o)).zb=n,t.push(e)),e};var ph=function(t,e){var n=e.type;n in t.g&&cb(t.g[n],e)&&(mh(e),0==t.g[n].length&&(delete t.g[n],t.h--))},qh=function(t,e,n,i,o){return t=t.g[e.toString()],e=-1,t&&(e=oh(t,n,i,o)),-1<e?t[e]:null},oh=function(t,e,n,i){for(var o=0;o<t.length;++o){var r=t[o];if(!r.bb&&r.listener==e&&r.capture==!!n&&r.Fb==i)return o}return-1},rh="closure_lm_"+(1e6*Math.random()|0),sh={},th=0,vh=function(t,e,n,i,o){if(i&&i.once)return uh(t,e,n,i,o);if(Ha(e)){for(var r=0;r<e.length;r++)vh(t,e[r],n,i,o);return null}return n=wh(n),jh(t)?t.T(e,n,Ja(i)?!!i.capture:!!i,o):xh(t,e,n,!1,i,o)},xh=function(t,e,n,i,o,r){if(!e)throw Error("Invalid event type");var a=Ja(o)?!!o.capture:!!o,s=yh(t);if(s||(t[rh]=s=new nh(t)),(n=s.add(e,n,i,a,r)).g)return n;if(i=zh(),(n.g=i).src=t,i.listener=n,t.addEventListener)fh||(o=a),void 0===o&&(o=!1),t.addEventListener(e.toString(),i,o);else if(t.attachEvent)t.attachEvent(Ah(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return th++,n},zh=function(){var e=Bh,n=dh?function(t){return e.call(n.src,n.listener,t)}:function(t){if(!(t=e.call(n.src,n.listener,t)))return t};return n},uh=function(t,e,n,i,o){if(Ha(e)){for(var r=0;r<e.length;r++)uh(t,e[r],n,i,o);return null}return n=wh(n),jh(t)?t.o.add(String(e),n,!0,Ja(i)?!!i.capture:!!i,o):xh(t,e,n,!0,i,o)},Ch=function(t,e,n,i,o){if(Ha(e))for(var r=0;r<e.length;r++)Ch(t,e[r],n,i,o);else i=Ja(i)?!!i.capture:!!i,n=wh(n),jh(t)?t.Ba(e,n,i,o):(t=t&&yh(t))&&(e=qh(t,e,n,i,o))&&Dh(e)},Dh=function(t){if("number"!=typeof t&&t&&!t.bb){var e=t.src;if(jh(e))ph(e.o,t);else{var n=t.type,i=t.g;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(Ah(n),i):e.addListener&&e.removeListener&&e.removeListener(i),th--,(n=yh(e))?(ph(n,t),0==n.h&&(n.src=null,e[rh]=null)):mh(t)}}},Ah=function(t){return t in sh?sh[t]:sh[t]="on"+t},Fh=function(t,e,n,i){var o=!0;if((t=yh(t))&&(e=t.g[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var r=e[t];r&&r.capture==n&&!r.bb&&(r=Eh(r,i),o=o&&!1!==r)}return o},Eh=function(t,e){var n=t.listener,i=t.Fb||t.src;return t.zb&&Dh(t),n.call(i,e)},Bh=function(t,e){if(t.bb)return!0;if(dh)return Eh(t,new hh(e,this));var n=e||Da("window.event");e=new hh(n,this);var i=!0;if(!(n.keyCode<0||null!=n.returnValue)){t:{var o=!1;if(0==n.keyCode)try{n.keyCode=-1;break t}catch(t){o=!0}!o&&null!=n.returnValue||(n.returnValue=!0)}for(n=[],o=e.g;o;o=o.parentNode)n.push(o);for(t=t.type,o=n.length-1;0<=o;o--){e.g=n[o];var r=Fh(n[o],t,!0,e);i=i&&r}for(o=0;o<n.length;o++)e.g=n[o],r=Fh(n[o],t,!1,e),i=i&&r}return i},yh=function(t){return(t=t[rh])instanceof nh?t:null},Gh="__closure_events_fn_"+(1e9*Math.random()>>>0),wh=function(e){return v(e)?e:(e[Gh]||(e[Gh]=function(t){return e.handleEvent(t)}),e[Gh])},K=function(){J.call(this),this.o=new nh(this),(this.vb=this).la=null};Ra(K,J),K.prototype[ih]=!0,k=K.prototype,k.addEventListener=function(t,e,n,i){vh(this,t,e,n,i)},k.removeEventListener=function(t,e,n,i){Ch(this,t,e,n,i)},k.dispatchEvent=function(t){var e,n=this.la;if(n)for(e=[];n;n=n.la)e.push(n);n=this.vb;var i=t.type||t;if("string"==typeof t)t=new bh(t,n);else if(t instanceof bh)t.target=t.target||n;else{var o=t;t=new bh(i,n),Tb(t,o)}if(o=!0,e)for(var r=e.length-1;0<=r;r--){var a=t.g=e[r];o=Hh(a,i,!0,t)&&o}if(a=t.g=n,o=Hh(a,i,!0,t)&&o,o=Hh(a,i,!1,t)&&o,e)for(r=0;r<e.length;r++)a=t.g=e[r],o=Hh(a,i,!1,t)&&o;return o},k.R=function(){if(K.Wa.R.call(this),this.o){var t,e=this.o;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)mh(n[i]);delete e.g[t],e.h--}}this.la=null},k.T=function(t,e,n,i){return this.o.add(String(t),e,!1,n,i)},k.Ba=function(t,e,n,i){var o=this.o;if((t=String(t).toString())in o.g){var r=o.g[t];-1<(e=oh(r,e,n,i))&&(mh(r[e]),Array.prototype.splice.call(r,e,1),0==r.length&&(delete o.g[t],o.h--))}};var Hh=function(t,e,n,i){if(!(e=t.o.g[String(e)]))return!0;e=e.concat();for(var o=!0,r=0;r<e.length;++r){var a=e[r];if(a&&!a.bb&&a.capture==n){var s=a.listener,u=a.Fb||a.src;a.zb&&ph(t.o,a),o=!1!==s.call(u,i)&&o}}return o&&!i.defaultPrevented},Ih=function(t,e){K.call(this),this.h=t||1,this.g=e||q,this.l=Oa(this.Wf,this),this.w=w()};Ra(Ih,K),k=Ih.prototype,k.lb=!1,k.ua=null,k.setInterval=function(t){this.h=t,this.ua&&this.lb?(this.stop(),this.start()):this.ua&&this.stop()},k.Wf=function(){if(this.lb){var t=w()-this.w;0<t&&t<.8*this.h?this.ua=this.g.setTimeout(this.l,this.h-t):(this.ua&&(this.g.clearTimeout(this.ua),this.ua=null),this.dispatchEvent("tick"),this.lb&&(this.stop(),this.start()))}},k.start=function(){this.lb=!0,this.ua||(this.ua=this.g.setTimeout(this.l,this.h),this.w=w())},k.stop=function(){this.lb=!1,this.ua&&(this.g.clearTimeout(this.ua),this.ua=null)},k.R=function(){Ih.Wa.R.call(this),this.stop(),delete this.g};var Jh=function(t,e,n){if(v(t))n&&(t=Oa(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Oa(t.handleEvent,t)}return 2147483647<Number(e)?-1:q.setTimeout(t,e||0)},Kh=function(){return Math.round(w()/1e3)},Lh=function(t){var e=window.performance&&window.performance.timing&&window.performance.timing.domLoading&&0<window.performance.timing.domLoading?Math.round(window.performance.timing.domLoading/1e3):null;return null!=e?e:null!=t?t:Kh()},Mh=function(){this.h=-1},Nh=function(){return this.g={},this};Nh.prototype.set=function(t,e){this.g[t]=e};var Oh=function(t,e){t.g.eb=Rb(t.g,"eb",0)|e};Nh.prototype.get=function(t){return Rb(this.g,t,null)};var Ph=null,Qh=function(){this.g={},this.h=0},Rh=function(t,e){this.A=t,this.o=!0,this.h=e};Rh.prototype.getName=function(){return this.A},Rh.prototype.g=function(){return this.h},Rh.prototype.l=function(){return String(this.h)};var Sh=function(t,e){Rh.call(this,String(t),e),this.w=t,this.h=!!e};Ra(Sh,Rh),Sh.prototype.l=function(){return this.h?"1":"0"};var Th=function(t,e){Rh.call(this,t,e)};Ra(Th,Rh),Th.prototype.l=function(){return this.h?Math.round(this.h.top)+"."+Math.round(this.h.left)+"."+(Math.round(this.h.top)+Math.round(this.h.height))+"."+(Math.round(this.h.left)+Math.round(this.h.width)):""};var Uh=function(t){if(t.match(/^-?[0-9]+\.-?[0-9]+\.-?[0-9]+\.-?[0-9]+$/)){t=t.split(".");var e=Number(t[0]),n=Number(t[1]);return new Th("",new Ve(n,e,Number(t[3])-n,Number(t[2])-e))}return new Th("",new Ve(0,0,0,0))},Vh=function(){return Ph=Ph||new Qh},Wh=function(t,e){t.g[e.getName()]=e},Xh=function(t){var e=new Ve(-Number.MAX_VALUE/2,-Number.MAX_VALUE/2,Number.MAX_VALUE,Number.MAX_VALUE),n=new Ve(0,0,0,0);if(!t||0==t.length)return n;for(var i=0;i<t.length;i++){t:{var o=e,r=t[i],a=Math.max(o.left,r.left),s=Math.min(o.left+o.width,r.left+r.width);if(a<=s){var u=Math.max(o.top,r.top);if(u<=(r=Math.min(o.top+o.height,r.top+r.height))){o.left=a,o.top=u,o.width=s-a,o.height=r-u,o=!0;break t}}o=!1}if(!o)return n}return e},Yh=function(t,e){var n=t.getBoundingClientRect();return t=cf(t,e),new Ve(Math.round(t.x),Math.round(t.y),Math.round(n.right-n.left),Math.round(n.bottom-n.top))},Zh=function(t,e,n){if(e&&n){t:{var i=Math.max(e.left,n.left),o=Math.min(e.left+e.width,n.left+n.width);if(i<=o){var r=Math.max(e.top,n.top),a=Math.min(e.top+e.height,n.top+n.height);if(r<=a){i=new Ve(i,r,o-i,a-r);break t}}i=null}o=i?i.height*i.width:0,r=i?e.height*e.width:0,i=i&&r?Math.round(o/r*100):0,Wh(t,new Rh("vp",i)),o=!!(i&&0<i)&&(o=We(e),r=We(n),o.top>=r.top&&o.top<r.bottom),Wh(t,new Sh(512,o)),o=!!(i&&0<i)&&(o=We(e),r=We(n),o.bottom<=r.bottom&&o.bottom>r.top),Wh(t,new Sh(1024,o)),o=!!(i&&0<i)&&(o=We(e),r=We(n),o.left>=r.left&&o.left<r.right),Wh(t,new Sh(2048,o)),n=!!(i&&0<i)&&(e=We(e),n=We(n),e.right<=n.right&&e.right>n.left),Wh(t,new Sh(4096,n))}},$h=function(t,e){var n=0;Kb(F(),"ima","video","client","tagged")&&(n=1);var i=null;if(t&&(i=t()),i){(t=Vh()).g={};var o=new Sh(32,!0);o.o=!1,Wh(t,o),o=(o=F().document).visibilityState||o.webkitVisibilityState||o.mozVisibilityState||o.msVisibilityState||"",Wh(t,new Sh(64,"hidden"!=o.toLowerCase().substring(o.length-6)));try{var r=F().top;try{var a=!!r.location.href||""===r.location.href}catch(t){a=!1}if(a)var s=ch(i),u=s&&0!=s.length?"1":"0";else u="2"}catch(t){u="2"}Wh(t,new Sh(256,"2"==u)),Wh(t,new Sh(128,"1"==u)),s=a=F().top,"2"==u&&(s=F()),r=Yh(i,s),Wh(t,new Th("er",r));try{var h=s.document&&!s.document.body?null:je(s||window)}catch(t){h=null}if(h=h?(s=ke(fe(s.document).g),Wh(t,new Sh(16384,!!s)),s?new Ve(s.x,s.y,h.width,h.height):null):null,Wh(t,new Th("vi",h)),h&&"1"==u){for(u=ch(i),i=[],s=0;s<u.length;s++)(o=Yh(u[s],a))&&i.push(o);i.push(h),h=Xh(i)}Zh(t,r,h),t.h&&(u=Kh()-t.h,Wh(t,new Rh("ts",u))),t.h=Kh()}else(t=Vh()).g={},t.h=Kh(),Wh(t,new Sh(32,!1));if(this.l=t,this.g=new Nh,this.g.set("ve",4),n&&Oh(this.g,1),Kb(F(),"ima","video","client","crossdomainTag")&&Oh(this.g,4),Kb(F(),"ima","video","client","sdkTag")&&Oh(this.g,8),Kb(F(),"ima","video","client","jsTag")&&Oh(this.g,2),e&&Rb(e,"fullscreen",!1)&&Oh(this.g,16),this.h=e=null,n&&(n=Kb(F(),"ima","video","client")).getEData){this.h=n.getEData(),(n=Kb(F(),"ima","video","client","getLastSnapshotFromTop"))&&(t=n())&&(this.h.extendWithDataFromTopIframe(t.tagstamp,t.playstamp,t.lactstamp),n=this.l,e=t.er,t=t.vi,e&&t&&(e=Uh(e).g(),t=Uh(t).g(),u=null,Rb(n.g,"er",null)&&((u=Rb(n.g,"er",null).g()).top+=e.top,u.left+=e.left,Wh(n,new Th("er",u))),Rb(n.g,"vi",null)&&((h=Rb(n.g,"vi",null).g()).top+=e.top,h.left+=e.left,(i=[]).push(h),i.push(e),i.push(t),e=Xh(i),Zh(n,u,e),Wh(n,new Th("vi",t)))));t:{if(this.h){if(this.h.getTagLoadTimestamp){e=this.h.getTagLoadTimestamp();break t}if(this.h.getTimeSinceTagLoadSeconds){e=this.h.getTimeSinceTagLoadSeconds();break t}}e=null}}this.g.set("td",Kh()-Lh(e))},ai=new Ih(200),bi=function(t,e){try{var n=new $h(t,e);t=[];var i=Number(n.g.get("eb")),o=n.g.g;"eb"in o&&delete o.eb;var r,a=n.g;for(var s in o=[],a.g)o.push(s+a.g[s]);if((r=o.join("_"))&&t.push(r),n.h){var u=n.h.serialize();u&&t.push(u)}var h,l=n.l;for(var c in a=[],r=(r=i)||0,l.g){var f=l.g[c];if(f instanceof Sh)f.g()&&(r|=f.w);else{var p,d=l.g[c];(p=d.o?d.l():"")&&a.push(c+p)}}return a.push("eb"+String(r)),(h=a.join("_"))&&t.push(h),n.g.set("eb",i),t.join("_")}catch(t){return"tle;"+Ec(t.name,12)+";"+Ec(t.message,40)}},ci=function(e,n){vh(ai,"tick",function(){var t=bi(n);e(t)}),ai.start(),ai.dispatchEvent("tick")},di;di=["av.key","js","unreleased"].slice(-1)[0];var ei=[0,2,1],fi=null;document.addEventListener&&document.addEventListener("mousedown",function(t){fi=t},!0),window.mb=function(t){if(t){var e,n;if(e=window.event||fi)(n=e.which?1<<ei[e.which-1]:e.button)&&e.shiftKey&&(n|=8),n&&e.altKey&&(n|=16),n&&e.ctrlKey&&(n|=32),e=n;else e=null;if(n=e)if(window.css)window.css(t.id,"mb",n,void 0,void 0);else if(t){var i=(e=t.href).indexOf("&mb=");if(i<0)n=e+"&mb="+n;else{i+=4;var o=e.indexOf("&",i);n=0<=o?e.substring(0,i)+n+e.substring(o):e.substring(0,i)+n}t.href=2e3<n.length?e:n}}};var gi=function(t,e,n){try{t&&(e=e.top);var i=void 0,o=e;n=void 0!==n&&n,t&&null!==o&&o!=o.top&&(o=o.top);try{i=void 0!==n&&n?new E(o.innerWidth,o.innerHeight).round():je(o||window).round()}catch(t){i=new E(-12245933,-12245933)}t=i;var r=ke(fe(e.document).g);if(-12245933==t.width)var a=t.width,s=new G(a,a,a,a);else s=new G(r.y,r.x+t.width,r.y+t.height,r.x);return s}catch(t){return new G(-12245933,-12245933,-12245933,-12245933)}},hi=function(t){var i={};x(t,function(t){var e=t.event,n=i[e];i.hasOwnProperty(e)?null!==n&&(t.h(n)||(i[e]=null)):i[e]=t}),db(t,function(t){return null===i[t.event]})},ii={NONE:0,kg:1},ji=function(){this.V=0,this.g=!1,this.h=-1,this.Ta=!1,this.ia=0};ji.prototype.isVisible=function(){return this.Ta?.3<=this.V:.5<=this.V};var L={Gd:0,og:1},ki={Gd:0,Bg:1,Cg:2},li={668123728:0,668123729:1},mi={NONE:0,Eg:1,sg:2},ni={480596784:0,480596785:1,21063355:2},oi={44710407:0,44710408:1},pi=function(){this.h=null,this.w=!1,this.l=null},qi=function(t){return t.w=!0,t},ri=function(e,t){e.l&&x(t,function(t){void 0!==(t=e.l[t])&&e.o(t)})};pi.prototype.g=function(){return this.h};var si=function(t){pi.call(this),this.A=t};p(si,pi),si.prototype.o=function(t){null===this.h&&Mb(this.A,t)&&(this.h=t)};var ti=function(){pi.call(this)};p(ti,pi),ti.prototype.o=function(t){null===this.h&&"string"==typeof t&&(this.h=t)};var ui=function(){this.g={},this.l=!0,this.h={}};ui.prototype.enable=function(){this.l=!0},ui.prototype.reset=function(){this.g={},this.l=!0,this.h={}};var N=function(t,e,n){return t.g[e]||(t.g[e]=new si(n)),t.g[e]},vi=function(t){t.g.queryid||(t.g.queryid=new ti)},wi=function(t,e,n){(t=t.g[e])&&t.o(n)},xi=function(t,e){return Lb(t.h,e)?t.h[e]:(t=t.g[e])?t.g():void 0},yi=function(n){var i={},t=Db(n.g,function(t){return t.w});return Cb(t,function(t,e){0<(t=void 0!==n.h[e]?String(n.h[e]):t.w&&null!==t.h?String(t.h):"").length&&(i[e]=t)},n),i},zi=function(t){t=yi(t);var n=[];return Cb(t,function(t,e){e in Object.prototype||void 0!==t&&n.push([e,":",t].join(""))}),n},Ai=function(){var t=P.B().N,e=ug();t.l&&x(Ib(t.g),function(t){return ri(t,e)})},Bi=!Sc&&!Xb(),Ci=function(){this.g=this.Na=null},Di=function(){};Di.prototype.now=function(){return 0},Di.prototype.h=function(){return 0},Di.prototype.l=function(){return 0},Di.prototype.g=function(){return 0};var Fi=function(){if(!Ei())throw Error()};p(Fi,Di);var Ei=function(){return!(!D||!D.performance)};Fi.prototype.now=function(){return Ei()&&D.performance.now?D.performance.now():Di.prototype.now.call(this)},Fi.prototype.h=function(){return Ei()&&D.performance.memory?D.performance.memory.totalJSHeapSize||0:Di.prototype.h.call(this)},Fi.prototype.l=function(){return Ei()&&D.performance.memory?D.performance.memory.usedJSHeapSize||0:Di.prototype.l.call(this)},Fi.prototype.g=function(){return Ei()&&D.performance.memory?D.performance.memory.jsHeapSizeLimit||0:Di.prototype.g.call(this)};var Gi=function(){};Gi.prototype.isVisible=function(){return 1===xg(Pd)};var Hi=function(t,e){this.g=t,this.depth=e},Ji=function(t){t=t||of();var e=Math.max(t.length-1,0),n=rf(t);t=n.g;var i=n.h,o=n.l,r=[];n=function(t,e){return null==t?e:t},o&&r.push(new Hi([o.url,o.qc?2:0],n(o.depth,1))),i&&i!=o&&r.push(new Hi([i.url,2],0)),t.url&&t!=o&&r.push(new Hi([t.url,0],n(t.depth,e)));var a=Wa(r,function(t,e){return r.slice(0,r.length-e)});return!t.url||(o||i)&&t!=o||(i=Ke(t.url))&&a.push([new Hi([i,1],n(t.depth,e))]),a.push([]),Wa(a,function(t){return Ii(e,t)})};function Ii(t,e){var n=Xa(e,function(t,e){return Math.max(t,e.depth)},-1),i=kb(n+2);return i[0]=t,x(e,function(t){return i[t.depth+1]=t.g}),i}var Ki=function(){var t=Ji();return Wa(t,function(t){return uf(t)})},Li=function(){this.h=new Gi,this.g=new(Ei()?Fi:Di)},Ni=function(){Mi();var t=D.document;return!!(t&&t.body&&t.body.getBoundingClientRect&&v(D.setInterval)&&v(D.clearInterval)&&v(D.setTimeout)&&v(D.clearTimeout))};Li.prototype.setInterval=function(t,e){return D.setInterval(t,e)},Li.prototype.clearInterval=function(t){D.clearInterval(t)},Li.prototype.setTimeout=function(t,e){return D.setTimeout(t,e)},Li.prototype.clearTimeout=function(t){D.clearTimeout(t)};var Oi=function(t){Mi();var e=kf()||D;ff(e,t)},Pi=function(){return Mi(),Ki()};Fa(Li);var Qi=function(){};Qi.prototype.getContext=function(){if(!this.g){if(!D)throw Error("Context has not been set and window is undefined.");this.g=Li.B()}return this.g},Fa(Qi);var Mi=function(){return Qi.B().getContext()},Ri=function(t){Jd(this,t,null,null)};Ra(Ri,Dd);var Si=function(t){this.o=t,this.g=-1,this.h=this.l=0},Ti=function(i,o){return function(t){for(var e=[],n=0;n<arguments.length;++n)e[+n]=arguments[n];if(-1<i.g)return o.apply(null,ma(e));try{return i.g=i.o.g.now(),o.apply(null,ma(e))}finally{i.l+=i.o.g.now()-i.g,i.g=-1,i.h+=1}}},Ui=function(t,e){this.h=t,this.l=e,this.g=new Si(t)},P=function(){this.o=void 0,this.l=this.F=0,this.Y="ns",this.A=-1,this.N=new ui,qi(N(this.N,"mv",mi)).l=void 0===ni?null:ni,N(this.N,"omid",L),qi(N(this.N,"epoh",L)),qi(N(this.N,"epph",L)),qi(N(this.N,"umt",L)).l=void 0===li?null:li,qi(N(this.N,"phel",L)),qi(N(this.N,"phell",L)),qi(N(this.N,"oseid",Re)),qi(N(this.N,"xdi",L)),qi(N(this.N,"amp",L)),qi(N(this.N,"prf",L)),qi(N(this.N,"gtx",L)),qi(N(this.N,"mvp_lv",L)),N(this.N,"xosd",L),this.N.h.xosd=1,this.N.h.mxd=1,qi(N(this.N,"etl",L)).l=void 0===oi?null:oi,qi(N(this.N,"msp",L)),qi(N(this.N,"eocm",L)),qi(N(this.N,"pnl",ki)),this.g=new Ui(Mi(),this.N),this.w=this.h=!1};P.prototype.Hc=function(t){if("string"==typeof t&&0!=t.length){var e=this.N;if(e.l)for(var n=(t=t.split("&")).length-1;0<=n;n--){var i=t[n].split("="),o=i[0];i=1<i.length?parseInt(i[1],10):1,isNaN(i)||(o=e.g[o])&&o.o(i)}}},Fa(P);var Vi=function(){var t="https:";D&&D.location&&"http:"===D.location.protocol&&(t="http:"),this.h=t,this.g=.01,this.l=Math.random()},Wi=function(t,e,n,i,o){if((i?t.l:Math.random())<(o||t.g))try{if(n instanceof sf)var r=n;else r=new sf,Ie(n,function(t,e){var n=r,i=n.w++;wf(n,i,tf(e,t))});var a=zf(r,t.h,"/pagead/gen_204?id="+e+"&");a&&Oi(a)}catch(t){}},Zi=function(){var t=Xi;this.l=Yi,this.A="jserror",this.o=!0,this.h=null,this.F=this.Ga,this.g=void 0===t?null:t,this.w=!1};k=Zi.prototype,k.pinger=function(){return this.l},k.Vb=function(t){this.h=t},k.Lc=function(t){this.A=t},k.Mc=function(t){this.o=t},k.Nc=function(t){this.w=t},k.Va=function(o,r,a){var s=this;return Ti(P.B().g.g,function(){try{if(s.g&&s.g.h){var e=s.g.start(o.toString(),3),t=r();s.g.end(e)}else t=r()}catch(t){var n=s.o;try{Pf(e);var i=new $i(aj(t));n=s.F(o,i,void 0,a)}catch(t){s.Ga(217,t)}if(!n)throw t}return t})()},k.Ic=function(i,o,r,a){var s=this;return Ti(P.B().g.g,function(t){for(var e=[],n=0;n<arguments.length;++n)e[+n]=arguments[n];return s.Va(i,function(){return o.apply(r,e)},a)})},k.Ga=function(e,t,n,i,o){o=o||this.A;try{var r=new sf;r.o=!0,xf(r,1,"context",e),mf(t)||(t=new $i(aj(t))),t.msg&&xf(r,2,"msg",t.msg.substring(0,512));var a=t.meta||{};if(this.h)try{this.h(a)}catch(t){}if(i)try{i(a)}catch(t){}wf(r,3,[a]);var s=rf();s.h&&xf(r,4,"top",s.h.url||""),xf(r,5,"url",s.g.url||""),Wi(this.l,o,r,this.w,n)}catch(t){try{Wi(this.l,o,{context:"ecmserr",rctx:e,msg:aj(t),url:s&&s.g.url},this.w,n)}catch(t){}}return this.o};var aj=function(t){var e=t.toString();if(t.name&&-1==e.indexOf(t.name)&&(e+=": "+t.name),t.message&&-1==e.indexOf(t.message)&&(e+=": "+t.message),t.stack){t=t.stack;var n=e;try{-1==t.indexOf(n)&&(t=n+"\n"+t);for(var i;t!=i;)t=(i=t).replace(/((https?:\/..*\/)[^\/:]*:\d+(?:.|\n)*)\2/,"$1");e=t.replace(/\n */g,"\n")}catch(t){e=n}}return e},$i=function(t){lf.call(this,Error(t),{message:t})};p($i,lf);var Yi,bj,Xi=new Of(1,kf()),cj=function(){var t=kf();t&&void 0!==t.google_measure_js_timing&&(t.google_measure_js_timing||Xi.F())};!function(){Yi=new Vi,bj=new Zi;var t=kf();t&&t.document&&("complete"==t.document.readyState?cj():Xi.h&&ye(t,"load",function(){cj()}))}();var dj=function(t){bj.Vb(function(e){x(t,function(t){t(e)})})},ej=function(t,e){return bj.Va(t,e,void 0)},fj=function(t,e,n,i){return bj.Ic(t,e,n,i)},gj=function(t,e,n,i){bj.Ga(t,e,n,i)},hj=Date.now(),ij=-1,jj=-1,kj,lj=-1,mj=!1,nj=function(){return Date.now()-hj},oj=function(){var t=P.B().o,e=0<=jj?nj()-jj:-1,n=mj?nj()-ij:-1,i=0<=lj?nj()-lj:-1;if(947190542==t)return 100;if(79463069==t)return 200;t=[2e3,4e3];var o=[250,500,1e3];gj(637,Error(),.001);var r=e;for(-1!=n&&n<e&&(r=n),e=0;e<t.length;++e)if(r<t[e]){var a=o[e];break}return void 0===a&&(a=o[t.length]),-1!=i&&1500<i&&i<4e3?500:a},pj={currentTime:1,duration:2,isVpaid:4,volume:8,isYouTube:16,isPlaying:32},Nb={Zb:"start",FIRST_QUARTILE:"firstquartile",MIDPOINT:"midpoint",THIRD_QUARTILE:"thirdquartile",COMPLETE:"complete",Nd:"metric",Yb:"pause",Rc:"resume",SKIPPED:"skip",VIEWABLE_IMPRESSION:"viewable_impression",Od:"mute",Pd:"unmute",FULLSCREEN:"fullscreen",Kd:"exitfullscreen",Qc:"bufferstart",Pc:"bufferfinish",Ld:"fully_viewable_audible_half_duration_impression",Md:"measurable_impression",Fd:"abandon",Jd:"engagedview",IMPRESSION:"impression",Hd:"creativeview",LOADED:"loaded",Wg:"progress",ig:"close",jg:"collapse",Og:"overlay_resize",Pg:"overlay_unmeasurable_impression",Qg:"overlay_unviewable_impression",Sg:"overlay_viewable_immediate_impression",Rg:"overlay_viewable_end_of_session_impression",Id:"custom_metric_viewable"},qj="start firstquartile midpoint thirdquartile resume loaded".split(" "),rj=["start","firstquartile","midpoint","thirdquartile"],sj=["abandon"],tj={ih:-1,Zb:0,FIRST_QUARTILE:1,MIDPOINT:2,THIRD_QUARTILE:3,COMPLETE:4,Nd:5,Yb:6,Rc:7,SKIPPED:8,VIEWABLE_IMPRESSION:9,Od:10,Pd:11,FULLSCREEN:12,Kd:13,Ld:14,Md:15,Fd:16,Jd:17,IMPRESSION:18,Hd:19,LOADED:20,Id:21,Qc:22,Pc:23},Gb={ag:"addEventListener",tg:"getMaxSize",ug:"getScreenSize",vg:"getState",wg:"getVersion",Xg:"removeEventListener",Fg:"isViewable"},uj=function(t){var e=t!==t.top,n=t.top===Wf(t).ka,i=-1,o=0;if(e&&n&&t.top.mraid){i=3;var r=t.top.mraid}else i=(r=t.mraid)?e?n?2:1:0:-1;return r&&(r.IS_GMA_SDK||(o=2),Hb(function(t){return v(r[t])})||(o=1)),{wa:r,Bb:o,xd:i}},vj=function(t){return(t=t.document)&&v(t.elementFromPoint)};if(Pd&&Pd.URL){var wj,Me=Pd.URL;wj=!!Me&&0<Ne().length,bj.Mc(!wj)}var xj=function(t,e,n,i){var o=void 0!==o&&o;n=fj(i,n),ye(t,e,n,{capture:o})},yj=function(t,e){return e=Math.pow(10,e),Math.floor(t*e)/e};function zj(t,e,n,i){if(!t)return{value:i,done:!1};var o=n(i=e(i,t),t);return!o&&Oc(t,"parentElement")?zj(qe(t),e,n,i):{done:o,value:i}}var Aj=function(t,e,n,i){if(!t)return i;if(!(i=zj(t,e,n,i)).done)try{var o=ee(t),r=o&&F(o);return Aj(r&&r.frameElement,e,n,i.value)}catch(t){}return i.value};function Bj(t){var n=!Sc||kd(8);return Aj(t,function(t,e){return{hidden:"hidden"===(t=Oc(e,"style")&&e.style&&$e(e,"visibility")),visible:n&&"visible"===t}},function(t){return t.hidden||t.visible},{hidden:!1,visible:!1}).hidden}var Cj=function(t){return!!Aj(t,function(t,e){return!(!Oc(e,"style")||!e.style||"none"!==$e(e,"display"))},function(t){return t},!1)||Bj(t)},Dj=function(t){return new G(t.top,t.right,t.bottom,t.left)},Ej=function(t){var e=t.top||0,n=t.left||0;return new G(e,n+(t.width||0),e+(t.height||0),n)},Fj=function(t){return null!=t&&0<=t&&t<=1};function Gj(){var e=zb;return!!e&&(!!(Ya("Android TV;AppleTV;Apple TV;GoogleTV;HbbTV;NetCast.TV;Opera TV;POV_TV;SMART-TV;SmartTV;TV Store;AmazonWebAppPlatform;MiBOX".split(";"),function(t){return y(e,t)})||y(e,"OMI/")&&!y(e,"XiaoMi/"))||y(e,"Presto")&&y(e,"Linux")&&!y(e,"X11")&&!y(e,"Android")&&!y(e,"Mobi"))}function Hj(){var t=zb;return y(t,"AppleTV")||y(t,"Apple TV")||y(t,"CFNetwork")||y(t,"tvOS")}function Ij(){var t=zb;return y(t,"sdk_google_atv_x86")||y(t,"Android TV")}function Jj(){return y(zb,"CrKey")||y(zb,"PlayStation")||y(zb,"Roku")||Gj()||y(zb,"Xbox")||Hj()||Ij()}var R=function(){this.C=!1,this.l=!He(D.top),this.F=ue()||ve();var t=of();t=0<t.length&&null!=t[t.length-1]&&null!=t[t.length-1].url&&((t=t[t.length-1].url.match(De)[3]||null)?decodeURI(t):t)||"",this.domain=t,this.g=new G(0,0,0,0),this.w=new E(0,0),this.o=new E(0,0),this.J=new G(0,0,0,0),this.H=null,this.A=0,this.D=!1,this.h=!(!D||!uj(D).wa),Mj(this)},Nj=function(t,e){e&&e.screen&&(t.w=new E(e.screen.width,e.screen.height))},Oj=function(t,e){var n=t.g?new E(Se(t.g),Te(t.g)):new E(0,0);null!==(e=void 0===e?D:e)&&e!=e.top&&(e=e.top);var i=0,o=0;try{var r=e.document,a=r.body,s=r.documentElement;if("CSS1Compat"==r.compatMode&&s.scrollHeight)i=s.scrollHeight!=n.height?s.scrollHeight:s.offsetHeight,o=s.scrollWidth!=n.width?s.scrollWidth:s.offsetWidth;else{var u=s.scrollHeight,h=s.scrollWidth,l=s.offsetHeight,c=s.offsetWidth;s.clientHeight!=l&&(u=a.scrollHeight,h=a.scrollWidth,l=a.offsetHeight,c=a.offsetWidth),o=u>n.height?l<u?(i=u,h):(i=l,c):u<l?(i=u,h):(i=l,c)}var f=new E(o,i)}catch(t){f=new E(-12245933,-12245933)}t.o=f},Mj=function(t){D&&D.document&&(t.J=gi(!1,D,t.F),t.g=gi(!0,D,t.F),t.H=t.g,Oj(t,D),Nj(t,D))},Pj=function(){var t=R.B();if(0<t.A||t.D)return!0;t=Mi().h.isVisible();var e=0===xg(Pd);return t||e};Fa(R);var Qj=new G(0,0,0,0);function Rj(t,e){return 0===(e=Sj(e))?0:Sj(t)/e}function Sj(t){return Math.max(t.bottom-t.top,0)*Math.max(t.right-t.left,0)}function Tj(t,e){if(!t||!e)return!1;for(var n=0;null!==t&&n++<100;){if(t===e)return!0;try{if(t=qe(t)||t){var i=ee(t),o=i&&F(i),r=o&&o.frameElement;r&&(t=r)}}catch(t){break}}return!1}function Uj(t,e,n){if(!t||!e)return!1;t=((e=Ue(t.clone(),-e.left,-e.top)).left+e.right)/2,e=(e.top+e.bottom)/2;var i=kf();return He(i.top)&&i.top&&i.top.document&&(i=i.top),!!vj(i)&&(!!(t=i.document.elementFromPoint(t,e))&&(e=(e=(e=ee(n))&&e.defaultView&&e.defaultView.frameElement)&&Tj(e,t),t=!(i=t===n)&&t&&te(t,function(t){return t===n}),!(e||i||t)))}function Vj(t,e,n,i){return!R.B().l&&(Se(t)<=0||Te(t)<=0||!(!n||!i)&&ej(208,function(){return Uj(t,e,n)}))}var Wj=function(t,e,n){var i=new G(0,0,0,0);this.time=t,this.volume=null,this.l=e,this.g=i,this.h=n},Xj=function(t,e,n,i,o,r,a){this.J=t,this.F=e,this.A=n,this.g=i,this.w=o,this.h=r,this.o=a};Xj.prototype.l=function(){return this.J};var Yj=function(t){this.l=t,this.h=0,this.g=null};Yj.prototype.cancel=function(){Mi().clearTimeout(this.g),this.g=null};var Zj=function(t){var e=Mi();t.g=e.setTimeout(Ti(P.B().g.g,fj(143,function(){t.h++,t.l.aa()})),oj())},ak=function(t,e,n){this.ka=t,this.sa=void 0===n?"na":n,this.A=[],this.H=!1,this.w=new Wj(-1,!0,this),(this.g=this).C=e,this.I=this.pa=this.D=!1,this.M="uk",this.W=!1,this.o=!0};k=ak.prototype,k.od=function(){return this.Rb()},k.Rb=function(){return!1},k.Bc=function(){return this.H=!0},k.Ya=function(){return this.g.M},k.nb=function(){return this.g.I};var ck=function(t,e,n){(!t.I||void 0!==n&&n)&&(t.I=!0,t.M=e,t.C=0,t.g!=t||bk(t))};ak.prototype.getName=function(){return this.g.sa},ak.prototype.Ja=function(){return this.g.O()},ak.prototype.O=function(){return{}},ak.prototype.Ea=function(){return this.g.C};var dk=function(t,e){bb(t.A,e)||(t.A.push(e),e.Za(t.g),e.La(t.w),e.za()&&(t.D=!0))};ak.prototype.X=function(){var t=R.B();t.g=gi(!0,this.ka,t.F)},ak.prototype.Z=function(){Nj(R.B(),this.ka)},ak.prototype.Qa=function(){Oj(R.B(),this.ka)},ak.prototype.P=function(){return this.w.g};var ek=function(t){(t=t.g).Z(),t.X();var e=R.B();e.J=gi(!1,t.ka,e.F),t.Qa(),t.w.g=t.P()};ak.prototype.aa=function(){};var fk=function(t,e){t.g!=t?fk(t.g,e):t.o!==e&&(t.o=e,bk(t))};ak.prototype.pc=function(){return this.g.o};var gk=function(t){t.D=!!t.A.length&&Ya(t.A,function(t){return t.za()})};ak.prototype.l=function(){return this.w};var hk=function(e){var t=fb(e.A);x(t,function(t){t.La(e.w)})},bk=function(e){var t=fb(e.A);x(t,function(t){t.Za(e.g)}),e.g!=e||hk(e)};k=ak.prototype,k.Za=function(t){var e=this.g,n=t.Ea();this.g=n>=this.C?t:this,e!==this.g?(this.o=this.g.o,bk(this)):this.o!==this.g.o&&(this.o=this.g.o,bk(this))},k.La=function(t){if(t.h===this.g){var e;if(!(e=this.pa)){e=this.w;var n=this.D;(n=t&&(void 0===n||!n||e.volume==t.volume)&&e.l==t.l)&&(n=(e=e.g)==(n=t.g)||!(!e||!n)&&(e.top==n.top&&e.right==n.right&&e.bottom==n.bottom&&e.left==n.left)),e=!n}this.w=t,e&&hk(this)}},k.za=function(){return this.D},k.U=function(){this.W=!0},k.pb=function(){return this.W};var ik=function(t,e,n,i){this.element=t,this.g=new G(0,0,0,0),this.w=new G(0,0,0,0),this.h=e,this.N=n,this.I=i,this.H=!1,this.timestamp=-1,this.o=new Xj(e.l(),this.g,new G(0,0,0,0),0,0,nj(),0)};k=ik.prototype,k.vc=function(){return!0},k.wc=function(){},k.yb=function(){if(this.element){var t=this.element,e=this.h.g.ka;try{try{var n=Dj(t.getBoundingClientRect())}catch(t){n=new G(0,0,0,0)}var i=n.right-n.left,o=n.bottom-n.top,r=cf(t,e),a=r.x,s=r.y,u=new G(Math.round(s),Math.round(a+i),Math.round(s+o),Math.round(a))}catch(t){u=Qj.clone()}this.g=u}},k.Vc=function(){this.w=this.h.l().g},k.Ca=function(){this.yb(),this.o=new Xj(this.h.l(),this.g,this.o.A,this.o.g,this.o.w,nj(),this.o.o)},k.U=function(){if(!this.pb()){var t=this.h;cb(t.A,this),t.D&&this.za()&&gk(t),this.H=!0}},k.pb=function(){return this.H},k.Ja=function(){return this.h.Ja()},k.Ea=function(){return this.h.Ea()},k.Ya=function(){return this.h.Ya()},k.nb=function(){return this.h.nb()},k.Za=function(){},k.La=function(){this.Ca()},k.za=function(){return this.I};var jk=function(t){this.w=!1,this.g=t,this.o=Ea};k=jk.prototype,k.Ea=function(){return this.g.Ea()},k.Ya=function(){return this.g.Ya()},k.nb=function(){return this.g.nb()},k.create=function(t,e,n){var i=null;return this.g&&(i=this.Pb(t,e,n),dk(this.g,i)),i},k.kd=function(){return this.qb()},k.qb=function(){return!1},k.jd=function(t){return!!this.g.Bc()&&(dk(this.g,this),this.o=t,!0)},k.Za=function(t){0==t.Ea()&&this.o(t.Ya(),this)},k.La=function(){},k.za=function(){return!1},k.U=function(){this.w=!0},k.pb=function(){return this.w},k.Ja=function(){return{}};var kk=function(t,e,n){this.l=void 0===n?0:n,this.h=t,this.g=null==e?"":e},lk=function(t){switch(Math.trunc(t.l)){case-16:return-16;case-8:return-8;case 0:return 0;case 8:return 8;case 16:default:return 16}},mk=function(t,e){return t.l<e.l||!(t.l>e.l)&&(t.h<e.h||!(t.h>e.h)&&(typeof t.g<typeof e.g||!(typeof t.g>typeof e.g)&&t.g<e.g))},nk=function(){this.l=0,this.g=[],this.h=!1};nk.prototype.add=function(t,e,n){return++this.l,t=new kk(t,e,n),this.g.push(new kk(t.h,t.g,t.l+this.l/4096)),this.h=!0,this};var ok=function(e,t){x(t.g,function(t){e.add(t.h,t.g,lk(t))})},pk=function(n,t){var i=void 0===i?0:i,o=void 0===o||o;return Ie(t,function(t,e){o&&void 0===t||n.add(e,t,i)}),n},rk=function(t){var n=qk;return t.h&&(jb(t.g,function(t,e){return mk(e,t)?1:mk(t,e)?-1:0}),t.h=!1),Xa(t.g,function(t,e){return e=n(e),t+(""!=t&&""!=e?"&":"")+e},"")},qk=function(t){var e=t.h;return""===(t=t.g)?e:"boolean"==typeof t?t?e:"":Ha(t)?0===t.length?e:e+"="+t.join():e+"="+(bb(["mtos","tos","p"],e)?t:encodeURIComponent(t))},sk=function(t){var e=void 0===e||e;this.g=new nk,void 0!==t&&ok(this.g,t),e&&this.g.add("v",di,-16)};sk.prototype.toString=function(){var t="//pagead2.googlesyndication.com//pagead/gen_204",e=rk(this.g);return 0<e.length&&(t+="?"+e),t};var tk=function(t){var n=[],i=[];return Cb(t,function(t,e){if(!(e in Object.prototype)&&void 0!==t)switch(Ha(t)&&(t=t.join(",")),t=[e,"=",t].join(""),e){case"adk":case"r":case"tt":case"error":case"mtos":case"tos":case"p":case"bs":case"aio":case"nio":case"iem":n.unshift(t);break;case"req":case"url":case"referrer":case"iframe_loc":i.push(t);break;default:n.push(t)}}),n.concat(i)},uk=function(){if(di&&"unreleased"!==di)return di},vk=function(t){var e=void 0===e?4e3:e;if(t=t.toString(),!/&v=[^&]+/.test(t)){var n=uk();t=n?t+"&v="+encodeURIComponent(n):t}t=t.substring(0,e),Oi(t)},wk=function(){this.g=0};Fa(wk);var xk=function(o,r,a){x(o.h,function(t){var e=o.g;if(!t.g&&(t.l(r,a),t.o())){t.g=!0;var n=t.h(),i=new nk;i.add("id","av-js"),i.add("type","verif"),i.add("vtype",t.w),t=wk.B(),i.add("i",t.g++),i.add("adk",e),pk(i,n),e=new sk(i),vk(e)}})},yk=function(){this.h=this.l=this.o=this.g=0},zk=function(t,e,n,i){e&&(t.g+=n,t.h+=n,t.o+=n,t.l=Math.max(t.l,t.o)),(void 0===i?!e:i)&&(t.o=0)},Ak=[1,.75,.5,.3,0],Bk=function(t){this.h=t=void 0===t?Ak:t,this.g=Wa(this.h,function(){return new yk})},Dk=function(t,e){return Ck(t,function(t){return t.g},void 0===e||e)},Fk=function(t,e){return Ek(t,e,function(t){return t.g})},Gk=function(t,e){return Ck(t,function(t){return t.l},void 0===e||e)},Hk=function(t,e){return Ek(t,e,function(t){return t.l})},Ik=function(t,e){return Ek(t,e,function(t){return t.h})},Jk=function(t){x(t.g,function(t){t.h=0})},Kk=function(t,e,n,i,o,r,a){for(a=void 0===a||a,n=r?Math.min(e,n):n,r=0;r<t.h.length;r++){var s=t.h[r],u=0<n&&s<=n;s=!(0<e&&s<=e)||i,zk(t.g[r],a&&u,o,!a||s)}},Ck=function(t,e,n){return t=Wa(t.g,function(t){return e(t)}),n?t:Lk(t)},Ek=function(t,e,n){var i=ab(t.h,function(t){return e<=t});return-1==i?0:n(t.g[i])},Lk=function(t){return Wa(t,function(t,e,n){return 0<e?n[e]-n[e-1]:n[e]})},Mk=function(){this.l=new Bk,this.W=new yk,this.H=this.F=-1,this.$=1e3,this.aa=new Bk([1,.9,.8,.7,.6,.5,.4,.3,.2,.1,0]),this.M=this.I=-1},Nk=function(t,e){return Gk(t.l,void 0===e||e)};Mk.prototype.K=function(t,e,n,i){this.F=-1!=this.F?Math.min(this.F,e.V):e.V,this.H=Math.max(this.H,e.V),this.I=-1!=this.I?Math.min(this.I,e.ia):e.ia,this.M=Math.max(this.M,e.ia),Kk(this.aa,e.ia,n.ia,e.g,t,i),Kk(this.l,e.V,n.V,e.g,t,i),n=i||n.Ta!=e.Ta?n.isVisible()&&e.isVisible():n.isVisible(),e=!e.isVisible()||e.g,zk(this.W,n,t,e)},Mk.prototype.Ua=function(){return this.W.l>=this.$};var Ok=new G(0,0,0,0),Pk=function(t,e,n){J.call(this),this.position=Ok.clone(),this.Lb=this.Db(),this.tc=-2,this.Xf=Date.now(),this.zd=-1,this.rc=e,this.Hb=null,this.Cb=!1,this.Tb=null,this.opacity=-1,this.Uf=n,this.Cd=this.uc=Ea,this.oa=new Ci,this.oa.Na=t,this.oa.g=t,this.Fa=!1,this.Ra={Dc:null,Cc:null},this.wd=!0,this.sb=null,this.$a=!1,P.B().F++,this.dd=0,this.ba=this.ec(),this.yd=-1,this.Y=null,t=this.N=new ui,N(t,"od",ii),qi(N(t,"opac",L)),qi(N(t,"gcm",L)),N(t,"cm",L),t.h.cm=1,qi(N(t,"sbeos",L)),qi(N(t,"prf",L)),qi(N(t,"mwt",L)),qi(N(t,"lcs",L)),N(t,"iogeo",L),qi(N(t,"osddt",L)),(t=this.oa.Na)&&t.getAttribute&&!/-[a-z]/.test("googleAvInapp")&&(Bi&&t.dataset?"googleAvInapp"in t.dataset:t.hasAttribute?t.hasAttribute("data-"+Jc()):t.getAttribute("data-"+Jc()))&&(R.B().h=!0),1==this.Uf?wi(this.N,"od",1):wi(this.N,"od",0)};p(Pk,J),k=Pk.prototype,k.R=function(){this.oa.g&&(this.Ra.Dc&&(ze(this.oa.g,"mouseover",this.Ra.Dc),this.Ra.Dc=null),this.Ra.Cc&&(ze(this.oa.g,"mouseout",this.Ra.Cc),this.Ra.Cc=null)),this.sb&&this.sb.U(),this.Y&&this.Y.U(),delete this.Lb,delete this.uc,delete this.Cd,delete this.oa.Na,delete this.oa.g,delete this.Ra,delete this.sb,delete this.Y,delete this.N,J.prototype.R.call(this)},k.Sa=function(){return this.Y?this.Y.g:this.position},k.Hc=function(t){P.B().Hc(t)},k.za=function(){return!1},k.Db=function(){return new Mk},k.na=function(){return this.Lb};var Qk=function(t,e){e!=t.$a&&(t.$a=e,t=R.B(),e?t.A++:0<t.A&&t.A--)},Rk=function(t,e,n){t.tb(n?t.ba.V:t.dd,e,n,!1,{},t.Eb(e),t.ba.ia)},Sk=function(t){return t.Y?t.Y.getName():P.B().Y},Tk=function(t,e){!t.Y&&(e=null!=(e=e.create(t.oa.g,t.N,t.za()))&&e.vc()?e:null)&&(t.Y=e)},Uk=function(t,e,n){return t.Hb&&-1!==e.h&&-1!==t.Hb.h?n<(t=e.h-t.Hb.h)?0:t:0};Pk.prototype.bd=function(t){return Uk(this,t,1e4)};var Vk=function(t,e,n){if(t.Y){t.Y.Ca();var i=t.Y.o,o=i.l(),r=o.g;if(null!=i.A){var a=i.F;t.Tb=new ce(a.left-r.left,a.top-r.top)}r=.99<=(r=t.Wb()?Math.max(i.g,i.w):i.g)?1:r,a={},null!==o.volume&&(a.volume=o.volume),o=1===xi(t.N,"osddt"),"nis"==t.Y.getName()&&(o=!0),"gsv"==t.Y.getName()&&(o=!0),o?(o=t.bd(i),t.Hb=i,t.tb(r,e,n,!1,a,o,i.o)):t.tb(r,e,n,!1,a,t.Eb(e),i.o)}},Wk=function(t){if(t.Cb&&t.sb){var e=1==xi(t.N,"od"),n=R.B().g,i=t.sb,o=Sk(t),r=new E(Se(n),Te(n));if(n=t.Wb(),t={Vf:o,Tb:t.Tb,$f:r,Wb:n,V:t.ba.V,Yf:e},e=i.l){e.Ca(),r=(o=e.o).l().g;var a=null,s=null;null!=o.A&&r&&(a=o.F,a=new ce(a.left-r.left,a.top-r.top),s=new E(r.right-r.left,r.bottom-r.top)),o=n?Math.max(o.g,o.w):o.g,n={Vf:e.getName(),Tb:a,$f:s,Wb:n,Yf:!1,V:o}}else n=null;n&&xk(i,t,n)}};k=Pk.prototype,k.tb=function(t,e,n,i,o,r,a){this.Fa||(this.Cb&&(t=this.$b(t,n,o,a),i=i&&this.ba.V>=(this.Ta()?.3:.5),this.Oc(r,t,i),this.rc=e,0<t.V&&-1===this.yd&&(this.yd=e),-1==this.zd&&this.Ua()&&(this.zd=e),-2==this.tc&&(this.tc=Sj(this.Sa())?t.V:-1),this.ba=t,n&&(this.ba.V=0)),this.uc(this))},k.Oc=function(t,e,n){this.na().K(t,e,this.ba,n)},k.ec=function(){return new ji},k.$b=function(t,e,n,i){return(n=this.ec()).g=e,e=Mi().h,e=0===xg(Pd)?-1:e.isVisible()?0:1,n.h=e,n.V=this.ac(t),n.Ta=this.Ta(),n.ia=i,n},k.cd=function(t,e){return-1==this.rc?0:e<(t=t-this.rc||1)?1:t},k.Eb=function(t){return this.cd(t,1e4)},k.ac=function(t){return 0===this.opacity&&1===xi(this.N,"opac")?0:t},k.Ta=function(){return!1},k.Wb=function(){return!1},k.ra=function(){return 0},k.Ua=function(){return this.Lb.Ua()};var Xk=function(t,e,n){e&&(t.uc=e),n&&(t.Cd=n)},Yk="StopIteration"in q?q.StopIteration:{message:"StopIteration",stack:""},Zk=function(){};Zk.prototype.next=function(){throw Yk},Zk.prototype.ib=function(){return this};var $k=function(t){if(t instanceof Zk)return t;if("function"==typeof t.ib)return t.ib(!1);if(Ia(t)){var e=0,n=new Zk;return n.next=function(){for(;;){if(e>=t.length)throw Yk;if(e in t)return t[e++];e++}},n}throw Error("Not implemented")},al=function(t,e){if(Ia(t))try{x(t,e,void 0)}catch(t){if(t!==Yk)throw t}else{t=$k(t);try{for(;;)e.call(void 0,t.next(),void 0,t)}catch(t){if(t!==Yk)throw t}}},bl=function(t){if(Ia(t))return fb(t);t=$k(t);var e=[];return al(t,function(t){e.push(t)}),e},cl=function(){this.o=this.g=this.l=this.h=this.w=0},dl=function(t){var e={},n=w()-t.w;return e.ptlt=n,e=e,(n=t.h)&&(e.pnk=n),(n=t.l)&&(e.pnc=n),(n=t.o)&&(e.pnmm=n),(t=t.g)&&(e.pns=t),e},el=function(){ji.call(this),this.l=!1,this.volume=void 0,this.w=!1,this.o=-1};p(el,ji);var fl=function(t){return Fj(t.volume)&&.1<=t.volume},gl=function(){var t={};for(var e in this.h=(t.vs=[1,0],t.vw=[0,1],t.am=[2,2],t.a=[4,4],t.f=[8,8],t.bm=[16,16],t.b=[32,32],t.avw=[0,64],t.avs=[64,0],t.pv=[256,256],t.gdr=[0,512],t.p=[0,1024],t.r=[0,2048],t.m=[0,4096],t.um=[0,8192],t.ef=[0,16384],t.s=[0,32768],t.pmx=[0,16777216],t),this.g={},this.h)0<this.h[e][1]&&(this.g[e]=0);this.l=0},hl=function(t,e){var n=t.h[e],i=n[1];t.l+=n[0],0<i&&0==t.g[e]&&(t.g[e]=1)},jl=function(t){return il(t,Jb(t.h))},il=function(t,e){var n,i=0;for(n in t.g)bb(e,n)&&1==t.g[n]&&(i+=t.h[n][1],t.g[n]=2);return i},kl=function(t){var e,n=0;for(e in t.g){var i=t.g[e];1!=i&&2!=i||(n+=t.h[e][1])}return n},ll=function(){this.h=this.l=0};ll.prototype.g=function(){return this.l};var ml=function(t,e,n){32<=e||(t.h&1<<e&&!n?t.l&=~(1<<e):t.h&1<<e||!n||(t.l|=1<<e),t.h|=1<<e)},nl=function(){Mk.call(this),this.g=new yk,this.P=this.C=this.L=0,this.J=-1,this.la=new yk,this.w=new yk,this.h=new Bk,this.A=this.o=-1,this.D=new yk,this.$=2e3,this.O=new ll,this.Z=new ll,this.X=new ll};p(nl,Mk);var ol=function(t,e,n){var i=t.P;return mj||n||-1==t.J||(i+=e-t.J),i};nl.prototype.K=function(t,e,n,i){if(!e.w){Mk.prototype.K.call(this,t,e,n,i);var o=fl(e)&&fl(n),r=.5<=(i?Math.min(e.V,n.V):n.V);Fj(e.volume)&&(this.o=-1!=this.o?Math.min(this.o,e.volume):e.volume,this.A=Math.max(this.A,e.volume)),r&&(this.L+=t,this.C+=o?t:0),Kk(this.h,e.V,n.V,e.g,t,i,o),zk(this.g,!0,t),zk(this.w,o,t),zk(this.D,n.l,t),zk(this.la,o&&!r,t),t=Math.floor(e.o/1e3),ml(this.O,t,e.isVisible()),ml(this.Z,t,1<=e.V),ml(this.X,t,fl(e))}};var pl=function(){this.g=!1},ql=function(t,e){this.g=!1,this.o=t,this.J=e,this.h=0};p(ql,pl);var rl=function(t,e){return!!t.l(e)&&(e=t.J.report(t.o,e),t.h|=e,0==e)};ql.prototype.l=function(){return!0},ql.prototype.w=function(){return!1},ql.prototype.getId=function(){var e=this,t=Ob(function(t){return t==e.o});return tj[t].toString()},ql.prototype.toString=function(){var t="";return this.w()&&(t+="c"),this.g&&(t+="s"),0<this.h&&(t+=":"+this.h),this.getId()+t};var sl=function(t,e,n,i){ik.call(this,t,e,n,i)};p(sl,ik),sl.prototype.D=function(t){var e=1==xi(this.N,"od");return Vj(t,this.w,this.element,e)},sl.prototype.Wc=function(){var t=this.h.l();this.timestamp=-1===t.time?nj():t.time},sl.prototype.Ca=function(){this.Wc(),this.yb(),this.Vc();var t=this.g,e=this.w;e=(t=t.left<=e.right&&e.left<=t.right&&t.top<=e.bottom&&e.top<=t.bottom?new G(Math.max(t.top,e.top),Math.min(t.right,e.right),Math.min(t.bottom,e.bottom),Math.max(t.left,e.left)):new G(0,0,0,0)).top>=t.bottom||t.left>=t.right?new G(0,0,0,0):t,t=this.h.l();var n=0,i=0,o=0;0<(this.g.bottom-this.g.top)*(this.g.right-this.g.left)&&(this.D(e)?e=new G(0,0,0,0):(n=R.B().w,o=new G(0,n.height,n.width,0),n=Rj(e,this.g),i=Rj(e,R.B().g),o=Rj(e,o))),e=e.top>=e.bottom||e.left>=e.right?new G(0,0,0,0):Ue(e,-this.g.left,-this.g.top),this.o=new Xj(t,this.g,e,n,i,this.timestamp,o)},sl.prototype.getName=function(){return this.h.getName()};var tl=new G(0,0,0,0),ul=function(t,e,n){ik.call(this,null,t,e,n),this.F=t.pc(),this.A=0};p(ul,sl),k=ul.prototype,k.vc=function(){return this.l(),!0},k.La=function(){sl.prototype.Ca.call(this)},k.Wc=function(){},k.yb=function(){},k.Ca=function(){this.l(),sl.prototype.Ca.call(this)},k.Za=function(t){(t=t.pc())!==this.F&&(t?this.l():(R.B().g=new G(0,0,0,0),this.g=new G(0,0,0,0),this.w=new G(0,0,0,0),this.timestamp=-1)),this.F=t};var vl={},wl=(vl.firstquartile=0,vl.midpoint=1,vl.thirdquartile=2,vl.complete=3,vl),xl=function(t,e,n,i,o,r){o=void 0===o?null:o,r=void 0===r?[]:r,Pk.call(this,e,n,i),this.bc=0,this.Aa={},this.ea=new gl,this.gd={},this.ha="",this.Oa=null,this.ub=!1,this.g=[],this.A=o,this.C=r,this.w=null,this.o=-1,this.$=this.H=void 0,this.K=this.I=0,this.P=-1,this.Qa=this.pa=!1,this.O=this.D=this.h=this.gb=this.wb=0,this.xb=this.Z=-1,this.vb=0,this.sa=new Bk,this.W=this.aa=this.X=0,this.la=-1,this.da=0,this.L=Ea,this.M=[this.Db()],this.Td=2,this.Xa={},this.Xa.pause="p",this.Xa.resume="r",this.Xa.skip="s",this.Xa.mute="m",this.Xa.unmute="um",this.Xa.exitfullscreen="ef",this.l=null};p(xl,Pk),xl.prototype.za=function(){return!0},xl.prototype.Bd=function(){if(this.A){var t=this.A;t.g||(t.g=rl(t,this))}};var yl=function(t){return void 0===t?t:Number(t)?yj(t,3):0};k=xl.prototype,k.bd=function(t){return Uk(this,t,Math.max(1e4,this.o/3))},k.Eb=function(t){return 2==this.da?0:Pk.prototype.cd.call(this,t,Math.max(1e4,this.o/3))},k.tb=function(t,e,n,i,o,r,a){var s=this,u=this.L(this)||{};Tb(u,o),this.o=u.duration||this.o,this.H=u.isVpaid||this.H,this.$=u.isYouTube||this.$,o=zl(this,e),1===Al(this)&&(r=o),Pk.prototype.tb.call(this,t,e,n,i,u,r,a),this.A&&this.A.g&&x(this.C,function(t){t.g||(t.g=rl(t,s))})},k.Oc=function(t,e,n){Pk.prototype.Oc.call(this,t,e,n),Bl(this).K(t,e,this.ba,n),this.Qa=fl(this.ba)&&fl(e),-1==this.P&&this.pa&&(this.P=this.na().g.g),this.ea.l=0,t=this.Ua(),e.isVisible()&&hl(this.ea,"vs"),t&&hl(this.ea,"vw"),Fj(e.volume)&&hl(this.ea,"am"),fl(e)&&hl(this.ea,"a"),this.$a&&hl(this.ea,"f"),-1!=e.h&&(hl(this.ea,"bm"),1==e.h&&hl(this.ea,"b")),fl(e)&&e.isVisible()&&hl(this.ea,"avs"),this.Qa&&t&&hl(this.ea,"avw"),0<e.V&&hl(this.ea,"pv"),Cl(this,this.na().g.g,!0)&&hl(this.ea,"gdr"),2e3<=Hk(this.na().l,1)&&hl(this.ea,"pmx")},k.Db=function(){return new nl},k.na=function(){return this.Lb};var Bl=function(t,e){var n;return n=null!=e&&e<t.M.length?e:t.M.length-1,t.M[n]};xl.prototype.ec=function(){return new el},xl.prototype.$b=function(t,e,n,i){return(t=Pk.prototype.$b.call(this,t,e,n,void 0===i?-1:i)).l=this.$a,t.w=2==this.da,t.volume=n.volume,Fj(t.volume)||(this.wb++,e=this.ba,Fj(e.volume)&&(t.volume=e.volume)),n=n.currentTime,t.o=void 0!==n&&0<=n?n:-1,t};var Al=function(t){var e=!!xi(P.B().N,"umt");return t.H||!e&&!t.$?0:1},zl=function(t,e){e=t.Eb(e);var n=t.L(t)||{},i=(n=void 0!==n.currentTime?n.currentTime:t.I)-t.I,o=0;return 0<=i?(t.K+=e,t.W+=Math.max(e-i,0),o=Math.min(i,t.K)):t.aa+=Math.abs(i),0!=i&&(t.K=0),-1==t.la&&0<i&&(t.la=0<=lj?nj()-lj:-1),t.I=n,o};xl.prototype.ac=function(t){return R.B().C?0:this.$a?1:Pk.prototype.ac.call(this,t)},xl.prototype.ra=function(){return 1},xl.prototype.getDuration=function(){return this.o};var Dl=function(t,e){Ya(t.C,function(t){return t.o==e.o})||t.C.push(e)},Cl=function(t,e,n){return 15e3<=e||!!t.pa&&(!(void 0===n||!n)||(0<t.o?e>=t.o/2:0<t.P&&e>=t.P))},El=function(t){var e={},n=R.B();return e.insideIframe=n.l,e.unmeasurable=t.Fa,e.position=t.Sa(),e.exposure=t.ba.V,e.documentSize=n.o,e.viewportSize=new E(Se(n.g),Te(n.g)),null!=t.l&&(e.presenceData=t.l),e.screenShare=t.ba.ia,e},Fl=function(t){var e=yj(t.ba.V,2),n=t.ea.l,i=t.ba,o=Bl(t),r=yl(o.o),a=yl(o.A),s=yl(i.volume),u=yj(o.F,2),h=yj(o.H,2),l=yj(i.V,2),c=yj(o.I,2),f=yj(o.M,2);return i=yj(i.ia,2),(t=t.Sa().clone()).round(),{Zf:e,ob:n,Mb:r,Ib:a,jb:s,Nb:u,Jb:h,V:l,Ob:c,Kb:f,ia:i,position:t,Sb:o=Nk(o,!1)}},Hl=function(t,e){Gl(t.g,e,function(){return{Zf:0,ob:void 0,Mb:-1,Ib:-1,jb:-1,Nb:-1,Jb:-1,V:-1,Ob:-1,Kb:-1,ia:-1,position:void 0,Sb:[]}}),t.g[e]=Fl(t)},Gl=function(t,e,n){for(var i=t.length;i<e+1;)t.push(n()),i++},Kl=function(t,e,n){var i=t.gd[e];if(null!=i)return i;i=Il(t,e);var o=Ob(function(t){return t==e});return n=Jl(t,i,i,n,wl[Nb[o]]),"fully_viewable_audible_half_duration_impression"==e&&(n.std="csm",n.ic=il(t.ea,["gdr"])),n},Ll=function(t,e,n){var i=[e];return t==e&&n==e||(i.unshift(t),i.push(n)),i},Jl=function(t,e,n,i,o){if(t.Fa)return{if:0};var r=t.Sa().clone();r.round();var a=R.B(),s=P.B(),u=t.na(),h=Sk(t),l={};return l.if=a.l?1:void 0,l.sdk=t.w?t.w:void 0,l.t=t.Xf,l.p=[r.top,r.left,r.bottom,r.right],l.tos=Dk(u.l,!1),l.mtos=Nk(u),l.mcvt=u.W.l,l.ps=void 0,l.vht=ol(u,nj(),2==t.da),l.mut=u.la.l,l.a=yl(t.ba.volume),l.mv=yl(u.A),l.fs=t.$a?1:0,l.ft=u.D.g,l.at=u.w.g,l.as=.1<=u.o?1:0,l.atos=Dk(u.h),l.ssb=Dk(u.aa,!1),l.amtos=Gk(u.h),l.uac=t.wb,l.vpt=u.g.g,"nio"==h&&(l.nio=1,l.avms="nio"),l.gmm="4",l.gdr=Cl(t,u.g.g,!0)?1:0,l.efpf=t.Td,"gsv"!=h&&"nis"!=h||0<(r=t.Y).A&&(l.nnut=r.A),l.tcm=Al(t),l.nmt=t.aa,l.bt=t.W,l.pst=t.la,l.vpaid=t.H,l.dur=t.o,l.vmtime=t.I,l.is=t.ea.l,1<=t.g.length&&(l.i0=t.g[0].ob,l.a0=[t.g[0].jb],l.c0=[t.g[0].V],l.ss0=[t.g[0].ia],r=t.g[0].position,l.p0=r?[r.top,r.left,r.bottom,r.right]:void 0),2<=t.g.length&&(l.i1=t.g[1].ob,l.a1=Ll(t.g[1].Mb,t.g[1].jb,t.g[1].Ib),l.c1=Ll(t.g[1].Nb,t.g[1].V,t.g[1].Jb),l.ss1=Ll(t.g[1].Ob,t.g[1].ia,t.g[1].Kb),r=t.g[1].position,l.p1=r?[r.top,r.left,r.bottom,r.right]:void 0,l.mtos1=t.g[1].Sb),3<=t.g.length&&(l.i2=t.g[2].ob,l.a2=Ll(t.g[2].Mb,t.g[2].jb,t.g[2].Ib),l.c2=Ll(t.g[2].Nb,t.g[2].V,t.g[2].Jb),l.ss2=Ll(t.g[2].Ob,t.g[2].ia,t.g[2].Kb),r=t.g[2].position,l.p2=r?[r.top,r.left,r.bottom,r.right]:void 0,l.mtos2=t.g[2].Sb),4<=t.g.length&&(l.i3=t.g[3].ob,l.a3=Ll(t.g[3].Mb,t.g[3].jb,t.g[3].Ib),l.c3=Ll(t.g[3].Nb,t.g[3].V,t.g[3].Jb),l.ss3=Ll(t.g[3].Ob,t.g[3].ia,t.g[3].Kb),r=t.g[3].position,l.p3=r?[r.top,r.left,r.bottom,r.right]:void 0,l.mtos3=t.g[3].Sb),l.cs=kl(t.ea),e&&(l.ic=jl(t.ea),l.dvpt=u.g.h,l.dvs=Ik(u.l,.5),l.dfvs=Ik(u.l,1),l.davs=Ik(u.h,.5),l.dafvs=Ik(u.h,1),n&&(u.g.h=0,Jk(u.l),Jk(u.h)),t.Ua()&&(l.dtos=u.L,l.dav=u.C,l.dtoss=t.bc+1,n&&(u.L=0,u.C=0,t.bc++)),l.dat=u.w.h,l.dft=u.D.h,n&&(u.w.h=0,u.D.h=0)),l.ps=[a.o.width,a.o.height],l.bs=[Se(a.g),Te(a.g)],l.scs=[a.w.width,a.w.height],l.dom=a.domain,t.gb&&(l.vds=t.gb),(0<t.C.length||t.A)&&(e=fb(t.C),t.A&&e.push(t.A),l.pings=Wa(e,function(t){return t.toString()})),e=Wa(Va(t.C,function(t){return t.w()}),function(t){return t.getId()}),gb(e),l.ces=e,t.h&&(l.vmer=t.h),t.D&&(l.vmmk=t.D),t.O&&(l.vmiec=t.O),l.avms=Sk(t),t.Y&&Tb(l,t.Y.Ja()),"exc"==s.Y&&(l.femt=t.Z,l.femvt=t.xb,l.emc=t.vb,l.emb=Dk(t.sa,!1),l.emuc=t.X,l.avms="exc"),i?(l.c=yj(t.ba.V,2),l.ss=yj(t.ba.ia,2)):l.tth=nj()-kj,l.mc=yj(u.H,2),l.nc=yj(u.F,2),l.mv=yl(u.A),l.nv=yl(u.o),l.lte=yj(t.tc,2),i=Bl(t,o),Nk(u),l.qmtos=Nk(i),l.qnc=yj(i.F,2),l.qmv=yl(i.A),l.qnv=yl(i.o),l.qas=.1<=i.o?1:0,l.qi=t.ha,l.avms||(l.avms="geo"),l.psm=u.O.h,l.psv=u.O.g(),l.psfv=u.Z.g(),l.psa=u.X.g(),(s=zi(s.N)).length&&(l.veid=s),t.l&&Tb(l,dl(t.l)),l},Il=function(t,e){if(bb(sj,e))return!0;var n=t.Aa[e];return void 0!==n&&(t.Aa[e]=!0,!n)},Ml=w(),Pl=function(){this.g={};var t=F();Nl(this,t,document);var e=Ol();try{if("1"==e){for(var n=t.parent;n!=t.top;n=n.parent)Nl(this,n,n.document);Nl(this,t.top,t.top.document)}}catch(t){}},Ol=function(){var t=document.documentElement;try{if(!He(F().top))return"2";var e=[],n=F(t.ownerDocument);for(t=n;t!=n.top&&t.frameElement;t=t.parent)e.push(t.frameElement);return e&&0!=e.length?"1":"0"}catch(t){return"2"}},Nl=function(t,e,n){xj(n,"mousedown",function(){return Ql(t)},301),xj(e,"scroll",function(){return Rl(t)},302),xj(n,"touchmove",function(){return Sl(t)},303),xj(n,"mousemove",function(){return Tl(t)},304),xj(n,"keydown",function(){return Ul(t)},305)},Ql=function(t){Cb(t.g,function(t){1e5<t.l||++t.l})},Rl=function(t){Cb(t.g,function(t){1e5<t.g||++t.g})},Sl=function(t){Cb(t.g,function(t){1e5<t.g||++t.g})},Ul=function(t){Cb(t.g,function(t){1e5<t.h||++t.h})},Tl=function(t){Cb(t.g,function(t){1e5<t.o||++t.o})},Vl=function(){this.g=[],this.h=[]},Wl=function(t,e){return $a(t.g,function(t){return t.ha==e})},Xl=function(t,e){return e?$a(t.g,function(t){return t.oa.Na==e}):null},Yl=function(t,e){return $a(t.h,function(t){return 2==t.ra()&&t.ha==e})},$l=function(){return 0==Zl.g.length?Zl.h:0==Zl.h.length?Zl.g:eb(Zl.h,Zl.g)};Vl.prototype.reset=function(){this.g=[],this.h=[]};var am=function(t,e){t=1==e.ra()?t.g:t.h;var n=Za(t,function(t){return t==e});return-1!=n&&(t.splice(n,1),e.Y&&e.Y.wc(),e.U(),!0)},bm=function(t){var e=Zl;if(am(e,t)){switch(t.ra()){case 0:var n=function(){return null};case 2:n=function(){return Yl(e,t.ha)};break;case 1:n=function(){return Wl(e,t.ha)}}for(var i=n();i;i=n())am(e,i)}},cm=function(t){var e=Zl;t=Va(t,function(t){return!Xl(e,t.oa.Na)}),e.g.push.apply(e.g,ma(t))},dm=function(t){var n=Zl,i=[];x(t,function(e){Ya(n.g,function(t){return t.oa.Na===e.oa.Na&&t.ha===e.ha})||(n.g.push(e),i.push(e))})};Fa(Vl);var Zl=Vl.B(),em=function(){this.g=this.h=null},fm=function(t,n){if(null==t.h)return!1;return t.g=$a(t.h,function(t){return null!=t&&t.kd()}),t.g&&(t.g.jd(function(t,e){n(t,e)})?ek(t.g.g):n(t.g.g.Ya(),t.g)),null!=t.g};Fa(em);var hm=function(t){t=gm(t),jk.call(this,t.length?t[t.length-1]:new ak(D,0)),this.l=t,this.h=null};p(hm,jk),k=hm.prototype,k.getName=function(){return(this.h?this.h:this.g).getName()},k.Ja=function(){return(this.h?this.h:this.g).Ja()},k.Ea=function(){return(this.h?this.h:this.g).Ea()},k.jd=function(t){var e=!1;return x(this.l,function(t){t.Bc()&&(e=!0)}),e&&(this.o=t,dk(this.g,this)),e},k.U=function(){x(this.l,function(t){t.U()}),jk.prototype.U.call(this)},k.kd=function(){return Ya(this.l,function(t){return t.od()})},k.qb=function(){return Ya(this.l,function(t){return t.Rb()})},k.Pb=function(t,e,n){return new sl(t,this.g,e,n)},k.La=function(t){this.h=t.h};var gm=function(t){if(!t.length)return[];t=Va(t,function(t){return null!=t&&t.od()});for(var e=1;e<t.length;e++)dk(t[e-1],t[e]);return t},im=function(t,e,n,i){ik.call(this,t,e,n,i),this.C=this.J=null};p(im,sl),im.prototype.vc=function(){var t=this;return this.C||(this.C=nj()),!!ej(298,function(){return jm(t)})||(ck(this.h,"msf"),!1)};var lm=function(e,t){try{if(t.length){e.J||(e.J=nj());var n=km(t),i=cf(e.element,e.h.g.ka),o=i.x,r=i.y;e.g=new G(Math.round(r),Math.round(o)+n.boundingClientRect.width,Math.round(r)+n.boundingClientRect.height,Math.round(o));var a=Dj(n.intersectionRect);e.w=Ue(a,e.g.left-a.left,e.g.top-a.top)}}catch(t){e.wc(),gj(299,t)}},km=function(t){return Xa(t,function(t,e){return t.time>e.time?t:e},t[0])};im.prototype.yb=function(){},im.prototype.D=function(){return!1},im.prototype.Vc=function(){},im.prototype.Ja=function(){var t={};return Object.assign(this.h.Ja(),(t.niot_obs=this.C,t.niot_cbk=this.J,t))};var mm={threshold:[0,.3,.5,.75,1]},nm=function(t,e,n,i){im.call(this,t,e,n,i),this.A=this.F=this.l=null};p(nm,im),nm.prototype.getName=function(){return"nio"},nm.prototype.wc=function(){if(this.l&&this.element)try{this.l.unobserve(this.element),this.F?(this.F.unobserve(this.element),this.F=null):this.A&&(this.A.disconnect(),this.A=null)}catch(t){}};var om=function(t){return t.l&&t.l.takeRecords?t.l.takeRecords():[]},jm=function(e){if(!e.element)return!1;var t=e.element,n=e.h.g.ka,i=P.B().g.g;return e.l=new n.IntersectionObserver(Ti(i,function(t){return lm(e,t)}),mm),i=Ti(i,function(){e.l.unobserve(t),e.l.observe(t),lm(e,om(e))}),n.ResizeObserver?(e.F=new n.ResizeObserver(i),e.F.observe(t)):n.MutationObserver&&(e.A=new q.MutationObserver(i),e.A.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),e.l.observe(t),lm(e,om(e)),!0};nm.prototype.Ca=function(){var t=om(this);0<t.length&&lm(this,t),im.prototype.Ca.call(this)};var pm=function(t){t=void 0===t?D:t,jk.call(this,new ak(t,2))};p(pm,jk),pm.prototype.getName=function(){return"nio"},pm.prototype.qb=function(){return!(zb&&0<=zb.toLowerCase().indexOf("cobalt"))&&("exc"!==P.B().Y&&!R.B().h&&null!=this.g.g.ka.IntersectionObserver)},pm.prototype.Pb=function(t,e,n){return new nm(t,this.g,e,n)};var rm=function(){var t=qm();ak.call(this,D.top,t,"geo")};p(rm,ak),rm.prototype.P=function(){return R.B().g},rm.prototype.Rb=function(){var t=qm();return this.C!==t&&(this.g!=this&&t>this.g.C&&(this.g=this,bk(this)),this.C=t),2==t};var qm=function(){P.B();var t=R.B();return t.l||t.h?0:2};Fa(rm);var sm=function(){};Fa(sm);var tm=function(){this.done=!1,this.g={Sd:0,Sc:0,nh:0,$c:0,kc:-1,Vd:0,Ud:0,Wd:0},this.w=null,this.A=!1,this.h=null,this.F=0,this.l=new Yj(this)},wm=function(){var i=um;i.A||(i.A=!0,vm(i,function(t){for(var e=[],n=0;n<arguments.length;++n)e[+n]=arguments[n];return i.o.apply(i,ma(e))}),i.o())};tm.prototype.aa=function(){xm(this,$l(),!1)};var ym=function(){sm.B();var t=em.B();null!=t.g&&t.g.g?ek(t.g.g):Mj(R.B())},xm=function(t,e,n){if(!t.done&&(t.l.cancel(),0!=e.length)){t.h=null;try{ym();var i=nj(),o=P.B();if(o.A=i,null!=em.B().g)for(o=0;o<e.length;o++)Vk(e[o],i,n);else switch(o.Y){case"exc":for(o=0;o<e.length;o++)Rk(e[o],i,n)}for(i=0;i<e.length;i++)Wk(e[i]);++t.g.$c}finally{n?x(e,function(t){t.ba.V=0}):Zj(t.l)}}},vm=function(t,e){if(!t.w){e=fj(142,e),Mi();var n=yg(Pd);n&&ye(Pd,n,e,{capture:!1})&&(t.w=e)}};tm.prototype.o=function(){var t=Pj(),n=nj();t?(mj||(ij=n,x(Zl.g,function(t){var e=t.na();e.P=ol(e,n,1!=t.da)})),mj=!0):(this.F=zm(this,n),mj=!1,kj=n,x(Zl.g,function(t){t.Cb&&(t.na().J=n)})),xm(this,$l(),!t)};var Am=function(){var t=em.B();if(null!=t.g){var e=t.g;x($l(),function(t){return Tk(t,e)})}},zm=function(t,e){return t=t.F,mj&&(t+=e-ij),t},Bm=function(d){var g=um;d=void 0===d?function(){return{}}:d,bj.Lc("av-js"),Yi.g=.01,dj([function(t){var e=P.B(),n={};if(n.bin=e.l,n.type="error",n=n,e=yi(e.N),!g.h){var i=D.document,o=0<=jj?nj()-jj:-1,r=nj();-1==g.g.kc&&(o=r);var a=R.B(),s=P.B(),u=yi(s.N),h=$l();try{if(0<h.length){var l=a.g;l&&(u.bs=[Se(l),Te(l)]);var c=a.o;c&&(u.ps=[c.width,c.height]),D.screen&&(u.ss=[D.screen.width,D.screen.height])}else u.url=encodeURIComponent(D.location.href.substring(0,512)),i.referrer&&(u.referrer=encodeURIComponent(i.referrer.substring(0,512)));switch(u.tt=o,u.pt=jj,u.bin=s.l,P.B().Y){case"iem":u.iem=1;break;case"aio":u.aio=1;break;case"nio":u.nio=1}if(void 0!==D.google_osd_load_pub_page_exp&&(u.olpp=D.google_osd_load_pub_page_exp),u.deb=[1,g.g.Sd,g.g.Sc,g.g.$c,g.g.kc,0,g.l.h,g.g.Vd,g.g.Ud,g.g.Wd].join("-"),u.tvt=zm(g,r),a.h&&(u.inapp=1),null!==D&&D!=D.top){0<h.length&&(u.iframe_loc=encodeURIComponent(D.location.href.substring(0,512)));var f=a.J;u.is=[Se(f),Te(f)]}}catch(t){u.error=1}g.h=u}for(var p in l={},c=g.h)l[p]=c[p];if(p=P.B().g,1==xi(p.l,"prf")){if(c=new Ri,i=0,-1<(f=p.g).g&&(i=f.o.g.now()-f.g),c=Ld(c,1,f.l+i),f=p.g,c=Ld(c,5,-1<f.g?f.h+1:f.h),c=Ld(c,2,p.h.g.l()),c=Ld(c,3,p.h.g.h()),f=Ld(c,4,p.h.g.g()),p={},c=new Bd,0!==(i=null==(i=null==(i=Hd(f,1))?i:+i)?0:i)&&null!=(o=i)){if(zd(c.g,9),i=c.g,0===(a=(o=(a=o)<0?1:0)?-a:a))xd=0<1/a?0:2147483648,wd=0;else if(isNaN(a))xd=2147483647,wd=4294967295;else if(17976931348623157e292<a)xd=(o<<31|2146435072)>>>0,wd=0;else if(a<22250738585072014e-324)a/=Math.pow(2,-1074),xd=(o<<31|a/4294967296)>>>0,wd=a>>>0;else{if(r=0,2<=(s=a))for(;2<=s&&r<1023;)r++,s/=2;else for(;s<1&&-1022<r;)s*=2,r--;a*=Math.pow(2,-r),xd=(o<<31|r+1023<<20|1048576*a&1048575)>>>0,wd=4503599627370496*a>>>0}Ad(i,wd),Ad(i,xd)}if(0!==(i=Kd(f,2))&&null!=i&&Cd(c,2,i),0!==(i=Kd(f,3))&&null!=i&&Cd(c,3,i),0!==(i=Kd(f,4))&&null!=i&&Cd(c,4,i),0!==(i=Kd(f,5))&&null!=i&&null!=i)if(zd(c.g,40),f=c.g,0<=i)zd(f,i);else{for(o=0;o<9;o++)f.g.push(127&i|128),i>>=7;f.g.push(1)}for(f=new Uint8Array(c.l+c.g.length()),r=(o=c.h).length,a=i=0;a<r;a++)s=o[a],f.set(s,i),i+=s.length;o=c.g.end(),f.set(o,i),c.h=[f],p.pf=vd(f),p=p}else p={};Tb(l,p),Tb(t,n,e,l,d()),(n=uk())&&Tb(t,((e={}).v=encodeURIComponent(n),e))}])};Fa(tm);var um=tm.B(),Cm=null,Dm="",Em=!1,Fm=function(){var t=Cm||D;if(!t)return"";var e=[];return t.location&&t.location.href?(e.push("url="+encodeURIComponent(t.location.href.substring(0,512))),t.document&&t.document.referrer&&e.push("referrer="+encodeURIComponent(t.document.referrer.substring(0,512))),e.join("&")):""},Gm=function(e){return function(t){return void 0===t[e]?0:t[e]}},Im=function(){var i=[0,2,4];return function(t){if(t=t.tos,Ha(t)){for(var e=Array(t.length),n=0;n<t.length;n++)e[n]=0<n?e[n-1]+t[n]:t[n];return Hm(e,i)}}},Jm=function(n,i,o,r){return o=void 0===o||o,r=void 0===r?function(){return!0}:r,function(t){var e=t[n];if(Ha(e)&&r(t))return Hm(e,i,o)}},Km=function(e,n){return function(t){return n(t)?t[e]:void 0}},Lm=function(n){return function(t){for(var e=0;e<n.length;e++)if(n[e]===t.e||void 0===n[e]&&!t.hasOwnProperty("e"))return!0;return!1}},Hm=function(i,n,t){return void 0===t||t?Va(i,function(t,e){return bb(n,e)}):Wa(n,function(t,e,n){return i.slice(0<e?n[e-1]+1:0,t+1).reduce(function(t,e){return t+e},0)})},Mm=Lm([void 0,1,2,3,4,8,16]),Nm=Lm([void 0,4,8,16]),Om={sv:"sv",cb:"cb",e:"e",nas:"nas",msg:"msg",if:"if",sdk:"sdk",p:"p",p0:Km("p0",Nm),p1:Km("p1",Nm),p2:Km("p2",Nm),p3:Km("p3",Nm),tos:"tos",mtos:"mtos",mtos1:Jm("mtos1",[0,2,4],!1,Nm),mtos2:Jm("mtos2",[0,2,4],!1,Nm),mtos3:Jm("mtos3",[0,2,4],!1,Nm),mcvt:"mcvt",ps:"ps",scs:"scs",bs:"bs",vht:"vht",mut:"mut",a:"a",a0:Km("a0",Nm),a1:Km("a1",Nm),a2:Km("a2",Nm),a3:Km("a3",Nm),ft:"ft",dft:"dft",at:"at",dat:"dat",as:"as",vpt:"vpt",gmm:"gmm",std:"std",efpf:"efpf",swf:"swf",nio:"nio",px:"px",nnut:"nnut",vmer:"vmer",vmmk:"vmmk",vmiec:"vmiec",nmt:"nmt",tcm:"tcm",bt:"bt",pst:"pst",vpaid:"vpaid",dur:"dur",vmtime:"vmtime",dtos:"dtos",dtoss:"dtoss",dvs:"dvs",dfvs:"dfvs",dvpt:"dvpt",fmf:"fmf",vds:"vds",is:"is",i0:"i0",i1:"i1",i2:"i2",i3:"i3",ic:"ic",cs:"cs",c:"c",c0:Km("c0",Nm),c1:Km("c1",Nm),c2:Km("c2",Nm),c3:Km("c3",Nm),mc:"mc",nc:"nc",mv:"mv",nv:"nv",qmt:Km("qmtos",Mm),qnc:Km("qnc",Mm),qmv:Km("qmv",Mm),qnv:Km("qnv",Mm),raf:"raf",rafc:"rafc",lte:"lte",ces:"ces",tth:"tth",femt:"femt",femvt:"femvt",emc:"emc",emuc:"emuc",emb:"emb",avms:"avms",nvat:"nvat",qi:"qi",psm:"psm",psv:"psv",psfv:"psfv",psa:"psa",pnk:"pnk",pnc:"pnc",pnmm:"pnmm",pns:"pns",ptlt:"ptlt",pngs:"pings",veid:"veid",ssb:"ssb",ss0:Km("ss0",Nm),ss1:Km("ss1",Nm),ss2:Km("ss2",Nm),ss3:Km("ss3",Nm),dc_rfl:"urlsigs",obd:"obd",omidp:"omidp",omidr:"omidr",omidv:"omidv",omida:"omida",omids:"omids"},Pm={c:Gm("c"),at:"at",atos:Jm("atos",[0,2,4]),ta:function(t){if(void 0===t.tth)return"1"},a:"a",dur:"dur",p:"p",tos:Im(),j:"dom",mtos:Jm("mtos",[0,2,4]),gmm:"gmm",gdr:"gdr",ss:Gm("ss"),vsv:Yb("w2"),t:"t"},Qm={atos:"atos",amtos:"amtos",avt:Jm("atos",[2]),davs:"davs",dafvs:"dafvs",dav:"dav",ss:Gm("ss"),t:"t"},Rm={a:"a",tos:Im(),at:"at",c:Gm("c"),mtos:Jm("mtos",[0,2,4]),dur:"dur",fs:"fs",p:"p",vpt:"vpt",vsv:Yb("ias_w2"),dom:"dom",gmm:"gmm",gdr:"gdr",t:"t"},Sm={tos:Im(),at:"at",c:Gm("c"),mtos:Jm("mtos",[0,2,4]),p:"p",vpt:"vpt",vsv:Yb("dv_w4"),gmm:"gmm",gdr:"gdr",dom:"dom",t:"t",mv:"mv",qmpt:Jm("qmtos",[0,2,4]),qvs:(y4=[1,.5,0],function(t){var e=t.qnc;if("number"==typeof e)return Wa(y4,function(t){return 0<e&&t<=e?1:0})}),qmv:"qmv",qa:"qas",a:"a"},y4,Um=function(t,e){var n={sv:"833",cb:"j"};return n.nas=Zl.g.length,n.msg=t,void 0!==e&&(t=Tm(e))&&(n.e=tj[t]),n},Vm=function(t){return 0==t.lastIndexOf("custom_metric_viewable",0)},Tm=function(t){var e=Vm(t)?"custom_metric_viewable":t.toLowerCase();return Ob(function(t){return t==e})},Wm={pg:"visible",dg:"audible",eh:"time",gh:"timetype"},Xm={visible:function(t){return /^(100|[0-9]{1,2})$/.test(t)},audible:function(t){return"0"==t||"1"==t},timetype:function(t){return"mtos"==t||"tos"==t},time:function(t){return /^(100|[0-9]{1,2})%$/.test(t)||/^([0-9])+ms$/.test(t)}},Ym=function(){this.g=void 0,this.h=!1,this.l=0,this.o=-1,this.w="tos"},Zm=function(t){try{var e=t.split(",");return e.length>Jb(Wm).length?null:Xa(e,function(t,e){if(2!=(e=e.toLowerCase().split("=")).length||void 0===Xm[e[0]]||!Xm[e[0]](e[1]))throw Error("Entry ("+e[0]+", "+e[1]+") is invalid.");return t[e[0]]=e[1],t},{})}catch(t){return null}},$m=function(t,e){if(null==t.g)return 0;switch(t.w){case"mtos":return t.h?Hk(e.h,t.g):Hk(e.l,t.g);case"tos":return t.h?Fk(e.h,t.g):Fk(e.l,t.g)}return 0},an=function(t,e,n,i){ql.call(this,e,i),this.F=t,this.A=n};p(an,ql),an.prototype.getId=function(){return this.F},an.prototype.w=function(){return!0},an.prototype.l=function(t){var n=t.na(),i=t.getDuration();return Ya(this.A,function(t){if(null!=t.g)var e=$m(t,n);else t:{switch(t.w){case"mtos":e=t.h?n.w.l:n.g.g;break t;case"tos":e=t.h?n.w.g:n.g.g;break t}e=0}return t=0!=e&&(-1!=(t=-1!=t.l?t.l:void 0!==i&&0<i?t.o*i:-1)&&t<=e)})};var bn=function(t){ql.call(this,"fully_viewable_audible_half_duration_impression",t)};p(bn,ql),bn.prototype.l=function(t){var e=Fk(t.na().h,1);return Cl(t,e)};var cn=function(t,e){ql.call(this,t,e)};p(cn,ql),cn.prototype.l=function(t){return t.na().Ua()};var dn=function(){this.h=this.o=this.A=this.w=this.l=this.g=""},en=function(){},fn=function(t,e,n,i,o){var r={};if(void 0!==t)if(null!=e)for(var a in e){var s=e[a];a in Object.prototype||null!=s&&(v(s)?r[a]=s(t):r[a]=t[s])}else Tb(r,t);return void 0!==n&&Tb(r,n),0<(t=rk(pk(new nk,r))).length&&void 0!==i&&void 0!==o&&(t+="&"+i+"="+(o=o(t))),t},gn=function(){};p(gn,en),gn.prototype.g=function(t){var e=new dn;return e.g=fn(t,Om),e.l=fn(t,Qm),e};var hn=function(t,e,n){ul.call(this,t,e,n)};p(hn,ul),hn.prototype.l=function(){var t=Da("ima.admob.getViewability"),e=xi(this.N,"queryid");v(t)&&e&&t(e)},hn.prototype.getName=function(){return"gsv"};var jn=function(t){t=void 0===t?D:t,jk.call(this,new ak(t,2))};p(jn,jk),jn.prototype.getName=function(){return"gsv"},jn.prototype.qb=function(){var t=R.B();return P.B(),t.h&&!1},jn.prototype.Pb=function(t,e,n){return new hn(this.g,e,n)};var kn=function(t,e,n){ul.call(this,t,e,n)};p(kn,ul),kn.prototype.l=function(){var o=this,t=Da("ima.bridge.getNativeViewability"),e=xi(this.N,"queryid");v(t)&&e&&t(e,function(t){Pb(t)&&o.A++;var e=t.opt_nativeViewVisibleBounds||{},n=t.opt_nativeViewHidden;o.g=Ej(t.opt_nativeViewBounds||{});var i=o.h.l();i.g=n?tl.clone():Ej(e),o.timestamp=t.opt_nativeTime||-1,R.B().g=i.g,void 0!==(t=t.opt_nativeVolume)&&(i.volume=t)})},kn.prototype.getName=function(){return"nis"};var ln=function(t){t=void 0===t?D:t,jk.call(this,new ak(t,2))};p(ln,jk),ln.prototype.getName=function(){return"nis"},ln.prototype.qb=function(){var t=R.B();return P.B(),t.h&&!1},ln.prototype.Pb=function(t,e,n){return new kn(this.g,e,n)};var mn=function(){ak.call(this,D,2,"mraid"),this.$=0,this.K=this.L=!1,this.J=null,this.h=uj(this.ka),this.w.g=new G(0,0,0,0),this.la=!1};p(mn,ak),mn.prototype.Rb=function(){return null!=this.h.wa},mn.prototype.O=function(){var t={};return this.$&&(t.mraid=this.$),this.L&&(t.mlc=1),t.mtop=this.h.xd,this.J&&(t.mse=this.J),this.la&&(t.msc=1),t.mcp=this.h.Bb,t},mn.prototype.F=function(e,t){for(var n=[],i=1;i<arguments.length;++i)n[i-1]=arguments[i];try{return this.h.wa[e].apply(this.h.wa,n)}catch(t){gj(538,t,.01,function(t){t.method=e})}};var nn=function(t,e,n){t.F("addEventListener",e,n)};mn.prototype.Bc=function(){var t,e=this;if(this.H)return!this.nb();if(this.H=!0,2===this.h.Bb)return this.J="ng",ck(this,"w"),!1;if(1===this.h.Bb)return this.J="mm",ck(this,"w"),!1;if(t=1!=xi(P.B().N,"mxd")){t:switch(this.h.xd){case 0:case 3:t=!0;break t;default:t=!1}t=!t}return t?(this.J="if",ck(this,"w"),!1):(R.B().D=!0,this.ka.document.readyState&&"complete"==this.ka.document.readyState?on(this):xj(this.ka,"load",function(){Mi().setTimeout(fj(292,function(){return on(e)}),100)},292),!0)};var on=function(t){P.B().w=!!t.F("isViewable"),nn(t,"viewableChange",pn),"loading"===t.F("getState")?nn(t,"ready",qn):rn(t)},rn=function(t){"string"==typeof t.h.wa.AFMA_LIDAR?(t.L=!0,sn(t)):(t.h.Bb=3,t.J="nc",ck(t,"w"))},sn=function(t){t.K=!1;var e=1==xi(P.B().N,"rmmt"),n=!!t.F("isViewable");e&&n||Mi().setTimeout(fj(524,function(){t.K||(tn(t),gj(540,Error()),t.J="mt",ck(t,"w"))}),500),un(t),nn(t,t.h.wa.AFMA_LIDAR,vn)},un=function(t){var e=1==xi(P.B().N,"sneio"),n=void 0!==t.h.wa.AFMA_LIDAR_EXP_1,i=void 0!==t.h.wa.AFMA_LIDAR_EXP_2;(e=e&&i)&&(t.h.wa.AFMA_LIDAR_EXP_2=!0),n&&(t.h.wa.AFMA_LIDAR_EXP_1=!e)},tn=function(t){t.F("removeEventListener",t.h.wa.AFMA_LIDAR,vn),t.L=!1};mn.prototype.X=function(){var t=R.B(),e=wn(this,"getMaxSize");t.g=new G(0,e.width,e.height,0)},mn.prototype.Z=function(){R.B().w=wn(this,"getScreenSize")};var wn=function(t,e){return"loading"===t.F("getState")?new E(-1,-1):(e=t.F(e))?(t=parseInt(e.width,10),e=parseInt(e.height,10),isNaN(t)||isNaN(e)?new E(-1,-1):new E(t,e)):new E(-1,-1)};mn.prototype.U=function(){tn(this),ak.prototype.U.call(this)};var qn=function(){try{var t=mn.B();t.F("removeEventListener","ready",qn),rn(t)}catch(t){gj(541,t)}},vn=function(t,e){try{var n=mn.B();n.K=!0;var i=t?new G(t.y,t.x+t.width,t.y+t.height,t.x):new G(0,0,0,0),o=nj(),r=Pj(),a=new Wj(o,r,n);a.g=i,a.volume=e,n.La(a)}catch(t){gj(542,t)}},pn=function(t){var e=P.B(),n=mn.B();t&&!e.w&&(e.w=!0,n.la=!0,1==xi(P.B().N,"msp")&&n.J&&ck(n,"w",!0))};Fa(mn);var yn=function(){this.l=this.M=!1,this.g=null,this.o=new gn,this.h=null;var t={};this.K=(t.start=this.ge,t.firstquartile=this.be,t.midpoint=this.de,t.thirdquartile=this.he,t.complete=this.$d,t.pause=this.Gc,t.resume=this.ud,t.skip=this.fe,t.viewable_impression=this.Ka,t.mute=this.fb,t.unmute=this.fb,t.fullscreen=this.ce,t.exitfullscreen=this.ae,t.fully_viewable_audible_half_duration_impression=this.Ka,t.measurable_impression=this.Ka,t.abandon=this.Gc,t.engagedview=this.Ka,t.impression=this.Ka,t.creativeview=this.Ka,t.progress=this.fb,t.custom_metric_viewable=this.Ka,t.bufferstart=this.Gc,t.bufferfinish=this.ud,t),t={},this.P=(t.overlay_resize=this.ee,t.abandon=this.fc,t.close=this.fc,t.collapse=this.fc,t.overlay_unmeasurable_impression=function(t){return Kl(t,"overlay_unmeasurable_impression",Pj())},t.overlay_viewable_immediate_impression=function(t){return Kl(t,"overlay_viewable_immediate_impression",Pj())},t.overlay_unviewable_impression=function(t){return Kl(t,"overlay_unviewable_impression",Pj())},t.overlay_viewable_end_of_session_impression=function(t){return Kl(t,"overlay_viewable_end_of_session_impression",Pj())},t),P.B().l=3,xn(this)};yn.prototype.A=function(t){Qk(t,!1),bm(t)},yn.prototype.F=function(){};var zn=function(t,e,n,i){return(t=t.C(null,i,!0,e)).w=n,cm([t]),t};yn.prototype.C=function(t,e,n,i){var o=this;return this.h||(this.h=this.Zc()),e=n?e:-1,(t=null==this.h||this.l?new xl(D,t,e,7):new xl(D,t,e,7,new ql("measurable_impression",this.h),An(this))).ha=i,vi(t.N),wi(t.N,"queryid",t.ha),t.Hc(""),Xk(t,function(t){for(var e=[],n=0;n<arguments.length;++n)e[+n]=arguments[n];return o.I.apply(o,ma(e))},function(t){for(var e=[],n=0;n<arguments.length;++n)e[+n]=arguments[n];return o.O.apply(o,ma(e))}),(i=em.B().g)&&Tk(t,i),t.oa.Na&&sm.B(),t};var Bn=function(t,e,n){hi(e);var i=t.h;x(e,function(t){var e=Wa(t.g,function(t){var e=Zm(t);if(null==e)t=null;else if(t=new Ym,null!=e.visible&&(t.g=e.visible/100),null!=e.audible&&(t.h=1==e.audible),null!=e.time){var n="mtos"==e.timetype?"mtos":"tos",i=lb(e.time,"%")?"%":"ms";e=parseInt(e.time,10),"%"==i&&(e/=100),"ms"==i?(t.l=e,t.o=-1):(t.l=-1,t.o=e),t.w=n}return t});Ya(e,function(t){return null==t})||Dl(n,new an(t.id,t.event,e,i))})},An=function(t){return t=t.h,[new cn("viewable_impression",t),new bn(t)]},Cn=function(){var t=[];R.B();var e=P.B();"exc"!=e.Y&&t.push(rm.B()),xi(e.N,"mvp_lv")&&t.push(mn.B());var n=[new jn,new ln];return n.push(new hm(t)),"exc"!=e.Y&&n.push(new pm(D)),n},En=function(t){if(!t.M){t.M=!0;try{var e=nj(),n=P.B(),i=R.B();if(jj=e,n.o=79463069,"o"!==t.g&&(Cm=Wf(D).ka),Ni()){um.g.Sc=0,um.g.kc=nj()-e;var o=Cn(),r=em.B();r.h=o,fm(r,function(){Dn()})?um.done||(Am(),dk(r.g.g,t),wm()):(i.l&&"exc"!==n.Y?Dn:wm)()}else Em=!0}catch(t){throw Zl.reset(),t}}},Fn=function(t){um.l.cancel(),Dm=t,um.done=!0},Gn=function(t){var e=P.B();if(t.g)return t.g;var n=em.B().g;if(n)switch(n.getName()){case"nis":t.g="n";break;case"gsv":t.g="m"}else switch(e.Y){case"nis":t.g="n"}return t.g||(t.g="h"),t.g},Hn=function(t,e,n){return null==t.h?(e.gb|=4,!1):(t=t.h.report(n,e),e.gb|=t,0==t)};yn.prototype.Za=function(t){switch(t.Ea()){case 0:(t=em.B().g)&&(t=t.g,cb(t.A,this),t.D&&this.za()&&gk(t)),Dn();break;case 2:wm()}},yn.prototype.La=function(){},yn.prototype.za=function(){return!1};var Dn=function(){var t=[new pm(D)],e=em.B();e.h=t,fm(e,function(){Fn("i")})?um.done||(Am(),wm()):Fn("i")};yn.prototype.O=function(t,e){switch(t.Fa=!0,t.ra()){case 1:In(this,t,e);break;case 2:this.Jc(t)}this.Kc(t)};var In=function(t,e,n){if(!e.ub){var i=Kl(e,"start",Pj());t=t.o.g(i).g;var o={};o.r=n,o.v="833v",Ee(t,function(t,e){return o[t]="mtos"==t||"tos"==t?e:encodeURIComponent(e)}),n=Fm(),Ee(n,function(t,e){return o[t]=encodeURIComponent(e)}),o.id="lidarvf",n="//pagead2.googlesyndication.com/pagead/gen_204?"+rk(pk(new nk,o)),vk(n),e.ub=!0}};k=yn.prototype,k.ge=function(t){return Hl(t,0),Kl(t,"start",Pj())},k.fb=function(t,e,n){return xm(um,[t],!Pj()),this.Ka(t,e,n)},k.Ka=function(t,e,n){return Kl(t,n,Pj())},k.be=function(t){return Jn(t,"firstquartile",1)},k.de=function(t){return t.pa=!0,Jn(t,"midpoint",2)},k.he=function(t){return Jn(t,"thirdquartile",3)},k.$d=function(t){var e=Jn(t,"complete",4);return 0!=t.da&&(t.da=3),e};var Jn=function(t,e,n){return xm(um,[t],!Pj()),Hl(t,n),4!=n&&Gl(t.M,n,t.Db),Kl(t,e,Pj())};k=yn.prototype,k.ud=function(t,e,n){return e=Pj(),2!=t.da||e||(t.na().J=nj()),xm(um,[t],!e),2==t.da&&(t.da=1),Kl(t,n,e)},k.fe=function(t,e){return e=this.fb(t,e||{},"skip"),0!=t.da&&(t.da=3),e},k.ce=function(t,e){return Qk(t,!0),this.fb(t,e||{},"fullscreen")},k.ae=function(t,e){return Qk(t,!1),this.fb(t,e||{},"exitfullscreen")},k.Gc=function(t,e,n){return(e=t.na()).P=ol(e,nj(),1!=t.da),xm(um,[t],!Pj()),1==t.da&&(t.da=2),Kl(t,n,Pj())},k.ee=function(t){return xm(um,[t],!Pj()),t.h()},k.fc=function(t){return xm(um,[t],!Pj()),this.td(t),0!=t.da&&(t.da=3),t.h()};var xn=function(e){Bm(function(){var t=Kn();return null!=e.g&&(t.sdk=e.g),t.avms=P.B().Y,t})},Ln=function(t,e,n,i){var o=Xl(Zl,n);return null!==o&&o.ha!==e&&(t.A(o),o=null),o||(e=t.C(n,nj(),!1,e),0==Zl.h.length&&(P.B().o=79463069),dm([e]),(o=e).w=Gn(t),i&&(o.Oa=i)),o};yn.prototype.I=function(){};var Nn=function(t,e){for(var n in e.D=0,pj)null==t[n]&&(e.D|=pj[n]);Mn(t,"currentTime"),Mn(t,"duration")};k=yn.prototype,k.Jc=function(){},k.td=function(){},k.hd=function(){},k.Kc=function(){},k.Zc=function(){};var Mn=function(t,e){var n=t[e];void 0!==n&&0<n&&(t[e]=Math.floor(1e3*n))},Kn=function(){var t=R.B(),e={sv:"833"};return e.if=t.l?"1":"0",e.nas=String(Zl.g.length),e},On=w(),Pn=!1,Qn=!1,Rn=!1,S=function(t){return!(!t||"function"!=typeof t||String(Function.prototype.toString).indexOf("[native code]")<0)&&0<=String(t).indexOf("[native code]")},Sn=function(t){return!!(1<<t&On)},Tn=[function(t){return!(!t.chrome||!t.chrome.webstore)},function(t){return!!t.document.documentMode},function(t){return!!t.document.fonts.ready},function(){return Sn(0)},function(t){return!!t.ActiveXObject},function(t){return!!t.chrome},function(t){return!!t.navigator.serviceWorker},function(t){return!!t.opera},function(t){return!!t.sidebar},function(){return!1},function(){return Sn(1)},function(t){return!t.ActiveXObject},function(t){return"-ms-ime-align"in t.document.documentElement.style},function(t){return"-ms-scroll-limit"in t.document.documentElement.style},function(t){return"-webkit-font-feature-settings"in t.document.body.style},function(){return Sn(2)},function(t){return"ActiveXObject"in t},function(t){return"MozAppearance"in t.document.documentElement.style},function(t){return"_phantom"in t},function(t){return"callPhantom"in t},function(t){return"content"in t.document.createElement("template")},function(t){return"getEntriesByType"in t.performance},function(){return Sn(3)},function(t){return"image-rendering"in t.document.body.style},function(t){return"object-fit"in t.document.body.style},function(t){return"open"in t.document.createElement("details")},function(t){return"orientation"in t.screen},function(t){return"performance"in t},function(t){return"shape-image-threshold"in t.document.body.style},function(){return Sn(4)},function(t){return"srcset"in t.document.createElement("img")},function(){return Qn},function(){return Rn},function(){return Sn(5)},function(t){return(t=t.document.createElement("div")).style.width="1px",t.style.width="-webkit-min-content",t.style.width="min-content","1px"!=t.style.width},function(t){return(t=t.document.createElement("div")).style.width="1px",t.style.width="calc(1px - 1px)",t.style.width="-webkit-calc(1px - 1px)","1px"!=t.style.width},function(){var a=!1;eval('var DummyFunction1 = function(x){ "use strict"; var a = 12; b = a + x*35; }');try{DummyFunction1()}catch(t){a=!0}return a},function(){var e=!1;try{DummyFunction2()}catch(t){e=!0}return e},function(){return!1},function(){return Sn(6)},function(t){var e=t.document.createElement("canvas");return e.width=e.height=1,(e=e.getContext("2d")).globalCompositeOperation="multiply",e.fillStyle="rgb(0,255,255)",e.fillRect(0,0,1,1),e.fill(),e.fillStyle="rgb(255,255,0)",e.fillRect(0,0,1,1),e.fill(),(e=e.getImageData(0,0,1,1).data)[0]==e[2]&&e[1]==e[3]||S(t.navigator.vibrate)},function(t){return(t=t.document.createElement("canvas")).width=t.height=1,(t=t.getContext("2d")).globalCompositeOperation="multiply",t.fillStyle="rgb(0,255,255)",t.fillRect(0,0,1,1),t.fill(),t.fillStyle="rgb(255,255,0)",t.fillRect(0,0,1,1),t.fill(),(t=t.getImageData(0,0,1,1).data)[0]==t[2]&&t[1]==t[3]},function(t){return S(t.document.createElement("div").matches)},function(t){return(t=t.document.createElement("input")).setAttribute("type","range"),"text"!==t.type},function(t){return t.CSS.supports("image-rendering","pixelated")},function(t){return t.CSS.supports("object-fit","contain")},function(){return Sn(7)},function(t){return t.CSS.supports("object-fit","inherit")},function(t){return t.CSS.supports("shape-image-threshold","0.9")},function(t){return t.CSS.supports("word-break","keep-all")},function(){return eval("1 == [for (item of [1,2,3]) item][0]")},function(t){return S(t.CSS.supports)},function(){return S(Intl.Collator)},function(t){return S(t.document.createElement("dialog").show)},function(){return Sn(8)},function(t){return S(t.document.createElement("div").animate([{transform:"scale(1)",easing:"ease-in"},{transform:"scale(1.3)",easing:"ease-in"}],{duration:1300,iterations:1}).reverse)},function(t){return S(t.document.createElement("div").animate)},function(t){return S(t.document.documentElement.webkitRequestFullScreen)},function(t){return S(t.navigator.getBattery)},function(t){return S(t.navigator.permissions.query)},function(){return!1},function(){return Sn(9)},function(){return S(webkitRequestAnimationFrame)},function(t){return S(t.BroadcastChannel.call)},function(t){return S(t.FontFace)},function(t){return S(t.Gamepad)},function(){return Sn(10)},function(t){return S(t.MutationEvent)},function(t){return S(t.MutationObserver)},function(t){return S(t.crypto.getRandomValues)},function(t){return S(t.document.body.createShadowRoot)},function(t){return S(t.document.body.webkitCreateShadowRoot)},function(t){return S(t.fetch)},function(){return Sn(11)},function(t){return S(t.navigator.serviceWorker.register)},function(t){return S(t.navigator.webkitGetGamepads)},function(t){return S(t.speechSynthesis.speak)},function(t){return S(t.webkitRTCPeerConnection)},function(t){return t.CSS.supports("--fake-var","0")},function(){return Sn(12)},function(t){return t.CSS.supports("cursor","grab")},function(t){return t.CSS.supports("cursor","zoom-in")},function(t){return t.CSS.supports("image-orientation","270deg")},function(){return Sn(13)},function(t){return t.CSS.supports("position","sticky")},function(t){return void 0===t.document.createElement("style").scoped},function(t){return t.performance.getEntriesByType("resource")instanceof Array},function(){return"undefined"==typeof InstallTrigger},function(){return"object"==typeof(new Intl.Collator).resolvedOptions()},function(t){return"boolean"==typeof t.navigator.onLine},function(){return Sn(14)},function(t){return void 0===t.navigator.qh},function(t){return"number"==typeof t.performance.now()},function(){return 0==new Uint16Array(1)[0]},function(t){return-1==t.ActiveXObject.toString().indexOf("native")},function(t){return-1==Object.prototype.toString.call(t.HTMLElement).indexOf("Constructor")}],Un=[function(t){t=t.document.createElement("div");var e=null,n=["{45EA75A0-A269-11D1-B5BF-0000F8051515}","{3AF36230-A269-11D1-B5BF-0000F8051515}","{89820200-ECBD-11CF-8B85-00AA005B4383}"];try{t.style.behavior="url(#default#clientcaps)"}catch(t){}for(var i=0;i<n.length;i++){try{e=t.getComponentVersion(n[i],"componentid").replace(/,/g,".")}catch(t){}if(e)return e.split(".")[0]}return!1},function(){return(new Date).getTimezoneOffset()},function(t){return(t.innerWidth||t.document.documentElement.clientWidth||t.document.body.clientWidth)/(t.innerHeight||t.document.documentElement.clientHeight||t.document.body.clientHeight)},function(t){return(t.outerWidth||t.document&&t.document.body&&t.document.body.offsetWidth)/(t.outerHeight||t.document&&t.document.body&&t.document.body.offsetHeight)},function(t){return t.screen.availWidth/t.screen.availHeight},function(t){return t.screen.width/t.screen.height}],Vn=[function(t){return t.navigator.userAgent},function(t){return t.navigator.platform},function(t){return t.navigator.vendor}],Xn=function(){try{Wn()}catch(t){}var a="a=1&b="+On+"&",i=[],s=99;return x(Tn,function(t,e){var n=!1;try{n=t(D)}catch(t){}i[e/32>>>0]|=n<<e%32}),x(i,function(t,e){a+=String.fromCharCode(s+e)+"="+(t>>>0).toString(16)+"&"}),s=105,x(Un,function(t){var e="false";try{e=t(D)}catch(t){}a+=String.fromCharCode(s++)+"="+e+"&"}),x(Vn,function(t){var e="";try{var n=t(D);t=[];for(var i=0,o=0;o<n.length;o++){var r=n.charCodeAt(o);255<r&&(t[i++]=255&r,r>>=8),t[i++]=r}e=vd(t,3)}catch(t){}a+=String.fromCharCode(s++)+"="+e+"&"}),a.slice(0,-1)},Wn=function(){if(!Pn){var t=function(){Qn=!0,D.document.removeEventListener("webdriver-evaluate",t,!0)};D.document.addEventListener("webdriver-evaluate",t,!0);var e=function(){Rn=!0,D.document.removeEventListener("webdriver-evaluate-response",e,!0)};D.document.addEventListener("webdriver-evaluate-response",e,!0),Pn=!0}},Yn=function(){this.h=64,this.g=Array(4),this.w=Array(this.h),this.o=this.l=0,this.reset()};Ra(Yn,Mh),Yn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.l=0};var Zn=function(t,e,n){n=n||0;var i=Array(16);if("string"==typeof e)for(var o=0;o<16;++o)i[o]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(o=0;o<16;++o)i[o]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],o=t.g[2];var r=t.g[3],a=e+(r^n&(o^r))+i[0]+3614090360&4294967295;a=(n=(o=(r=(e=(n=(o=(r=(e=(n=(o=(r=(e=(n=(o=(r=(e=(n=(o=(r=(e=(n=(o=(r=(e=(n=(o=(r=(e=(n=(o=(r=(e=(n=(o=(r=(e=(n=(o=(r=(e=(n=(o=(r=(e=(n=(o=(r=(e=(n=(o=(r=(e=(n=(o=(r=(e=(n=(o=(r=(e=n+(a<<7&4294967295|a>>>25))+((a=r+(o^e&(n^o))+i[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=o+(n^r&(e^n))+i[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(e^o&(r^e))+i[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=e+(r^n&(o^r))+i[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=r+(o^e&(n^o))+i[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=o+(n^r&(e^n))+i[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(e^o&(r^e))+i[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=e+(r^n&(o^r))+i[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=r+(o^e&(n^o))+i[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=o+(n^r&(e^n))+i[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(e^o&(r^e))+i[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=e+(r^n&(o^r))+i[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=r+(o^e&(n^o))+i[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=o+(n^r&(e^n))+i[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(e^o&(r^e))+i[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=e+(o^r&(n^o))+i[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=r+(n^o&(e^n))+i[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=o+(e^n&(r^e))+i[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(r^e&(o^r))+i[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=e+(o^r&(n^o))+i[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=r+(n^o&(e^n))+i[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=o+(e^n&(r^e))+i[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(r^e&(o^r))+i[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=e+(o^r&(n^o))+i[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=r+(n^o&(e^n))+i[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=o+(e^n&(r^e))+i[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(r^e&(o^r))+i[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=e+(o^r&(n^o))+i[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=r+(n^o&(e^n))+i[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=o+(e^n&(r^e))+i[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(r^e&(o^r))+i[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=e+(n^o^r)+i[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=r+(e^n^o)+i[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=o+(r^e^n)+i[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(o^r^e)+i[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=e+(n^o^r)+i[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=r+(e^n^o)+i[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=o+(r^e^n)+i[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(o^r^e)+i[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=e+(n^o^r)+i[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=r+(e^n^o)+i[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=o+(r^e^n)+i[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(o^r^e)+i[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=e+(n^o^r)+i[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=r+(e^n^o)+i[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=o+(r^e^n)+i[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(o^r^e)+i[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=e+(o^(n|~r))+i[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=r+(n^(e|~o))+i[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=o+(e^(r|~n))+i[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(r^(o|~e))+i[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=e+(o^(n|~r))+i[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=r+(n^(e|~o))+i[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=o+(e^(r|~n))+i[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(r^(o|~e))+i[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=e+(o^(n|~r))+i[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=r+(n^(e|~o))+i[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=o+(e^(r|~n))+i[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(r^(o|~e))+i[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((r=(e=n+((a=e+(o^(n|~r))+i[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=r+(n^(e|~o))+i[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((o=r+((a=o+(e^(r|~n))+i[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(o+(a<<21&4294967295|a>>>11))&4294967295,t.g[2]=t.g[2]+o&4294967295,t.g[3]=t.g[3]+r&4294967295},$n=function(t,e){if(void 0===n)var n=e.length;for(var i=n-t.h,o=t.w,r=t.l,a=0;a<n;){if(0==r)for(;a<=i;)Zn(t,e,a),a+=t.h;if("string"==typeof e){for(;a<n;)if(o[r++]=e.charCodeAt(a++),r==t.h){Zn(t,o),r=0;break}}else for(;a<n;)if(o[r++]=e[a++],r==t.h){Zn(t,o),r=0;break}}t.l=r,t.o+=n},ao=function(){this.h=null};p(ao,gn),ao.prototype.g=function(t){var e=gn.prototype.g.call(this,t),n=On=w(),i=Sn(5);return n=(Qn?!i:i)?2|n:-3&n,i=Sn(2),n={s1:((n=(Rn?!i:i)?8|n:-9&n)>>>0).toString(16)},this.h||(this.h=Xn()),e.w=this.h,e.A=fn(t,Pm,n,"h",bo("kArwaWEsTs")),e.o=fn(t,Rm,{},"h",bo("b96YPMzfnx")),e.h=fn(t,Sm,{},"h",bo("yb8Wev6QDg")),e};var bo=function(r){return function(t){var e=new Yn;$n(e,t+r);var n=Array((e.l<56?e.h:2*e.h)-e.l);for(n[0]=128,t=1;t<n.length-8;++t)n[t]=0;var i=8*e.o;for(t=n.length-8;t<n.length;++t)n[t]=255&i,i/=256;for($n(e,n),n=Array(16),t=i=0;t<4;++t)for(var o=0;o<32;o+=8)n[i++]=e.g[t]>>>o&255;return sd(n).slice(-8)}},co=function(t,e){this.h=t,this.l=e};co.prototype.report=function(t,e){var n=this.g(e);if(!v(n))return 1;var i={sv:"833",cb:"j"};i.e=eo(t),i=i;var o=Kl(e,t,Pj());Tb(i,o),e.gd[t]=o,i=2==e.ra()?tk(i).join("&"):this.l.g(i).g;try{return n(e.ha,i,t),0}catch(t){return 2}};var eo=function(t){var e=Vm(t)?"custom_metric_viewable":t;return t=Ob(function(t){return t==e}),tj[t]};co.prototype.g=function(){return Da(this.h)};var fo=function(t,e,n){co.call(this,t,e),this.o=n};p(fo,co),fo.prototype.g=function(t){return t.Oa?this.o[t.Oa]?function(){}:(gj(393,Error()),null):co.prototype.g.call(this,t)};var go=function(){yn.call(this),this.J=void 0,this.H=null,this.D=!1,this.w={},this.L=0,this.o=new ao};p(go,yn),go.prototype.F=function(t,e){var n=this,i=P.B(),o=em.B();if(null!=o.g)switch(o.g.getName()){case"nis":var r=ho(this,t,e);break;case"gsv":r=io(this,t,e)}else switch(i.Y){case"nis":r=ho(this,t,e);break;case"exc":r=jo(this,t)}return r||(e.opt_overlayAdElement?r=void 0:e.opt_adElement?r=Ln(this,t,e.opt_adElement,e.opt_osdId):(r=Wl(Zl,t)||void 0,1!=xi(i.N,"etl")||r||(r=Ln(this,t,D.document.body,e.opt_osdId)))),r&&1==r.ra()&&(r.L==Ea&&(r.L=function(t){return n.hd(t)}),ko(this,r,e)),r};var ko=function(t,e,n){n=n.opt_configurable_tracking_events,null!=t.h&&Ha(n)&&Bn(t,n,e)};go.prototype.hd=function(e){if(e.h=0,e.O=0,"h"==e.w||"n"==e.w){if(P.B().h)var t=Da("ima.bridge.getVideoMetadata");else if(e.Oa&&lo(this)){var n=this.w[e.Oa];n?t=function(t){return mo(n,t)}:null!==n&&gj(379,Error())}else t=Da("ima.common.getVideoMetadata");if(v(t))try{var i=t(e.ha)}catch(t){e.h|=4}else e.h|=2}else if("b"==e.w)if(t=Da("ytads.bulleit.getVideoMetadata"),v(t))try{i=t(e.ha)}catch(t){e.h|=4}else e.h|=2;else if("ml"==e.w)if(t=Da("ima.common.getVideoMetadata"),v(t))try{i=t(e.ha)}catch(t){e.h|=4}else e.h|=2;else e.h|=1;return e.h||(void 0===i?e.h|=8:null===i?e.h|=16:Pb(i)?e.h|=32:null!=i.errorCode&&(e.O=i.errorCode,e.h|=64)),null==i&&(i={}),Nn(i,e),Fj(i.volume)&&Fj(this.J)&&(i.volume*=this.J),i};var io=function(t,e,n){var i=Wl(Zl,e);return i||(i=n.opt_nativeTime||-1,i=zn(t,e,Gn(t),i),n.opt_osdId&&(i.Oa=n.opt_osdId)),i},ho=function(t,e,n){var i=Wl(Zl,e);return i=i||zn(t,e,"n",n.opt_nativeTime||-1)},jo=function(t,e){var n=Wl(Zl,e);return n=n||zn(t,e,"h",-1)};go.prototype.Zc=function(){if(lo(this))return new fo("ima.common.triggerExternalActivityEvent",this.o,this.w);var t=no(this);return null!=t?new co(t,this.o):null};var no=function(t){var e=P.B();switch(Gn(t)){case"b":return"ytads.bulleit.triggerExternalActivityEvent";case"n":return"ima.bridge.triggerExternalActivityEvent";case"h":if(e.h)return"ima.bridge.triggerExternalActivityEvent";case"m":case"ml":return"ima.common.triggerExternalActivityEvent"}return null};go.prototype.Jc=function(t){!t.g&&t.Fa&&Hn(this,t,"overlay_unmeasurable_impression")&&(t.g=!0)},go.prototype.td=function(t){t.wd&&(t.Ua()?Hn(this,t,"overlay_viewable_end_of_session_impression"):Hn(this,t,"overlay_unviewable_impression"),t.wd=!1)};var oo=function(t,e,n,i){var o={};if(Tb(o,{opt_adElement:void 0,opt_fullscreen:void 0},n=void 0===n?{}:n),o.opt_bounds)return t.o.g(Um("ol",i));if(void 0!==i)if(void 0!==Tm(i))if(Em)e=Um("ue",i);else if(En(t),"i"==Dm)(e=Um("i",i)).if=0;else if(e=t.F(e,o)){var r;if("i"==Dm&&(e.Fa=!0,t.Kc(e)),void 0!==(n=o.opt_fullscreen)&&Qk(e,!!n),(n=!R.B().h&&!Jj())&&(Mi(),n=0===xg(Pd)),r=n){switch(e.ra()){case 1:In(t,e,"pv");break;case 2:t.Jc(e)}Fn("pv")}if(n=i.toLowerCase(),!r&&bb(qj,n)&&0==e.da){"i"!=Dm&&(um.done=!1),r=void 0!==o?o.opt_nativeTime:void 0,lj=r="number"==typeof r?r:nj(),e.Cb=!0;var a=Pj();e.da=1,e.Aa={},e.Aa.firstquartile=!1,e.Aa.midpoint=!1,e.Aa.thirdquartile=!1,e.Aa.complete=!1,e.Aa.pause=!1,e.Aa.skip=!1,e.Aa.viewable_impression=!1,e.bc=0,a||(e.na().J=r),xm(um,[e],!a)}switch(0!=e.da&&bb(rj,n)&&(e.Fa||t.l||e.Bd()),(r=e.Xa[n])&&hl(e.ea,r),e.ra()){case 1:var s=Vm(n)?t.K.custom_metric_viewable:t.K[n];break;case 2:s=t.P[n]}s&&void 0!==(i=s.call(t,e,o,i))?(o=Um(void 0,n),Tb(o,i),i=o):i=void 0,3==e.da&&t.A(e),e=i}else e=Um("nf",i);else e=void 0;else e=Em?Um("ue"):(e=t.F(e,o))?(i=Um(),Tb(i,Jl(e,!0,!1,!1)),i):Um("nf");return"string"==typeof e?t.o.g(void 0):t.o.g(e)};go.prototype.I=function(t){this.l&&1==t.ra()&&po(this,t)},go.prototype.Kc=function(t){this.l&&1==t.ra()&&po(this,t)};var po=function(t,e){var n;if(e.Oa&&lo(t)){var i=t.w[e.Oa];i?n=function(t,e){qo(i,t,e)}:null!==i&&gj(379,Error())}else n=Da("ima.common.triggerViewabilityMeasurementUpdate");if(v(n)){var o=El(e);o.nativeVolume=t.J,n(e.ha,o)}},ro=function(t,e,n){t.w[e]=n},lo=function(t){return!(P.B().h||"h"!=Gn(t)&&"m"!=Gn(t))&&0!=t.L};go.prototype.C=function(t,e,n,i){return t=yn.prototype.C.call(this,t,e,n,i),this.D&&(e=this.H,null==t.l&&(t.l=new cl),e.g[t.ha]=t.l,t.l.w=Ml),t},go.prototype.A=function(t){return t&&1==t.ra()&&this.D&&delete this.H.g[t.ha],yn.prototype.A.call(this,t)};var so=function(t){var e={};return e.viewability=t.g,e.googleViewability=t.l,e.moatInit=t.w,e.moatViewability=t.A,e.integralAdsViewability=t.o,e.doubleVerifyViewability=t.h,e},to=function(t,e,n){return n=void 0===n?{}:n,t=oo(go.B(),e,n,t),so(t)};Fa(go);var uo=new dn;uo.w="stopped",uo.g="stopped",uo.l="stopped",uo.A="stopped",uo.o="stopped",uo.h="stopped",Object.freeze(uo);var vo=fj(193,to,void 0,Kn);u("Goog_AdSense_Lidar_sendVastEvent",vo,void 0);var wo=fj(194,function(t,e){return e=void 0===e?{}:e,t=oo(go.B(),t,e),so(t)});u("Goog_AdSense_Lidar_getViewability",wo,void 0);var xo=fj(195,function(){return Pi()});u("Goog_AdSense_Lidar_getUrlSignalsArray",xo,void 0);var yo=fj(196,function(){return dg(Pi())});u("Goog_AdSense_Lidar_getUrlSignalsList",yo,void 0);var zo=function(t,e){this.h={},this.g=[],this.o=this.l=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(t)if(t instanceof zo)for(n=t.ya(),i=0;i<n.length;i++)this.set(n[i],t.get(n[i]));else for(i in t)this.set(i,t[i])};zo.prototype.ga=function(){Ao(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},zo.prototype.ya=function(){return Ao(this),this.g.concat()},zo.prototype.isEmpty=function(){return 0==this.l},zo.prototype.clear=function(){this.h={},this.o=this.l=this.g.length=0};var Co=function(t,e){Bo(t.h,e)&&(delete t.h[e],t.l--,t.o++,t.g.length>2*t.l&&Ao(t))},Ao=function(t){if(t.l!=t.g.length){for(var e=0,n=0;e<t.g.length;){var i=t.g[e];Bo(t.h,i)&&(t.g[n++]=i),e++}t.g.length=n}if(t.l!=t.g.length){var o={};for(n=e=0;e<t.g.length;)i=t.g[e],Bo(o,i)||(o[t.g[n++]=i]=1),e++;t.g.length=n}};k=zo.prototype,k.get=function(t,e){return Bo(this.h,t)?this.h[t]:e},k.set=function(t,e){Bo(this.h,t)||(this.l++,this.g.push(t),this.o++),this.h[t]=e},k.forEach=function(t,e){for(var n=this.ya(),i=0;i<n.length;i++){var o=n[i],r=this.get(o);t.call(e,r,o,this)}},k.clone=function(){return new zo(this)},k.ib=function(e){Ao(this);var n=0,i=this.o,o=this,t=new Zk;return t.next=function(){if(i!=o.o)throw Error("The map has changed since the iterator was created");if(n>=o.g.length)throw Yk;var t=o.g[n++];return e?t:o.h[t]},t};var Bo=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},Do=function(t){if(t.ga&&"function"==typeof t.ga)return t.ga();if("string"==typeof t)return t.split("");if(Ia(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}return Ib(t)},Eo=function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Ia(t)||"string"==typeof t)x(t,e,void 0);else{if(t.ya&&"function"==typeof t.ya)var n=t.ya();else if(t.ga&&"function"==typeof t.ga)n=void 0;else if(Ia(t)||"string"==typeof t){n=[];for(var i=t.length,o=0;o<i;o++)n.push(o)}else n=Jb(t);o=(i=Do(t)).length;for(var r=0;r<o;r++)e.call(void 0,i[r],n&&n[r],t)}},Fo=function(t,e){var n;this.g=this.F=this.o="",this.J=null,this.w=this.l="",this.A=!1,t instanceof Fo?(this.A=void 0!==e?e:t.A,Go(this,t.o),this.F=t.F,this.g=t.g,Ho(this,t.J),this.l=t.l,Io(this,t.h.clone()),this.w=t.w):t&&(n=String(t).match(De))?(this.A=!!e,Go(this,n[1]||"",!0),this.F=Jo(n[2]||""),this.g=Jo(n[3]||"",!0),Ho(this,n[4]),this.l=Jo(n[5]||"",!0),Io(this,n[6]||"",!0),this.w=Jo(n[7]||"")):(this.A=!!e,this.h=new Ko(null,this.A))};Fo.prototype.toString=function(){var t=[],e=this.o;e&&t.push(Lo(e,Mo,!0),":");var n=this.g;return!n&&"file"!=e||(t.push("//"),(e=this.F)&&t.push(Lo(e,Mo,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.J)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Lo(n,"/"==n.charAt(0)?No:Oo,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.w)&&t.push("#",Lo(n,Po)),t.join("")},Fo.prototype.resolve=function(t){var e=this.clone(),n=!!t.o;n?Go(e,t.o):n=!!t.F,n?e.F=t.F:n=!!t.g,n?e.g=t.g:n=null!=t.J;var i=t.l;if(n)Ho(e,t.J);else if(n=!!t.l){if("/"!=i.charAt(0))if(this.g&&!this.l)i="/"+i;else{var o=e.l.lastIndexOf("/");-1!=o&&(i=e.l.substr(0,o+1)+i)}if(".."==(o=i)||"."==o)i="";else if(-1!=o.indexOf("./")||-1!=o.indexOf("/.")){i=0==o.lastIndexOf("/",0),o=o.split("/");for(var r=[],a=0;a<o.length;){var s=o[a++];"."==s?i&&a==o.length&&r.push(""):".."==s?((1<r.length||1==r.length&&""!=r[0])&&r.pop(),i&&a==o.length&&r.push("")):(r.push(s),i=!0)}i=r.join("/")}else i=o}return n?e.l=i:n=""!==t.h.toString(),n?Io(e,t.h.clone()):n=!!t.w,n&&(e.w=t.w),e},Fo.prototype.clone=function(){return new Fo(this)};var Go=function(t,e,n){t.o=n?Jo(e,!0):e,t.o&&(t.o=t.o.replace(/:$/,""))},Ho=function(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.J=e}else t.J=null},Io=function(t,e,n){e instanceof Ko?(t.h=e,Qo(t.h,t.A)):(n||(e=Lo(e,Ro)),t.h=new Ko(e,t.A))},So=function(t,e,n){return t.h.set(e,n),t},Jo=function(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""},Lo=function(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,To),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null},To=function(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)},Mo=/[#\/\?@]/g,Oo=/[#\?:]/g,No=/[#\?]/g,Ro=/[#\?@]/g,Po=/#/g,Ko=function(t,e){this.h=this.g=null,this.l=t||null,this.o=!!e},Uo=function(n){n.g||(n.g=new zo,n.h=0,n.l&&Ee(n.l,function(t,e){n.add(Cc(t),e)}))};Ko.prototype.add=function(t,e){Uo(this),this.l=null,t=Vo(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};var Wo=function(t,e){Uo(t),e=Vo(t,e),Bo(t.g.h,e)&&(t.l=null,t.h-=t.g.get(e).length,Co(t.g,e))};Ko.prototype.clear=function(){this.g=this.l=null,this.h=0},Ko.prototype.isEmpty=function(){return Uo(this),0==this.h};var Xo=function(t,e){return Uo(t),e=Vo(t,e),Bo(t.g.h,e)};k=Ko.prototype,k.forEach=function(n,i){Uo(this),this.g.forEach(function(t,e){x(t,function(t){n.call(i,t,e,this)},this)},this)},k.ya=function(){Uo(this);for(var t=this.g.ga(),e=this.g.ya(),n=[],i=0;i<e.length;i++)for(var o=t[i],r=0;r<o.length;r++)n.push(e[i]);return n},k.ga=function(t){Uo(this);var e=[];if("string"==typeof t)Xo(this,t)&&(e=eb(e,this.g.get(Vo(this,t))));else{t=this.g.ga();for(var n=0;n<t.length;n++)e=eb(e,t[n])}return e},k.set=function(t,e){return Uo(this),this.l=null,t=Vo(this,t),Xo(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},k.get=function(t,e){return t&&0<(t=this.ga(t)).length?String(t[0]):e},k.toString=function(){if(this.l)return this.l;if(!this.g)return"";for(var t=[],e=this.g.ya(),n=0;n<e.length;n++){var i=e[n],o=encodeURIComponent(String(i));i=this.ga(i);for(var r=0;r<i.length;r++){var a=o;""!==i[r]&&(a+="="+encodeURIComponent(String(i[r]))),t.push(a)}}return this.l=t.join("&")},k.clone=function(){var t=new Ko;return t.l=this.l,this.g&&(t.g=this.g.clone(),t.h=this.h),t};var Vo=function(t,e){return e=String(e),t.o&&(e=e.toLowerCase()),e},Qo=function(t,e){e&&!t.o&&(Uo(t),t.l=null,t.g.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Wo(this,e),Wo(this,n),0<t.length&&(this.l=null,this.g.set(Vo(this,n),fb(t)),this.h+=t.length))},t)),t.o=e},Yo="://secure-...imrworldwide.com/ ://cdn.imrworldwide.com/ ://aksecure.imrworldwide.com/ ://[^.]*.moatads.com ://youtube[0-9]+.moatpixel.com ://pm.adsafeprotected.com/youtube ://pm.test-adsafeprotected.com/youtube ://e[0-9]+.yt.srs.doubleverify.com www.google.com/pagead/xsul www.youtube.com/pagead/slav".split(" "),Zo=/\bocr\b/,$o=0,ap={},bp=function(e){if(nb(Gc(e)))return!1;if(0<=e.indexOf("://pagead2.googlesyndication.com/pagead/gen_204?id=yt3p&sr=1&"))return!0;try{var t=new Fo(e)}catch(t){return null!=$a(Yo,function(t){return 0<e.search(t)})}return!!t.w.match(Zo)||null!=$a(Yo,function(t){return null!=e.match(t)})},fp=function(e){if(e&&(e=cp(e),!nb(e))){var n='javascript:"<body><img src=\\""+'+e+'+"\\"></body>"';dp(function(t){ep(t?n:'javascript:"<body><object data=\\""+'+e+'+"\\" type=\\"text/html\\" width=1 height=1 style=\\"visibility:hidden;\\"></body>"')})}},ep=function(t){var e=ne("IFRAME",{src:t,style:"display:none"});t=ee(e).body;var n=Jh(function(){Dh(i),pe(e)},15e3),i=uh(e,["load","error"],function(){Jh(function(){q.clearTimeout(n),pe(e)},5e3)});t.appendChild(e)},dp=function(n){var t=ap.imageLoadingEnabled;if(null!=t)n(t);else{var i=!1;gp(function(t,e){delete ap[e],i||(i=!0,null==ap.imageLoadingEnabled&&(ap.imageLoadingEnabled=t),n(t))})}},gp=function(t){var e=new Image,n=""+$o++;(ap[n]=e).onload=function(){clearTimeout(i),t(!0,n)};var i=setTimeout(function(){t(!1,n)},300);e.src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="},hp=function(t){if(t){var e=le(document,"OBJECT");e.data=t,e.width="1",e.height="1",e.style.visibility="hidden";var n=""+$o++;(ap[n]=e).onload=e.onerror=function(){delete ap[n]},document.body.appendChild(e)}},ip=function(t){if(t){var e=new Image,n=""+$o++;(ap[n]=e).onload=e.onerror=function(){delete ap[n]},e.src=t}},jp=function(e){e&&dp(function(t){(t?ip:hp)(e)})},cp=function(t){t instanceof pc||(t="object"==typeof t&&t.Ma?t.Da():String(t),rc.test(t)||(t="about:invalid#zClosurez"),t=new pc(nc,t));var e=qc(t);if("about:invalid#zClosurez"===e)return"";if(e instanceof yc)t=e;else{var n="object"==typeof e;t=null,n&&e.hc&&(t=e.cc()),e=wb(n&&e.Ma?e.Da():String(e)),t=Ac(e,t)}return t=zc(t).toString(),encodeURIComponent(String(dg(t)))},kp="ad_type vpos mridx pos vad_type videoad_start_delay".split(" "),lp=function(t){var e=t.Ia,n=void 0!==t.xa&&t.xa;this.A=t.Pa,this.g=e,this.w=n},mp=function(t){var e=t.Ed,n=t.Uc,i=t.Dd,o=t.Tc;lp.call(this,{Pa:t.Pa,Ia:t.Ia,height:t.height,width:t.width,xa:void 0!==t.xa&&t.xa}),this.o=e,this.l=n,this.F=i,this.h=o};p(mp,lp),mp.prototype.getVideoUrl=function(){return this.o};var np=function(t){var e=t.fd;lp.call(this,{Pa:t.Pa,Ia:t.Ia,height:t.height,width:t.width,xa:void 0!==t.xa&&t.xa}),this.h=e};p(np,lp);var op=function(){this.g=w()};op.prototype.reset=function(){this.g=w()};var pp=function(t){var e=w();return 0<(t=t.g+5e3-e)?t:0},qp="ad.doubleclick.net bid.g.doubleclick.net ggpht.com google.co.uk google.com googleads.g.doubleclick.net googleads4.g.doubleclick.net googleadservices.com googlesyndication.com googleusercontent.com gstatic.com gvt1.com prod.google.com pubads.g.doubleclick.net s0.2mdn.net static.doubleclick.net surveys.g.doubleclick.net youtube.com ytimg.com".split(" "),rp=["c.googlesyndication.com"];function sp(t,e){e=void 0===e?window.location.protocol:e;var n=!1;return tp(t,rp)?n=!1:"https:"==e&&tp(t,qp)&&(n=!0),n?"https"==(e=new Fo(t)).o?t:(Lg(I.B(),"htp","1"),Go(e,"https"),e.toString()):t}function tp(t,e){return new RegExp("^https?://([a-z0-9-]{1,63}\\.)*("+e.join("|").replace(/\./g,"\\.")+")(:[0-9]+)?([/?#]|$)","i").test(t)}var up=function(t){return(t=t.exec(zb))?t[1]:""};!function(){if(md)return up(/Firefox\/([0-9.]+)/);if(Sc||Tc||Rc)return;if(qd)return Mc()?up(/CriOS\/([0-9.]+)/):up(/Chrome\/([0-9.]+)/);if(rd&&!Mc())return up(/Version\/([0-9.]+)/);if(nd||od){var t=/Version\/(\S+).*Mobile\/(\S+)/.exec(zb);if(t)t[1],t[2]}else if(pd)(t=up(/Android\s+([0-9.]+)/))||up(/Version\/([0-9.]+)/)}();var vp=/OS (\S+) like/,wp=/Android ([\d\.]+)/;function xp(t,e){return t=(t=(t=t.exec(zb))?t[1]:"").replace(/_/g,"."),0<=yb(t,e)}var yp=function(){return Wc&&"ontouchstart"in document.documentElement},zp=function(t){return ad&&xp(vp,t)},Ap=function(t){return!(!(t=void 0===t?null:t)||!v(t.getAttribute))&&!!t.getAttribute("playsinline")},Bp=function(){if(!Sc)return!1;try{return new ActiveXObject("MSXML2.DOMDocument"),!0}catch(t){return!1}},Ep=Sc&&Bp(),Fp=function(t){J.call(this),this.o=t,this.h={}};Ra(Fp,J);var Gp=[];Fp.prototype.T=function(t,e,n,i){return Hp(this,t,e,n,i)};var Hp=function(t,e,n,i,o,r){Ha(n)||(n&&(Gp[0]=n.toString()),n=Gp);for(var a=0;a<n.length;a++){var s=vh(e,n[a],i||t.handleEvent,o||!1,r||t.o||t);if(!s)break;t.h[s.key]=s}return t},Jp=function(t,e,n,i){Ip(t,e,n,i,void 0)},Ip=function(t,e,n,i,o,r){if(Ha(n))for(var a=0;a<n.length;a++)Ip(t,e,n[a],i,o,r);else(e=uh(e,n,i||t.handleEvent,o,r||t.o||t))&&(t.h[e.key]=e)};Fp.prototype.Ba=function(t,e,n,i,o){if(Ha(e))for(var r=0;r<e.length;r++)this.Ba(t,e[r],n,i,o);else n=n||this.handleEvent,i=Ja(i)?!!i.capture:!!i,o=o||this.o||this,n=wh(n),i=!!i,(e=jh(t)?qh(t.o,String(e),n,i,o):(t=t&&yh(t))?qh(t,e,n,i,o):null)&&(Dh(e),delete this.h[e.key])};var Kp=function(t){Cb(t.h,function(t,e){this.h.hasOwnProperty(e)&&Dh(t)},t),t.h={}};Fp.prototype.R=function(){Fp.Wa.R.call(this),Kp(this)},Fp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Lp=function(){};Lp.prototype.g=null,Lp.prototype.getOptions=function(){var t;return(t=this.g)||(t={},Mp(this)&&(t[0]=!0,t[1]=!0),t=this.g=t),t};var Np,Op=function(){};Ra(Op,Lp);var Pp=function(t){return(t=Mp(t))?new ActiveXObject(t):new XMLHttpRequest},Mp=function(t){if(t.h||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return t.h;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var i=e[n];try{return new ActiveXObject(i),t.h=i}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")};Np=new Op;var Qp=function(t){K.call(this),this.headers=new zo,this.I=t||null,this.h=!1,this.H=this.g=null,this.M="",this.w=0,this.l=this.L=this.A=this.K=!1,this.D=0,this.C=null,this.Z="",this.O=this.P=!1};Ra(Qp,K);var Rp=/^https?$/i,Sp=["POST","PUT"],Tp=function(t,e){t.D=Math.max(0,e)};Qp.prototype.send=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.M+"; newUri="+t);e=e?e.toUpperCase():"GET",this.M=t,this.w=0,this.K=!1,this.h=!0,this.g=this.I?Pp(this.I):Pp(Np),this.H=this.I?this.I.getOptions():Np.getOptions(),this.g.onreadystatechange=Oa(this.X,this);try{this.L=!0,this.g.open(e,String(t),!0),this.L=!1}catch(t){return void Up(this)}t=n||"";var o=this.headers.clone();i&&Eo(i,function(t,e){o.set(e,t)}),i=$a(o.ya(),Vp),n=q.FormData&&t instanceof q.FormData,!bb(Sp,e)||i||n||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.g.setRequestHeader(e,t)},this),this.Z&&(this.g.responseType=this.Z),"withCredentials"in this.g&&this.g.withCredentials!==this.P&&(this.g.withCredentials=this.P);try{Wp(this),0<this.D&&((this.O=Xp(this.g))?(this.g.timeout=this.D,this.g.ontimeout=Oa(this.W,this)):this.C=Jh(this.W,this.D,this)),this.A=!0,this.g.send(t),this.A=!1}catch(t){Up(this)}};var Xp=function(t){return Sc&&kd(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout},Vp=function(t){return"content-type"==t.toLowerCase()};Qp.prototype.W=function(){void 0!==ya&&this.g&&(this.w=8,this.dispatchEvent("timeout"),this.abort(8))};var Up=function(t){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.w=5,Yp(t),Zp(t)},Yp=function(t){t.K||(t.K=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))};Qp.prototype.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.w=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Zp(this))},Qp.prototype.R=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Zp(this,!0)),Qp.Wa.R.call(this)},Qp.prototype.X=function(){this.pb()||(this.L||this.A||this.l?$p(this):this.$())},Qp.prototype.$=function(){$p(this)};var $p=function(t){if(t.h&&void 0!==ya&&(!t.H[1]||4!=aq(t)||2!=bq(t)))if(t.A&&4==aq(t))Jh(t.X,0,t);else if(t.dispatchEvent("readystatechange"),4==aq(t)){t.h=!1;try{var e,n=bq(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var i=!0;break t;default:i=!1}if(!(e=i)){var o;if(o=0===n){var r=String(t.M).match(De)[1]||null;if(!r&&q.self&&q.self.location){var a=q.self.location.protocol;r=a.substr(0,a.length-1)}o=!Rp.test(r?r.toLowerCase():"")}e=o}e?(t.dispatchEvent("complete"),t.dispatchEvent("success")):(t.w=6,Yp(t))}finally{Zp(t)}}},Zp=function(t,e){if(t.g){Wp(t);var n=t.g,i=t.H[0]?Ea:null;t.g=null,t.H=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=i}catch(t){}}},Wp=function(t){t.g&&t.O&&(t.g.ontimeout=null),t.C&&(q.clearTimeout(t.C),t.C=null)};Qp.prototype.pc=function(){return!!this.g};var aq=function(t){return t.g?t.g.readyState:0},bq=function(t){try{return 2<aq(t)?t.g.status:-1}catch(t){return-1}},cq=function(t){try{return t.g?t.g.responseText:""}catch(t){return""}},dq=function(t,e){if(t.g&&4==aq(t))return null===(t=t.g.getResponseHeader(e))?void 0:t},eq=function(){};eq.prototype.get=function(t,e){return fq(t,e)};var fq=function(e,n){return gq(e,!0,n).then(function(t){return Promise.resolve(t)},function(t){return t instanceof Error&&6==t.message?gq(e,!1,n):Promise.reject(t)})},gq=function(a,t,e){var s=new Qp;s.P=t,Tp(s,pp(e));var u=new Fp;return new Promise(function(r,t){Jp(u,s,"success",function(){try{var e=s.g?s.g.responseXML:null}catch(t){e=null}if(null==e)if(e=cq(s),"undefined"!=typeof DOMParser){var t=new DOMParser;Be(),e=Ac(e,null),e=t.parseFromString(zc(e),"application/xml")}else{if(!Ep)throw Error("Your browser does not support loading xml documents");(t=new ActiveXObject("MSXML2.DOMDocument")).resolveExternals=!1,t.validateOnParse=!1;try{t.setProperty("ProhibitDTD",!0),t.setProperty("MaxXMLSize",2048),t.setProperty("MaxElementDepth",256)}catch(t){}t.loadXML(e),e=t}var n;if(t=ng(Rg),(n=e&&e.documentElement)&&(n=!(null==(n=(n=e.documentElement)&&"VAST"!=!n.nodeName&&(n=n.getAttribute("version"))?null==(n=parseInt(n,10))||isNaN(n)?null:n:null)||n<2||4<n)),!n&&t){t={vastUrl:a.substring(0,200),responseText:cq(s).substring(0,200),status:bq(s),contentType:dq(s,"Content-Type"),acao:dq(s,"Access-Control-Allow-Origin"),acac:dq(s,"Access-Control-Allow-Credentials"),origin:window.location.origin},n=I.B();for(var i=la(Object.keys(t)),o=i.next();!o.done;o=i.next())o=o.value,Lg(n,o,t[o])}r(e),u.U(),s.U()}),Jp(u,s,["error","timeout"],function(){t(Error(s.w)),u.U(),s.U()}),s.send(sp(a),"GET",void 0)})},hq=function(t){var n={};return t.split(",").forEach(function(t){var e=t.split("=");2==e.length&&(t=ob(e[0]),e=ob(e[1]),0<t.length&&(n[t]=e))}),n},iq=function(t){var e="af am ar_eg ar_sa ar_xb ar be bg bn ca cs da de_at de_cn de el en_au en_ca en_gb en_ie en_in en_sg en_xa en_xc en_za en es_419 es_ar es_bo es_cl es_co es_cr es_do es_ec es_gt es_hn es_mx es_ni es_pa es_pe es_pr es_py es_sv es_us es_uy es_ve es et eu fa fi fil fr_ca fr_ch fr gl gsw gu he hi hr hu id in is it iw ja kn ko ln lo lt lv ml mo mr ms nb ne nl no pl pt_br pt_pt pt ro ru sk sl sr_latn sr sv sw ta te th tl tr uk ur vi zh_cn zh_hk zh_tw zh zu".split(" ");return t?(t=t.toLowerCase().replace("-","_"),e.includes(t)?t:(t=(t=t.match(/^\w{2,3}([-_]|$)/))?t[0].replace(/[_-]/g,""):"",e.includes(t)?t:null)):null};function jq(t,e){for(var n=[],i=1;i<arguments.length;++i)n[i-1]=arguments[i];return new(Function.prototype.bind.apply(t,[null].concat(ma(n))))}function kq(){Wd.set("GoogleAdServingTest","Good");var t="Good"==Wd.get("GoogleAdServingTest");return t&&Ud(Wd,"GoogleAdServingTest"),t}var lq={eg:"autoplayDisallowed",fg:"beginFullscreen",gg:"canPlay",hg:"canPlayThrough",CLICK:"click",DURATION_CHANGE:"durationChange",lg:"end",mg:"endFullscreen",ng:"error",rg:"focusSkipButton",Ig:"loadStart",LOADED:"loaded",Jg:"mediaLoadTimeout",Kg:"mediaPlaybackTimeout",Yb:"pause",Tg:"play",Yg:"seeked",Zg:"seeking",$g:"skip",ah:"skipShown",Zb:"start",hh:"timeUpdate",fh:"timedMetadata",Qd:"volumeChange",kh:"waiting"},mq=function(){};function nq(){return window.MediaSource}var oq=function(t,e,n){var i=new mq;this.url=t,this.mimeType=e,this.g=n,this.h=void 0===i?null:i},pq=function(){},qq=function(){};Ra(qq,pq),qq.prototype.clear=function(){var t=bl(this.ib(!0)),e=this;x(t,function(t){e.g.removeItem(t)})};var rq=function(t){this.g=t};Ra(rq,qq),k=rq.prototype,k.set=function(t,e){try{this.g.setItem(t,e)}catch(t){if(0==this.g.length)throw"Storage mechanism: Storage disabled";throw"Storage mechanism: Quota exceeded"}},k.get=function(t){if("string"!=typeof(t=this.g.getItem(t))&&null!==t)throw"Storage mechanism: Invalid value was encountered";return t},k.ib=function(e){var n=0,i=this.g,t=new Zk;return t.next=function(){if(n>=i.length)throw Yk;var t=i.key(n++);if(e)return t;if("string"!=typeof(t=i.getItem(t)))throw"Storage mechanism: Invalid value was encountered";return t},t},k.clear=function(){this.g.clear()},k.key=function(t){return this.g.key(t)};var sq=function(){var t=null;try{t=window.localStorage||null}catch(t){}this.g=t};Ra(sq,rq);var tq=function(){this.g=new sq};tq.prototype.set=function(t,e){void 0===e?this.g.g.removeItem(t):this.g.set(t,dg(e))},tq.prototype.get=function(t){try{var e=this.g.get(t)}catch(t){return}if(null!==e)try{return JSON.parse(e)}catch(t){throw"Storage: Invalid value was encountered"}};var vq=function(t,e,n,i,o){J.call(this),this.$=t,this.C=new Fo(e.url),this.h=n,this.l=o,this.I=e.g,this.Z=i,(this.K=e.h)||Wo(this.C.h,"alr"),Lg(I.B(),"sl_dv"+this.l,(null!=this.K).toString()),this.L=!this.K,this.W=0,this.g=new XMLHttpRequest,this.D=this.X=this.A=this.o=0,this.O=.1,this.w=[],this.H=!1,this.P=this.M=null,ng(Tg)&&(t=new tq,e=this.C.h,e=(n=String(e.get("source","")))+":"+(i=String(e.get("id",""))),""!==n&&""!==i&&(n=1,(i=t.get("STREAM_LOAD_COUNTS"))||(i={}),i.hasOwnProperty(e)&&(n+=i[e]),i[e]=n,t.set("STREAM_LOAD_COUNTS",i),Lg(I.B(),"sl_sslc",String(n)))),uq(this)};p(vq,J);var uq=function(e){e.M=vh(e.g,"load",function(){if(wq(e),e.L){var t=e.g.responseText;e.H=!t||t.length<e.I,e.D=0,Mg(I.B(),"sl_cc"+e.l+"-"+e.A),e.A++,xq(e)}}),e.P=vh(e.g,"progress",function(){wq(e)}),e.g.addEventListener("error",function(){Mg(I.B(),"sl_ec"+e.l+"-"+e.o)}),e.h.addEventListener("updateend",function(){e.h.buffered.length&&(e.X=e.h.buffered.end(0),e.H&&!e.h.updating&&e.o==e.A&&(Mg(I.B(),"sl_lc"+e.l),e.Z()))}),e.h.addEventListener("update",function(){e.w.length&&!e.h.updating&&e.h.appendBuffer(e.w.shift())}),e.h.addEventListener("error",function(){Mg(I.B(),"msb_err"+e.l)}),yq(e)},yq=function(t){Mg(I.B(),"sl_rc"+t.l+"-"+t.o);var e=t.o*t.I;e=So(t.C,"range",e+"-"+(e+t.I-1)).toString(),t.g.open("get",e),t.g.overrideMimeType("text/plain; charset=x-user-defined"),t.g.send(null),t.o++},wq=function(t){if(!t.L){var e=t.g.getResponseHeader("content-type");if(e&&0<=e.indexOf("text/plain"))return void(t.g.readyState==XMLHttpRequest.DONE&&(t.C=new Fo(t.g.response),t.o=0,t.A=0,t.W++,yq(t)));t.L=!0,Mg(I.B(),"sl_redc"+t.l),Lg(I.B(),"sl_tr"+t.l,t.W.toString())}if(Wo(t.C.h,"alr"),t.g.readyState==XMLHttpRequest.LOADING||t.g.readyState==XMLHttpRequest.DONE){e=t.g.response;for(var n=new Uint8Array(e.length-t.D),i=0;i<n.length;i++)n[i]=255&e.charCodeAt(i+t.D);t.D=e.length,0<(e=n.buffer).byteLength&&(t.h.updating||t.w.length?t.w.push(e):t.h.appendBuffer(e))}},xq=function(t){var e=t.A==t.o&&!t.h.updating&&!t.w.length;!t.H&&e&&t.$.currentTime>=t.O&&(t.O=t.X+.1,yq(t))};vq.prototype.R=function(){Dh(this.M),Dh(this.P),J.prototype.R.call(this)};var Aq=function(t,e){J.call(this);var n=this;this.A=t,this.D=e,this.h=new MediaSource,this.C=[],this.l=[],this.g=this.w=null,this.o=!1,this.h.addEventListener("sourceopen",function(){return zq(n)})};p(Aq,J);var zq=function(n){Mg(I.B(),"msmsw_oso"),n.w=vh(n.A,"timeupdate",function(){if(!n.o)for(var t=la(n.l),e=t.next();!e.done;e=t.next())xq(e.value)});for(var t=0;t<n.D.length;t++){var e=n.D[t];Lg(I.B(),"msmsw_mime"+t,e.mimeType),Lg(I.B(),"msmsw_cs"+t,e.mimeType);var i=n.h.addSourceBuffer(e.mimeType);i?(n.C.push(i),e=jq(vq,n.A,e,i,function(){t:if(!n.o){for(var t=la(n.l),e=t.next();!e.done;e=t.next())if(!(e=e.value).H||e.h.updating||e.w.length)break t;n.h.endOfStream(),n.o=!0,Dh(n.w)}},t),n.l.push(e)):Mg(I.B(),"msmsw_sbf"+t)}Lg(I.B(),"msmsw_ns",n.C.length.toString())};Aq.prototype.R=function(){this.g&&window.URL.revokeObjectURL(this.g);for(var t=la(this.l),e=t.next();!e.done;e=t.next())e.value.U();Dh(this.w),J.prototype.R.call(this)};var Bq=function(){throw Error("Do not instantiate directly")};Bq.prototype.g=null,Bq.prototype.getContent=function(){return this.content},Bq.prototype.toString=function(){return this.content};var Cq=function(){Bq.call(this)};Ra(Cq,Bq);var Dq=(Oia.prototype=Cq.prototype,function(t,e){return t=new Oia(String(t)),void 0!==e&&(t.g=e),t});function Oia(t){this.content=t}var Eq={rgb:!0,rgba:!0,alpha:!0,rect:!0,image:!0,"linear-gradient":!0,"radial-gradient":!0,"repeating-linear-gradient":!0,"repeating-radial-gradient":!0,"cubic-bezier":!0,matrix:!0,perspective:!0,rotate:!0,rotate3d:!0,rotatex:!0,rotatey:!0,steps:!0,rotatez:!0,scale:!0,scale3d:!0,scalex:!0,scaley:!0,scalez:!0,skew:!0,skewx:!0,skewy:!0,translate:!0,translate3d:!0,translatex:!0,translatey:!0,translatez:!0},Fq=function(t){if(""==(t=ob(t)))return null;var e=String(t.substr(0,4)).toLowerCase();if(0==("url("<e?-1:"url("==e?0:1))return null;if(0<t.indexOf("(")){if(/"|'/.test(t))return null;e=/([\-\w]+)\(/g;for(var n;n=e.exec(t);)if(!(n[1]in Eq))return null}return t};function Gq(t){var e=q.CSSStyleDeclaration;return e&&e.prototype&&e.prototype[t]||null}var Hq=Gq("getPropertyValue"),Iq=Gq("setProperty");function Jq(t,e,n,i){if(t)return t.apply(e,i);if(Sc&&document.documentMode<10){if(!e[n].call)throw Error("IE Clobbering detected")}else if("function"!=typeof e[n])throw Error("Clobbering detected");return e[n].apply(e,i)}var Kq={"-webkit-border-horizontal-spacing":!0,"-webkit-border-vertical-spacing":!0},Mq=function(n){if(!n)return wc;var i=document.createElement("div").style,t=Lq(n);return x(t,function(t){var e=Vc&&t in Kq?t:t.replace(/^-(?:apple|css|epub|khtml|moz|mso?|o|rim|wap|webkit|xv)-(?=[a-z])/i,"");0!=e.lastIndexOf("--",0)&&0!=e.lastIndexOf("var",0)&&(t=Jq(Hq,n,n.getPropertyValue?"getPropertyValue":"getAttribute",[t])||"",null!=(t=Fq(t))&&Jq(Iq,i,i.setProperty?"setProperty":"setAttribute",[e,t]))}),vc(i.cssText||"")},Lq=function(t){return Ia(t)?t=fb(t):(t=Jb(t),cb(t,"cssText")),t},Nq=function(){if(window.MutationObserver){var t=[];new MutationObserver(function(){t.forEach(function(t){return t()}),t=[]}).observe(document.createTextNode(""),{characterData:!0})}};"function"==typeof Promise&&-1<String(Promise).indexOf("[native code]")||Nq();var Oq=function(t,e,n){this.l=t,this.g=Math.min(Math.max(e||0,0),1),this.h=null==n||n};Oq.prototype.getId=function(){return this.l};var Pq=function(t){this.l=t,this.h=new zo,this.g=null};Pq.prototype.getId=function(){return this.l};var Qq=function(t){var e=Math.random(),n=0,i=t.h.ga();i.forEach(function(t){n+=t.g});var o=1<n?n:1;t.g=null;for(var r=0,a=0;a<i.length;++a)if(e<=(r+=i[a].g)/o){t.g=i[a];break}},Rq=function(){return null!=q.G_testRunner},Sq=function(t){this.g=t},Vq=function(){var t=Tq(U);return Uq(t,"disableExperiments")},Uq=function(t,e){return!(!Lb(t.g,e)||"boolean"!=typeof(t=t.g[e]))&&t},Wq=function(t){if(Lb(t.g,"forceExperimentIds")){t=t.g.forceExperimentIds;var e=[],n=0;return Ha(t)&&t.forEach(function(t){"number"==typeof t&&(e[n++]=t)}),e}return null},V=function(){this.w="always",this.J=4,this.I=1,this.g=0,this.l=!0,this.A="en",this.M=!1,this.D=this.C="",this.H=null,this.X=this.O=-1,this.W=this.L=this.K="",this.h=!1,this.o=!0;try{this.aa=Ji(void 0)[0]}catch(t){}},Xq=function(t){return t=Gc(t),nb(t)||(t=t.substring(0,20)),t};k=V.prototype,k.tf=function(t){this.w=t},k.hf=function(){return this.w},k.zf=function(t){this.J=t},k.lf=function(){return this.J},k.Cf=function(t){this.P=t},k.qf=function(){return this.P},k.Df=function(t){"boolean"==typeof t&&(this.I=t?1:0)},k.Ef=function(t){this.I=t},k.sf=function(t){this.l=t},k.rf=function(){return this.l},k.xf=function(t){this.M=t},k.ab=function(){return this.M},k.yf=function(t){(t=iq(t))&&(this.A=t)},k.Yd=function(){return this.A},k.Af=function(t){this.C=Xq(t)},k.mf=function(){return this.C},k.Bf=function(t){this.D=Xq(t)},k.nf=function(){return this.D};var Tq=function(t){if(null==t.H){var e={},n=new Fo(F().location.href).h;if(Xo(n,"tcnfp"))try{e=JSON.parse(n.get("tcnfp"))}catch(t){}t.H=new Sq(e)}return t.H};V.prototype.Z=function(t){this.O=t},V.prototype.$=function(t){this.X=t};var $q=function(){var t=U;Yq(),t.K=Zq[1]||""},ar=function(){var t=U;Yq(),t.W=Zq[6]||""},br=function(){var t=U;Yq(),t.L=Zq[4]||""};k=V.prototype,k.vf=function(t){this.h=t},k.jf=function(){return this.h},k.uf=function(t){this.o=t},k.wf=function(){},k.kf=function(){return!0};var U=new V,fr=function(){this.h=!1,this.g=new zo,cr(this,651800007),cr(this,651800008),dr(this);var t=Tq(U);null!=(t=Wq(t))&&(this.h=!0,er(this,t.map(String)))},gr=null,hr=function(){return gr=gr||new fr},cr=function(t,e){nb(Gc("GvnExternalLayer"))||isNaN(e)||e<=0||(e=new Oq(e,.01),ir(t,"GvnExternalLayer").h.set(e.getId(),e))},dr=function(t){Vq()||t.g.ga().forEach(function(t){Qq(t)})},jr=function(t,e,n,i){isNaN(e)||e<=0||nb(Gc(n))||(t.h=!0,i=null==i||i,ir(t,n).g=new Oq(e,0,i))},er=function(e,t){t.forEach(function(t){jr(e,Number(t),"FORCED_PUB_EXP_LAYER_"+t,void 0)})},kr=function(){var i={};return hr().g.ga().forEach(function(t){var e=t.g;if(e){var n={};n.experimentId=e.getId(),n.shouldReport=e.h,i[t.getId()]=n}else i[t.getId()]={}}),i},lr=function(){var t,e=hr();return(t=e.h)||(t=Vq()?0:!Rq()),!!t&&e.g.ga().some(function(t){return!!t.g&&651800008==t.g.getId()})},mr=function(){var t,e=hr();if((t=!e.h)&&((t=Vq())||(t=Rq())),t)return"";var n=[];return e.g.ga().forEach(function(t){(t=t.g)&&t.h&&n.push(t.getId())}),e=rg(),n.concat(e).sort().join(",")},ir=function(t,e){var n=t.g.get(e);return null==n&&(n=new Pq(e),t.g.set(e,n)),n},nr="abort canplay canplaythrough durationchange emptied loadstart loadeddata loadedmetadata progress ratechange seeked seeking stalled suspend waiting".split(" "),qr=function(){var t="h.3.367.1";return null!=or?(t+="/n."+or,null!=pr&&(t+="/"+pr)):ng(Ug)&&U.ab()&&(t+="/vpaid_adapter"),t},pr=null,rr=null,or=null,sr=null,tr=function(t){var e=Tq(U);return!!(e&&Uq(e,"forceCustomPlayback")||U.ab())||(!Zc&&!yp()||!t)&&(t=t&&(Zc||yp()||zp(10))&&(U.h||ng(Sg)),!((!Yc&&!$c||t)&&(!Xc||Xc&&xp(wp,4))&&!Jj()))},ur=function(t){return null!=t&&(!!U.ab()||(ad||Zc||yp()?!Ap(t)||!(Zc||yp()||zp(10)&&U.h):!((!Xc||Xc&&xp(wp,4))&&!Jj())))},vr=function(){var t=Tq(U);return(!t||!Uq(t,"disableOnScreenDetection"))&&!Hj()},wr=function(){this.creativeType="All",this.g=[]},xr={Dg:"Image",qg:"Flash",cg:"All"},yr=!1,zr=function(t){(t=t.match(/[\d]+/g))&&(t.length=3)};!function(){if(navigator.plugins&&navigator.plugins.length){var t=navigator.plugins["Shockwave Flash"];if(t&&(yr=!0,t.description))return zr(t.description);if(navigator.plugins["Shockwave Flash 2.0"])return yr=!0}if(navigator.mimeTypes&&navigator.mimeTypes.length&&(t=navigator.mimeTypes["application/x-shockwave-flash"],yr=!(!t||!t.enabledPlugin)))zr(t.enabledPlugin.description);else if("undefined"!=typeof ActiveXObject){try{var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");return yr=!0,zr(e.GetVariable("$version"))}catch(t){}try{return e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),yr=!0}catch(t){}try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),yr=!0,zr(e.GetVariable("$version"))}catch(t){}}}();var Ar=yr,Br=function(t,e){e=void 0===e?new wr:e,this.o=t,this.g=e||new wr,t=this.g.creativeType,this.l=null!=t&&Mb(xr,t)?this.g.creativeType:"All",this.h=null!=this.g.g?this.g.g:[]},Er=function(e,t){var n=[];return t.forEach(function(t){!nb(t.getContent())&&(isNaN(t.g.sequenceNumber)||isNaN(t.g.masterSequenceNumber)||t.g.masterSequenceNumber==t.g.sequenceNumber)&&Cr(e,t)?n.push(t):null==(t=Dr(e,t))||nb(t.getContent())||n.push(t)}),n},Cr=function(t,e){var n;return(n="Flash"!=e.h()||Ar)&&((n=null==(n=e.h())||("All"==t.l||t.l==n))&&(n=e.g.adSlotId,n=0==t.h.length||null!=n&&t.h.includes(n))),t=!!n&&(e=e.g.size,!!((t=t.o)==e||t&&e&&t.width==e.width&&t.height==e.height))},Dr=function(e,t){return null==(t=Fr(t))?null:t.find(function(t){return Cr(e,t)})||null},Gr=function(t){K.call(this),this.w=t||"goog_"+Hc++,this.l=[],this.h=!1};p(Gr,K),Gr.prototype.connect=function(){for(this.h=!0;0!=this.l.length;){var t=this.l.shift();this.sendMessage(t.name,t.type,t.data)}},Gr.prototype.send=function(t,e,n){this.h?this.sendMessage(t,e,n):this.l.push({name:t,type:e,data:n})},Gr.prototype.sendMessage=function(){};var W={},Hr=(W.creativeView="creativeview",W.start="start",W.midpoint="midpoint",W.firstQuartile="firstquartile",W.thirdQuartile="thirdquartile",W.complete="complete",W.mute="mute",W.unmute="unmute",W.pause="pause",W.rewind="rewind",W.resume="resume",W.fullscreen="fullscreen",W.exitFullscreen="exitfullscreen",W.expand="expand",W.collapse="collapse",W.close="close",W.acceptInvitation="acceptinvitation",W.userInteraction="userInteraction",W.adCanPlay="adCanPlay",W.adStarted="adStarted",W.abandon="abandon",W.acceptInvitationLinear="acceptinvitationlinear",W.engagedView="engagedview",W.instreamAdComplete="instreamAdComplete",W.skipShown="skipshown",W.skippableStateChanged="skippableStateChanged",W.skip="skip",W.progress="progress",W.publisher_invoked_skip="PUBLISHER_INVOKED_SKIP",W.annotation_start="annotation_start",W.annotation_click="annotation_click",W.annotation_close="annotation_close",W.cta_annotation_shown="cta_annotation_shown",W.cta_annotation_clicked="cta_annotation_clicked",W.cta_annotation_closed="cta_annotation_closed",W.replay="replay",W.stop="stop",W.autoplayDisallowed="autoplayDisallowed",W.error="error",W.mediaLoadTimeout="mediaLoadTimeout",W.linearChanged="linearChanged",W.click="click",W.contentPauseRequested="contentPauseRequested",W.contentResumeRequested="contentResumeRequested",W.discardAdBreak="discardAdBreak",W.updateAdsRenderingSettings="updateAdsRenderingSettings",W.durationChange="durationChange",W.expandedChanged="expandedChanged",W.autoClose="autoClose",W.userClose="userClose",W.userRecall="userRecall",W.prefetched="prefetched",W.loaded="loaded",W.init="init",W.allAdsCompleted="allAdsCompleted",W.adMetadata="adMetadata",W.adBreakReady="adBreakReady",W.adBreakFetchError="adBreakFetchError",W.log="log",W.volumeChange="volumeChange",W.companionBackfill="companionBackfill",W.companionInitialized="companionInitialized",W.companionImpression="companionImpression",W.companionClick="companionClick",W.impression="impression",W.interaction="interaction",W.adProgress="adProgress",W.adBuffering="adBuffering",W.trackingUrlPinged="trackingUrlPinged",W.measurable_impression="measurable_impression",W.custom_metric_viewable="custom_metric_viewable",W.viewable_impression="viewable_impression",W.fully_viewable_audible_half_duration_impression="fully_viewable_audible_half_duration_impression",W.overlay_resize="overlay_resize",W.overlay_unmeasurable_impression="overlay_unmeasurable_impression",W.overlay_unviewable_impression="overlay_unviewable_impression",W.overlay_viewable_immediate_impression="overlay_viewable_immediate_impression",W.overlay_viewable_end_of_session_impression="overlay_viewable_end_of_session_impression",W.externalActivityEvent="externalActivityEvent",W.adEvent="adEvent",W.configure="configure",W.remainingTime="remainingTime",W.destroy="destroy",W.resize="resize",W.volume="volume",W.sendAbandonUrls="sendAbandonUrls",W.authorIconClicked="videoAuthorIconClicked",W.authorNameClicked="videoAuthorClicked",W.videoClicked="videoClicked",W.videoIconClicked="videoIconClicked",W.learnMoreClicked="videoLearnMoreClicked",W.muteClicked="videoMuteClicked",W.titleClicked="videoTitleClicked",W.skipShown="SKIP_SHOWN",W.videoSkipClicked="SKIPPED",W.unmuteClicked="videoUnmuteClicked",W.vpaidEvent="vpaidEvent",W.show_ad="show_ad",W.video_card_endcap_collapse="video_card_endcap_collapse",W.video_card_endcap_dismiss="video_card_endcap_dismiss",W.video_card_endcap_impression="video_card_endcap_impression",W.mediaUrlPinged="mediaUrlPinged",W.breakStart="breakstart",W.breakEnd="breakend",W.omidReady="omidReady",W.omidUnavailable="omidUnavailable",W.omidAdSessionCompleted="omidAdSessionCompleted",W.omidAdSessionAbandoned="omidAdSessionAbandoned",W.verificationNotExecuted="verificationNotExecuted",W.loadStart="loadStart",W.seeked="seeked",W.seeking="seeking",W),Ir=function(t){this.g=t};k=Ir.prototype,k.re=function(){return this.g.totalAds},k.oe=function(){return this.g.maxDuration},k.me=function(){return this.g.adPosition},k.pe=function(){return this.g.podIndex},k.qe=function(){return this.g.timeOffset},k.ne=function(){return this.g.isBumper};var Jr=function(t){this.g=t};Jr.prototype.getContent=function(){return this.g.content},Jr.prototype.h=function(){return this.g.contentType},Jr.prototype.o=function(){return this.g.size.width},Jr.prototype.l=function(){return this.g.size.height};var Fr=function(t){return(t=t.g.backupCompanions)?t.map(function(t){return new Jr(t)}):[]},Kr=function(t,e){this.h=t,this.g=e};Kr.prototype.o=function(){return this.h},Kr.prototype.l=function(){return this.g};var X=function(t){this.g=t};X.prototype.h=function(){return this.g.adId},X.prototype.l=function(){return this.g.creativeAdId},X.prototype.o=function(){return this.g.creativeId};var Lr=function(t){return t.g.adQueryId};k=X.prototype,k.te=function(){return this.g.adSystem},k.ue=function(){return this.g.advertiserName},k.ve=function(){return this.g.apiFramework},k.Qe=function(){return this.g.adWrapperIds},k.Se=function(){return this.g.adWrapperCreativeIds},k.Re=function(){return this.g.adWrapperSystems},k.isLinear=function(){return this.g.linear},k.Te=function(){return this.g.skippable},k.xe=function(){return this.g.contentType},k.ze=function(){return this.g.description},k.Fe=function(){return this.g.title},k.getDuration=function(){return this.g.duration},k.Oe=function(){return this.g.vastMediaWidth},k.Ne=function(){return this.g.vastMediaHeight},k.Pe=function(){return this.g.width},k.Ae=function(){return this.g.height},k.Ie=function(){return this.g.uiElements},k.Ce=function(){return this.g.minSuggestedDuration},k.se=function(){return new Ir(this.g.adPodInfo)},k.we=function(t,e,n){var i=this.g.companions.map(function(t){return new Jr(t)});return Er(new Br(new E(t,e),n),i)},k.Ge=function(){return hq(Gc(this.g.traffickingParameters))},k.He=function(){return this.g.traffickingParameters},k.Me=function(){return this.g.vastMediaBitrate},k.Be=function(){return this.g.mediaUrl},k.Ee=function(){return this.g.surveyUrl},k.ye=function(){return this.g.dealId},k.Le=function(){return(this.g.universalAdIds||[]).map(function(t){return new Kr(t.adIdValue,t.adIdRegistry)})},k.Ke=function(){return this.g.universalAdIdValue},k.Je=function(){return this.g.universalAdIdRegistry},k.De=function(){return this.g.skipTimeOffset},k.Ue=function(){return this.g.disableUi};var Mr=function(t,e,n){e=void 0===e?null:e,n=void 0===n?null:n,bh.call(this,t),this.A=e,this.w=n};function Nr(t){if(t=sp(t,Hj()?"https":window.location.protocol),Hj())Or(t);else try{t&&(bp(t)?fp:jp)(t)}catch(t){}}function Or(t){(new eq).get(t,new op).then(function(){},function(){})}p(Mr,bh),Mr.prototype.F=function(){return this.A},Mr.prototype.J=function(){return this.w};var Pr=function(t,e,n){t=Error.call(this),this.message=t.message,"stack"in t&&(this.stack=t.stack),this.l=e,this.h=n};p(Pr,Error),Pr.prototype.toString=function(){return"AdError "+this.h+": "+this.l+(null!=this.g?" Caused by: "+this.g:"")};var Qr=function(t,e){this.message=t,this.g=e},Rr=new Qr("Failed to initialize ad playback element before starting ad playback.",400),Sr=new Qr("The provided {0} information: {1} is invalid.",1101);function Tr(t,e,n){var i=void 0===e?null:e;if(!(i instanceof Pr)){var o=t.g,r=t.message,a=Array.prototype.slice.call(arguments,2);if(0<a.length)for(var s=0;s<a.length;s++)r=r.replace(new RegExp("\\{"+s+"\\}","ig"),a[s]);(o=new Pr("adPlayError",r,o)).g=i,i=o}return i}var Ur=function(){K.call(this),this.I=!1,this.g=null,this.C=this.H=this.L=!1,this.h=0,this.w=[],this.D=!1,this.O=this.M=1/0,this.l=0,this.A=new Fp(this),this.K={}};p(Ur,K);var Wr=function(t,e){null==e||t.I||(t.g=e,Vr(t),t.I=!0)},Yr=function(t){null!=t.g&&t.I&&(Xr(t),t.I=!1,t.H=!1,t.C=!1,t.h=0,t.w=[],t.D=!1)},Vr=function(n){Xr(n),!(n.g instanceof K)&&"ontouchstart"in document.documentElement&&ad?(n.K={touchstart:function(t){n.H=!0,n.h=t.touches.length,n.l&&(window.clearTimeout(n.l),n.l=0,n.L=!0),n.D=Zr(n,t.touches)||1!=t.touches.length,n.D?(n.M=1/0,n.O=1/0):(n.M=t.touches[0].clientX,n.O=t.touches[0].clientY),t=t.touches,n.w=[];for(var e=0;e<t.length;e++)n.w.push(t[e].identifier)},touchmove:function(t){n.h=t.touches.length,(!zp(8)||Math.pow(t.changedTouches[0].clientX-n.M,2)+Math.pow(t.changedTouches[0].clientY-n.O,2)>Math.pow(5,2))&&(n.C=!0)},touchend:function(t){$r(n,t)}},Cb(n.K,function(t,e){n.g.addEventListener(e,t,!1)})):n.A.T(n.g,"click",n.P)},Xr=function(t){t.A.Ba(t.g,"click",t.P),Cb(t.K,function(t,e){this.g.removeEventListener(e,t,!1)},t),t.K={}},$r=function(t,e){!t.H||1!=t.h||t.C||t.L||t.D||!Zr(t,e.changedTouches)||(t.l=window.setTimeout(function(){as(t)},300)),t.h=e.touches.length,0==t.h&&(t.H=!1,t.C=!1,t.w=[]),t.L=!1};Ur.prototype.P=function(){as(this)};var Zr=function(t,e){for(var n=0;n<e.length;n++)if(t.w.includes(e[n].identifier))return!0;return!1},as=function(t){t.l=0,t.dispatchEvent(new bh("click"))};Ur.prototype.R=function(){Yr(this),this.A.U(),this.A=null,K.prototype.R.call(this)};var bs=function(s,t,e){this.h=e,0==t.length&&(t=[[]]),this.g=t.map(function(t){t=s.concat(t);for(var e=[],n=0,i=0;n<t.length;){var o=t[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(191<o&&o<224){var r=t[n++];e[i++]=String.fromCharCode((31&o)<<6|63&r)}else if(239<o&&o<365){r=t[n++];var a=t[n++];o=((7&o)<<18|(63&r)<<12|(63&a)<<6|63&t[n++])-65536,e[i++]=String.fromCharCode(55296+(o>>10)),e[i++]=String.fromCharCode(56320+(1023&o))}else r=t[n++],a=t[n++],e[i++]=String.fromCharCode((15&o)<<12|(63&r)<<6|63&a)}return new RegExp(e.join(""))})};bs.prototype.match=function(e){var n=this;return this.g.some(function(t){return null!=(t=e.match(t))&&(!n.h||1<=t.length&&"3.367.1"==t[1]||2<=t.length&&"3.367.1"==t[2])})};var cs=[104,116,116,112,115,63,58,47,47,105,109,97,115,100,107,92,46,103,111,111,103,108,101,97,112,105,115,92,46,99,111,109,47,106,115,47,40,115,100,107,108,111,97,100,101,114,124,99,111,114,101,41,47],ds=[104,116,116,112,115,63,58,47,47,115,48,92,46,50,109,100,110,92,46,110,101,116,47,105,110,115,116,114,101,97,109,47,104,116,109,108,53,47],es=[104,116,116,112,115,63,58,47,47,105,109,97,115,100,107,92,46,103,111,111,103,108,101,97,112,105,115,92,46,99,111,109,47,112,114,101,114,101,108,101,97,115,101,47,106,115,47,91,48,45,57,93,43,92,46,91,48,45,57,92,46,93,43,47],fs=[[105,109,97,51,92,46,106,115],[105,109,97,51,95,100,101,98,117,103,92,46,106,115]],gs=[[98,114,105,100,103,101,40,91,48,45,57,93,43,92,46,91,48,45,57,92,46,93,43,41,40,95,40,91,97,45,122,48,45,57,93,41,123,50,44,51,125,41,123,48,44,50,125,92,46,104,116,109,108],[98,114,105,100,103,101,40,91,48,45,57,93,43,92,46,91,48,45,57,92,46,93,43,41,95,100,101,98,117,103,40,95,40,91,97,45,122,48,45,57,93,41,123,50,44,51,125,41,123,48,44,50,125,92,46,104,116,109,108],[98,114,105,100,103,101,40,95,40,91,97,45,122,48,45,57,93,41,123,50,44,51,125,41,123,48,44,50,125,92,46,104,116,109,108]],hs=[[111,117,116,115,116,114,101,97,109,92,46,106,115],[111,117,116,115,116,114,101,97,109,95,100,101,98,117,103,92,46,106,115]],is=new bs(cs,fs,!1),js=new bs(cs,gs,!0),ks=new bs(ds,fs,!1),ls=new bs(ds,gs,!0),ms=new bs(es,fs,!1),ns=new bs([104,116,116,112,115,63,58,47,47,40,112,97,103,101,97,100,50,124,116,112,99,41,92,46,103,111,111,103,108,101,115,121,110,100,105,99,97,116,105,111,110,92,46,99,111,109,47,112,97,103,101,97,100,47,40,103,97,100,103,101,116,115,124,106,115,41,47],[],!1),os=new bs(cs,[[100,97,105,95,105,102,114,97,109,101,40,91,48,45,57,93,43,92,46,91,48,45,57,92,46,93,43,41,40,95,40,91,97,45,122,48,45,57,93,41,123,50,44,51,125,41,123,48,44,50,125,92,46,104,116,109,108],[100,97,105,95,105,102,114,97,109,101,40,91,48,45,57,93,43,92,46,91,48,45,57,92,46,93,43,41,95,100,101,98,117,103,40,95,40,91,97,45,122,48,45,57,93,41,123,50,44,51,125,41,123,48,44,50,125,92,46,104,116,109,108],[100,97,105,95,105,102,114,97,109,101,40,95,40,91,97,45,122,48,45,57,93,41,123,50,44,51,125,41,123,48,44,50,125,92,46,104,116,109,108]],!0),ps=new bs(cs,hs,!1),qs=new bs(es,hs,!1),Eb={zg:is,xg:js,Hg:ks,Gg:ls,Ag:ms,bh:ns,yg:os,Mg:ps,Ng:qs},rs=function(){var t=F(),e=document;return new Fo(t.parent==t?t.location.href:e.referrer)},ts=function(t,e){So(t,"url","");try{var n=2083-t.toString().length-1;if(n<=0)return t.toString();for(var i=e.slice(0,n),o=encodeURIComponent(i),r=n;0<r&&o.length>n;)i=e.slice(0,r--),o=encodeURIComponent(i);So(t,"url",i)}catch(t){}return t.toString()},us=function(){this.g=Math.random()<.01,this.h=Math.floor(4503599627370496*Math.random())};us.prototype.report=function(t,e,n){if(e=void 0===e?{}:e,!Rq()&&(this.g||void 0!==n&&n)){e.lid=t,e.sdkv=qr(),t=mr(),nb(Gc(t))||(e.e=t),e=vs(this,e);var i=new Fo("http://pagead2.googlesyndication.com/pagead/gen_204");Cb(e,function(t,e){So(i,e,null==t?"":"boolean"==typeof t?t?"t":"f":""+t)},this),e=rs(),Go(i,e.o),e=i.toString(),null!=(t=i.h.get("url"))&&Ub()&&2083<e.length&&(e=ts(i,t)),Nr(e)}};var vs=function(t,e){e.id="ima_html5";var n=rs();return e.c=t.h,e.domain=n.g,e};Fa(us);var ws=function(t,e,n,i,o){o=void 0===o?"":o,bh.call(this,t),this.ca=e,this.fa=n,this.Qb=i,this.rd=o};p(ws,bh),ws.prototype.toString=function(){return""};var xs=null,ys=function(){K.call(this),this.g=null,this.D=new Fp(this),ah(this,this.D),this.h=new Map,this.w=new Map,this.l=this.A=!1,this.C=null},zs;p(ys,K);var As=function(){return null==xs&&(xs=new ys),xs};ys.prototype.Bd=function(){};var qo=function(t,e,n){var i={};i.queryId=e,i.viewabilityData=n,t.g&&t.g.send("activityMonitor","viewabilityMeasurement",i)};ys.prototype.destroy=function(){this.D.Ba(this.g,"activityMonitor",this.H),this.l=!1,this.h.clear(),this===zs&&(zs=null)},ys.prototype.R=function(){this.destroy(),K.prototype.R.call(this)};var Cs=function(t){if(null==t)return!1;if((Yc||$c)&&null!=t.webkitDisplayingFullscreen)return t.webkitDisplayingFullscreen;t=Bs(t);var e=window.screen.availHeight||window.screen.height;return(window.screen.availWidth||window.screen.width)-t.width<=0&&e-t.height<=42},Bs=function(t){var e={left:t.offsetLeft,top:t.offsetTop,width:t.offsetWidth,height:t.offsetHeight};try{v(t.getBoundingClientRect)&&re(ee(t),t)&&(e=t.getBoundingClientRect())}catch(t){}return e},Ds=function(t,e,n,i,o){return o=void 0===o?{}:o,t.l?(i&&null==o.opt_osdId&&(o.opt_osdId=i),t.C?t.C(e,n,o):((t=i?t.w.get(i):U.F)&&(null==o.opt_fullscreen&&(o.opt_fullscreen=Cs(t)),null==o.opt_adElement&&(o.opt_adElement=t)),Uf.Va(469,Qa(to,e,n,o),void 0)||{})):{}},Es=function(n,t){var e=String(Math.floor(1e9*Math.random()));if(n.w.set(e,t),ng(Vg))try{ci(function(t){if(n.g){var e={};e.engagementString=t,n.g.send("activityMonitor","engagementData",e)}},function(){return t})}catch(t){}return 0!=U.g&&ro(go.B(),e,n),e},Fs=function(t,n,e){if(e)t.h.get(e)==n&&t.h.delete(e);else{var i=[];t.h.forEach(function(t,e){t==n&&i.push(e)}),i.forEach(t.h.delete,t.h)}},mo=function(t,e){return t=t.h.get(e),v(t)?t():{}},Gs=function(t){if(v(window.Goog_AdSense_Lidar_getUrlSignalsArray)){var e={};e.pageSignals=window.Goog_AdSense_Lidar_getUrlSignalsArray(),t.g.send("activityMonitor","pageSignals",e)}};ys.prototype.H=function(t){var e=t.fa,n=e.queryId,i={},o=null;switch(i.eventId=e.eventId,t.ca){case"getPageSignals":Gs(this);break;case"reportVastEvent":o=e.vastEvent,t=e.osdId;var r={};r.opt_fullscreen=e.isFullscreen,e.isOverlay&&(r.opt_bounds=e.overlayBounds),i.viewabilityData=Ds(this,o,n,t,r),this.g.send("activityMonitor","viewability",i);break;case"fetchAdTagUrl":(n={}).eventId=e.eventId,t=e.osdId,Lb(e,"isFullscreen")&&(o=e.isFullscreen),Lb(e,"loggingId")&&(e=e.loggingId,n.loggingId=e,us.B().report(43,{step:"beforeLookup",logid:e,time:Date.now()})),n.engagementString=Hs(this,t,o),this.g&&this.g.send("activityMonitor","engagement",n)}};var Hs=function(t,e,n){var i=e?t.w.get(e):U.F;t={},null!=n&&(t.fullscreen=n),n="";try{n=bi(function(){return i},t)}catch(t){n="sdktle;"+Ec(t.name,12)+";"+Ec(t.message,40)}return n};u("ima.common.getVideoMetadata",function(t){return mo(As(),t)},void 0),u("ima.common.triggerViewabilityMeasurementUpdate",function(t,e){qo(As(),t,e)},void 0);var Is=mc(gc(hc(Sc?'javascript:""':"about:blank")));lc(Is);var Js=mc(gc(hc(Sc?'javascript:""':"javascript:undefined")));lc(Js);var Ks=function(t){bh.call(this,t)};p(Ks,bh);var Ls=function(){this.loadVideoTimeout=8e3,this.autoAlign=!0,this.bitrate=-1,this.uiElements=null,this.enablePreloading=this.disableClickThrough=!1,this.mimeTypes=null,this.useStyledNonLinearAds=this.useStyledLinearAds=this.useLearnMoreButton=this.restoreCustomPlaybackStateOnAdBreakComplete=!1,this.playAdsAfterTime=-1,this.useVideoAdUi=!0,this.disableUi=!1},Ms=function(t,e){var n={};return Object.assign(n,t),e&&(n.useClickElement=!1,n.disableClickThrough=!0),n},Ns=function(){K.call(this),this.g=new zo,this.h=null,this.l=new Map,this.w=new Fp(this),ah(this,this.w),this.D=new Map,this.C=null,this.A=-1,P.B().h=!0,vr()};Ra(Ns,K);var Os=null,Ps=function(){return null==Os&&(Os=new Ns),Os},Qs=function(t,e){var n={};n.queryId=t,n.viewabilityString=e,Ps().dispatchEvent(new Ks("measurable_impression",null,n))},Rs=function(t,e){var n={};n.queryId=t,n.viewabilityString=e,Ps().dispatchEvent(new Ks("viewable_impression",null,n))},Ss=function(t,e,n){var i={};i.queryId=t,i.viewabilityString=e,i.eventName=n,Ps().dispatchEvent(new Ks("externalActivityEvent",null,i))};Ns.prototype.destroy=function(){this.w.Ba(this.h,"activityMonitor",this.H),this.h=null},Ns.prototype.H=function(t){var e=t.fa;switch(t.ca){case"appStateChanged":go.B(),e=e.appState,(t=R.B()).C!=e&&(t.C=e,(t=em.B().g)&&fk(t.g,!e));break;case"externalActivityEvent":Ss(e.queryId,e.viewabilityString,e.eventName);break;case"measurableImpression":Qs(e.queryId,e.viewabilityString);break;case"viewableImpression":Rs(e.queryId,e.viewabilityString);break;case"engagementData":e=e.engagementString,Ps().C=e,Ps().A=w();break;case"viewability":t=e.queryId;var n=e.vastEvent;this.l.get(t)&&"start"==n&&this.l.get(t),t=e.eventId,window.clearTimeout(t),(n=this.g.get(t))&&(Co(this.g,t),n(e.viewabilityData));break;case"viewabilityMeasurement":var i=go.B(),o=e.queryId;if(e=e.viewabilityData,n=P.B(),t=R.B(),"exc"==n.Y){i.J=e.nativeVolume,n=e.exposure||0;var r=e.unmeasurable;i=i.F(o,{}),null!=e.presenceData&&(null===i.l&&(i.l=new cl),Tb(i.l,e.presenceData)),-1==i.Z&&(i.Z=nj(),i.xb=i.na().g.g),i.X+=r?1:0,i.vb++,Kk(i.sa,n,n,!1,1,!1),void 0!==(o=e.insideIframe)&&0==o&&(t.l=!1),i.Fa=r||i.Fa,e.position&&(i.position=new G(e.position.top,e.position.right,e.position.bottom,e.position.left)),e.documentSize&&(t.o=new E(e.documentSize.width,e.documentSize.height)),e.viewportSize&&(t.g=new G(0,e.viewportSize.width,e.viewportSize.height,0)),e=e.screenShare,i.ba.V=Math.min(Math.max(n,0),1),i.dd=i.ba.V,i.ba.ia=Math.min(Math.max(e,0),1)}break;case"engagement":t=e.eventId,window.clearTimeout(t),n=this.g.get(t),us.B().g&&(i=-1,this.I&&(i=w()-this.I),o=!1,n||(o=!0),Lb(e,"loggingId")&&us.B().report(43,{step:"receivedResponse",time:w(),timeout:o,logid:e.loggingId,timediff:i})),n&&(Co(this.g,t),n(e.engagementString))}},u("ima.bridge.getNativeViewability",function(t,e){Ps(),e({})},void 0),u("ima.bridge.getVideoMetadata",function(t){return(t=Ps().D.get(t))?t():{}},void 0),u("ima.bridge.triggerViewEvent",Rs,void 0),u("ima.bridge.triggerMeasurableEvent",Qs,void 0),u("ima.bridge.triggerExternalActivityEvent",Ss,void 0),Object.entries({"application/dash+xml":1,"application/x-javascript":2,"application/x-mpegurl":3,"application/javascript":4,"audio/ogg":5,"audio/mp4":6,"audio/mpeg":7,"audio/wav":8,"text/javascript":9,"video/m4v":10,"video/ogg":11,"video/x-flv":12,"video/3gpp":13,"video/mpt2":14,"video/mp4":15,"video/mpeg":16,"video/quicktime":17,"video/webm":18});var Ts=function(t,e){Gr.call(this,e),this.A=t,this.g=null,this.C=new Fp(this),this.C.T(F(),"message",this.D)};p(Ts,Gr);var Us=function(t){if(null==t||"string"!=typeof t||0!=t.lastIndexOf("ima://",0))return null;t=t.substr(6);try{return JSON.parse(t)}catch(t){return null}};Ts.prototype.sendMessage=function(t,e,n){null!=this.g&&null!=this.g.postMessage&&this.g.postMessage(Vs(this,t,e,n),"*"),null!=this.g&&null==this.g.postMessage&&us.B().report(11)},Ts.prototype.R=function(){$g(this.C),this.g=null,Gr.prototype.R.call(this)},Ts.prototype.D=function(t){t=t.h;var e=Us(t.data);if(Ws(this,e)){if(null==this.g)this.g=t.source,this.h||this.connect();else if(this.g!=t.source)return;Ws(this,e)&&this.dispatchEvent(new ws(e.name,e.type,e.data||{},e.sid,t.origin))}};var Vs=function(t,e,n,i){var o={};return o.name=e,o.type=n,null!=i&&(o.data=i),o.sid=t.w,o.channel=t.A,"ima://"+dg(o)},Ws=function(t,e){if(null==e)return!1;var n=e.channel;return null!=n&&n==t.A&&(null!=(e=e.sid)&&("*"==t.w||e==t.w))},Xs=mc(gc(hc("http://pagead2.googlesyndication.com/omsdk/releases/live/omsdk-v1.js")));function Ys(t,e){if(!e)throw Error("Value for "+t+" is undefined, null or blank.");if("string"!=typeof e&&!(e instanceof String))throw Error("Value for "+t+" is not a string.");if(""===e.trim())throw Error("Value for "+t+" is empty string.")}function Zs(t,e){if(null==e)throw Error("Value for "+t+" is undefined or null")}function $s(t,e){if(null==e)throw Error(t+" must not be null or undefined.");if("number"!=typeof e||isNaN(e))throw Error("Value for "+t+" is not a number")}function at(){return /\d+\.\d+\.\d+(-.*)?/.test("1.3.1-google_20200121")}function bt(){for(var t=["1","3","1"],e=["1","0","3"],n=0;n<3;n++){var i=parseInt(t[n],10),o=parseInt(e[n],10);if(o<i)break;if(i<o)return}return 1}var ct={LOADED:"loaded",Zb:"start",FIRST_QUARTILE:"firstQuartile",MIDPOINT:"midpoint",THIRD_QUARTILE:"thirdQuartile",COMPLETE:"complete",Yb:"pause",Rc:"resume",Qc:"bufferStart",Pc:"bufferFinish",SKIPPED:"skipped",Qd:"volumeChange",Ug:"playerStateChange",bg:"adUserInteraction"},dt=function(t,e,n,i){this.h=t,this.method=e,this.version=n,this.g=i},et=function(t){return!!t&&void 0!==t.omid_message_guid&&void 0!==t.omid_message_method&&void 0!==t.omid_message_version&&"string"==typeof t.omid_message_guid&&"string"==typeof t.omid_message_method&&"string"==typeof t.omid_message_version&&(void 0===t.omid_message_args||void 0!==t.omid_message_args)},ft=function(t){return new dt(t.omid_message_guid,t.omid_message_method,t.omid_message_version,t.omid_message_args)},gt=function(t){var e={};return e.omid_message_guid=t.h,e.omid_message_method=t.method,e.omid_message_version=t.version,e=e,void 0!==t.g&&(e.omid_message_args=t.g),e},ht=function(t){this.h=t};function it(t,e){return t&&(t[e]||(t[e]={}))}function jt(t,e){var n;(n=void 0===n?"undefined"==typeof omidExports?null:omidExports:n)&&((t=t.split(".")).slice(0,t.length-1).reduce(it,n)[t[t.length-1]]=e)}function kt(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return"y"===t?(3&e|8).toString(16):e.toString(16)})}function lt(t){for(var e=[],n=0;n<arguments.length;++n)e[+n]=arguments[n];mt(function(){throw new(Function.prototype.bind.apply(Error,[null,"Could not complete the test successfully - "].concat(ma(e))))},function(){return console.error.apply(console,ma(e))})}function mt(t,e){"undefined"!=typeof jasmine&&jasmine?t():"undefined"!=typeof console&&console&&console.error&&e()}var nt=function(t){try{return!!t.frames&&!!t.frames.omid_v1_present}catch(t){return!1}},ot=function(t){this.h=t,this.handleExportedMessage=ot.prototype.l.bind(this)};p(ot,ht),ot.prototype.sendMessage=function(t,e){if(!(e=void 0===e?this.h:e))throw Error("Message destination must be defined at construction time or when sending the message.");e.handleExportedMessage(gt(t),this)},ot.prototype.l=function(t,e){et(t)&&this.g&&this.g(ft(t),e)};var pt=eval("this"),qt=function(){if("undefined"!=typeof omidGlobal&&omidGlobal)return omidGlobal;if("undefined"!=typeof global&&global)return global;if("undefined"!=typeof window&&window)return window;if(void 0!==pt&&pt)return pt;throw Error("Could not determine global object context.")}();function rt(t){return null!=t&&void 0!==t.top&&null!=t.top}function tt(t){if(t!==qt)try{if(void 0===t.location.hostname)return 1}catch(t){return 1}}var ut=function(t,e){this.h=e=void 0===e?qt:e;var n=this;t.addEventListener("message",function(t){if("object"==typeof t.data){var e=t.data;et(e)&&t.source&&n.g&&n.g(ft(e),t.source)}})};p(ut,ht),ut.prototype.sendMessage=function(t,e){if(!(e=void 0===e?this.h:e))throw Error("Message destination must be defined at construction time or when sending the message.");e.postMessage(gt(t),"*")};var vt=["omid","v1_SessionServiceCommunication"];function wt(t){return vt.reduce(function(t,e){return t&&t[e]},t)}jt("OmidSessionClient.Partner",function(t,e){Ys("Partner.name",t),Ys("Partner.version",e),this.name=t,this.version=e});var xt=function(t,e,n){Ys("VerificationScriptResource.resourceUrl",t),this.h=t,this.l=e,this.g=n};xt.prototype.toJSON=function(){return{resourceUrl:this.h,vendorKey:this.l,verificationParameters:this.g}},jt("OmidSessionClient.VerificationScriptResource",xt),jt("OmidSessionClient.Context",function(t,e,n){n=void 0===n?null:n,Zs("Context.partner",t),this.g=t,this.l=e,this.h=n});var yt={sessionError:"reportError"},zt=Object.keys(ct).map(function(t){return ct[t]}),At=["impressionOccurred"],Bt=function(){var t=void 0===t?qt:t;this.g=t.omidSessionInterface};Bt.prototype.sendMessage=function(t,e,n){if("registerSessionObserver"==t&&(n=[e]),yt[t]&&(t=yt[t]),e=this.g,0<=At.indexOf(t)&&(e=e.adEvents),0<=zt.indexOf(t)&&(e=e.videoEvents),!(e=e[t]))throw Error("Unrecognized method name: "+t+".");e.apply(null,ma(n))};var Et=function(t,e,n){if(Zs("AdSession.context",t),this.J=t,!e){var i;void 0===i&&"undefined"!=typeof window&&window&&(i=window),i=rt(i)?i:qt;var o=void 0===o?nt:o;t:{for(var r=(e=la([i,rt(i)?i.top:qt])).next();!r.done;r=e.next()){e:{var a=i,s=o;if(!tt(r=r.value))try{var u=wt(r);if(u){var h=new ot(u);break e}}catch(t){}h=s(r)?new ut(a,r):null}if(a=h){e=a;break t}}e=null}}this.h=e,this.D=n||new Bt,this.F=this.w=this.o=!1,this.A=this.C=null,this.l={},this.h&&(this.h.g=this.H.bind(this)),this.g("setClientInfo","1.3.1-google_20200121",this.J.g.name,this.J.g.version),Ct(this,t.l),(t=t.h)&&this.g("setContentUrl",t),Dt(this)},Ft=function(t,e){t.sendMessage("registerSessionObserver",e)};Et.prototype.error=function(t,e){this.g("sessionError",t,e)},Et.prototype.g=function(t,e){for(var n=[],i=1;i<arguments.length;++i)n[i-1]=arguments[i];this.sendMessage.apply(this,[t,null].concat(ma(n)))},Et.prototype.sendMessage=function(t,e,n){for(var i=[],o=2;o<arguments.length;++o)i[o-2]=arguments[o];if(this.h)o=kt(),e&&(this.l[o]=e),i=new dt(o,"SessionService."+t,"1.3.1-google_20200121",at()&&bt()?i:JSON.stringify(i)),this.h.sendMessage(i);else if(null!=this.D.g)try{this.D.sendMessage(t,e,i)}catch(t){lt("Failed to communicate with SessionInterface with error:"),lt(t)}},Et.prototype.H=function(t){var e=t.method,n=t.h;if(t=t.g,"response"===e&&this.l[n]){var i=at()&&bt()?t||[]:t&&"string"==typeof t?JSON.parse(t):[];this.l[n].apply(this,i)}"error"===e&&window.console&&lt(t)};var Ct=function(t,e){e&&(e=e.map(function(t){return t.toJSON()}),t.g("injectVerificationScriptResources",e))},Dt=function(e){Ft(e,function(t){"sessionStart"===t.type&&(e.F=!0,e.C=t.data.creativeType,e.A=t.data.impressionType),"sessionFinish"===t.type&&(e.F=!1)})};jt("OmidSessionClient.AdSession",Et);var Gt=function(t){Zs("AdEvents.adSession",t);try{if(t.o)throw Error("AdEvents already registered.");t.o=!0,t.g("registerAdEvents"),this.g=t}catch(t){throw Error("AdSession already has an ad events instance registered")}};Gt.prototype.loaded=function(t){t=void 0===t?null:t;var e=this.g;if("definedByJavaScript"===e.C)throw Error("Creative type has not been redefined");if("definedByJavaScript"===e.A)throw Error("Impression type has not been redefined");t?this.g.g("loaded",t.toJSON()):this.g.g("loaded")},jt("OmidSessionClient.AdEvents",Gt);var Ht=function(t){Zs("MediaEvents.adSession",t);try{if(t.w)throw Error("MediaEvents already registered.");t.w=!0,t.g("registerMediaEvents"),this.g=t}catch(t){throw Error("AdSession already has a media events instance registered")}};Ht.prototype.loaded=function(t){Zs("MediaEvents.loaded.vastProperties",t),this.g.g("loaded",t.toJSON())},Ht.prototype.start=function(t,e){if($s("MediaEvents.start.duration",t),$s("MediaEvents.start.mediaPlayerVolume",e),e<0||1<e)throw Error("Value for MediaEvents.start.mediaPlayerVolume is outside the range [0,1]");this.g.g("start",t,e)},Ht.prototype.pause=function(){this.g.g("pause")},Ht.prototype.resume=function(){this.g.g("resume")},jt("OmidSessionClient.MediaEvents",Ht);var Kt=function(t,e){It?t.srcdoc=e:(t=t.contentWindow)&&Jt(t.document,e)},It=Vc&&"srcdoc"in le(document,"IFRAME"),Jt=function(t,e){t.open("text/html","replace"),t.write(e),t.close()};function Lt(t){return(t=se(t))&&t.omidSessionInterface?t.omidSessionInterface:null}function Mt(t,e){var n=ne("IFRAME",{name:e,sandbox:"allow-scripts allow-same-origin",style:"display: none"});return t.appendChild(n),t="<script src="+Xs.Da()+"><\/script>",e=new Promise(function(t,e){n.addEventListener("load",function(){Lt(n)?t(n):e()})}),Kt(n,t),e}var Nt=function(t,e){K.call(this),this.h=Lt(t),this.g=e};p(Nt,K);var Pt=function(e){try{e.h.registerSessionObserver(function(t){"sessionStart"==t.type?Ot(e,e.g):"sessionFinish"==t.type&&Pt(e)})}catch(t){e.dispatchEvent(new Event("error"))}},Ot=function(e,t){try{e.h.setVideoElement(t)}catch(t){e.dispatchEvent(new Event("error"))}},Qt=function(t){this.g=t,this.l="",this.h=-1,this.o=!1},St=function(t,e){if(0<=t.h){var n=null==e?function(){}:e,i=function(){Rt(t,n),t.g.removeEventListener("loadedmetadata",i,!1)};t.g.addEventListener("loadedmetadata",i,!1),t.g.src=t.l,t.g.load()}else null!=e&&e()},Rt=function(t,e){var n=0<t.g.seekable.length;t.o?n?(t.g.currentTime=t.h,Tt(t),e()):setTimeout(function(){return Rt(t,e)},100):(Tt(t),e())},Tt=function(t){t.h=-1,t.l="",t.o=!1},Ut=function(t){K.call(this),this.g=t,this.Z=null,this.w=new Qt(t),this.A=0,this.H=this.M=this.O=this.aa=this.D=!1,this.I=this.l=null,this.L=new E(this.g.offsetWidth,this.g.offsetHeight),this.$=Cs(this.g),this.X=!1};p(Ut,K),Ut.prototype.pa=function(){var t=this.w;t.l=t.g.currentSrc,t.o=0<t.g.seekable.length,t.h=t.g.ended?-1:t.g.currentTime},Ut.prototype.W=function(t){St(this.w,t)},Ut.prototype.load=function(t,e){var n=I.B(),i=parseInt(n.g.w.c,10)/2;if(null!=i&&Bg(n.g,"slotId",i),(n=I.B().g).P=!0,Cg(n),Mg(I.B(),"hvd_lc"),n=I.B(),null!=(i=this.L.width+"x"+this.L.height)&&Bg(n.g,"ps",i),Vt(this),this.O=!1,e)if(Mg(I.B(),"hvd_ad"),e instanceof np){if(Mg(I.B(),"hvd_mad"),e=e.h)return Mg(I.B(),"hvd_admu"),void Wt(this,e)}else if(e instanceof mp){Mg(I.B(),"hvd_dad"),n=e.getVideoUrl(),i=e.l;var o=e.F,r=e.h,a=e.A,s=e.g;if(n&&i&&o&&r&&a&&s&&(Mg(I.B(),"hvd_addu"),e.w)){if(Mg(I.B(),"hvd_admse"),e=o+'; codecs="'+a+'"',r=r+'; codecs="'+s+'"',nq()&&nq()&&MediaSource.isTypeSupported(e)&&nq()&&MediaSource.isTypeSupported(r))return Mg(I.B(),"hvd_ymse"),Mg(I.B(),"hvd_mse"),this.Z=new Aq(this.g,[new oq(n,e,35e4),new oq(i,r,82e3)]),ah(this,this.Z),t=this.g,(e=this.Z).g||(e.g=window.URL.createObjectURL(e.h)),e=e.g,t.src=e,void this.g.load();Mg(I.B(),"hvd_nmse")}}else Mg(I.B(),"hvd_uad");t?Wt(this,t):(Mg(I.B(),"hvd_vn"),this.g.load())};var Wt=function(t,e){Mg(I.B(),"hvd_src"),t.g.src=e,t.g.load()},Xt=function(t){Vt(t),t.O=!1,t.g.removeAttribute("src"),t.g.load()};Ut.prototype.getVideoUrl=function(){return this.g.src},Ut.prototype.setVolume=function(t){this.g.volume=t,this.g.muted=0==t},Ut.prototype.getVolume=function(){return this.isMuted()?0:this.g.volume};var Yt=function(n){n.X=!1,n.O||Ub()?(n.H=!1,n.l=n.g.play(),null!=n.l&&(n.I=null,n.l.then(function(){n.l=null,n.qd(n.I),n.I=null}).catch(function(t){var e="";(n.l=null)!=t&&null!=t.name&&(e=t.name),"AbortError"==e||"NotAllowedError"==e?n.dispatchEvent("autoplayDisallowed"):n.Ac()}))):n.H=!0};Ut.prototype.pause=function(){null==this.l&&(this.X=!0,this.g.pause())},Ut.prototype.isMuted=function(){return this.g.muted};var Zt=function(t){(Yc||$c)&&t.g.webkitDisplayingFullscreen&&t.g.webkitExitFullscreen()};Ut.prototype.getCurrentTime=function(){return this.g.currentTime},Ut.prototype.getDuration=function(){return isNaN(this.g.duration)?-1:this.g.duration},Ut.prototype.R=function(){$t(this),K.prototype.R.call(this)};var au=function(t){$t(t),t.h=new Fp(t),t.h.T(t.g,nr,t.sa),t.h.T(t.g,"ended",t.If),t.h.T(t.g,"webkitbeginfullscreen",t.Ec),t.h.T(t.g,"webkitendfullscreen",t.pd),t.h.T(t.g,"loadedmetadata",t.Kf),t.h.T(t.g,"pause",t.Nf),t.h.T(t.g,"playing",t.qd),t.h.T(t.g,"timeupdate",t.Gf),t.h.T(t.g,"volumechange",t.Qf),t.h.T(t.g,"error",t.Ac),t.h.T(t.g,pd||ad&&!zp(8)?"loadeddata":"canplay",t.Lf),t.K=new Ur,t.h.T(t.K,"click",t.Ff),Wr(t.K,t.g),t.P=new Ih(1e3),t.h.T(t.P,"tick",t.Jf),t.P.start()},$t=function(t){null!=t.K&&(Yr(t.K),t.K=null),null!=t.P&&t.P.U(),null!=t.h&&(t.h.U(),t.h=null),Vt(t)},Vt=function(t){t.aa=!1,t.M=!1,t.D=!1,t.H=!1,t.A=0,t.l=null,t.I=null,$g(t.C)};Ut.prototype.sa=function(t){this.dispatchEvent(t.type)};var bu=function(t,e){t.M||(t.M=!0,t.dispatchEvent("start"),v(t.g.getAttribute)&&t.g.getAttribute("playsinline"),Zc||yp()||zp(10)||Ij()||y(zb,"Xbox")||!Yc&&!$c&&((!Xc||Xc&&xp(wp,4))&&!Jj())||!Xc||Xc&&xp(wp,3)||(Yc||$c)&&!zp(4)||t.Ec(e))};k=Ut.prototype,k.Kf=function(){this.O=!0,this.H&&Yt(this),this.H=!1},k.Lf=function(){this.aa||(this.aa=!0,this.dispatchEvent("loaded"))},k.qd=function(t){null!=this.l?this.I=t:(this.dispatchEvent("play"),ad||Zc||yp()||pd||bu(this,t))},k.Gf=function(t){if(!this.M&&(ad||Zc||yp()||pd)){if(this.getCurrentTime()<=0)return;if(pd&&this.g.ended&&1==this.getDuration())return void this.Ac(t);bu(this,t)}if(ad||y(zb,"Nintendo WiiU")){if(1.5<this.getCurrentTime()-this.A)return this.D=!0,void(this.g.currentTime=this.A);this.D=!1,this.getCurrentTime()>this.A&&(this.A=this.getCurrentTime())}this.dispatchEvent("timeUpdate")},k.Qf=function(){this.dispatchEvent("volumeChange")},k.Nf=function(){if(this.M&&ad&&!this.X&&(cu(this)<2||this.D)){this.C=new Ih(250),this.h.T(this.C,"tick",this.Hf),this.C.start();var t=!0}else t=!1;t||this.l||this.dispatchEvent("pause")},k.If=function(){var t=!0;(ad||y(zb,"Nintendo WiiU"))&&(t=this.A>=this.g.duration-1.5),!this.D&&t&&this.dispatchEvent("end")},k.Ec=function(){this.dispatchEvent("beginFullscreen")},k.pd=function(){this.dispatchEvent("endFullscreen")},k.Ac=function(){this.dispatchEvent("error")},k.Ff=function(){this.dispatchEvent("click")},k.Jf=function(){var t=new E(this.g.offsetWidth,this.g.offsetHeight),e=Cs(this.g);t.width==this.L.width&&t.height==this.L.height||(!this.$&&e?this.Ec():this.$&&!e&&this.pd(),this.L=t,this.$=e)},k.Hf=function(){if(!this.g.ended&&this.g.paused&&(!ad&&!qd||this.g.currentTime<this.g.duration)){var t=this.g.duration-this.g.currentTime,e=cu(this);0<e&&(2<=e||t<2)&&($g(this.C),Yt(this))}else $g(this.C)};var cu=function(t){var e;t:{for(e=t.g.buffered.length-1;0<=e;){if(t.g.buffered.start(e)<=t.g.currentTime){e=t.g.buffered.end(e);break t}e--}e=0}return e-t.g.currentTime},eu=function(){K.call(this),this.buffered=new du,this.w=new du,this.h=new Fp(this),this.src=this.l="",this.A=!1,this.g=null;var t=Tq(U);t&&(Lb(t.g,"videoElementFakeDuration")&&"number"==typeof(t=t.g.videoElementFakeDuration)||(t=NaN),this.duration=t)};Ra(eu,K);var fu=new zo,gu=function(){var e=["video/mp4"],n=["video/ogg"],t=new eu;return t.canPlayType=function(t){return e.includes(t)?"probably":n.includes(t)?"maybe":""},t.width=0,t.height=0,t.offsetWidth=0,t.offsetHeight=0,t},hu=function(t){this.startTime=0,this.endTime=t},du=function(){this.length=0,this.g=[]};du.prototype.start=function(t){return this.g[t].startTime},du.prototype.end=function(t){return this.g[t].endTime},k=eu.prototype,k.readyState=0,k.currentTime=0,k.duration=NaN,k.Gb=!0,k.autoplay=!1,k.loop=!1,k.controls=!1,k.volume=1,k.muted=!1,Object.defineProperty(eu.prototype,"src",{get:function(){return eu.prototype.l},set:function(t){var e=eu.prototype;e.A&&null!=e.g?(e.g.reject(),e.g=null):e.l=t}}),k=eu.prototype,k.sc=0,k.kb=null,k.Xb=null,k.pause=function(){this.autoplay=!1,this.Gb||(null.stop(),this.Gb=!0,this.dispatchEvent("timeupdate"),this.dispatchEvent("pause"))},k.load=function(){this.readyState=0,this.Gb=!0,this.dispatchEvent("loadstart"),this.setProperty("duration",isNaN(this.duration)?10+20*Math.random():this.duration);var t=this.w;t.g.push(new hu(this.duration)),t.length=t.g.length,(t=this.buffered).g.push(new hu(this.duration)),t.length=t.g.length,this.dispatchEvent("loadedmetadata"),0<this.currentTime&&this.dispatchEvent("timeupdate"),this.dispatchEvent("loadeddata"),this.dispatchEvent("canplay"),this.dispatchEvent("canplaythrough"),this.dispatchEvent("progress")},k.setProperty=function(t,e){switch(t){case"currentTime":t=Number(e),this.dispatchEvent("seeking"),this.currentTime=t,this.dispatchEvent("seeked"),t=w()-this.sc,e=this.currentTime+t/1e3,this.sc+=t,2<this.readyState&&(this.currentTime=Math.min(e,this.duration)),this.dispatchEvent("timeupdate"),this.currentTime==this.duration&&(this.Gb=!0,null.stop(),this.dispatchEvent("ended"));break;case"duration":this.duration=Number(e),this.dispatchEvent("durationchange");break;case"volume":this.volume=Number(e),this.dispatchEvent("volumechange");break;default:throw"Property setter not implemented"}},k.setAttribute=function(t,e){null!=t&&fu.set(t,e)},k.getAttribute=function(t){return fu.get(t)},k.R=function(){this.h.U()},k.Pf=function(t){var e=null,n=null;switch(t.type){case"loadeddata":e="Loaded";break;case"playing":e="Playing",n="#00f";break;case"pause":e="Paused";break;case"ended":e="Ended",n="#000"}e&&this.Xb&&(this.Xb.innerText=e),n&&this.kb&&(this.kb.style.backgroundColor=n)};var iu=function(t,e){if(J.call(this),null==t||!re(ee(t),t))throw Tr(Sr,null,"containerElement","element");if(this.o=t,this.l=this.g=null,t=Tq(U),Uq(t,"useVideoElementFake")){t=gu();var n=ne("DIV",{style:"position:absolute;width:100%;height:100%;top:0px;left:0px;"});for(i in t)n[i]=t[i];t.kb=ne("DIV",{style:"position:absolute;width:100%;height:100%;top:0px;left:0px;background-color:#000"}),t.Xb=ne("P",{style:"position:absolute;top:25%;margin-left:10px;font-size:24px;color:#fff;"}),t.kb.appendChild(t.Xb),n.appendChild(t.kb),t.h.T(t,["loadeddata","playing","pause","ended"],t.Pf);var i=n}else i=ne("VIDEO",{style:"background-color:#000;position:absolute;width:100%;height:100%;left:0px;top:0px;",title:Dq("Advertisement").toString()});i.setAttribute("webkit-playsinline",!0),i.setAttribute("playsinline",!0),this.h=i,this.g=ne("DIV",{style:"display:none;"}),this.o.appendChild(this.g),this.g.appendChild(this.h),e&&(this.l=ne("DIV",{style:"position:absolute;width:100%;height:100%;left:0px;top:0px"}),this.g.appendChild(this.l))};p(iu,J),iu.prototype.R=function(){pe(this.g),J.prototype.R.call(this)},iu.prototype.show=function(){ju(this.g,!0)};var ju=function(t,e){null!=t&&(t.style.display=e?"block":"none")},ku=function(t){this.g=t};ku.prototype.h=function(){return this.g};var ou=function(t,e,n){J.call(this);var i=this;this.l=e,this.o=n,e=new Fp(this),ah(this,e),this.w="goog_"+Hc++,this.g=this.h=null,Mt(t,this.w).then(function(t){lu(i,t)}).catch(function(){mu(i)}),e.T(this.l,"adsManager",function(t){"allAdsCompleted"==t.ca&&nu(i)})};p(ou,J);var lu=function(t,e){t.h=e;var n={};n.frameName=t.w,n=n,t.l.send("omid","iframeReady",n),t.g=new Nt(e,t.o),t.g.T("error",function(){mu(t)}),Pt(t.g)},mu=function(t){t.l.send("omid","iframeFailed"),t.U()},nu=function(t){setTimeout(function(){t.U()},3e3)};ou.prototype.R=function(){this.h&&(pe(this.h),this.h=null),J.prototype.R.call(this)};var pu=function(t,e,n,i){J.call(this),this.o=t,this.l=e,this.g=n,this.C=i,this.h=new Fp(this),ah(this,this.h),this.h.T(this.o,i,this.A)};p(pu,J);var tu=function(t,e){var n=e.fa;switch(e.ca){case"showVideo":qu(t.l);break;case"hide":ru(t.l);break;case"getPreloadDisplay":case"resizeAndPositionVideo":t=t.l.g,n=n.resizeAndPositionVideo,t.g.style.left=String(n.x)+"px",t.g.style.top=String(n.y)+"px",t.g.style.width=String(n.width)+"px",t.g.style.height=String(n.height)+"px";break;case"restoreSizeAndPositionVideo":(n=t.l.g).g.style.width="100%",n.g.style.height="100%",n.g.style.left="0",n.g.style.right="0"}};pu.prototype.A=function(t){var e=t.fa;switch(t.ca){case"activate":t=this.l;var n=this.g;t.g!=n&&t.h&&t.o&&t.l&&(n.setVolume(t.g.getVolume()),n=t.g,t.g=t.l,t.l=n,n=t.h,t.h=t.o,t.o=n,ju(t.o.g,!1));break;case"startTracking":t=this.g,n=this.w,this.h.T(t,Ib(lq),n),this.h.T(t,nr,n),au(this.g);break;case"stopTracking":t=this.g,n=this.w,this.h.Ba(t,Ib(lq),n),this.h.Ba(t,nr,n),$t(this.g);break;case"exitFullscreen":Zt(this.g);break;case"play":Yt(this.g);break;case"pause":this.g.pause();break;case"load":au(this.g),t=this.g,n=e.videoUrl;var i=e.muxedMediaUrl,o=e.muxedMimeType,r=e.muxedAudioCodec,a=e.muxedVideoCodec,s=e.demuxedAudioUrl,u=e.demuxedVideoUrl,h=e.demuxedAudioMimeType,l=e.demuxedVideoMimeType,c=e.demuxedAudioCodec,f=e.demuxedVideoCodec;e=e.mseCompatible;var p=null;u&&s&&e&&l&&h&&f&&c&&(p=new mp({Ed:u,Uc:s,Dd:l,Tc:h,Pa:f,Ia:c,height:null,width:null,xa:e})),s=null,i&&o&&a&&r&&(s=new np({fd:i,mimeType:o,Pa:a,Ia:r,height:null,width:null,xa:e})),p?t.load(n,p):s?t.load(n,s):t.load(n,null);break;case"unload":Xt(this.g);break;case"setCurrentTime":this.g.g.currentTime=e.currentTime;break;case"setVolume":this.g.setVolume(e.volume)}},pu.prototype.w=function(t){var e={};switch(t.type){case"autoplayDisallowed":t="autoplayDisallowed";break;case"beginFullscreen":t="fullscreen";break;case"endFullscreen":t="exitFullscreen";break;case"click":t="click";break;case"end":t="end";break;case"error":t="error";break;case"loaded":t="loaded";break;case"mediaLoadTimeout":t="mediaLoadTimeout";break;case"pause":t="pause",e.ended=this.g.g.ended;break;case"play":t="play";break;case"skip":t="skip";break;case"start":t="start",e.volume=this.g.getVolume();break;case"timeUpdate":t="timeupdate",e.currentTime=this.g.getCurrentTime(),e.duration=this.g.getDuration();break;case"volumeChange":t="volumeChange",e.volume=this.g.getVolume();break;case"loadedmetadata":t=t.type,e.duration=this.g.getDuration();break;case"abort":case"canplay":case"canplaythrough":case"durationchange":case"emptied":case"loadstart":case"loadeddata":case"progress":case"ratechange":case"seeked":case"seeking":case"stalled":case"suspend":case"waiting":t=t.type;break;default:return}this.o.send(this.C,t,e)};var uu=function(t,e){J.call(this),this.h=e,this.l=new pu(t,e,this.h.g,"videoDisplay1"),ah(this,this.l),this.g=null;var n=this.h.l;null!=n&&(this.g=new pu(t,e,n,"videoDisplay2"),ah(this,this.g))};p(uu,J),uu.prototype.zc=function(){},uu.prototype.A=function(t){tu(this.l,t),this.g&&tu(this.g,t)};var wu=function(t,e){J.call(this),this.w=t,this.l=e,this.o=new Fp(this),ah(this,this.o),this.g=this.l.g,null!=this.g&&(this.o.T(this.w,"videoDisplay1",this.Of),this.o.T(this.w,"videoDisplay2",this.Zd),vu(this,this.g,this.rb)),this.h=null};p(wu,J),k=wu.prototype,k.zc=function(t){this.g&&xu(this,this.g,this.rb),this.g=t,vu(this,this.g,this.rb)},k.Of=function(t){if(null!=this.g){var e=t.fa;switch(t.ca){case"startTracking":au(this.g);break;case"stopTracking":$t(this.g);break;case"exitFullscreen":Zt(this.g);break;case"play":Yt(this.g);break;case"pause":this.g.pause();break;case"load":yu(this.g,e);break;case"unload":Xt(this.g);break;case"setCurrentTime":this.g.g.currentTime=e.currentTime;break;case"setVolume":this.g.setVolume(e.volume)}}},k.Zd=function(t){if(null!=this.h){var e=t.fa;switch(t.ca){case"startTracking":au(this.h);break;case"stopTracking":$t(this.h);break;case"load":yu(this.h,e)}}},k.Fc=function(t){switch(t.type){case"error":t="error";break;case"loaded":t="loaded";break;default:return}this.w.send("videoDisplay2",t,{})},k.rb=function(t){var e={};switch(t.type){case"autoplayDisallowed":t="autoplayDisallowed";break;case"beginFullscreen":t="fullscreen";break;case"endFullscreen":t="exitFullscreen";break;case"click":t="click";break;case"end":t="end";break;case"error":t="error";break;case"loaded":t="loaded";break;case"mediaLoadTimeout":t="mediaLoadTimeout";break;case"pause":t="pause",e.ended=this.g.g.ended;break;case"play":t="play";break;case"skip":t="skip";break;case"start":t="start",e.volume=this.g.getVolume();break;case"timeUpdate":t="timeupdate",e.currentTime=this.g.getCurrentTime(),e.duration=this.g.getDuration();break;case"volumeChange":t="volumeChange",e.volume=this.g.getVolume();break;case"loadedmetadata":t=t.type,e.duration=this.g.getDuration();break;case"abort":case"canplay":case"canplaythrough":case"durationchange":case"emptied":case"loadstart":case"loadeddata":case"progress":case"ratechange":case"seeked":case"seeking":case"stalled":case"suspend":case"waiting":t=t.type;break;default:return}this.w.send("videoDisplay1",t,e)};var vu=function(t,e,n){t.o.T(e,Ib(lq),n),t.o.T(e,nr,n)},xu=function(t,e,n){t.o.Ba(e,Ib(lq),n),t.o.Ba(e,nr,n)};wu.prototype.A=function(t){switch(t.ca){case"showVideo":qu(this.l);break;case"hide":ru(this.l);break;case"getPreloadDisplay":null!=this.g&&null==this.h&&(this.h=this.l.l,vu(this,this.h,this.Fc),null==this.h?us.B().report(112,{outer:!0,null:!0}):us.B().report(112,{outer:!0,null:!1}));break;case"swapVideoDisplays":if(null!=this.g&&null!=this.h){if(xu(this,this.g,this.rb),xu(this,this.h,this.Fc),(t=this.l).h&&t.o&&t.l){t.l.setVolume(t.g.getVolume());var e=t.g;t.g=t.l,t.l=e,e=t.h,t.h=t.o,t.o=e,e=t.J,t=t.g,e.l.zc(t),e.D&&(e=e.D,t=t.w.g,e.o=t,e.g&&((e=e.g).g=t,Ot(e,t)))}this.g=this.l.g,this.h=this.l.l,vu(this,this.g,this.rb),vu(this,this.h,this.Fc)}}};var yu=function(t,e){var n=e.videoUrl,i=e.muxedMediaUrl,o=e.muxedMimeType,r=e.muxedAudioCodec,a=e.muxedVideoCodec,s=e.demuxedAudioUrl,u=e.demuxedVideoUrl,h=e.demuxedAudioMimeType,l=e.demuxedVideoMimeType,c=e.demuxedAudioCodec,f=e.demuxedVideoCodec;e=e.mseCompatible;var p=null;u&&s&&e&&l&&h&&f&&c&&(p=new mp({Ed:u,Uc:s,Dd:l,Tc:h,Pa:f,Ia:c,height:null,width:null,xa:e})),s=null,i&&o&&a&&r&&(s=new np({fd:i,mimeType:o,Pa:a,Ia:r,height:null,width:null,xa:e})),p?t.load(n,p):s?t.load(n,s):t.load(n,null)},zu=function(t,e,n,i,o,r){ws.call(this,t,e,n,i,o),this.h=r};p(zu,ws);var Au=function(t,e){K.call(this),this.w=t,this.l=e,this.g={},this.h=new Fp(this),this.h.T(F(),"message",this.A)};p(Au,K),Au.prototype.send=function(t){var e=t.h;this.g.hasOwnProperty(e)&&this.g[e].send(t.type,t.ca,t.fa)};var Bu=function(t,e,n,i){t.g.hasOwnProperty(e)||(n=new Ts(e,n),t.h.T(n,t.w,function(t){this.dispatchEvent(new zu(t.type,t.ca,t.fa,t.Qb,t.rd,e))}),n.g=i,n.connect(),t.g[e]=n)};function Cu(){return!!Da("googletag.cmd",F())}function Du(){var t=Da("googletag.console",F());return null!=t?t:null}Au.prototype.R=function(){for(var t in this.h.U(),this.g)$g(this.g[t]);K.prototype.R.call(this)},Au.prototype.A=function(t){t=t.h;var e=Us(t.data);if(null!=e){var n=e.channel;if(this.l&&!this.g.hasOwnProperty(n)){var i=e.sid;Bu(this,n,i,t.source),this.dispatchEvent(new zu(e.name,e.type,e.data||{},i,t.origin,n))}}};var Eu=function(){Fp.call(this),this.l=new Au("gpt",!0),ah(this,this.l),this.T(this.l,"gpt",this.A),this.g=null,Cu()||F().top===F()||(this.g=new Au("gpt",!1),ah(this,this.g),this.T(this.g,"gpt",this.w))};p(Eu,Fp),Eu.prototype.A=function(t){var e=t.rd,n="//imasdk.googleapis.com".match(De);if(e=e.match(De),n[3]==e[3]&&n[4]==e[4])if(null!=this.g)Bu(this.g,t.h,t.Qb,F().parent),null!=this.g&&this.g.send(t);else if(null!=(n=t.fa)&&void 0!==n.scope){var i;if(e=n.scope,n=n.args,"proxy"==e)"isGptPresent"==(n=t.ca)?i=Cu():"isConsolePresent"==n&&(i=null!=Du());else if(Cu())if("pubads"==e||"companionAds"==e){i=t.ca;var o=F().googletag;if(null!=o&&null!=o[e]&&(null!=(o=o[e]())&&null!=(i=o[i])))try{var r=i.apply(o,n)}catch(t){}i=r}else if("console"==e){if(null!=(r=Du())&&null!=(o=r[t.ca]))try{o.apply(r,n)}catch(t){}}else if(null===e){if(i=t.ca,r=F(),["googleGetCompanionAdSlots","googleSetCompanionAdContents"].includes(i)&&null!=(i=r[i]))try{o=i.apply(r,n)}catch(t){}i=o}void 0!==i&&(t.fa.returnValue=i,this.l.send(t))}},Eu.prototype.w=function(t){this.l.send(t)};var Fu=function(t,e){if(t.g){var n=t.g;$g(n.g[e]),delete n.g[e]}t.l&&(t=t.l,$g(t.g[e]),delete t.g[e])},Hu=function(t,e){var h=Array.prototype.slice.call(arguments),n=h.shift();if(void 0===n)throw Error("[goog.string.format] Template required");return n.replace(/%([0\- \+]*)(\d+)?(\.(\d+))?([%sfdiu])/g,function(t,e,n,i,o,r,a,s){if("%"==r)return"%";var u=h.shift();if(void 0===u)throw Error("[goog.string.format] Not enough arguments");return t=u,Gu[r].apply(null,arguments)})},Gu={s:function(t,e,n){return isNaN(n)||""==n||t.length>=Number(n)?t:t=-1<e.indexOf("-",0)?t+Fc(" ",Number(n)-t.length):Fc(" ",Number(n)-t.length)+t},f:function(t,e,n,i,o){i=t.toString(),isNaN(o)||""==o||(i=parseFloat(t).toFixed(o));var r=Number(t)<0?"-":0<=e.indexOf("+")?"+":0<=e.indexOf(" ")?" ":"";return 0<=Number(t)&&(i=r+i),isNaN(n)||i.length>=Number(n)?i:(i=isNaN(o)?Math.abs(Number(t)).toString():Math.abs(Number(t)).toFixed(o),t=Number(n)-i.length-r.length,0<=e.indexOf("-",0)?r+i+Fc(" ",t):r+Fc(0<=e.indexOf("0",0)?"0":" ",t)+i)},d:function(t,e,n,i,o,r,a,s){return Gu.f(parseInt(t,10),e,n,i,0,r,a,s)}};Gu.i=Gu.d,Gu.u=Gu.d;var Ku=function(t,e){K.call(this),this.A=new Fp(this),ah(this,this.A),this.L=!1,this.K="goog_"+Hc++,this.C=new Map;var n=this.K,i=(Le()?"https:":"http:")+Hu("//imasdk.googleapis.com/js/core/bridge3.367.1_%s.html",U.A);t:{var o=window;try{do{try{if(0==o.location.href.indexOf(i)||0==o.document.referrer.indexOf(i)){var r=!0;break t}}catch(t){}o=o.parent}while(o!=o.top)}catch(t){}r=!1}r&&(i+="?f="+n),n=ne("IFRAME",{src:i+"#"+n,allowFullscreen:!0,allow:"autoplay",style:"border:0; opacity:0; margin:0; padding:0; position:relative;"}),Jp(this.A,n,"load",this.X),t.appendChild(n),this.g=n,this.w=Iu(this),this.H=e,this.h=null;try{-1!=window.location.search.indexOf("goognewman=651800008")&&jr(hr(),651800008,"GvnExternalLayer")}catch(t){}if(lr())try{console.log("IMA outer:newman")}catch(t){}this.l=Ju(this),this.H.g&&this.A.T(this.w,"displayContainer",this.O),this.A.T(this.w,"mouse",this.P),this.A.T(this.w,"touch",this.W),n=F(),n=(null!=(i=Da("google.ima.gptProxyInstance",n))||(i=new Eu,u("google.ima.gptProxyInstance",i,n)),i),this.M=n,ng(Wg)&&(this.D=new ou(t,this.w,e.g.w.g),ah(this,this.D),this.I=!1)};p(Ku,K);var Ju=function(t){return t.l&&t.l.U(),t.l=new wu(t.w,t.H),ah(t,t.l),t.l},Iu=function(t,e){e=void 0===e?"*":e;var n=t.C.get(e);return null==n&&(n=new Ts(t.K,e),t.L&&(n.g=se(t.g),n.connect()),t.C.set(e,n)),n};Ku.prototype.R=function(){null!==this.h&&(this.h.U(),this.h=null),this.C.forEach(function(t){$g(t)}),this.C.clear(),Fu(this.M,this.K),pe(this.g),K.prototype.R.call(this)},Ku.prototype.P=function(t){var e=t.fa,n=bf(this.g),i=document.createEvent("MouseEvent");i.initMouseEvent(t.ca,!0,!0,window,e.detail,e.screenX,e.screenY,e.clientX+n.x,e.clientY+n.y,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,null),this.g.dispatchEvent(i)};var Lu=function(e,t){var n=bf(e.g),i=!!("TouchEvent"in window&&0<TouchEvent.length);return t=t.map(function(t){return i?new Touch({identifier:t.identifier,target:e.g,clientX:t.clientX,clientY:t.clientY,screenX:t.screenX,screenY:t.screenY,pageX:t.pageX+n.x,pageY:t.pageY+n.y}):document.createTouch(window,e.g,t.identifier,t.pageX+n.x,t.pageY+n.y,t.screenX,t.screenY)}),i?t:document.createTouchList.apply(document,t)};Ku.prototype.W=function(t){var e=t.fa,n=bf(this.g);if("TouchEvent"in window&&0<TouchEvent.length)e={bubbles:!0,cancelable:!0,view:window,detail:e.detail,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,touches:Lu(this,e.touches),targetTouches:Lu(this,e.targetTouches),changedTouches:Lu(this,e.changedTouches)},t=new TouchEvent(t.ca,e),this.g.dispatchEvent(t);else{var i=document.createEvent("TouchEvent");i.initTouchEvent(t.ca,!0,!0,window,e.detail,e.screenX,e.screenY,e.clientX+n.x,e.clientY+n.y,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,Lu(this,e.touches),Lu(this,e.targetTouches),Lu(this,e.changedTouches),e.scale,e.rotation),this.g.dispatchEvent(i)}},Ku.prototype.O=function(t){switch(t.ca){case"showVideo":null==this.h?(this.h=new Ur,this.A.T(this.h,"click",this.Z)):Yr(this.h),Wr(this.h,Mu(this.H));break;case"hide":null!==this.h&&(this.h.U(),this.h=null)}this.l.A(t)},Ku.prototype.Z=function(){this.w.send("displayContainer","videoClick")},Ku.prototype.X=function(){var e=this;rr=Jf(),sr=Gf(),this.C.forEach(function(t){t.g=se(e.g),t.connect()}),this.L=!0};var Pu=function(t,e,n){if(null==t||!re(ee(t),t))throw Tr(Sr,null,"containerElement","element");this.A=e,this.$=ur(this.A||null),this.Z=Ap(this.A||null),this.W=String(Math.floor(1e9*Math.random())),this.K=!1,this.H=t,this.M=null!=e,U.g=2,this.C=Nu(e||null);var i=ne("DIV",{style:"position:absolute"});t.insertBefore(i,t.firstChild),this.w=i,this.h=null,t=Ou(this)&&e?new Ut(e):(this.h=new iu(this.w,!0),new Ut(this.h.h)),this.g=t,this.l=this.o=null,t=Xc&&!(Xc&&xp(wp,4)),i=Yc||$c,!this.h||Ou(this)||!U.l||Jj()||t||i||(this.o=new iu(this.w,!0),this.l=new Ut(this.o.h)),this.F=n||null,this.P=null!=this.F,Ou(this)&&e?v(e.getBoundingClientRect)?n=e:(n=this.w,U.F=n):n=this.w,this.D=n,this.J=new Ku(this.w,this),this.O=new E(0,0),this.I="",e&&((e=(e=e.src||e.currentSrc)instanceof Fo?e.clone():new Fo(e,void 0)).toString().length<200?this.I=e.toString():e.g.length<200&&(this.I=e.g)),this.L=new Map,this.L.set("videoDisplay1",this.g),this.l&&this.L.set("videoDisplay2",this.l)};Pu.prototype.X=function(){if(this.K=!0,null!=this.h){var t=this.h;t.h&&t.h.load()}null==this.o||(t=this.o).h&&t.h.load()},Pu.prototype.destroy=function(){var t=this;this.A=null,$g(this.h),$g(this.o),$g(this.J),this.g.W(function(){return $g(t.g)}),null!=this.l&&this.l.W(function(){return $g(t.l)}),pe(this.w)};var qu=function(t){null!=t.h&&t.h.show()},ru=function(t){null!=t.h&&ju(t.h.g,!1)},Mu=function(t){return t.P&&t.F?t.F:null!=t.h?t.h.l:null},Ou=function(t){return tr(t.C)&&t.M};Pu.prototype.setSize=function(t,e){var n=this.w;null!=n&&(-1==t?(n.style.right="0",n.style.left="0"):n.style.width=t+"px",-1==e?(n.style.bottom="0",n.style.top="0"):n.style.height=e+"px"),(n=this.J).g.width=-1==t?"100%":t,n.g.height=-1==e?"100%":e;try{n.g.offsetTop=n.g.offsetTop}catch(t){}this.O=new E(t,e)};var Nu=function(t){return!(null==t||!v(t.getAttribute)||null==t.getAttribute("playsinline"))},Qu=function(t){var e=Error.call(this);this.message=e.message,"stack"in e&&(this.stack=e.stack),this.g=t};p(Qu,Error),k=Qu.prototype,k.yc=function(){var t=this.g.innerError;return t instanceof Object?new Qu(t):null!=t?Error(t):null},k.ld=function(){return this.g.errorMessage},k.xc=function(){return this.g.errorCode},k.le=function(){var t=this.xc();return t<1e3?t:900},k.ke=function(){return this.g.type},k.toString=function(){return"AdError "+this.xc()+": "+this.ld()+(null!=this.yc()?" Caused by: "+this.yc():"")};var Ru=function(t,e){e=void 0===e?null:e,bh.call(this,"adError"),this.h=t,this.o=e};p(Ru,bh),Ru.prototype.w=function(){return this.h},Ru.prototype.A=function(){return this.o};var Su=function(t,e){e=void 0===e?null:e,Mr.call(this,"adMetadata",t),this.h=e};p(Su,Mr),Su.prototype.o=function(){return this.h};var Tu=function(t){this.g=t.adBreakDuration,this.adPosition=t.adPosition,this.currentTime=t.currentTime,this.duration=t.duration,this.totalAds=t.totalAds},Uu=function(t,e){K.call(this),this.l=t,this.A=e,this.h=this.l.currentTime,this.g=new Ih(250),ah(this,this.g),this.w=new Fp(this),ah(this,this.w),Hp(this.w,this.g,"tick",this.C,!1,this)};p(Uu,K),Uu.prototype.Sa=function(){return this.h},Uu.prototype.start=function(){Vu(this),this.g.start()},Uu.prototype.stop=function(){this.g.stop()},Uu.prototype.C=function(){var t=this.l.currentTime;t!=this.Sa()&&(this.h=t,Vu(this))};var Vu=function(t){var e={};e.currentTime=t.Sa(),t.A.send("contentTimeUpdate","contentTimeUpdate",e)},Wu=function(t,e,n){K.call(this),this.h=t,this.g=null,this.I="",this.K=new uc,this.L=0,this.C=this.l=null,this.w=e,this.A=null,this.D="",this.H=n};p(Wu,K),Wu.prototype.M=function(t){try{var e=t.h.data;try{var n=JSON.parse(e)}catch(t){return}var i=n.session;if(null!=i&&this.D==i)switch(n.type){case"friendlyReady":var o=Xu(this);if(null!=o){this.g=o,this.I=o.currentSrc;var r=o.style.cssText;if(Sc&&document.documentMode<10)var a=new uc;else{var s=document;"function"==typeof HTMLTemplateElement&&(s=le(document,"TEMPLATE").content.ownerDocument);var u=s.implementation.createHTMLDocument("").createElement("DIV");u.style.cssText=r,a=Mq(u.style)}this.K=a,this.L=o.currentTime}else{var h=this.h.H,l=this.h.O,c="border: 0; margin: 0; padding: 0; position: absolute; width:"+l.width+"px; ";c+="height:"+l.height+"px;",this.g=ne("VIDEO",{style:c,autoplay:!0}),h.appendChild(this.g)}var f=this.h.H;o="border: 0; margin: 0; padding: 0;position: absolute; ";var p=this.g;t:{var d=ee(p);if(d.defaultView&&d.defaultView.getComputedStyle){var g=d.defaultView.getComputedStyle(p,null);if(g){var v=g.display||g.getPropertyValue("display")||"";break t}}v=""}if("none"!=(v||(p.currentStyle?p.currentStyle.display:null)||p.style&&p.style.display))var m=df(p);else{var y=p.style,w=y.display,b=y.visibility,k=y.position;y.visibility="hidden",y.position="absolute",y.display="inline";var A=df(p);y.display=w,y.position=k,y.visibility=b,m=A}o+="width:"+m.width+"px; ",o+="height:"+m.height+"px;",this.C=ne("DIV",{style:o}),f.appendChild(this.C);try{this.l.contentWindow.loader.initFriendly(this.g,this.C)}catch(t){Yu(this)}this.w.send("vpaid","",e);break;case"becameLinear":!this.g||ve()||ue()||Ye(this.g,{visibility:"visible"}),this.w.send("vpaid","",e);break;case"becameNonlinear":Zu(this),this.w.send("vpaid","",e);break;case"startAd":if(f={},this.g){s=this.g.paused;var E=0<this.g.currentTime;f.apl=E&&!s?"1":"0",f.ip=s?"1":"0",f.iavp=E?"1":"0"}else f.apl="n";us.B().report(99,f),this.w.send("vpaid","",e),null!=Xu(this)&&qu(this.h);break;default:this.w.send("vpaid","",e)}}catch(t){Yu(this)}};var Yu=function(t){var e={type:"error"};e.session=t.D,t=dg(e),window.postMessage(t,"*")},Xu=function(t){t="videoDisplayUnknown"==t.H?t.h.g:t.h.L.get(t.H);var e=ng(Xg);return t.w.g instanceof HTMLVideoElement||e?t.w.g:null},Zu=function(t){!t.g||ve()||ue()||Ye(t.g,{visibility:"hidden"})};Wu.prototype.R=function(){K.Wa.R.call(this),$g(this.A),this.A=null,pe(this.C),this.C=null,pe(this.l),this.l=null;var t=Xu(this);if(null!=t){var e=t.style,n=this.K;n=n instanceof uc&&n.constructor===uc&&n.h===tc?n.g:(Ga(n),"type_error:SafeStyle"),e.cssText=n,ve()||ue()?(t.src=this.I,t.currentTime=this.L):(t.removeAttribute("src"),ru(this.h))}else pe(this.g),this.g=null};var $u=function(t,e){J.call(this),this.l=t,this.h=e,this.g=new Map};p($u,J);var av=function(t,e){try{var n=e.fa,i=n.session;switch(n.vpaidEventType){case"createFriendlyIframe":e="videoDisplayUnknown",n.videoDisplayName&&(e=n.videoDisplayName);var o=n.session,r=new Wu(t.l,t.h,e);t.g.set(o,r),r.D=o,t="about:self",Sc&&(t=""),r.l=ne("IFRAME",{src:t,allowtransparency:!0,background:"transparent"}),Ye(r.l,{display:"none",width:"0",height:"0"});var a=r.h.H;a.appendChild(r.l);var s=a.ownerDocument,u=s.defaultView||s.parentWindow;null==r.A&&(r.A=new Fp(r)),r.A.T(u,"message",r.M);var h='<body><script src="//imasdk.googleapis.com/js/sdkloader/loader.js"><\/script><script>loader = new VPAIDLoader(false, "'+r.D+'");<\/script></body>';if(qd||md||Tc){var l=r.l.contentWindow;l&&Jt(l.document,h)}else Kt(r.l,h);break;case"vpaidNonLinear":var c=t.g.get(i);c&&Zu(c);break;case"destroyFriendlyIframe":var f=t.g.get(i);f&&(f.U(),t.g.delete(i))}}catch(t){us.B().report(125,{msg:t.message})}};$u.prototype.R=function(){this.g.forEach(function(t){return t.U()})};var bv=function(){this.g=[],this.h=[]};bv.prototype.isEmpty=function(){return 0==this.g.length&&0==this.h.length},bv.prototype.clear=function(){this.g=[],this.h=[]},bv.prototype.contains=function(t){return bb(this.g,t)||bb(this.h,t)},bv.prototype.ga=function(){for(var t=[],e=this.g.length-1;0<=e;--e)t.push(this.g[e]);var n=this.h.length;for(e=0;e<n;++e)t.push(this.h[e]);return t};var Y=function(t,e,n,i,o,r,a){K.call(this);var s=this;this.I=t,this.g=e,this.H=n,this.ub=o,this.w=new Ls,this.K=a,this.P=!1,this.M=1,this.wb=i,this.aa=-1,this.l=this.h=null,this.D=new Uu({currentTime:0},this.K),this.C=new bv,this.Qa=this.$=!1,this.W=new Map,this.X=this.pa=!1,this.sa=new $u(e,a),ah(this,this.sa),this.L=r&&null!=this.g.F,this.O=function(){var t=s.g.g;return{currentTime:t.getCurrentTime(),duration:t=t.getDuration(),isPlaying:!0,volume:s.M}},this.Z=new Fp(this),this.Z.T(this.K,"adsManager",this.xb)};p(Y,K),Y.prototype.xb=function(t){var e=this,n=t.ca,i=t.fa;switch(n){case"error":cv(this),dv(this,i);break;case"contentPauseRequested":ev(this),fv(this,t.ca,t.fa);break;case"contentResumeRequested":gv(this,function(){return fv(e,n,i)});break;case"remainingTime":this.aa=i.remainingTime;break;case"skip":fv(this,n,i);break;case"log":fv(this,n,i,i.logData);break;case"companionBackfill":null!=(t=Da("window.google_show_companion_ad"))&&t();break;case"skipShown":this.P=!0,fv(this,n,i);break;case"interaction":fv(this,n,i,i.interactionData);break;case"vpaidEvent":av(this.sa,t);break;case"skippableStateChanged":null!=(t=i.adData).skippable&&(this.P=t.skippable),fv(this,n,i);break;case"volumeChange":null!=(t=i.adData)&&"number"==typeof t.volume&&(this.M=t.volume),fv(this,n,i);break;case"firstQuartile":fv(this,Hr.firstQuartile,i),fv(this,n,i);break;case"thirdQuartile":fv(this,Hr.thirdQuartile,i),fv(this,n,i);break;default:fv(this,n,i)}};var fv=function(t,e,n,i){if(null==n.companions){var o=t.W.get(n.adId);n.companions=null!=o?o:[]}var r=n.adData;switch((o=null==r?null:new X(r))&&(t.h=o),e){case"adBreakReady":case"mediaUrlPinged":e=new Mr(e,null,n);break;case"adMetadata":(e=null)!=n.adCuePoints&&(e=new ku(n.adCuePoints)),e=new Su(o,e);break;case"allAdsCompleted":t.h=null,t.pa=!0,e=new Mr(e,o);break;case"contentPauseRequested":t.X=!1,e=new Mr(e,o);break;case"contentResumeRequested":t.h=null,t.X=!0,e=new Mr(e,o);break;case"loaded":t.aa=o.getDuration(),vr()&&(i=t.I,n=t.ub,i.h.set(Lr(o),t.O),(0!=U.g?go.B().l:i.A)&&Ds(i,"loaded",Lr(o),n)),null!=r.gfpCookie&&U.o&&kq()&&(i=r.gfpCookie,Wd.set("__gads",i.value,{ed:i.expires,path:i.path,domain:i.domain}),delete r.gfpCookie),e=new Mr(e,o,r);break;case"start":t.W.set(n.adId,n.companions),null!=Mu(t.g)&&(null==t.l?(t.l=new Ur,t.Z.T(t.l,"click",t.Mf)):Yr(t.l),Wr(t.l,Mu(t.g))),e=new Mr(e,o);break;case"complete":null!=t.l&&Yr(t.l),vr()&&Fs(t.I,t.O,Lr(o)),t.h=null,t.W.delete(n.adId),e=new Mr(e,o);break;case"log":(n=(r=null)!=i&&null!=i.type&&("adLoadError"==(n=i.type)||"adPlayError"==n))&&(r={adError:new Qu(i)}),e=new Mr(e,o,r);break;case"interaction":e=new Mr(e,o,i);break;case"adProgress":e=new Mr(e,o,new Tu(n));break;default:e=new Mr(e,o)}t.dispatchEvent(e),t.pa&&t.X&&t.destroy()},dv=function(t,e){var n=new Ru(new Qu(e));t.$?(t.dispatchEvent(n),vr()&&t.h&&Fs(t.I,t.O,Lr(t.h)),t.h=null):t.C.h.push(n),t={error:e.errorCode,vis:xg(document)},us.B().report(7,t)},hv=function(t,e,n){t.K.send("adsManager",e,n)},gv=function(t,e){cv(t,e)},ev=function(t){var e=t.g.g;Ou(t.g)&&t.w.restoreCustomPlaybackStateOnAdBreakComplete&&null!=e.pa&&e.pa()},cv=function(t,e){var n=t.g.g;Ou(t.g)&&t.w.restoreCustomPlaybackStateOnAdBreakComplete&&null!=n.W?n.W(e):e&&e()};k=Y.prototype,k.df=function(t,e,n,i){if(this.C.isEmpty()){var o=this.g,r=null;if(o.A&&null==i&&(r={vd:"setnull"}),o.A&&o.A===i&&(r={vd:"match"}),o.A&&o.A!==i){r=ur(i||null);var a=Ap(i||null);r={vd:"diff",oc:o.$,nc:r,oi:o.Z,ni:a}}!o.A&&i&&(r={vd:"new"}),r&&(r.custVid=o.W,us.B().report(93,r)),null!=i&&(o.C=Nu(i),tr(o.C)&&(o.M=!0,$g(o.h),$g(o.o),$g(o.l),o.h=null,o.o=null,o.l=null,$g(o.g),o.g=new Ut(i),v(i.getBoundingClientRect)?o.D=i:(o.D=o.w,U.F=o.D),i=o.J,o=o.g,i.l.zc(o),i.D&&(i=i.D,o=o.w.g,i.o=o,i.g&&((i=i.g).g=o,Ot(i,o))))),this.$=!0,this.nd(t,e,n),o=Ms(this.w,this.L),hv(this,"init",{adsRenderingSettings:o,width:t,height:e,viewMode:n})}else{for(;!this.C.isEmpty();)0==(e=t=this.C).g.length&&(e.g=e.h,e.g.reverse(),e.h=[]),t=t.g.pop(),this.dispatchEvent(t);this.U()}},k.je=function(){return Ou(this.g)},k.ie=function(){return this.L},k.cf=function(){return this.aa},k.$e=function(){return this.P},k.Xd=function(){hv(this,"discardAdBreak")},k.gf=function(t){if(null!=t){var e=this.w.bitrate,n=t.bitrate;us.B().report(96,{init:this.$?"1":"0",start:this.Qa?"1":"0",old:e,new:n,changed:e!=n?"1":"0"}),this.w=t,t=Ms(this.w,this.L),hv(this,"updateAdsRenderingSettings",{adsRenderingSettings:t})}},k.ff=function(){hv(this,"skip")},k.start=function(){if(this.H){(Yc||$c)&&us.B().report(50,{customPlayback:Ou(this.g)}),this.g.K||us.B().report(26,{adtagurl:this.H,customPlayback:Ou(this.g)}),Cj(this.g.w)&&us.B().report(30,{adtagurl:this.H,customPlayback:Ou(this.g)});var t,e=this.g.F,n=this.g.w;(t=e&&n&&!Cj(e))&&(e=Bs(e),n=Bs(n),t=0<e.width&&0<e.height&&0<n.width&&0<n.height&&e.left<=n.left+n.width&&n.left<=e.left+e.width&&e.top<=n.top+n.height&&n.top<=e.top+e.height),t&&us.B().report(31,{adtagurl:this.H,customPlayback:Ou(this.g)})}if(!this.g.K&&!Ou(this.g))throw Tr(Rr);(n=this.g).P=this.L&&null!=n.F,this.g.J.g.style.opacity=1,null!=this.A&&1==this.getVolume()&&("boolean"==typeof this.A.muted&&this.A.muted?this.setVolume(0):"number"!=typeof this.A.volume||0<=(n=this.A.volume)&&n<=1&&this.setVolume(this.A.volume)),this.Qa=!0,hv(this,"start")},k.Mf=function(){if(!this.w.disableClickThrough&&null!=this.h){var t=this.h.g.clickThroughUrl;if(null!=t){var e=hc("_blank");if(!nb(Gc(t))){var n=t instanceof pc||!gf.test(t)?t:new pc(nc,t);t=window,n=n instanceof pc?n:sc(n),(t||q).open(qc(n),e?gc(e):"","",void 0)}}}},k.nd=function(t,e,n){this.g.setSize(t,e),hv(this,"resize",{width:t,height:e,viewMode:n})},k.stop=function(){hv(this,"stop")},k.Ze=function(){hv(this,"expand")},k.Ye=function(){hv(this,"collapse")},k.getVolume=function(){return this.M},k.setVolume=function(t){this.M=t,this.g.g.setVolume(t),hv(this,"volume",{volume:t})},k.pause=function(){hv(this,"pause")},k.resume=function(){hv(this,"resume")},k.destroy=function(){this.U()},k.af=function(){return this.wb},k.bf=function(){return us.B().report(124,{api:"getCurrentAd"}),this.h},k.R=function(){hv(this,"destroy"),null!=this.l&&this.l.U(),this.Z.U(),this.C.clear(),this.D&&(this.D.stop(),this.D.U()),vr()&&Fs(this.I,this.O),K.prototype.R.call(this)},k.Xe=function(){us.B().report(124,{api:"clicked"}),hv(this,"click")};var iv=function(t,e){bh.call(this,"adsManagerLoaded"),this.h=t,this.o=e};p(iv,bh),iv.prototype.w=function(t,e){var n=this.h;return null!=(n.A=t).currentTime&&(n.D=new Uu(t,n.K),n.D.start()),null!=e&&(n.w=e),this.h},iv.prototype.A=function(){return this.o};var Z=function(){this.videoPlayMuted=this.videoPlayActivation="unknown",this.videoContinuousPlay="0",this.nonLinearAdSlotHeight=this.nonLinearAdSlotWidth=this.linearAdSlotHeight=this.linearAdSlotWidth=this.liveStreamPrefetchSeconds=0,this.forceNonLinearFullSlot=!1,this.vastLoadTimeout=5e3};Z.prototype.setAdWillAutoPlay=function(t){this.videoPlayActivation=t?"auto":"click"},Z.prototype.setAdWillPlayMuted=function(t){this.videoPlayMuted=t?"muted":"unmuted"},Z.prototype.setContinuousPlayback=function(t){this.videoContinuousPlay=t?"2":"1"};var kv=function(){if(Hj())return window.location.href;var t=rf(),e=t.h,n=t.g,i=null;return(t=t.l)&&(i=jv(t.url)),i||(e&&e.url?e.url:n&&n.url?n.url:"")},jv=function(t){try{var e=new Fo(t);if(!e.g.includes(".cdn.ampproject.org"))return null;var n=e.l.split("/").slice(1),i="s"==n[1]&&n.length<3;if(n.length<2||i)return null;var o="s"==n[1];n=o?n.slice(2):n.slice(1);var r=decodeURIComponent(n[0])+"/";return o?"https://"+r+n.slice(1).join("/"):"http://"+r+n.slice(1).join("/")}catch(t){return null}},lv=function(){var t=F().location.ancestorOrigins;return t?0<t.length&&t[t.length-1].length<200?t[t.length-1]:"":null},mv=function(){var n=this;this.g=new Promise(function(t,e){n.resolve=t,n.reject=e})},nv=function(t,e,n){var i="script";i=void 0===i?"":i;var o=t.createElement("link");try{o.rel="preload",o.href=y("preload","stylesheet")||e instanceof kc?lc(e).toString():qc(e instanceof pc?e:sc(e))}catch(t){return}if(i&&(o.as=i),n&&o.setAttribute("nonce",n),t=t.getElementsByTagName("head")[0])try{t.appendChild(o)}catch(t){}},ov=/^\.google\.(com?\.)?[a-z]{2,3}$/,pv=/\.(cn|com\.bi|do|sl|ba|by|ma|am)$/,qv=q,rv=function(t){t="https://adservice"+t+"/adsid/integrator.js";var e=["domain="+encodeURIComponent(q.location.hostname)];return Zq[3]>=w()&&e.push("adsid="+encodeURIComponent(Zq[1])),t+"?"+e.join("&")},Zq,tv,Yq=function(){Zq=(qv=q).googleToken=qv.googleToken||{};var t=w();Zq[1]&&Zq[3]>t&&0<Zq[2]||(Zq[1]="",Zq[2]=-1,Zq[3]=-1,Zq[4]="",Zq[6]=""),t=(tv=qv.googleIMState=qv.googleIMState||{})[1],ov.test(t)&&!pv.test(t)||(tv[1]=".google.com"),Ha(tv[5])||(tv[5]=[]),"boolean"!=typeof tv[6]&&(tv[6]=!1),Ha(tv[7])||(tv[7]=[]),"number"!=typeof tv[8]&&(tv[8]=0)},uv={dc:function(){return 0<tv[8]},Rf:function(){tv[8]++},Sf:function(){0<tv[8]&&tv[8]--},Tf:function(){tv[8]=0},ph:function(){return!1},ad:function(){return tv[5]},Xc:function(t){try{t()}catch(t){q.setTimeout(function(){throw t},0)}},sd:function(){if(!uv.dc()){var n=q.document,t=function(t){t=rv(t);t:{try{var e=Ca();break t}catch(t){}e=void 0}nv(n,t,e),(e=n.createElement("script")).type="text/javascript",e.onerror=function(){return q.processGoogleToken({},2)},t=Ce(t),Bc(e,t);try{(n.head||n.body||n.documentElement).appendChild(e),uv.Rf()}catch(t){}},e=tv[1];t(e),".google.com"!=e&&t(".google.com");var i=((t={}).newToken="FBT",t);q.setTimeout(function(){return q.processGoogleToken(i,1)},1e3)}}},vv=function(t){Yq();var e=qv.googleToken[5]||0;t&&(0!=e||Zq[3]>=w()?uv.Xc(t):(uv.ad().push(t),uv.sd())),Zq[3]>=w()&&Zq[2]>=w()||uv.sd()},wv=function(t){q.processGoogleToken=q.processGoogleToken||function(t,e){var n=t;e=void 0===e?0:e;var i="NT"==(t=(n=void 0===n?{}:n).newToken||""),o=parseInt(n.freshLifetimeSecs||"",10),r=parseInt(n.validLifetimeSecs||"",10),a=n["1p_jar"]||"";n=n.pucrd||"",Yq(),1==e?uv.Tf():uv.Sf();var s=qv.googleToken=qv.googleToken||{},u=0==e&&t&&"string"==typeof t&&!i&&"number"==typeof o&&0<o&&"number"==typeof r&&0<r&&"string"==typeof a;i=i&&!uv.dc()&&(!(Zq[3]>=w())||"NT"==Zq[1]);var h=!(Zq[3]>=w())&&0!=e;if((u||i||h)&&(o=(i=w())+1e3*o,r=i+1e3*r,Math.random()<1e-5&&ff(q,"https://pagead2.googlesyndication.com/pagead/gen_204?id=imerr&err="+e),s[5]=e,s[1]=t,s[2]=o,s[3]=r,s[4]=a,s[6]=n,Yq()),u||!uv.dc()){for(e=uv.ad(),t=0;t<e.length;t++)uv.Xc(e[t]);e.length=0}},vv(t)},xv=function(t,e){e=void 0===e?500:e,J.call(this),this.h=t,this.g=null,this.o={},this.w=0,this.A=e,this.l=null};p(xv,J),xv.prototype.R=function(){this.o={},this.l&&(ze(this.h,"message",this.l),delete this.l),delete this.o,delete this.h,delete this.g,J.prototype.R.call(this)};var zv=function(t){return v(t.h.__uspapi)||null!=yv(t)},Bv=function(t,e){var n={};if(zv(t)){var i=$b(function(){return e(n)});Av(t,function(t,e){e&&(n=t),i()}),setTimeout(i,t.A)}else e(n)},Av=function(t,e){if(v(t.h.__uspapi))(t=t.h.__uspapi)("getUSPData",1,e);else if(yv(t)){Cv(t);var n=++t.w;t.o[n]=e,t.g&&(e={},t.g.postMessage((e.__uspapiCall={command:"getUSPData",version:1,callId:n},e),"*"))}},yv=function(t){return t.g||(t.g=Pe(t.h,"__uspapiLocator")),t.g},Cv=function(n){n.l||(n.l=function(t){try{var e=("string"==typeof t.data?JSON.parse(t.data):t.data).__uspapiReturn;n.o[e.callId](e.returnValue,e.success)}catch(t){}},ye(n.h,"message",n.l))},Dv=function(t,e){e=void 0===e?500:e,J.call(this),this.h=t,this.g=null,this.o={},this.w=0,this.A=e,this.l=null};p(Dv,J),Dv.prototype.R=function(){this.o={},this.l&&(ze(this.h,"message",this.l),delete this.l),delete this.o,delete this.h,delete this.g,J.prototype.R.call(this)};var Fv=function(t){return v(t.h.__tcfapi)||null!=Ev(t)},Hv=function(t,e){var n={},i=$b(function(){(void 0!==n.tcString&&"string"!=typeof n.tcString||void 0!==n.gdprApplies&&"boolean"!=typeof n.gdprApplies||void 0!==n.listenerId&&"number"!=typeof n.listenerId||void 0!==n.addtlConsent&&"string"!=typeof n.addtlConsent||!n.cmpStatus||"error"===n.cmpStatus||"loaded"!==n.cmpStatus||"tcloaded"!==n.eventStatus&&"useractioncomplete"!==n.eventStatus)&&(n.tcString="tcunavailable"),e(n)});Gv(t,function(t,e){e&&(n=t),i()},i),setTimeout(i,t.A)},Gv=function(t,e,n){v(t.h.__tcfapi)?(t=t.h.__tcfapi)("getTCData",2,e,void 0):Ev(t)?(Iv(t),n=++t.w,t.o[n]=e,t.g&&(e={},t.g.postMessage((e.__tcfapiCall={command:"getTCData",version:2,callId:n,parameter:void 0},e),"*"))):n&&n()},Ev=function(t){return t.g||(t.g=Pe(t.h,"__tcfapiLocator")),t.g},Iv=function(n){n.l||(n.l=function(t){try{var e=("string"==typeof t.data?JSON.parse(t.data):t.data).__tcfapiReturn;n.o[e.callId](e.returnValue,e.success)}catch(t){}},ye(n.h,"message",n.l))};!function(){if(!Fb(function(t){return t.match(F().location.href)}))for(var t=ge(),e=null,n=0;n<t.length;n++)if(e=t[n],Fb(function(t){return t.match(e.src)})){0;break}}();var Lv=function(t){if(K.call(this),this.g=t,this.A=new Map,this.l=this.g.J,this.C=new Fp(this),this.D=new Dv(window),this.H=new xv(window),0!=U.g?(this.h=new ys,ah(this,this.h)):this.h=As(),vr()){t=this.h;var e=Iu(this.l);if(!t.l){if(t.g=e||null,t.g&&(t.D.T(t.g,"activityMonitor",t.H),Gs(t)),!(q.ima&&q.ima.video&&q.ima.video.client&&q.ima.video.client.tagged)){u("ima.video.client.sdkTag",!0,void 0);var n=q.document;e=le(document,"SCRIPT");var i=mc(gc(hc("https://s0.2mdn.net/instream/video/client.js")));Bc(e,i),e.async=!0,e.type="text/javascript",(n=n.getElementsByTagName("script")[0]).parentNode.insertBefore(e,n)}Ai(),go.B().L=U.g,t.A=!0,go.B().l=!0,t.C=(v(null),null),e=go.B(),n="h"==Gn(e)||"b"==Gn(e),i="exc"!=P.B().Y,n&&i&&(e.D=!0,e.H=new Pl),t.l=!0}this.w=Es(this.h,this.g.D)}Jv(),Kv()};p(Lv,K),k=Lv.prototype,k.R=function(){this.C.U();var t=this.w;this.h.w.delete(t),0!=U.g&&(go.B().w[t]=null),K.prototype.R.call(this)},k.destroy=function(){this.U()},k.getVersion=function(){return qr()},k.We=function(A,E){var S=this,t=[];if(!Jj()){var e=new mv;t.push(e.g),wv(function(){$q(),ar(),br(),e.resolve()})}var C=null;if(Fv(this.D)){var n=new mv;t.push(n.g),Hv(this.D,function(t){C=t,n.resolve()})}var _=null;if(zv(this.H)){var i=new mv;t.push(i.g),Bv(this.H,function(t){_=t,i.resolve()})}Promise.all(t).then(function(){var t=C,e=_,n=A.adTagUrl;n&&us.B().report(8,{adtagurl:n,customPlayback:Ou(S.g),customClick:null!=S.g.F});var i="goog_"+Hc++;if(S.A.set(i,E||null),n){var o=/iu=\/(\d+)\//.exec(Cc(n));(o=o&&2==o.length?o[1]:null)||(o=Gc(new Fo(n).h.get("client")),o=nb(o)?null:o)}else o=null;var r=Qe(o=o||"");o=0!=r?r:(r=q.top,Oe(r,"googlefcInactive")?4:o&&Oe(r,"googlefcPA-"+o)?2:Oe(r,"googlefcNPA")?3:0),(r={}).gfcPresent=(!!q.googlefc||Oe(q.top,"googlefcPresent"))&&4!=o,r.gfcUserConsent=o,r.isGdprLoader=!0,r.gdprApplies=t?t.gdprApplies:null,r.tcString=t?t.tcString:null,r.uspString=e?e.uspString:null,t=r,e={},U.o&&(o=kq(),(e.isBrowserCookieEnabled=o)&&(r=(o=new Fo(n)).l,o=lb(o.g,"doubleclick.net")&&!nb(r)&&/\/gampad\/(live\/)?ads/.test(r)),o&&(o=Wd.get("__gads"),e.gfpCookieValue=Gc(o))),o=kr(),(r={}).limaExperimentIds=rg().sort().join(",");var a=S.md(),s=0!=U.g?go.B().l:S.h.A,u={};null!=(s=void 0===s?null:s)&&(u.activeViewPushUpdates=s),u.activityMonitorMode=a.g,u.adsToken=a.K,u.autoPlayAdBreaks=a.l,u.companionBackfill=a.w,u.cookiesEnabled=a.o,u.disableCustomPlaybackForIOS10Plus=a.h,u.engagementDetection=!0,u.isFunctionalTest=!1,u.isVpaidAdapter=a.ab(),u["1pJar"]=a.L,u.numRedirects=a.J,u.pageCorrelator=a.O,u.persistentStateCorrelator=$f(),u.playerType=a.C,u.playerVersion=a.D,u.ppid=a.P,u.privacyControls=a.W,u.reportMediaRequests=!1,u.streamCorrelator=a.X,u.testingConfig=Tq(a).g,u.unloadAbandonPingEnabled=!0,u.urlSignals=a.aa,u.vpaidMode=a.I,(a={}).contentMediaUrl=S.g.I,a.customClickTrackingProvided=null!=S.g.F;t:{s=of();for(var h=(s=la(s)).next();!h.done;h=s.next())if((h=h.value).url&&h.url.includes("amp=1")){s=!0;break t}s=null!=window.context?0<parseInt(window.context.ampcontextVersion,10):null!=rf().l}a.isAmp=s;t:{try{var l=window.top.location.href}catch(t){l=2;break t}l=null==l?2:l==window.document.location.href?0:1}a.iframeState=l,a.imaHostingDomain=window.document.domain,a.location=kv(),a.referrer=window.document.referrer,a.domLoadTime=rr,a.sdkImplLoadTime=sr,a.topOrigin=lv(),a.osdId=S.w,a.usesCustomVideoPlayback=Ou(S.g),a.usesInlinePlayback=S.g.C,l=[];var c=h="";if(null!=(s=S.g.H)){h=s,c=void 0!==(c=!0)&&c;for(var f=[],p=0;h&&p<25;++p){var d="";void 0!==c&&c||(d=(d=9!==h.nodeType&&h.id)?"/"+d:"");t:{if(h&&h.nodeName&&h.parentElement)for(var g=h.nodeName.toString().toLowerCase(),v=h.parentElement.childNodes,m=0,y=0;y<v.length;++y){var w=v[y];if(w.nodeName&&w.nodeName.toString().toLowerCase()===g){if(h===w){g="."+m;break t}++m}}g=""}f.push((h.nodeName&&h.nodeName.toString().toLowerCase())+d+g),h=h.parentElement}if(h=f.join(),s){if(c=[],s=(s=s.ownerDocument)&&(s.defaultView||s.parentWindow)||null)try{var b=s.parent;for(f=0;b&&b!==s&&f<25;++f){var k=b.frames;for(p=0;p<k.length;++p)if(s===k[p]){c.push(p);break}b=(s=b).parent}}catch(t){}c=c.join()}else c=""}if(l.push(h,c),null!=n){for(b=0;b<kp.length-1;++b)l.push(Ge(n,kp[b])||"");b="",(n=Ge(n,"videoad_start_delay"))&&(b=(n=parseInt(n,10))<0?"postroll":0==n?"preroll":"midroll"),l.push(b)}else for(n=0;n<kp.length;++n)l.push("");if(0==(b=(n=l.join(":")).length))n=0;else{for(k=305419896,l=0;l<b;l++)k^=(k<<5)+(k>>2)+n.charCodeAt(l)&4294967295;n=0<k?k:4294967296+k}a.videoAdKey=n.toString(),n={},(b={}).adsResponse=A.adsResponse,b.videoPlayActivation=A.videoPlayActivation,b.videoPlayMuted=A.videoPlayMuted,b.videoContinuousPlay=A.videoContinuousPlay,b.adTagUrl=A.adTagUrl,b.contentDuration=A.contentDuration,b.contentKeywords=A.contentKeywords,b.contentTitle=A.contentTitle,b.linearAdSlotWidth=A.linearAdSlotWidth,b.linearAdSlotHeight=A.linearAdSlotHeight,b.nonLinearAdSlotWidth=A.nonLinearAdSlotWidth,b.nonLinearAdSlotHeight=A.nonLinearAdSlotHeight,b.forceNonLinearFullSlot=A.forceNonLinearFullSlot,b.liveStreamPrefetchSeconds=A.liveStreamPrefetchSeconds,b.vastLoadTimeout=A.vastLoadTimeout,Object.assign(n,b),n.consentSettings=t,n.cookieSettings=e,n.experimentState=o,n.imalibExperiments=r,n.settings=u,n.videoEnvironment=a,i=Iu(S.l,i),S.C.T(i,"adsLoader",S.I),i.send("adsLoader","requestAds",n)})},k.md=function(){return U},k.Ve=function(){Iu(this.l).send("adsLoader","contentComplete")};var Jv=function(){Jj()||wv(function(){$q(),ar(),br()})};Lv.prototype.I=function(t){var e=t.ca;switch(e){case"adsLoaded":e=t.fa,t=t.Qb;var n=this.l,i=1==e.newManager;!n.I&&i?(n.I=!0,n.l.U(),n.l=new uu(n.w,n.H),ah(n,n.l)):n.I&&!i&&(n.I=!1,Ju(n)),e=new Y(this.h,this.g,e.adTagUrl||"",e.adCuePoints,this.w,e.isCustomClickTrackingAllowed,Iu(this.l,t)),this.dispatchEvent(new iv(e,Mv(this,t)));break;case"error":e=t.fa,this.dispatchEvent(new Ru(new Qu(e),Mv(this,t.Qb))),e={error:e.errorCode,vis:xg(document)},us.B().report(7,e);break;case"trackingUrlPinged":this.dispatchEvent(new Mr(e,null,t.fa))}};var Mv=function(t,e){var n=t.A.get(e);return t.A.delete(e),n},Kv=function(){var t=(window.location.origin||"null").trim(),e="null"===t,n=window==window.top,i=!1,o=!1;try{i=null!=window.top.location.hostname,o=null!=window.parent.location.hostname}catch(t){}var r=null!=Array.from(document.body.getElementsByTagName("script")).find(function(t){return t.src&&t.src.includes("connatix")});us.B().report(121,{location:kv(),top_origin:lv(),origin:t,is_null:e,is_top:n,is_friendly_to_top:i,is_friendly_to_parent:o,is_vpaid_adapter:U.ab(),is_connatix_player:r})};X.prototype.getCompanionAds=X.prototype.we,X.prototype.isLinear=X.prototype.isLinear,X.prototype.isSkippable=X.prototype.Te,X.prototype.isUiDisabled=X.prototype.Ue,X.prototype.getAdId=X.prototype.h,X.prototype.getAdSystem=X.prototype.te,X.prototype.getAdvertiserName=X.prototype.ue,X.prototype.getApiFramework=X.prototype.ve,X.prototype.getContentType=X.prototype.xe,X.prototype.getCreativeId=X.prototype.o,X.prototype.getCreativeAdId=X.prototype.l,X.prototype.getDescription=X.prototype.ze,X.prototype.getTitle=X.prototype.Fe,X.prototype.getDuration=X.prototype.getDuration,X.prototype.getHeight=X.prototype.Ae,X.prototype.getWidth=X.prototype.Pe,X.prototype.getVastMediaHeight=X.prototype.Ne,X.prototype.getVastMediaWidth=X.prototype.Oe,X.prototype.getVastMediaBitrate=X.prototype.Me,X.prototype.getWrapperCreativeIds=X.prototype.Se,X.prototype.getWrapperAdIds=X.prototype.Qe,X.prototype.getWrapperAdSystems=X.prototype.Re,X.prototype.getTraffickingParameters=X.prototype.Ge,X.prototype.getTraffickingParametersString=X.prototype.He,X.prototype.getAdPodInfo=X.prototype.se,X.prototype.getUiElements=X.prototype.Ie,X.prototype.getMinSuggestedDuration=X.prototype.Ce,X.prototype.getMediaUrl=X.prototype.Be,X.prototype.getSurveyUrl=X.prototype.Ee,X.prototype.getSkipTimeOffset=X.prototype.De,X.prototype.getDealId=X.prototype.ye,X.prototype.getUniversalAdIds=X.prototype.Le,X.prototype.getUniversalAdIdValue=X.prototype.Ke,X.prototype.getUniversalAdIdRegistry=X.prototype.Je,ku.prototype.getCuePoints=ku.prototype.h,u("google.ima.AdCuePoints.PREROLL",0,window),u("google.ima.AdCuePoints.POSTROLL",-1,window),u("google.ima.AdDisplayContainer",Pu,window),Pu.prototype.initialize=Pu.prototype.X,Pu.prototype.destroy=Pu.prototype.destroy,Ir.prototype.getPodIndex=Ir.prototype.pe,Ir.prototype.getTimeOffset=Ir.prototype.qe,Ir.prototype.getTotalAds=Ir.prototype.re,Ir.prototype.getMaxDuration=Ir.prototype.oe,Ir.prototype.getAdPosition=Ir.prototype.me,Ir.prototype.getIsBumper=Ir.prototype.ne,Tu.prototype.adBreakDuration=Tu.prototype.g,Tu.prototype.adPosition=Tu.prototype.adPosition,Tu.prototype.currentTime=Tu.prototype.currentTime,Tu.prototype.duration=Tu.prototype.duration,Tu.prototype.totalAds=Tu.prototype.totalAds,Kr.prototype.getAdIdValue=Kr.prototype.o,Kr.prototype.getAdIdRegistry=Kr.prototype.l,u("google.ima.AdError.ErrorCode.VIDEO_PLAY_ERROR",400,window),u("google.ima.AdError.ErrorCode.FAILED_TO_REQUEST_ADS",1005,window),u("google.ima.AdError.ErrorCode.REQUIRED_LISTENERS_NOT_ADDED",900,window),u("google.ima.AdError.ErrorCode.VAST_LOAD_TIMEOUT",301,window),u("google.ima.AdError.ErrorCode.VAST_NO_ADS_AFTER_WRAPPER",303,window),u("google.ima.AdError.ErrorCode.VAST_MEDIA_LOAD_TIMEOUT",402,window),u("google.ima.AdError.ErrorCode.VAST_TOO_MANY_REDIRECTS",302,window),u("google.ima.AdError.ErrorCode.VAST_ASSET_MISMATCH",403,window),u("google.ima.AdError.ErrorCode.VAST_LINEAR_ASSET_MISMATCH",403,window),u("google.ima.AdError.ErrorCode.VAST_NONLINEAR_ASSET_MISMATCH",503,window),u("google.ima.AdError.ErrorCode.VAST_ASSET_NOT_FOUND",1007,window),u("google.ima.AdError.ErrorCode.VAST_UNSUPPORTED_VERSION",102,window),u("google.ima.AdError.ErrorCode.VAST_SCHEMA_VALIDATION_ERROR",101,window),u("google.ima.AdError.ErrorCode.VAST_TRAFFICKING_ERROR",200,window),u("google.ima.AdError.ErrorCode.VAST_UNEXPECTED_LINEARITY",201,window),u("google.ima.AdError.ErrorCode.VAST_UNEXPECTED_DURATION_ERROR",202,window),u("google.ima.AdError.ErrorCode.VAST_WRAPPER_ERROR",300,window),u("google.ima.AdError.ErrorCode.NONLINEAR_DIMENSIONS_ERROR",501,window),u("google.ima.AdError.ErrorCode.COMPANION_REQUIRED_ERROR",602,window),u("google.ima.AdError.ErrorCode.VAST_EMPTY_RESPONSE",1009,window),u("google.ima.AdError.ErrorCode.UNSUPPORTED_LOCALE",1011,window),u("google.ima.AdError.ErrorCode.INVALID_ARGUMENTS",1101,window),u("google.ima.AdError.ErrorCode.UNKNOWN_AD_RESPONSE",1010,window),u("google.ima.AdError.ErrorCode.UNKNOWN_ERROR",900,window),u("google.ima.AdError.ErrorCode.OVERLAY_AD_PLAYING_FAILED",500,window),u("google.ima.AdError.ErrorCode.AUTOPLAY_DISALLOWED",1205,window),u("google.ima.AdError.ErrorCode.VIDEO_ELEMENT_USED",-1,window),u("google.ima.AdError.ErrorCode.VIDEO_ELEMENT_REQUIRED",-1,window),u("google.ima.AdError.ErrorCode.VAST_MEDIA_ERROR",-1,window),u("google.ima.AdError.ErrorCode.ADSLOT_NOT_VISIBLE",-1,window),u("google.ima.AdError.ErrorCode.OVERLAY_AD_LOADING_FAILED",-1,window),u("google.ima.AdError.ErrorCode.VAST_MALFORMED_RESPONSE",-1,window),u("google.ima.AdError.ErrorCode.COMPANION_AD_LOADING_FAILED",-1,window),u("google.ima.AdError.Type.AD_LOAD","adLoadError",window),u("google.ima.AdError.Type.AD_PLAY","adPlayError",window),Qu.prototype.getErrorCode=Qu.prototype.xc,Qu.prototype.getVastErrorCode=Qu.prototype.le,Qu.prototype.getInnerError=Qu.prototype.yc,Qu.prototype.getMessage=Qu.prototype.ld,Qu.prototype.getType=Qu.prototype.ke,u("google.ima.AdErrorEvent.Type.AD_ERROR","adError",window),Ru.prototype.getError=Ru.prototype.w,Ru.prototype.getUserRequestContext=Ru.prototype.A,u("google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED","contentResumeRequested",window),u("google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED","contentPauseRequested",window),u("google.ima.AdEvent.Type.CLICK","click",window),u("google.ima.AdEvent.Type.DURATION_CHANGE","durationChange",window),u("google.ima.AdEvent.Type.EXPANDED_CHANGED","expandedChanged",window),u("google.ima.AdEvent.Type.STARTED","start",window),u("google.ima.AdEvent.Type.IMPRESSION","impression",window),u("google.ima.AdEvent.Type.PAUSED","pause",window),u("google.ima.AdEvent.Type.RESUMED","resume",window),u("google.ima.AdEvent.Type.AD_PROGRESS","adProgress",window),u("google.ima.AdEvent.Type.AD_BUFFERING","adBuffering",window),u("google.ima.AdEvent.Type.FIRST_QUARTILE","firstQuartile",window),u("google.ima.AdEvent.Type.MIDPOINT","midpoint",window),u("google.ima.AdEvent.Type.THIRD_QUARTILE","thirdQuartile",window),u("google.ima.AdEvent.Type.COMPLETE","complete",window),u("google.ima.AdEvent.Type.USER_CLOSE","userClose",window),u("google.ima.AdEvent.Type.LINEAR_CHANGED","linearChanged",window),u("google.ima.AdEvent.Type.LOADED","loaded",window),u("google.ima.AdEvent.Type.AD_CAN_PLAY","adCanPlay",window),u("google.ima.AdEvent.Type.AD_METADATA","adMetadata",window),u("google.ima.AdEvent.Type.AD_BREAK_READY","adBreakReady",window),u("google.ima.AdEvent.Type.INTERACTION","interaction",window),u("google.ima.AdEvent.Type.ALL_ADS_COMPLETED","allAdsCompleted",window),u("google.ima.AdEvent.Type.SKIPPED","skip",window),u("google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED","skippableStateChanged",window),u("google.ima.AdEvent.Type.LOG","log",window),u("google.ima.AdEvent.Type.VIEWABLE_IMPRESSION","viewable_impression",window),u("google.ima.AdEvent.Type.VOLUME_CHANGED","volumeChange",window),u("google.ima.AdEvent.Type.VOLUME_MUTED","mute",window),Mr.prototype.type=Mr.prototype.type,Mr.prototype.getAd=Mr.prototype.F,Mr.prototype.getAdData=Mr.prototype.J,Su.prototype.getAdCuePoints=Su.prototype.o,u("google.ima.AdsLoader",Lv,window),Lv.prototype.getSettings=Lv.prototype.md,Lv.prototype.requestAds=Lv.prototype.We,Lv.prototype.contentComplete=Lv.prototype.Ve,Lv.prototype.destroy=Lv.prototype.destroy,Lv.prototype.getVersion=Lv.prototype.getVersion,u("google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED","adsManagerLoaded",window),iv.prototype.getAdsManager=iv.prototype.w,iv.prototype.getUserRequestContext=iv.prototype.A,u("google.ima.CompanionAdSelectionSettings",wr,window),u("google.ima.CompanionAdSelectionSettings.CreativeType.IMAGE","Image",void 0),u("google.ima.CompanionAdSelectionSettings.CreativeType.FLASH","Flash",void 0),u("google.ima.CompanionAdSelectionSettings.CreativeType.ALL","All",void 0),u("google.ima.CompanionAdSelectionSettings.ResourceType.HTML","Html",void 0),u("google.ima.CompanionAdSelectionSettings.ResourceType.IFRAME","IFrame",void 0),u("google.ima.CompanionAdSelectionSettings.ResourceType.STATIC","Static",void 0),u("google.ima.CompanionAdSelectionSettings.ResourceType.ALL","All",void 0),u("google.ima.CompanionAdSelectionSettings.SizeCriteria.IGNORE","IgnoreSize",void 0),u("google.ima.CompanionAdSelectionSettings.SizeCriteria.SELECT_EXACT_MATCH","SelectExactMatch",void 0),u("google.ima.CompanionAdSelectionSettings.SizeCriteria.SELECT_NEAR_MATCH","SelectNearMatch",void 0),u("google.ima.CustomContentLoadedEvent.Type.CUSTOM_CONTENT_LOADED","deprecated-event",window),u("ima.ImaSdkSettings",V,window),u("google.ima.settings",U,window),V.prototype.setCompanionBackfill=V.prototype.tf,V.prototype.getCompanionBackfill=V.prototype.hf,V.prototype.setAutoPlayAdBreaks=V.prototype.sf,V.prototype.isAutoPlayAdBreak=V.prototype.rf,V.prototype.setPpid=V.prototype.Cf,V.prototype.getPpid=V.prototype.qf,V.prototype.setVpaidAllowed=V.prototype.Df,V.prototype.setVpaidMode=V.prototype.Ef,V.prototype.setIsVpaidAdapter=V.prototype.xf,V.prototype.isVpaidAdapter=V.prototype.ab,V.prototype.setNumRedirects=V.prototype.zf,V.prototype.getNumRedirects=V.prototype.lf,V.prototype.getLocale=V.prototype.Yd,V.prototype.setLocale=V.prototype.yf,V.prototype.getPlayerType=V.prototype.mf,V.prototype.setPlayerType=V.prototype.Af,V.prototype.getDisableFlashAds=V.prototype.kf,V.prototype.setDisableFlashAds=V.prototype.wf,V.prototype.getPlayerVersion=V.prototype.nf,V.prototype.setPlayerVersion=V.prototype.Bf,V.prototype.setPageCorrelator=V.prototype.Z,V.prototype.setStreamCorrelator=V.prototype.$,V.prototype.setDisableCustomPlaybackForIOS10Plus=V.prototype.vf,V.prototype.getDisableCustomPlaybackForIOS10Plus=V.prototype.jf,V.prototype.setCookiesEnabled=V.prototype.uf,u("google.ima.ImaSdkSettings.CompanionBackfillMode.ALWAYS","always",void 0),u("google.ima.ImaSdkSettings.CompanionBackfillMode.ON_MASTER_AD","on_master_ad",void 0),u("google.ima.ImaSdkSettings.VpaidMode.DISABLED",0,void 0),u("google.ima.ImaSdkSettings.VpaidMode.ENABLED",1,void 0),u("google.ima.ImaSdkSettings.VpaidMode.INSECURE",2,void 0),u("google.ima.AdsRenderingSettings",Ls,window),u("google.ima.AdsRenderingSettings.AUTO_SCALE",-1,window),u("google.ima.AdsRequest",Z,window),Z.prototype.adTagUrl=Z.prototype.adTagUrl,Z.prototype.adsResponse=Z.prototype.adsResponse,Z.prototype.nonLinearAdSlotHeight=Z.prototype.nonLinearAdSlotHeight,Z.prototype.nonLinearAdSlotWidth=Z.prototype.nonLinearAdSlotWidth,Z.prototype.linearAdSlotHeight=Z.prototype.linearAdSlotHeight,Z.prototype.linearAdSlotWidth=Z.prototype.linearAdSlotWidth,Z.prototype.setAdWillAutoPlay=Z.prototype.setAdWillAutoPlay,Z.prototype.setAdWillPlayMuted=Z.prototype.setAdWillPlayMuted,Z.prototype.setContinuousPlayback=Z.prototype.setContinuousPlayback,Z.prototype.contentDuration=Z.prototype.contentDuration,Z.prototype.contentKeywords=Z.prototype.contentKeywords,Z.prototype.contentTitle=Z.prototype.contentTitle,Z.prototype.vastLoadTimeout=Z.prototype.vastLoadTimeout,u("google.ima.VERSION","3.367.1",void 0),u("google.ima.UiElements.AD_ATTRIBUTION","adAttribution",void 0),u("google.ima.UiElements.COUNTDOWN","countdown",void 0),u("google.ima.ViewMode.NORMAL","normal",void 0),u("google.ima.ViewMode.FULLSCREEN","fullscreen",void 0),Y.prototype.isCustomPlaybackUsed=Y.prototype.je,Y.prototype.isCustomClickTrackingUsed=Y.prototype.ie,Y.prototype.destroy=Y.prototype.destroy,Y.prototype.init=Y.prototype.df,Y.prototype.start=Y.prototype.start,Y.prototype.stop=Y.prototype.stop,Y.prototype.pause=Y.prototype.pause,Y.prototype.resume=Y.prototype.resume,Y.prototype.getCuePoints=Y.prototype.af,Y.prototype.getCurrentAd=Y.prototype.bf,Y.prototype.getRemainingTime=Y.prototype.cf,Y.prototype.expand=Y.prototype.Ze,Y.prototype.collapse=Y.prototype.Ye,Y.prototype.getAdSkippableState=Y.prototype.$e,Y.prototype.resize=Y.prototype.nd,Y.prototype.skip=Y.prototype.ff,Y.prototype.getVolume=Y.prototype.getVolume,Y.prototype.setVolume=Y.prototype.setVolume,Y.prototype.discardAdBreak=Y.prototype.Xd,Y.prototype.updateAdsRenderingSettings=Y.prototype.gf,Y.prototype.clicked=Y.prototype.Xe,Jr.prototype.getContent=Jr.prototype.getContent,Jr.prototype.getContentType=Jr.prototype.h,Jr.prototype.getHeight=Jr.prototype.l,Jr.prototype.getWidth=Jr.prototype.o}();




/********** https://www.aufeminin.com/reloaded/static/preconcat_%2Freloaded%2Fstatic%2FFront%2FVendor%2Fvideo-js%2Fplugins%2Fvideojs-flash%2F2.2.0%2Fvideojs-flash.js.202002281736.js**********/

/** https://www.aufeminin.com/reloaded/static/Front/Vendor/video-js/plugins/videojs-flash/2.2.0/videojs-flash.js?v=202002281736 **/
(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?module.exports=factory(require('video.js')):typeof define==='function'&&define.amd?define(['video.js'],factory):(global.videojsFlash=factory(global.videojs));}(this,(function(videojs){'use strict';videojs=videojs&&videojs.hasOwnProperty('default')?videojs['default']:videojs;var version="5.4.2";var version$1="2.2.0";function FlashRtmpDecorator(Flash){Flash.streamingFormats={'rtmp/mp4':'MP4','rtmp/flv':'FLV'};Flash.streamFromParts=function(connection,stream){return connection+'&'+stream;};Flash.streamToParts=function(src){var parts={connection:'',stream:''};if(!src){return parts;}
var connEnd=src.search(/&(?![\w-]+=)/);var streamBegin=void 0;if(connEnd!==-1){streamBegin=connEnd+1;}else{connEnd=streamBegin=src.lastIndexOf('/')+1;if(connEnd===0){connEnd=streamBegin=src.length;}}
parts.connection=src.substring(0,connEnd);parts.stream=src.substring(streamBegin,src.length);return parts;};Flash.isStreamingType=function(srcType){return srcType in Flash.streamingFormats;};Flash.RTMP_RE=/^rtmp[set]?:\/\//i;Flash.isStreamingSrc=function(src){return Flash.RTMP_RE.test(src);};Flash.rtmpSourceHandler={};Flash.rtmpSourceHandler.canPlayType=function(type){if(Flash.isStreamingType(type)){return'maybe';}
return'';};Flash.rtmpSourceHandler.canHandleSource=function(source,options){var can=Flash.rtmpSourceHandler.canPlayType(source.type);if(can){return can;}
if(Flash.isStreamingSrc(source.src)){return'maybe';}
return'';};Flash.rtmpSourceHandler.handleSource=function(source,tech,options){var srcParts=Flash.streamToParts(source.src);tech.setRtmpConnection(srcParts.connection);tech.setRtmpStream(srcParts.stream);};Flash.registerSourceHandler(Flash.rtmpSourceHandler);return Flash;}
var commonjsGlobal=typeof window!=='undefined'?window:typeof global!=='undefined'?global:typeof self!=='undefined'?self:{};var win;if(typeof window!=="undefined"){win=window;}else if(typeof commonjsGlobal!=="undefined"){win=commonjsGlobal;}else if(typeof self!=="undefined"){win=self;}else{win={};}
var window_1=win;var classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}};var inherits=function(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}
subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;};var possibleConstructorReturn=function(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}
return call&&(typeof call==="object"||typeof call==="function")?call:self;};var Tech=videojs.getComponent('Tech');var Dom=videojs.dom;var Url=videojs.url;var createTimeRange=videojs.createTimeRange;var mergeOptions=videojs.mergeOptions;var navigator=window_1&&window_1.navigator||{};var Flash=function(_Tech){inherits(Flash,_Tech);function Flash(options,ready){classCallCheck(this,Flash);var _this=possibleConstructorReturn(this,_Tech.call(this,options,ready));if(options.source){_this.ready(function(){this.setSource(options.source);},true);}
if(options.startTime){_this.ready(function(){this.load();this.play();this.currentTime(options.startTime);},true);}
window_1.videojs=window_1.videojs||{};window_1.videojs.Flash=window_1.videojs.Flash||{};window_1.videojs.Flash.onReady=Flash.onReady;window_1.videojs.Flash.onEvent=Flash.onEvent;window_1.videojs.Flash.onError=Flash.onError;_this.on('seeked',function(){this.lastSeekTarget_=undefined;});return _this;}
Flash.prototype.createEl=function createEl(){var options=this.options_;if(!options.swf){options.swf='https://vjs.zencdn.net/swf/'+version+'/video-js.swf';}
var objId=options.techId;var flashVars=mergeOptions({readyFunction:'videojs.Flash.onReady',eventProxyFunction:'videojs.Flash.onEvent',errorEventProxyFunction:'videojs.Flash.onError',autoplay:options.autoplay,preload:options.preload,loop:options.loop,muted:options.muted},options.flashVars);var params=mergeOptions({wmode:'opaque',bgcolor:'#000000'},options.params);var attributes=mergeOptions({id:objId,name:objId,'class':'vjs-tech'},options.attributes);this.el_=Flash.embed(options.swf,flashVars,params,attributes);this.el_.tech=this;return this.el_;};Flash.prototype.play=function play(){if(this.ended()){this.setCurrentTime(0);}
this.el_.vjs_play();};Flash.prototype.pause=function pause(){this.el_.vjs_pause();};Flash.prototype.src=function src(_src){if(_src===undefined){return this.currentSrc();}
return this.setSrc(_src);};Flash.prototype.setSrc=function setSrc(src){var _this2=this;src=Url.getAbsoluteURL(src);this.el_.vjs_src(src);if(this.autoplay()){this.setTimeout(function(){return _this2.play();},0);}};Flash.prototype.seeking=function seeking(){return this.lastSeekTarget_!==undefined;};Flash.prototype.setCurrentTime=function setCurrentTime(time){var seekable=this.seekable();if(seekable.length){time=time>seekable.start(0)?time:seekable.start(0);time=time<seekable.end(seekable.length-1)?time:seekable.end(seekable.length-1);this.lastSeekTarget_=time;this.trigger('seeking');this.el_.vjs_setProperty('currentTime',time);_Tech.prototype.setCurrentTime.call(this);}};Flash.prototype.currentTime=function currentTime(){if(this.seeking()){return this.lastSeekTarget_||0;}
return this.el_.vjs_getProperty('currentTime');};Flash.prototype.currentSrc=function currentSrc(){if(this.currentSource_){return this.currentSource_.src;}
return this.el_.vjs_getProperty('currentSrc');};Flash.prototype.duration=function duration(){if(this.readyState()===0){return NaN;}
var duration=this.el_.vjs_getProperty('duration');return duration>=0?duration:Infinity;};Flash.prototype.load=function load(){this.el_.vjs_load();};Flash.prototype.poster=function poster(){this.el_.vjs_getProperty('poster');};Flash.prototype.setPoster=function setPoster(){};Flash.prototype.seekable=function seekable(){var duration=this.duration();if(duration===0){return createTimeRange();}
return createTimeRange(0,duration);};Flash.prototype.buffered=function buffered(){var ranges=this.el_.vjs_getProperty('buffered');if(ranges.length===0){return createTimeRange();}
return createTimeRange(ranges[0][0],ranges[0][1]);};Flash.prototype.supportsFullScreen=function supportsFullScreen(){return false;};Flash.prototype.enterFullScreen=function enterFullScreen(){return false;};Flash.prototype.getVideoPlaybackQuality=function getVideoPlaybackQuality(){var videoPlaybackQuality=this.el_.vjs_getProperty('getVideoPlaybackQuality');if(window_1.performance&&typeof window_1.performance.now==='function'){videoPlaybackQuality.creationTime=window_1.performance.now();}else if(window_1.performance&&window_1.performance.timing&&typeof window_1.performance.timing.navigationStart==='number'){videoPlaybackQuality.creationTime=window_1.Date.now()-window_1.performance.timing.navigationStart;}
return videoPlaybackQuality;};return Flash;}(Tech);var _readWrite=['rtmpConnection','rtmpStream','preload','defaultPlaybackRate','playbackRate','autoplay','loop','controls','volume','muted','defaultMuted'];var _readOnly=['networkState','readyState','initialTime','startOffsetTime','paused','ended','videoWidth','videoHeight'];var _api=Flash.prototype;function _createSetter(attr){var attrUpper=attr.charAt(0).toUpperCase()+attr.slice(1);_api['set'+attrUpper]=function(val){return this.el_.vjs_setProperty(attr,val);};}
function _createGetter(attr){_api[attr]=function(){return this.el_.vjs_getProperty(attr);};}
for(var i=0;i<_readWrite.length;i++){_createGetter(_readWrite[i]);_createSetter(_readWrite[i]);}
for(var _i=0;_i<_readOnly.length;_i++){_createGetter(_readOnly[_i]);}
Flash.isSupported=function(){if(videojs.browser.IS_CHROME&&!videojs.browser.IS_ANDROID||videojs.browser.IS_SAFARI&&!videojs.browser.IS_IOS||videojs.browser.IS_EDGE){return true;}
return Flash.version()[0]>=10;};Tech.withSourceHandlers(Flash);Flash.nativeSourceHandler={};Flash.nativeSourceHandler.canPlayType=function(type){if(type in Flash.formats){return'maybe';}
return'';};Flash.nativeSourceHandler.canHandleSource=function(source,options){var type=void 0;function guessMimeType(src){var ext=Url.getFileExtension(src);if(ext){return'video/'+ext;}
return'';}
if(!source.type){type=guessMimeType(source.src);}else{type=source.type.replace(/;.*/,'').toLowerCase();}
return Flash.nativeSourceHandler.canPlayType(type);};Flash.nativeSourceHandler.handleSource=function(source,tech,options){tech.setSrc(source.src);};Flash.nativeSourceHandler.dispose=function(){};Flash.registerSourceHandler(Flash.nativeSourceHandler);Flash.formats={'video/flv':'FLV','video/x-flv':'FLV','video/mp4':'MP4','video/m4v':'MP4'};Flash.onReady=function(currSwf){var el=Dom.$('#'+currSwf);var tech=el&&el.tech;if(tech&&tech.el()){Flash.checkReady(tech);}};Flash.checkReady=function(tech){if(!tech.el()){return;}
if(tech.el().vjs_getProperty){tech.triggerReady();}else{this.setTimeout(function(){Flash.checkReady(tech);},50);}};Flash.onEvent=function(swfID,eventName){var tech=Dom.$('#'+swfID).tech;var args=Array.prototype.slice.call(arguments,2);tech.setTimeout(function(){tech.trigger(eventName,args);},1);};Flash.onError=function(swfID,err){var tech=Dom.$('#'+swfID).tech;if(err==='srcnotfound'){return tech.error(4);}
if(typeof err==='string'){tech.error('FLASH: '+err);}else{err.origin='flash';tech.error(err);}};Flash.version=function(){var version$$1='0,0,0';try{version$$1=new window_1.ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version').replace(/\D+/g,',').match(/^,?(.+),?$/)[1];}catch(e){try{if(navigator.mimeTypes['application/x-shockwave-flash'].enabledPlugin){version$$1=(navigator.plugins['Shockwave Flash 2.0']||navigator.plugins['Shockwave Flash']).description.replace(/\D+/g,',').match(/^,?(.+),?$/)[1];}}catch(err){}}
return version$$1.split(',');};Flash.embed=function(swf,flashVars,params,attributes){var code=Flash.getEmbedCode(swf,flashVars,params,attributes);var obj=Dom.createEl('div',{innerHTML:code}).childNodes[0];return obj;};Flash.getEmbedCode=function(swf,flashVars,params,attributes){var objTag='<object type="application/x-shockwave-flash" ';var flashVarsString='';var paramsString='';var attrsString='';if(flashVars){Object.getOwnPropertyNames(flashVars).forEach(function(key){flashVarsString+=key+'='+flashVars[key]+'&amp;';});}
params=mergeOptions({movie:swf,flashvars:flashVarsString,allowScriptAccess:'always',allowNetworking:'all'},params);Object.getOwnPropertyNames(params).forEach(function(key){paramsString+='<param name="'+key+'" value="'+params[key]+'" />';});attributes=mergeOptions({data:swf,width:'100%',height:'100%'},attributes);Object.getOwnPropertyNames(attributes).forEach(function(key){attrsString+=key+'="'+attributes[key]+'" ';});return''+objTag+attrsString+'>'+paramsString+'</object>';};FlashRtmpDecorator(Flash);if(Tech.getTech('Flash')){videojs.log.warn('Not using videojs-flash as it appears to already be registered');videojs.log.warn('videojs-flash should only be used with video.js@6 and above');}else{videojs.registerTech('Flash',Flash);}
Flash.VERSION=version$1;return Flash;})));




/********** https://www.aufeminin.com/reloaded/static/preconcat_%2Freloaded%2Fstatic%2FFront%2FVendor%2Fvideo-js%2Fplugins%2Fvideojs-contrib-hls%2F5.3.3%2Fvideojs-contrib-hls.js.202002281736.js**********/

/** https://www.aufeminin.com/reloaded/static/Front/Vendor/video-js/plugins/videojs-contrib-hls/5.3.3/videojs-contrib-hls.js?v=202002281736 **/
(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.videojsContribHls=f()}})(function(){var define,module,exports;return(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _slicedToArray=(function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i['return'])_i['return']();}finally{if(_d)throw _e;}}return _arr;}return function(arr,i){if(Array.isArray(arr)){return arr;}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i);}else{throw new TypeError('Invalid attempt to destructure non-iterable instance');}};})();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
var _globalWindow=require('global/window');var _globalWindow2=_interopRequireDefault(_globalWindow);var findAdCue=function findAdCue(track,mediaTime){var cues=track.cues;for(var i=0;i<cues.length;i++){var cue=cues[i];if(mediaTime>=cue.adStartTime&&mediaTime<=cue.adEndTime){return cue;}}
return null;};var updateAdCues=function updateAdCues(media,track){var offset=arguments.length<=2||arguments[2]===undefined?0:arguments[2];if(!media.segments){return;}
var mediaTime=offset;var cue=undefined;for(var i=0;i<media.segments.length;i++){var segment=media.segments[i];if(!cue){cue=findAdCue(track,mediaTime+segment.duration/2);}
if(cue){if('cueIn'in segment){cue.endTime=mediaTime;cue.adEndTime=mediaTime;mediaTime+=segment.duration;cue=null;continue;}
if(mediaTime<cue.endTime){mediaTime+=segment.duration;continue;}
cue.endTime+=segment.duration;}else{if('cueOut'in segment){cue=new _globalWindow2['default'].VTTCue(mediaTime,mediaTime+segment.duration,segment.cueOut);cue.adStartTime=mediaTime;cue.adEndTime=mediaTime+parseFloat(segment.cueOut);track.addCue(cue);}
if('cueOutCont'in segment){var adOffset=undefined;var adTotal=undefined;var _segment$cueOutCont$split$map=segment.cueOutCont.split('/').map(parseFloat);var _segment$cueOutCont$split$map2=_slicedToArray(_segment$cueOutCont$split$map,2);adOffset=_segment$cueOutCont$split$map2[0];adTotal=_segment$cueOutCont$split$map2[1];cue=new _globalWindow2['default'].VTTCue(mediaTime,mediaTime+segment.duration,'');cue.adStartTime=mediaTime-adOffset;cue.adEndTime=cue.adStartTime+adTotal;track.addCue(cue);}}
mediaTime+=segment.duration;}};exports['default']={updateAdCues:updateAdCues,findAdCue:findAdCue};module.exports=exports['default'];},{"global/window":28}],2:[function(require,module,exports){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var textRange=function textRange(range,i){return range.start(i)+'-'+range.end(i);};var formatHexString=function formatHexString(e,i){var value=e.toString(16);return'00'.substring(0,2-value.length)+value+(i%2?' ':'');};var formatAsciiString=function formatAsciiString(e){if(e>=0x20&&e<0x7e){return String.fromCharCode(e);}
return'.';};var createTransferableMessage=function createTransferableMessage(message){var transferable={};Object.keys(message).forEach(function(key){var value=message[key];if(ArrayBuffer.isView(value)){transferable[key]={bytes:value.buffer,byteOffset:value.byteOffset,byteLength:value.byteLength};}else{transferable[key]=value;}});return transferable;};var utils={hexDump:function hexDump(data){var bytes=Array.prototype.slice.call(data);var step=16;var result='';var hex=undefined;var ascii=undefined;for(var j=0;j<bytes.length/step;j++){hex=bytes.slice(j*step,j*step+step).map(formatHexString).join('');ascii=bytes.slice(j*step,j*step+step).map(formatAsciiString).join('');result+=hex+' '+ascii+'\n';}
return result;},tagDump:function tagDump(tag){return utils.hexDump(tag.bytes);},textRanges:function textRanges(ranges){var result='';var i=undefined;for(i=0;i<ranges.length;i++){result+=textRange(ranges,i)+' ';}
return result;},createTransferableMessage:createTransferableMessage};exports['default']=utils;module.exports=exports['default'];},{}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]={GOAL_BUFFER_LENGTH:30};module.exports=exports["default"];},{}],4:[function(require,module,exports){'use strict';Object.defineProperty(exports,'__esModule',{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
var _globalWindow=require('global/window');var _globalWindow2=_interopRequireDefault(_globalWindow);var _aesDecrypter=require('aes-decrypter');var _binUtils=require('./bin-utils');var DecrypterWorker=function DecrypterWorker(self){self.onmessage=function(event){var data=event.data;var encrypted=new Uint8Array(data.encrypted.bytes,data.encrypted.byteOffset,data.encrypted.byteLength);var key=new Uint32Array(data.key.bytes,data.key.byteOffset,data.key.byteLength/4);var iv=new Uint32Array(data.iv.bytes,data.iv.byteOffset,data.iv.byteLength/4);new _aesDecrypter.Decrypter(encrypted,key,iv,function(err,bytes){_globalWindow2['default'].postMessage((0,_binUtils.createTransferableMessage)({source:data.source,decrypted:bytes}),[bytes.buffer]);});};};exports['default']=function(self){return new DecrypterWorker(self);};module.exports=exports['default'];},{"./bin-utils":2,"aes-decrypter":21,"global/window":28}],5:[function(require,module,exports){(function(global){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();var _get=function get(_x2,_x3,_x4){var _again=true;_function:while(_again){var object=_x2,property=_x3,receiver=_x4;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{_x2=parent;_x3=property;_x4=receiver;_again=true;desc=parent=undefined;continue _function;}}else if('value'in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}
var _playlistLoader=require('./playlist-loader');var _playlistLoader2=_interopRequireDefault(_playlistLoader);var _segmentLoader=require('./segment-loader');var _segmentLoader2=_interopRequireDefault(_segmentLoader);var _ranges=require('./ranges');var _ranges2=_interopRequireDefault(_ranges);var _videoJs=(typeof window!=="undefined"?window['videojs']:typeof global!=="undefined"?global['videojs']:null);var _videoJs2=_interopRequireDefault(_videoJs);var _adCueTags=require('./ad-cue-tags');var _adCueTags2=_interopRequireDefault(_adCueTags);var _syncController=require('./sync-controller');var _syncController2=_interopRequireDefault(_syncController);var _videojsContribMediaSourcesEs5CodecUtils=require('videojs-contrib-media-sources/es5/codec-utils');var _webworkify=require('webworkify');var _webworkify2=_interopRequireDefault(_webworkify);var _decrypterWorker=require('./decrypter-worker');var _decrypterWorker2=_interopRequireDefault(_decrypterWorker);var BLACKLIST_DURATION=5*60*1000;var Hls=undefined;var objectChanged=function objectChanged(a,b){if(typeof a!==typeof b){return true;}
if(Object.keys(a).length!==Object.keys(b).length){return true;}
for(var prop in a){if(a[prop]!==b[prop]){return true;}}
return false;};var parseCodecs=function parseCodecs(codecs){var result={codecCount:0,videoCodec:null,videoObjectTypeIndicator:null,audioProfile:null};var parsed=undefined;result.codecCount=codecs.split(',').length;result.codecCount=result.codecCount||2;parsed=/(^|\s|,)+(avc1)([^ ,]*)/i.exec(codecs);if(parsed){result.videoCodec=parsed[2];result.videoObjectTypeIndicator=parsed[3];}
result.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(codecs);result.audioProfile=result.audioProfile&&result.audioProfile[2];return result;};var mapLegacyAvcCodecs_=function mapLegacyAvcCodecs_(codecString){return codecString.replace(/avc1\.(\d+)\.(\d+)/i,function(match){return(0,_videojsContribMediaSourcesEs5CodecUtils.translateLegacyCodecs)([match])[0];});};exports.mapLegacyAvcCodecs_=mapLegacyAvcCodecs_;var mimeTypesForPlaylist_=function mimeTypesForPlaylist_(master,media){var container='mp2t';var codecs={videoCodec:'avc1',videoObjectTypeIndicator:'.4d400d',audioProfile:'2'};var audioGroup=[];var mediaAttributes=undefined;var previousGroup=null;if(!media){return[];}
if(media.segments&&media.segments.length&&media.segments[0].map){container='mp4';}
mediaAttributes=media.attributes||{};if(mediaAttributes.CODECS){(function(){var parsedCodecs=parseCodecs(mediaAttributes.CODECS);Object.keys(parsedCodecs).forEach(function(key){codecs[key]=parsedCodecs[key]||codecs[key];});})();}
if(master.mediaGroups.AUDIO){audioGroup=master.mediaGroups.AUDIO[mediaAttributes.AUDIO];}
for(var groupId in audioGroup){if(previousGroup&&!!audioGroup[groupId].uri!==!!previousGroup.uri){return['video/'+container+'; codecs="'+codecs.videoCodec+codecs.videoObjectTypeIndicator+', mp4a.40.'+codecs.audioProfile+'"','audio/'+container+'; codecs="mp4a.40.'+codecs.audioProfile+'"'];}
previousGroup=audioGroup[groupId];}
if(previousGroup&&previousGroup.uri){return['video/'+container+'; codecs="'+codecs.videoCodec+codecs.videoObjectTypeIndicator+'"','audio/'+container+'; codecs="mp4a.40.'+codecs.audioProfile+'"'];}
return['video/'+container+'; codecs="'+codecs.videoCodec+codecs.videoObjectTypeIndicator+', mp4a.40.'+codecs.audioProfile+'"'];};exports.mimeTypesForPlaylist_=mimeTypesForPlaylist_;var MasterPlaylistController=(function(_videojs$EventTarget){_inherits(MasterPlaylistController,_videojs$EventTarget);function MasterPlaylistController(options){var _this=this;_classCallCheck(this,MasterPlaylistController);_get(Object.getPrototypeOf(MasterPlaylistController.prototype),'constructor',this).call(this);var url=options.url;var withCredentials=options.withCredentials;var mode=options.mode;var tech=options.tech;var bandwidth=options.bandwidth;var externHls=options.externHls;var useCueTags=options.useCueTags;if(!url){throw new Error('A non-empty playlist URL is required');}
Hls=externHls;this.withCredentials=withCredentials;this.tech_=tech;this.hls_=tech.hls;this.mode_=mode;this.useCueTags_=useCueTags;if(this.useCueTags_){this.cueTagsTrack_=this.tech_.addTextTrack('metadata','ad-cues');this.cueTagsTrack_.inBandMetadataTrackDispatchType='';}
this.audioTracks_=[];this.requestOptions_={withCredentials:this.withCredentials,timeout:null};this.audioGroups_={};this.mediaSource=new _videoJs2['default'].MediaSource({mode:mode});this.audioinfo_=null;this.mediaSource.on('audioinfo',this.handleAudioinfoUpdate_.bind(this));this.mediaSource.addEventListener('sourceopen',this.handleSourceOpen_.bind(this));this.seekable_=_videoJs2['default'].createTimeRanges();this.hasPlayed_=function(){return false;};this.syncController_=new _syncController2['default']();this.decrypter_=(0,_webworkify2['default'])(_decrypterWorker2['default']);var segmentLoaderOptions={hls:this.hls_,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:function seekable(){return _this.seekable();},seeking:function seeking(){return _this.tech_.seeking();},setCurrentTime:function setCurrentTime(a){return _this.tech_.setCurrentTime(a);},hasPlayed:function hasPlayed(){return _this.hasPlayed_();},bandwidth:bandwidth,syncController:this.syncController_,decrypter:this.decrypter_,loaderType:'main'};this.masterPlaylistLoader_=new _playlistLoader2['default'](url,this.hls_,this.withCredentials);this.setupMasterPlaylistLoaderListeners_();this.audioPlaylistLoader_=null;this.mainSegmentLoader_=new _segmentLoader2['default'](segmentLoaderOptions);segmentLoaderOptions.loaderType='audio';this.audioSegmentLoader_=new _segmentLoader2['default'](segmentLoaderOptions);this.decrypter_.onmessage=function(event){if(event.data.source==='main'){_this.mainSegmentLoader_.handleDecrypted_(event.data);}else if(event.data.source==='audio'){_this.audioSegmentLoader_.handleDecrypted_(event.data);}};this.setupSegmentLoaderListeners_();this.masterPlaylistLoader_.start();}
_createClass(MasterPlaylistController,[{key:'setupMasterPlaylistLoaderListeners_',value:function setupMasterPlaylistLoaderListeners_(){var _this2=this;this.masterPlaylistLoader_.on('loadedmetadata',function(){var media=_this2.masterPlaylistLoader_.media();var requestTimeout=_this2.masterPlaylistLoader_.targetDuration*1.5*1000;if(_this2.masterPlaylistLoader_.isLowestEnabledRendition_()){_this2.requestOptions_.timeout=0;}else{_this2.requestOptions_.timeout=requestTimeout;}
if(media.endList&&_this2.tech_.preload()!=='none'){_this2.mainSegmentLoader_.playlist(media,_this2.requestOptions_);_this2.mainSegmentLoader_.load();}
_this2.fillAudioTracks_();_this2.setupAudio();try{_this2.setupSourceBuffers_();}catch(e){_videoJs2['default'].log.warn('Failed to create SourceBuffers',e);return _this2.mediaSource.endOfStream('decode');}
_this2.setupFirstPlay();_this2.trigger('audioupdate');_this2.trigger('selectedinitialmedia');});this.masterPlaylistLoader_.on('loadedplaylist',function(){var updatedPlaylist=_this2.masterPlaylistLoader_.media();if(!updatedPlaylist){_this2.initialMedia_=_this2.selectPlaylist();_this2.masterPlaylistLoader_.media(_this2.initialMedia_);return;}
if(_this2.useCueTags_){_this2.updateAdCues_(updatedPlaylist);}
_this2.mainSegmentLoader_.playlist(updatedPlaylist,_this2.requestOptions_);_this2.updateDuration();if(!updatedPlaylist.endList){(function(){var addSeekableRange=function addSeekableRange(){var seekable=_this2.seekable();if(seekable.length!==0){_this2.mediaSource.addSeekableRange_(seekable.start(0),seekable.end(0));}};if(_this2.duration()!==Infinity){(function(){var onDurationchange=function onDurationchange(){if(_this2.duration()===Infinity){addSeekableRange();}else{_this2.tech_.one('durationchange',onDurationchange);}};_this2.tech_.one('durationchange',onDurationchange);})();}else{addSeekableRange();}})();}});this.masterPlaylistLoader_.on('error',function(){_this2.blacklistCurrentPlaylist(_this2.masterPlaylistLoader_.error);});this.masterPlaylistLoader_.on('mediachanging',function(){_this2.mainSegmentLoader_.abort();_this2.mainSegmentLoader_.pause();});this.masterPlaylistLoader_.on('mediachange',function(){var media=_this2.masterPlaylistLoader_.media();var requestTimeout=_this2.masterPlaylistLoader_.targetDuration*1.5*1000;var activeAudioGroup=undefined;var activeTrack=undefined;if(_this2.masterPlaylistLoader_.isLowestEnabledRendition_()){_this2.requestOptions_.timeout=0;}else{_this2.requestOptions_.timeout=requestTimeout;}
_this2.mainSegmentLoader_.playlist(media,_this2.requestOptions_);_this2.mainSegmentLoader_.load();activeAudioGroup=_this2.activeAudioGroup();activeTrack=activeAudioGroup.filter(function(track){return track.enabled;})[0];if(!activeTrack){_this2.setupAudio();_this2.trigger('audioupdate');}
_this2.tech_.trigger({type:'mediachange',bubbles:true});});}},{key:'setupSegmentLoaderListeners_',value:function setupSegmentLoaderListeners_(){var _this3=this;this.mainSegmentLoader_.on('progress',function(){_this3.masterPlaylistLoader_.media(_this3.selectPlaylist());_this3.trigger('progress');});this.mainSegmentLoader_.on('error',function(){_this3.blacklistCurrentPlaylist(_this3.mainSegmentLoader_.error());});this.mainSegmentLoader_.on('syncinfoupdate',function(){_this3.onSyncInfoUpdate_();});this.audioSegmentLoader_.on('syncinfoupdate',function(){_this3.onSyncInfoUpdate_();});this.audioSegmentLoader_.on('error',function(){_videoJs2['default'].log.warn('Problem encountered with the current alternate audio track'+'. Switching back to default.');_this3.audioSegmentLoader_.abort();_this3.audioPlaylistLoader_=null;_this3.setupAudio();});}},{key:'handleAudioinfoUpdate_',value:function handleAudioinfoUpdate_(event){if(Hls.supportsAudioInfoChange_()||!this.audioInfo_||!objectChanged(this.audioInfo_,event.info)){this.audioInfo_=event.info;return;}
var error='had different audio properties (channels, sample rate, etc.) '+'or changed in some other way.  This behavior is currently '+'unsupported in Firefox 48 and below due to an issue: \n\n'+'https://bugzilla.mozilla.org/show_bug.cgi?id=1247138\n\n';var enabledIndex=this.activeAudioGroup().map(function(track){return track.enabled;}).indexOf(true);var enabledTrack=this.activeAudioGroup()[enabledIndex];var defaultTrack=this.activeAudioGroup().filter(function(track){return track.properties_&&track.properties_['default'];})[0];if(!this.audioPlaylistLoader_){error='The rendition that we tried to switch to '+error+'Unfortunately that means we will have to blacklist '+'the current playlist and switch to another. Sorry!';this.blacklistCurrentPlaylist();}else{error='The audio track \''+enabledTrack.label+'\' that we tried to '+('switch to '+error+' Unfortunately this means we will have to ')+('return you to the main track \''+defaultTrack.label+'\'. Sorry!');defaultTrack.enabled=true;this.activeAudioGroup().splice(enabledIndex,1);this.trigger('audioupdate');}
_videoJs2['default'].log.warn(error);this.setupAudio();}},{key:'mediaRequests_',value:function mediaRequests_(){return this.audioSegmentLoader_.mediaRequests+this.mainSegmentLoader_.mediaRequests;}},{key:'mediaTransferDuration_',value:function mediaTransferDuration_(){return this.audioSegmentLoader_.mediaTransferDuration+this.mainSegmentLoader_.mediaTransferDuration;}},{key:'mediaBytesTransferred_',value:function mediaBytesTransferred_(){return this.audioSegmentLoader_.mediaBytesTransferred+this.mainSegmentLoader_.mediaBytesTransferred;}},{key:'mediaSecondsLoaded_',value:function mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded);}},{key:'fillAudioTracks_',value:function fillAudioTracks_(){var master=this.master();var mediaGroups=master.mediaGroups||{};if(!mediaGroups||!mediaGroups.AUDIO||Object.keys(mediaGroups.AUDIO).length===0||this.mode_!=='html5'){mediaGroups.AUDIO={main:{'default':{'default':true}}};}
for(var mediaGroup in mediaGroups.AUDIO){if(!this.audioGroups_[mediaGroup]){this.audioGroups_[mediaGroup]=[];}
for(var label in mediaGroups.AUDIO[mediaGroup]){var properties=mediaGroups.AUDIO[mediaGroup][label];var track=new _videoJs2['default'].AudioTrack({id:label,kind:properties['default']?'main':'alternative',enabled:false,language:properties.language,label:label});track.properties_=properties;this.audioGroups_[mediaGroup].push(track);}}
(this.activeAudioGroup().filter(function(audioTrack){return audioTrack.properties_['default'];})[0]||this.activeAudioGroup()[0]).enabled=true;}},{key:'load',value:function load(){this.mainSegmentLoader_.load();if(this.audioPlaylistLoader_){this.audioSegmentLoader_.load();}}},{key:'activeAudioGroup',value:function activeAudioGroup(){var videoPlaylist=this.masterPlaylistLoader_.media();var result=undefined;if(videoPlaylist.attributes&&videoPlaylist.attributes.AUDIO){result=this.audioGroups_[videoPlaylist.attributes.AUDIO];}
return result||this.audioGroups_.main;}},{key:'setupAudio',value:function setupAudio(){var _this4=this;var audioGroup=this.activeAudioGroup();var track=audioGroup.filter(function(audioTrack){return audioTrack.enabled;})[0];if(!track){track=audioGroup.filter(function(audioTrack){return audioTrack.properties_['default'];})[0]||audioGroup[0];track.enabled=true;}
if(this.audioPlaylistLoader_){this.audioPlaylistLoader_.dispose();this.audioPlaylistLoader_=null;}
this.audioSegmentLoader_.pause();if(!track.properties_.resolvedUri){this.mainSegmentLoader_.resetEverything();return;}
this.audioSegmentLoader_.resetEverything();this.audioPlaylistLoader_=new _playlistLoader2['default'](track.properties_.resolvedUri,this.hls_,this.withCredentials);this.audioPlaylistLoader_.start();this.audioPlaylistLoader_.on('loadedmetadata',function(){var audioPlaylist=_this4.audioPlaylistLoader_.media();_this4.audioSegmentLoader_.playlist(audioPlaylist,_this4.requestOptions_);if(!_this4.tech_.paused()||audioPlaylist.endList&&_this4.tech_.preload()!=='none'){_this4.audioSegmentLoader_.load();}
if(!audioPlaylist.endList){_this4.audioPlaylistLoader_.trigger('firstplay');}});this.audioPlaylistLoader_.on('loadedplaylist',function(){var updatedPlaylist=undefined;if(_this4.audioPlaylistLoader_){updatedPlaylist=_this4.audioPlaylistLoader_.media();}
if(!updatedPlaylist){_this4.audioPlaylistLoader_.media(_this4.audioPlaylistLoader_.playlists.master.playlists[0]);return;}
_this4.audioSegmentLoader_.playlist(updatedPlaylist,_this4.requestOptions_);});this.audioPlaylistLoader_.on('error',function(){_videoJs2['default'].log.warn('Problem encountered loading the alternate audio track'+'. Switching back to default.');_this4.audioSegmentLoader_.abort();_this4.setupAudio();});}},{key:'fastQualityChange_',value:function fastQualityChange_(){var media=this.selectPlaylist();if(media!==this.masterPlaylistLoader_.media()){this.masterPlaylistLoader_.media(media);this.mainSegmentLoader_.resetLoader();if(this.audiosegmentloader_){this.audioSegmentLoader_.resetLoader();}}}},{key:'play',value:function play(){if(this.setupFirstPlay()){return;}
if(this.tech_.ended()){this.tech_.setCurrentTime(0);}
if(this.hasPlayed_()){this.load();}
var seekable=this.tech_.seekable();if(this.tech_.duration()===Infinity){if(this.tech_.currentTime()<seekable.start(0)){return this.tech_.setCurrentTime(seekable.end(seekable.length-1));}}}},{key:'setupFirstPlay',value:function setupFirstPlay(){var seekable=undefined;var media=this.masterPlaylistLoader_.media();if(media&&!this.tech_.paused()&&!this.hasPlayed_()){if(!media.endList){this.trigger('firstplay');seekable=this.seekable();if(seekable.length){this.tech_.setCurrentTime(seekable.end(0));}}
this.hasPlayed_=function(){return true;};this.load();return true;}
return false;}},{key:'handleSourceOpen_',value:function handleSourceOpen_(){try{this.setupSourceBuffers_();}catch(e){_videoJs2['default'].log.warn('Failed to create Source Buffers',e);return this.mediaSource.endOfStream('decode');}
if(this.tech_.autoplay()){this.tech_.play();}
this.trigger('sourceopen');}},{key:'blacklistCurrentPlaylist',value:function blacklistCurrentPlaylist(){var error=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var currentPlaylist=undefined;var nextPlaylist=undefined;currentPlaylist=error.playlist||this.masterPlaylistLoader_.media();if(!currentPlaylist){this.error=error;return this.mediaSource.endOfStream('network');}
currentPlaylist.excludeUntil=Date.now()+BLACKLIST_DURATION;nextPlaylist=this.selectPlaylist();if(nextPlaylist){_videoJs2['default'].log.warn('Problem encountered with the current '+'HLS playlist. Switching to another playlist.');return this.masterPlaylistLoader_.media(nextPlaylist);}
_videoJs2['default'].log.warn('Problem encountered with the current '+'HLS playlist. No suitable alternatives found.');this.error=error;return this.mediaSource.endOfStream('network');}},{key:'pauseLoading',value:function pauseLoading(){this.mainSegmentLoader_.pause();if(this.audioPlaylistLoader_){this.audioSegmentLoader_.pause();}}},{key:'setCurrentTime',value:function setCurrentTime(currentTime){var buffered=_ranges2['default'].findRange(this.tech_.buffered(),currentTime);if(!(this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media())){return 0;}
if(!this.masterPlaylistLoader_.media().segments){return 0;}
var isFlash=this.mode_==='flash'||this.mode_==='auto'&&!_videoJs2['default'].MediaSource.supportsNativeMediaSources();if(buffered&&buffered.length&&!isFlash){return currentTime;}
this.mainSegmentLoader_.resetEverything();this.mainSegmentLoader_.abort();if(this.audioPlaylistLoader_){this.audioSegmentLoader_.resetEverything();this.audioSegmentLoader_.abort();}
if(!this.tech_.paused()){this.mainSegmentLoader_.load();if(this.audioPlaylistLoader_){this.audioSegmentLoader_.load();}}}},{key:'duration',value:function duration(){if(!this.masterPlaylistLoader_){return 0;}
if(this.mediaSource){return this.mediaSource.duration;}
return Hls.Playlist.duration(this.masterPlaylistLoader_.media());}},{key:'seekable',value:function seekable(){return this.seekable_;}},{key:'onSyncInfoUpdate_',value:function onSyncInfoUpdate_(){var media=undefined;var mainSeekable=undefined;var audioSeekable=undefined;if(!this.masterPlaylistLoader_){return;}
media=this.masterPlaylistLoader_.media();if(!media){return;}
mainSeekable=Hls.Playlist.seekable(media);if(mainSeekable.length===0){return;}
if(this.audioPlaylistLoader_){audioSeekable=Hls.Playlist.seekable(this.audioPlaylistLoader_.media());if(audioSeekable.length===0){return;}}
if(!audioSeekable){this.seekable_=mainSeekable;}else if(audioSeekable.start(0)>mainSeekable.end(0)||mainSeekable.start(0)>audioSeekable.end(0)){this.seekable_=mainSeekable;}else{this.seekable_=_videoJs2['default'].createTimeRanges([[audioSeekable.start(0)>mainSeekable.start(0)?audioSeekable.start(0):mainSeekable.start(0),audioSeekable.end(0)<mainSeekable.end(0)?audioSeekable.end(0):mainSeekable.end(0)]]);}
this.tech_.trigger('seekablechanged');}},{key:'updateDuration',value:function updateDuration(){var _this5=this;var oldDuration=this.mediaSource.duration;var newDuration=Hls.Playlist.duration(this.masterPlaylistLoader_.media());var buffered=this.tech_.buffered();var setDuration=function setDuration(){_this5.mediaSource.duration=newDuration;_this5.tech_.trigger('durationchange');_this5.mediaSource.removeEventListener('sourceopen',setDuration);};if(buffered.length>0){newDuration=Math.max(newDuration,buffered.end(buffered.length-1));}
if(oldDuration!==newDuration){if(this.mediaSource.readyState!=='open'){this.mediaSource.addEventListener('sourceopen',setDuration);}else{setDuration();}}}},{key:'dispose',value:function dispose(){this.decrypter_.terminate();this.masterPlaylistLoader_.dispose();this.mainSegmentLoader_.dispose();if(this.audioPlaylistLoader_){this.audioPlaylistLoader_.dispose();}
this.audioSegmentLoader_.dispose();}},{key:'master',value:function master(){return this.masterPlaylistLoader_.master;}},{key:'media',value:function media(){return this.masterPlaylistLoader_.media()||this.initialMedia_;}},{key:'setupSourceBuffers_',value:function setupSourceBuffers_(){var media=this.masterPlaylistLoader_.media();var mimeTypes=undefined;if(!media||this.mediaSource.readyState!=='open'){return;}
mimeTypes=mimeTypesForPlaylist_(this.masterPlaylistLoader_.master,media);if(mimeTypes.length<1){this.error='No compatible SourceBuffer configuration for the variant stream:'+media.resolvedUri;return this.mediaSource.endOfStream('decode');}
this.mainSegmentLoader_.mimeType(mimeTypes[0]);if(mimeTypes[1]){this.audioSegmentLoader_.mimeType(mimeTypes[1]);}
this.excludeIncompatibleVariants_(media);}},{key:'excludeIncompatibleVariants_',value:function excludeIncompatibleVariants_(media){var master=this.masterPlaylistLoader_.master;var codecCount=2;var videoCodec=null;var codecs=undefined;if(media.attributes&&media.attributes.CODECS){codecs=parseCodecs(media.attributes.CODECS);videoCodec=codecs.videoCodec;codecCount=codecs.codecCount;}
master.playlists.forEach(function(variant){var variantCodecs={codecCount:2,videoCodec:null};if(variant.attributes&&variant.attributes.CODECS){var codecString=variant.attributes.CODECS;variantCodecs=parseCodecs(codecString);if(window.MediaSource&&window.MediaSource.isTypeSupported&&!window.MediaSource.isTypeSupported('video/mp4; codecs="'+mapLegacyAvcCodecs_(codecString)+'"')){variant.excludeUntil=Infinity;}}
if(variantCodecs.codecCount!==codecCount){variant.excludeUntil=Infinity;}
if(variantCodecs.videoCodec!==videoCodec){variant.excludeUntil=Infinity;}});}},{key:'updateAdCues_',value:function updateAdCues_(media){var offset=0;var seekable=this.seekable();if(seekable.length){offset=seekable.start(0);}
_adCueTags2['default'].updateAdCues(media,this.cueTagsTrack_,offset);}}]);return MasterPlaylistController;})(_videoJs2['default'].EventTarget);exports.MasterPlaylistController=MasterPlaylistController;}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./ad-cue-tags":1,"./decrypter-worker":4,"./playlist-loader":7,"./ranges":9,"./segment-loader":13,"./sync-controller":16,"videojs-contrib-media-sources/es5/codec-utils":62,"webworkify":73}],6:[function(require,module,exports){(function(global){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
var _ranges=require('./ranges');var _ranges2=_interopRequireDefault(_ranges);var _videoJs=(typeof window!=="undefined"?window['videojs']:typeof global!=="undefined"?global['videojs']:null);var _videoJs2=_interopRequireDefault(_videoJs);var timerCancelEvents=['seeking','seeked','pause','playing','error'];var PlaybackWatcher=(function(){function PlaybackWatcher(options){var _this=this;_classCallCheck(this,PlaybackWatcher);this.tech_=options.tech;this.seekable=options.seekable;this.consecutiveUpdates=0;this.lastRecordedTime=null;this.timer_=null;this.checkCurrentTimeTimeout_=null;if(options.debug){this.logger_=_videoJs2['default'].log.bind(_videoJs2['default'],'playback-watcher ->');}
this.logger_('initialize');var waitingHandler=function waitingHandler(){return _this.waiting_();};var cancelTimerHandler=function cancelTimerHandler(){return _this.cancelTimer_();};var fixesBadSeeksHandler=function fixesBadSeeksHandler(){return _this.fixesBadSeeks_();};this.tech_.on('seekablechanged',fixesBadSeeksHandler);this.tech_.on('waiting',waitingHandler);this.tech_.on(timerCancelEvents,cancelTimerHandler);this.monitorCurrentTime_();this.dispose=function(){_this.logger_('dispose');_this.tech_.off('seekablechanged',fixesBadSeeksHandler);_this.tech_.off('waiting',waitingHandler);_this.tech_.off(timerCancelEvents,cancelTimerHandler);if(_this.checkCurrentTimeTimeout_){clearTimeout(_this.checkCurrentTimeTimeout_);}
_this.cancelTimer_();};}
_createClass(PlaybackWatcher,[{key:'monitorCurrentTime_',value:function monitorCurrentTime_(){this.checkCurrentTime_();if(this.checkCurrentTimeTimeout_){clearTimeout(this.checkCurrentTimeTimeout_);}
this.checkCurrentTimeTimeout_=setTimeout(this.monitorCurrentTime_.bind(this),250);}},{key:'checkCurrentTime_',value:function checkCurrentTime_(){if(this.tech_.seeking()&&this.fixesBadSeeks_()){this.consecutiveUpdates=0;this.lastRecordedTime=this.tech_.currentTime();return;}
if(this.tech_.paused()||this.tech_.seeking()){return;}
var currentTime=this.tech_.currentTime();if(this.consecutiveUpdates>=5&&currentTime===this.lastRecordedTime){this.consecutiveUpdates++;this.waiting_();}else if(currentTime===this.lastRecordedTime){this.consecutiveUpdates++;}else{this.consecutiveUpdates=0;this.lastRecordedTime=currentTime;}}},{key:'cancelTimer_',value:function cancelTimer_(){this.consecutiveUpdates=0;if(this.timer_){this.logger_('cancelTimer_');clearTimeout(this.timer_);}
this.timer_=null;}},{key:'fixesBadSeeks_',value:function fixesBadSeeks_(){var seekable=this.seekable();var currentTime=this.tech_.currentTime();if(this.tech_.seeking()&&this.outsideOfSeekableWindow_(seekable,currentTime)){var seekableEnd=seekable.end(seekable.length-1);this.logger_('Trying to seek outside of seekable at time '+currentTime+' with '+('seekable range '+_ranges2['default'].printableRange(seekable)+'. Seeking to ')+(seekableEnd+'.'));this.tech_.setCurrentTime(seekableEnd);return true;}
return false;}},{key:'waiting_',value:function waiting_(){var seekable=this.seekable();var currentTime=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_()){return;}
if(this.tech_.seeking()||this.timer_!==null){return;}
if(this.fellOutOfLiveWindow_(seekable,currentTime)){var livePoint=seekable.end(seekable.length-1);this.logger_('Fell out of live window at time '+currentTime+'. Seeking to '+('live point (seekable end) '+livePoint));this.cancelTimer_();this.tech_.setCurrentTime(livePoint);this.tech_.trigger('liveresync');return;}
var buffered=this.tech_.buffered();var nextRange=_ranges2['default'].findNextRange(buffered,currentTime);if(this.videoUnderflow_(nextRange,buffered,currentTime)){this.cancelTimer_();this.tech_.setCurrentTime(currentTime);this.tech_.trigger('videounderflow');return;}
if(nextRange.length>0){var difference=nextRange.start(0)-currentTime;this.logger_('Stopped at '+currentTime+', setting timer for '+difference+', seeking '+('to '+nextRange.start(0)));this.timer_=setTimeout(this.skipTheGap_.bind(this),difference*1000,currentTime);}}},{key:'outsideOfSeekableWindow_',value:function outsideOfSeekableWindow_(seekable,currentTime){if(!seekable.length){return false;}
if(currentTime<seekable.start(0)-0.1||currentTime>seekable.end(seekable.length-1)+0.1){return true;}
return false;}},{key:'fellOutOfLiveWindow_',value:function fellOutOfLiveWindow_(seekable,currentTime){if(seekable.length&&seekable.start(0)>0&&currentTime<seekable.start(0)){return true;}
return false;}},{key:'videoUnderflow_',value:function videoUnderflow_(nextRange,buffered,currentTime){if(nextRange.length===0){var gap=this.gapFromVideoUnderflow_(buffered,currentTime);if(gap){this.logger_('Encountered a gap in video from '+gap.start+' to '+gap.end+'. '+('Seeking to current time '+currentTime));return true;}}
return false;}},{key:'skipTheGap_',value:function skipTheGap_(scheduledCurrentTime){var buffered=this.tech_.buffered();var currentTime=this.tech_.currentTime();var nextRange=_ranges2['default'].findNextRange(buffered,currentTime);this.cancelTimer_();if(nextRange.length===0||currentTime!==scheduledCurrentTime){return;}
this.logger_('skipTheGap_:','currentTime:',currentTime,'scheduled currentTime:',scheduledCurrentTime,'nextRange start:',nextRange.start(0));this.tech_.setCurrentTime(nextRange.start(0)+_ranges2['default'].TIME_FUDGE_FACTOR);}},{key:'gapFromVideoUnderflow_',value:function gapFromVideoUnderflow_(buffered,currentTime){var gaps=_ranges2['default'].findGaps(buffered);for(var i=0;i<gaps.length;i++){var start=gaps.start(i);var end=gaps.end(i);if(currentTime-start<4&&currentTime-start>2){return{start:start,end:end};}}
return null;}},{key:'logger_',value:function logger_(){}}]);return PlaybackWatcher;})();exports['default']=PlaybackWatcher;module.exports=exports['default'];}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./ranges":9}],7:[function(require,module,exports){(function(global){'use strict';Object.defineProperty(exports,'__esModule',{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
var _resolveUrl=require('./resolve-url');var _resolveUrl2=_interopRequireDefault(_resolveUrl);var _videoJs=(typeof window!=="undefined"?window['videojs']:typeof global!=="undefined"?global['videojs']:null);var _playlistJs=require('./playlist.js');var _stream=require('./stream');var _stream2=_interopRequireDefault(_stream);var _m3u8Parser=require('m3u8-parser');var _m3u8Parser2=_interopRequireDefault(_m3u8Parser);var _globalWindow=require('global/window');var _globalWindow2=_interopRequireDefault(_globalWindow);var updateSegments=function updateSegments(original,update,offset){var result=update.slice();var length=undefined;var i=undefined;offset=offset||0;length=Math.min(original.length,update.length+offset);for(i=offset;i<length;i++){result[i-offset]=(0,_videoJs.mergeOptions)(original[i],result[i-offset]);}
return result;};var updateMaster=function updateMaster(master,media){var changed=false;var result=(0,_videoJs.mergeOptions)(master,{});var i=master.playlists.length;var playlist=undefined;var segment=undefined;var j=undefined;while(i--){playlist=result.playlists[i];if(playlist.uri===media.uri){if(playlist.segments&&media.segments&&playlist.segments.length===media.segments.length&&playlist.mediaSequence===media.mediaSequence){continue;}
result.playlists[i]=(0,_videoJs.mergeOptions)(playlist,media);result.playlists[media.uri]=result.playlists[i];if(playlist.segments){result.playlists[i].segments=updateSegments(playlist.segments,media.segments,media.mediaSequence-playlist.mediaSequence);}
j=0;if(result.playlists[i].segments){j=result.playlists[i].segments.length;}
while(j--){segment=result.playlists[i].segments[j];if(!segment.resolvedUri){segment.resolvedUri=(0,_resolveUrl2['default'])(playlist.resolvedUri,segment.uri);}
if(segment.key&&!segment.key.resolvedUri){segment.key.resolvedUri=(0,_resolveUrl2['default'])(playlist.resolvedUri,segment.key.uri);}
if(segment.map&&!segment.map.resolvedUri){segment.map.resolvedUri=(0,_resolveUrl2['default'])(playlist.resolvedUri,segment.map.uri);}}
changed=true;}}
return changed?result:null;};var PlaylistLoader=function PlaylistLoader(srcUrl,hls,withCredentials){var _this=this;var loader=this;var dispose=undefined;var mediaUpdateTimeout=undefined;var request=undefined;var playlistRequestError=undefined;var haveMetadata=undefined;PlaylistLoader.prototype.constructor.call(this);this.hls_=hls;if(!srcUrl){throw new Error('A non-empty playlist URL is required');}
playlistRequestError=function(xhr,url,startingState){loader.setBandwidth(request||xhr);request=null;if(startingState){loader.state=startingState;}
loader.error={playlist:loader.master.playlists[url],status:xhr.status,message:'HLS playlist request error at URL: '+url,responseText:xhr.responseText,code:xhr.status>=500?4:2};loader.trigger('error');};haveMetadata=function(xhr,url){var parser=undefined;var refreshDelay=undefined;var update=undefined;loader.setBandwidth(request||xhr);request=null;loader.state='HAVE_METADATA';parser=new _m3u8Parser2['default'].Parser();parser.push(xhr.responseText);parser.end();parser.manifest.uri=url;update=updateMaster(loader.master,parser.manifest);refreshDelay=(parser.manifest.targetDuration||10)*1000;loader.targetDuration=parser.manifest.targetDuration;if(update){loader.master=update;loader.media_=loader.master.playlists[parser.manifest.uri];}else{refreshDelay/=2;}
if(!loader.media().endList){_globalWindow2['default'].clearTimeout(mediaUpdateTimeout);mediaUpdateTimeout=_globalWindow2['default'].setTimeout(function(){loader.trigger('mediaupdatetimeout');},refreshDelay);}
loader.trigger('loadedplaylist');};loader.state='HAVE_NOTHING';dispose=this.dispose;loader.dispose=function(){loader.stopRequest();_globalWindow2['default'].clearTimeout(mediaUpdateTimeout);dispose.call(this);};loader.stopRequest=function(){if(request){var oldRequest=request;request=null;oldRequest.onreadystatechange=null;oldRequest.abort();}};loader.enabledPlaylists_=function(){return loader.master.playlists.filter(_playlistJs.isEnabled).length;};loader.isLowestEnabledRendition_=function(){if(loader.master.playlists.length===1){return true;}
var media=loader.media();var currentBandwidth=media.attributes.BANDWIDTH||Number.MAX_VALUE;return loader.master.playlists.filter(function(playlist){var enabled=(0,_playlistJs.isEnabled)(playlist);if(!enabled){return false;}
var bandwidth=0;if(playlist&&playlist.attributes){bandwidth=playlist.attributes.BANDWIDTH;}
return bandwidth<currentBandwidth;}).length===0;};loader.media=function(playlist){var startingState=loader.state;var mediaChange=undefined;if(!playlist){return loader.media_;}
if(loader.state==='HAVE_NOTHING'){throw new Error('Cannot switch media playlist from '+loader.state);}
if(typeof playlist==='string'){if(!loader.master.playlists[playlist]){throw new Error('Unknown playlist URI: '+playlist);}
playlist=loader.master.playlists[playlist];}
mediaChange=!loader.media_||playlist.uri!==loader.media_.uri;if(loader.master.playlists[playlist.uri].endList){if(request){request.onreadystatechange=null;request.abort();request=null;}
loader.state='HAVE_METADATA';loader.media_=playlist;if(mediaChange){loader.trigger('mediachanging');loader.trigger('mediachange');}
return;}
if(!mediaChange){return;}
loader.state='SWITCHING_MEDIA';if(request){if((0,_resolveUrl2['default'])(loader.master.uri,playlist.uri)===request.url){return;}
request.onreadystatechange=null;request.abort();request=null;}
if(this.media_){this.trigger('mediachanging');}
request=this.hls_.xhr({uri:(0,_resolveUrl2['default'])(loader.master.uri,playlist.uri),withCredentials:withCredentials},function(error,req){if(!request){return;}
if(error){return playlistRequestError(request,playlist.uri,startingState);}
haveMetadata(req,playlist.uri);if(startingState==='HAVE_MASTER'){loader.trigger('loadedmetadata');}else{loader.trigger('mediachange');}});};loader.setBandwidth=function(xhr){loader.bandwidth=xhr.bandwidth;};loader.on('mediaupdatetimeout',function(){if(loader.state!=='HAVE_METADATA'){return;}
loader.state='HAVE_CURRENT_METADATA';request=this.hls_.xhr({uri:(0,_resolveUrl2['default'])(loader.master.uri,loader.media().uri),withCredentials:withCredentials},function(error,req){if(!request){return;}
if(error){return playlistRequestError(request,loader.media().uri);}
haveMetadata(request,loader.media().uri);});});loader.on('firstplay',function(){var playlist=loader.media();if(playlist){playlist.syncInfo={mediaSequence:playlist.mediaSequence,time:0};}});loader.pause=function(){loader.stopRequest();_globalWindow2['default'].clearTimeout(mediaUpdateTimeout);};loader.load=function(){if(loader.started){if(!loader.media().endList){loader.trigger('mediaupdatetimeout');}else{loader.trigger('loadedplaylist');}}else{loader.start();}};loader.start=function(){loader.started=true;request=_this.hls_.xhr({uri:srcUrl,withCredentials:withCredentials},function(error,req){var parser=undefined;var playlist=undefined;var i=undefined;if(!request){return;}
request=null;if(error){loader.error={status:req.status,message:'HLS playlist request error at URL: '+srcUrl,responseText:req.responseText,code:2};return loader.trigger('error');}
parser=new _m3u8Parser2['default'].Parser();parser.push(req.responseText);parser.end();loader.state='HAVE_MASTER';parser.manifest.uri=srcUrl;if(parser.manifest.playlists){loader.master=parser.manifest;i=loader.master.playlists.length;while(i--){playlist=loader.master.playlists[i];loader.master.playlists[playlist.uri]=playlist;playlist.resolvedUri=(0,_resolveUrl2['default'])(loader.master.uri,playlist.uri);}
for(var groupKey in loader.master.mediaGroups.AUDIO){for(var labelKey in loader.master.mediaGroups.AUDIO[groupKey]){var alternateAudio=loader.master.mediaGroups.AUDIO[groupKey][labelKey];if(alternateAudio.uri){alternateAudio.resolvedUri=(0,_resolveUrl2['default'])(loader.master.uri,alternateAudio.uri);}}}
loader.trigger('loadedplaylist');if(!request){loader.media(parser.manifest.playlists[0]);}
return;}
loader.master={mediaGroups:{'AUDIO':{},'VIDEO':{},'CLOSED-CAPTIONS':{},'SUBTITLES':{}},uri:_globalWindow2['default'].location.href,playlists:[{uri:srcUrl}]};loader.master.playlists[srcUrl]=loader.master.playlists[0];loader.master.playlists[0].resolvedUri=srcUrl;haveMetadata(req,srcUrl);return loader.trigger('loadedmetadata');});};};PlaylistLoader.prototype=new _stream2['default']();exports['default']=PlaylistLoader;module.exports=exports['default'];}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./playlist.js":8,"./resolve-url":12,"./stream":15,"global/window":28,"m3u8-parser":29}],8:[function(require,module,exports){(function(global){'use strict';Object.defineProperty(exports,'__esModule',{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
var _videoJs=(typeof window!=="undefined"?window['videojs']:typeof global!=="undefined"?global['videojs']:null);var _globalWindow=require('global/window');var _globalWindow2=_interopRequireDefault(_globalWindow);var Playlist={UNSAFE_LIVE_SEGMENTS:3};var backwardDuration=function backwardDuration(playlist,endSequence){var result=0;var i=endSequence-playlist.mediaSequence;var segment=playlist.segments[i];if(segment){if(typeof segment.start!=='undefined'){return{result:segment.start,precise:true};}
if(typeof segment.end!=='undefined'){return{result:segment.end-segment.duration,precise:true};}}
while(i--){segment=playlist.segments[i];if(typeof segment.end!=='undefined'){return{result:result+segment.end,precise:true};}
result+=segment.duration;if(typeof segment.start!=='undefined'){return{result:result+segment.start,precise:true};}}
return{result:result,precise:false};};var forwardDuration=function forwardDuration(playlist,endSequence){var result=0;var segment=undefined;var i=endSequence-playlist.mediaSequence;for(;i<playlist.segments.length;i++){segment=playlist.segments[i];if(typeof segment.start!=='undefined'){return{result:segment.start-result,precise:true};}
result+=segment.duration;if(typeof segment.end!=='undefined'){return{result:segment.end-result,precise:true};}}
return{result:-1,precise:false};};var intervalDuration=function intervalDuration(playlist,endSequence,expired){var backward=undefined;var forward=undefined;if(typeof endSequence==='undefined'){endSequence=playlist.mediaSequence+playlist.segments.length;}
if(endSequence<playlist.mediaSequence){return 0;}
backward=backwardDuration(playlist,endSequence);if(backward.precise){return backward.result;}
forward=forwardDuration(playlist,endSequence);if(forward.precise){return forward.result;}
return backward.result+expired;};var duration=function duration(playlist,endSequence,expired){if(!playlist){return 0;}
if(typeof expired!=='number'){expired=0;}
if(typeof endSequence==='undefined'){if(playlist.totalDuration){return playlist.totalDuration;}
if(!playlist.endList){return _globalWindow2['default'].Infinity;}}
return intervalDuration(playlist,endSequence,expired);};exports.duration=duration;var sumDurations=function sumDurations(playlist,startIndex,endIndex){var durations=0;if(startIndex>endIndex){var _ref=[endIndex,startIndex];startIndex=_ref[0];endIndex=_ref[1];}
if(startIndex<0){for(var i=startIndex;i<Math.min(0,endIndex);i++){durations+=playlist.targetDuration;}
startIndex=0;}
for(var i=startIndex;i<endIndex;i++){durations+=playlist.segments[i].duration;}
return durations;};exports.sumDurations=sumDurations;var getPlaylistSyncPoints=function getPlaylistSyncPoints(playlist){if(!playlist||!playlist.segments){return[null,null];}
var expiredSync=playlist.syncInfo||null;var segmentSync=null;for(var i=0,l=playlist.segments.length;i<l;i++){var segment=playlist.segments[i];if(typeof segment.start!=='undefined'){segmentSync={mediaSequence:playlist.mediaSequence+i,time:segment.start};break;}}
return{expiredSync:expiredSync,segmentSync:segmentSync};};var calculateExpiredTime=function calculateExpiredTime(playlist,expiredSync,segmentSync){if(expiredSync&&segmentSync){var expiredDiff=expiredSync.mediaSequence-playlist.mediaSequence;var segmentDiff=segmentSync.mediaSequence-playlist.mediaSequence;var syncIndex=undefined;var syncTime=undefined;if(Math.abs(expiredDiff)>Math.abs(segmentDiff)){syncIndex=segmentDiff;syncTime=-segmentSync.time;}else{syncIndex=expiredDiff;syncTime=expiredSync.time;}
return Math.abs(syncTime+sumDurations(playlist,syncIndex,0));}
if(expiredSync){var syncIndex=expiredSync.mediaSequence-playlist.mediaSequence;return expiredSync.time+sumDurations(playlist,syncIndex,0);}
if(segmentSync){var syncIndex=segmentSync.mediaSequence-playlist.mediaSequence;return segmentSync.time-sumDurations(playlist,syncIndex,0);}};var seekable=function seekable(playlist){if(!playlist||!playlist.segments){return(0,_videoJs.createTimeRange)();}
if(playlist.endList){return(0,_videoJs.createTimeRange)(0,duration(playlist));}
var _getPlaylistSyncPoints=getPlaylistSyncPoints(playlist);var expiredSync=_getPlaylistSyncPoints.expiredSync;var segmentSync=_getPlaylistSyncPoints.segmentSync;if(!expiredSync&&!segmentSync){return(0,_videoJs.createTimeRange)();}
var expired=calculateExpiredTime(playlist,expiredSync,segmentSync);var start=expired;var endSequence=Math.max(0,playlist.segments.length-Playlist.UNSAFE_LIVE_SEGMENTS);var end=intervalDuration(playlist,playlist.mediaSequence+endSequence,expired);return(0,_videoJs.createTimeRange)(start,end);};exports.seekable=seekable;var isWholeNumber=function isWholeNumber(num){return num-Math.floor(num)===0;};var roundSignificantDigit=function roundSignificantDigit(increment,num){if(isWholeNumber(num)){return num+increment*0.1;}
var numDecimalDigits=num.toString().split('.')[1].length;for(var i=1;i<=numDecimalDigits;i++){var scale=Math.pow(10,i);var temp=num*scale;if(isWholeNumber(temp)||i===numDecimalDigits){return(temp+increment)/scale;}}};var ceilLeastSignificantDigit=roundSignificantDigit.bind(null,1);var floorLeastSignificantDigit=roundSignificantDigit.bind(null,-1);var getMediaInfoForTime_=function getMediaInfoForTime_(playlist,currentTime,startIndex,startTime){var i=undefined;var segment=undefined;var numSegments=playlist.segments.length;var time=currentTime-startTime;if(time<0){if(startIndex>0){for(i=startIndex-1;i>=0;i--){segment=playlist.segments[i];time+=floorLeastSignificantDigit(segment.duration);if(time>0){return{mediaIndex:i,startTime:startTime-sumDurations(playlist,startIndex,i)};}}}
return{mediaIndex:0,startTime:currentTime};}
if(startIndex<0){for(i=startIndex;i<0;i++){time-=playlist.targetDuration;if(time<0){return{mediaIndex:0,startTime:currentTime};}}
startIndex=0;}
for(i=startIndex;i<numSegments;i++){segment=playlist.segments[i];time-=ceilLeastSignificantDigit(segment.duration);if(time<0){return{mediaIndex:i,startTime:startTime+sumDurations(playlist,startIndex,i)};}}
return{mediaIndex:numSegments-1,startTime:currentTime};};exports.getMediaInfoForTime_=getMediaInfoForTime_;var isBlacklisted=function isBlacklisted(playlist){return playlist.excludeUntil&&playlist.excludeUntil>Date.now();};exports.isBlacklisted=isBlacklisted;var isEnabled=function isEnabled(playlist){var blacklisted=isBlacklisted(playlist);return!playlist.disabled&&!blacklisted;};exports.isEnabled=isEnabled;Playlist.duration=duration;Playlist.seekable=seekable;Playlist.getMediaInfoForTime_=getMediaInfoForTime_;Playlist.isEnabled=isEnabled;Playlist.isBlacklisted=isBlacklisted;exports['default']=Playlist;}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"global/window":28}],9:[function(require,module,exports){(function(global){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _slicedToArray=(function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i['return'])_i['return']();}finally{if(_d)throw _e;}}return _arr;}return function(arr,i){if(Array.isArray(arr)){return arr;}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i);}else{throw new TypeError('Invalid attempt to destructure non-iterable instance');}};})();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
var _videoJs=(typeof window!=="undefined"?window['videojs']:typeof global!=="undefined"?global['videojs']:null);var _videoJs2=_interopRequireDefault(_videoJs);var TIME_FUDGE_FACTOR=1/30;var clamp=function clamp(num,_ref){var _ref2=_slicedToArray(_ref,2);var start=_ref2[0];var end=_ref2[1];return Math.min(Math.max(start,num),end);};var filterRanges=function filterRanges(timeRanges,predicate){var results=[];var i=undefined;if(timeRanges&&timeRanges.length){for(i=0;i<timeRanges.length;i++){if(predicate(timeRanges.start(i),timeRanges.end(i))){results.push([timeRanges.start(i),timeRanges.end(i)]);}}}
return _videoJs2['default'].createTimeRanges(results);};var findRange=function findRange(buffered,time){return filterRanges(buffered,function(start,end){return start-TIME_FUDGE_FACTOR<=time&&end+TIME_FUDGE_FACTOR>=time;});};var findNextRange=function findNextRange(timeRanges,time){return filterRanges(timeRanges,function(start){return start-TIME_FUDGE_FACTOR>=time;});};var findGaps=function findGaps(buffered){if(buffered.length<2){return _videoJs2['default'].createTimeRanges();}
var ranges=[];for(var i=1;i<buffered.length;i++){var start=buffered.end(i-1);var end=buffered.start(i);ranges.push([start,end]);}
return _videoJs2['default'].createTimeRanges(ranges);};var findSoleUncommonTimeRangesEnd=function findSoleUncommonTimeRangesEnd(original,update){var i=undefined;var start=undefined;var end=undefined;var result=[];var edges=[];var overlapsCurrentEnd=function overlapsCurrentEnd(span){return span[0]<=end&&span[1]>=end;};if(original){for(i=0;i<original.length;i++){start=original.start(i);end=original.end(i);edges.push([start,end]);}}
if(update){for(i=0;i<update.length;i++){start=update.start(i);end=update.end(i);if(edges.some(overlapsCurrentEnd)){continue;}
result.push(end);}}
if(result.length!==1){return null;}
return result[0];};var bufferIntersection=function bufferIntersection(bufferA,bufferB){var start=null;var end=null;var arity=0;var extents=[];var ranges=[];if(!bufferA||!bufferA.length||!bufferB||!bufferB.length){return _videoJs2['default'].createTimeRange();}
var count=bufferA.length;while(count--){extents.push({time:bufferA.start(count),type:'start'});extents.push({time:bufferA.end(count),type:'end'});}
count=bufferB.length;while(count--){extents.push({time:bufferB.start(count),type:'start'});extents.push({time:bufferB.end(count),type:'end'});}
extents.sort(function(a,b){return a.time-b.time;});for(count=0;count<extents.length;count++){if(extents[count].type==='start'){arity++;if(arity===2){start=extents[count].time;}}else if(extents[count].type==='end'){arity--;if(arity===1){end=extents[count].time;}}
if(start!==null&&end!==null){ranges.push([start,end]);start=null;end=null;}}
return _videoJs2['default'].createTimeRanges(ranges);};var calculateBufferedPercent=function calculateBufferedPercent(adjustedRange,referenceRange,currentTime,buffered){var referenceDuration=referenceRange.end(0)-referenceRange.start(0);var adjustedDuration=adjustedRange.end(0)-adjustedRange.start(0);var bufferMissingFromAdjusted=referenceDuration-adjustedDuration;var adjustedIntersection=bufferIntersection(adjustedRange,buffered);var referenceIntersection=bufferIntersection(referenceRange,buffered);var adjustedOverlap=0;var referenceOverlap=0;var count=adjustedIntersection.length;while(count--){adjustedOverlap+=adjustedIntersection.end(count)-adjustedIntersection.start(count);if(adjustedIntersection.start(count)===currentTime){adjustedOverlap+=bufferMissingFromAdjusted;}}
count=referenceIntersection.length;while(count--){referenceOverlap+=referenceIntersection.end(count)-referenceIntersection.start(count);}
return Math.max(adjustedOverlap,referenceOverlap)/referenceDuration*100;};var getSegmentBufferedPercent=function getSegmentBufferedPercent(startOfSegment,segmentDuration,currentTime,buffered){var endOfSegment=startOfSegment+segmentDuration;var originalSegmentRange=_videoJs2['default'].createTimeRanges([[startOfSegment,endOfSegment]]);var adjustedSegmentRange=_videoJs2['default'].createTimeRanges([[clamp(startOfSegment,[currentTime,endOfSegment]),endOfSegment]]);if(adjustedSegmentRange.start(0)===adjustedSegmentRange.end(0)){return 0;}
var percent=calculateBufferedPercent(adjustedSegmentRange,originalSegmentRange,currentTime,buffered);if(isNaN(percent)||percent===Infinity||percent===-Infinity){return 0;}
return percent;};var printableRange=function printableRange(range){var strArr=[];if(!range||!range.length){return'';}
for(var i=0;i<range.length;i++){strArr.push(range.start(i)+' => '+range.end(i));}
return strArr.join(', ');};exports['default']={findRange:findRange,findNextRange:findNextRange,findGaps:findGaps,findSoleUncommonTimeRangesEnd:findSoleUncommonTimeRangesEnd,getSegmentBufferedPercent:getSegmentBufferedPercent,TIME_FUDGE_FACTOR:TIME_FUDGE_FACTOR,printableRange:printableRange};module.exports=exports['default'];}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],10:[function(require,module,exports){(function(global){'use strict';Object.defineProperty(exports,'__esModule',{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
var _videoJs=(typeof window!=="undefined"?window['videojs']:typeof global!=="undefined"?global['videojs']:null);var _videoJs2=_interopRequireDefault(_videoJs);var defaultOptions={errorInterval:30,getSource:function getSource(next){var tech=this.tech({IWillNotUseThisInPlugins:true});var sourceObj=tech.currentSource_;return next(sourceObj);}};var initPlugin=function initPlugin(player,options){var lastCalled=0;var seekTo=0;var localOptions=_videoJs2['default'].mergeOptions(defaultOptions,options);var loadedMetadataHandler=function loadedMetadataHandler(){if(seekTo){player.currentTime(seekTo);}};var setSource=function setSource(sourceObj){if(sourceObj===null||sourceObj===undefined){return;}
seekTo=player.duration()!==Infinity&&player.currentTime()||0;player.one('loadedmetadata',loadedMetadataHandler);player.src(sourceObj);player.play();};var errorHandler=function errorHandler(){if(Date.now()-lastCalled<localOptions.errorInterval*1000){return;}
if(!localOptions.getSource||typeof localOptions.getSource!=='function'){_videoJs2['default'].log.error('ERROR: reloadSourceOnError - The option getSource must be a function!');return;}
lastCalled=Date.now();return localOptions.getSource.call(player,setSource);};var cleanupEvents=function cleanupEvents(){player.off('loadedmetadata',loadedMetadataHandler);player.off('error',errorHandler);player.off('dispose',cleanupEvents);};var reinitPlugin=function reinitPlugin(newOptions){cleanupEvents();initPlugin(player,newOptions);};player.on('error',errorHandler);player.on('dispose',cleanupEvents);player.reloadSourceOnError=reinitPlugin;};var reloadSourceOnError=function reloadSourceOnError(options){initPlugin(this,options);};exports['default']=reloadSourceOnError;module.exports=exports['default'];}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],11:[function(require,module,exports){'use strict';Object.defineProperty(exports,'__esModule',{value:true});function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
var _playlistJs=require('./playlist.js');var enableFunction=function enableFunction(loader,playlistUri,changePlaylistFn,enable){var playlist=loader.master.playlists[playlistUri];var blacklisted=(0,_playlistJs.isBlacklisted)(playlist);var currentlyEnabled=(0,_playlistJs.isEnabled)(playlist);if(typeof enable==='undefined'){return currentlyEnabled;}
if(enable){delete playlist.disabled;}else{playlist.disabled=true;}
if(enable!==currentlyEnabled&&!blacklisted){changePlaylistFn();}
return enable;};var Representation=function Representation(hlsHandler,playlist,id){_classCallCheck(this,Representation);var fastChangeFunction=hlsHandler.masterPlaylistController_.fastQualityChange_.bind(hlsHandler.masterPlaylistController_);if(playlist.attributes){var attributes=playlist.attributes;if(attributes.RESOLUTION){var resolution=attributes.RESOLUTION;this.width=resolution.width;this.height=resolution.height;}
this.bandwidth=attributes.BANDWIDTH;}
this.id=id;this.enabled=enableFunction.bind(this,hlsHandler.playlists,playlist.uri,fastChangeFunction);};var renditionSelectionMixin=function renditionSelectionMixin(hlsHandler){var playlists=hlsHandler.playlists;hlsHandler.representations=function(){return playlists.master.playlists.filter(function(media){return!(0,_playlistJs.isBlacklisted)(media);}).map(function(e,i){return new Representation(hlsHandler,e,e.uri);});};};exports['default']=renditionSelectionMixin;module.exports=exports['default'];},{"./playlist.js":8}],12:[function(require,module,exports){'use strict';Object.defineProperty(exports,'__esModule',{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
var _urlToolkit=require('url-toolkit');var _urlToolkit2=_interopRequireDefault(_urlToolkit);var _globalWindow=require('global/window');var _globalWindow2=_interopRequireDefault(_globalWindow);var resolveUrl=function resolveUrl(baseURL,relativeURL){if(/^[a-z]+:/i.test(relativeURL)){return relativeURL;}
if(!/\/\//i.test(baseURL)){baseURL=_urlToolkit2['default'].buildAbsoluteURL(_globalWindow2['default'].location.href,baseURL);}
return _urlToolkit2['default'].buildAbsoluteURL(baseURL,relativeURL);};exports['default']=resolveUrl;module.exports=exports['default'];},{"global/window":28,"url-toolkit":59}],13:[function(require,module,exports){(function(global){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();var _get=function get(_x2,_x3,_x4){var _again=true;_function:while(_again){var object=_x2,property=_x3,receiver=_x4;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{_x2=parent;_x3=property;_x4=receiver;_again=true;desc=parent=undefined;continue _function;}}else if('value'in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}
var _playlist=require('./playlist');var _videoJs=(typeof window!=="undefined"?window['videojs']:typeof global!=="undefined"?global['videojs']:null);var _videoJs2=_interopRequireDefault(_videoJs);var _sourceUpdater=require('./source-updater');var _sourceUpdater2=_interopRequireDefault(_sourceUpdater);var _config=require('./config');var _config2=_interopRequireDefault(_config);var _globalWindow=require('global/window');var _globalWindow2=_interopRequireDefault(_globalWindow);var _binUtils=require('./bin-utils');var CHECK_BUFFER_DELAY=500;var detectEndOfStream=function detectEndOfStream(playlist,mediaSource,segmentIndex){if(!playlist){return false;}
var segments=playlist.segments;var appendedLastSegment=segmentIndex===segments.length;return playlist.endList&&mediaSource.readyState==='open'&&appendedLastSegment;};var byterangeStr=function byterangeStr(byterange){var byterangeStart=undefined;var byterangeEnd=undefined;byterangeEnd=byterange.offset+byterange.length-1;byterangeStart=byterange.offset;return'bytes='+byterangeStart+'-'+byterangeEnd;};var segmentXhrHeaders=function segmentXhrHeaders(segment){var headers={};if('byterange'in segment){headers.Range=byterangeStr(segment.byterange);}
return headers;};var initSegmentId=function initSegmentId(initSegment){var byterange=initSegment.byterange||{length:Infinity,offset:0};return[byterange.length,byterange.offset,initSegment.resolvedUri].join(',');};var SegmentLoader=(function(_videojs$EventTarget){_inherits(SegmentLoader,_videojs$EventTarget);function SegmentLoader(options){var _this=this;_classCallCheck(this,SegmentLoader);_get(Object.getPrototypeOf(SegmentLoader.prototype),'constructor',this).call(this);if(!options){throw new TypeError('Initialization options are required');}
if(typeof options.currentTime!=='function'){throw new TypeError('No currentTime getter specified');}
if(!options.mediaSource){throw new TypeError('No MediaSource specified');}
var settings=_videoJs2['default'].mergeOptions(_videoJs2['default'].options.hls,options);this.state='INIT';this.bandwidth=settings.bandwidth;this.throughput={rate:0,count:0};this.roundTrip=NaN;this.resetStats_();this.mediaIndex=null;this.hasPlayed_=settings.hasPlayed;this.currentTime_=settings.currentTime;this.seekable_=settings.seekable;this.seeking_=settings.seeking;this.setCurrentTime_=settings.setCurrentTime;this.mediaSource_=settings.mediaSource;this.hls_=settings.hls;this.loaderType_=settings.loaderType;this.checkBufferTimeout_=null;this.error_=void 0;this.currentTimeline_=-1;this.xhr_=null;this.pendingSegment_=null;this.mimeType_=null;this.sourceUpdater_=null;this.xhrOptions_=null;this.activeInitSegmentId_=null;this.initSegments_={};this.decrypter_=settings.decrypter;this.syncController_=settings.syncController;this.syncPoint_={segmentIndex:0,time:0};this.syncController_.on('syncinfoupdate',function(){return _this.trigger('syncinfoupdate');});this.fetchAtBuffer_=false;if(settings.debug){this.logger_=_videoJs2['default'].log.bind(_videoJs2['default'],'segment-loader',this.loaderType_,'->');}}
_createClass(SegmentLoader,[{key:'resetStats_',value:function resetStats_(){this.mediaBytesTransferred=0;this.mediaRequests=0;this.mediaTransferDuration=0;this.mediaSecondsLoaded=0;}},{key:'dispose',value:function dispose(){this.state='DISPOSED';this.abort_();if(this.sourceUpdater_){this.sourceUpdater_.dispose();}
this.resetStats_();}},{key:'abort',value:function abort(){if(this.state!=='WAITING'){if(this.pendingSegment_){this.pendingSegment_=null;}
return;}
this.abort_();if(!this.paused()){this.state='READY';this.monitorBuffer_();}}},{key:'abort_',value:function abort_(){if(this.xhr_){this.xhr_.abort();}
this.pendingSegment_=null;}},{key:'error',value:function error(_error){if(typeof _error!=='undefined'){this.error_=_error;}
this.pendingSegment_=null;return this.error_;}},{key:'load',value:function load(){this.monitorBuffer_();if(!this.playlist_){return;}
this.syncController_.setDateTimeMapping(this.playlist_);if(this.state==='INIT'&&this.mimeType_){return this.init_();}
if(!this.sourceUpdater_||this.state!=='READY'&&this.state!=='INIT'){return;}
this.state='READY';}},{key:'init_',value:function init_(){this.state='READY';this.sourceUpdater_=new _sourceUpdater2['default'](this.mediaSource_,this.mimeType_);this.resetEverything();return this.monitorBuffer_();}},{key:'playlist',value:function playlist(newPlaylist){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];if(!newPlaylist){return;}
var oldPlaylist=this.playlist_;var segmentInfo=this.pendingSegment_;this.playlist_=newPlaylist;this.xhrOptions_=options;if(!this.hasPlayed_()){newPlaylist.syncInfo={mediaSequence:newPlaylist.mediaSequence,time:0};}
this.trigger('syncinfoupdate');if(this.mimeType_&&this.state==='INIT'&&!this.paused()){return this.init_();}
if(!oldPlaylist||oldPlaylist.uri!==newPlaylist.uri){if(this.mediaIndex!==null){this.resyncLoader();}
return;}
var mediaSequenceDiff=newPlaylist.mediaSequence-oldPlaylist.mediaSequence;this.logger_('mediaSequenceDiff',mediaSequenceDiff);if(this.mediaIndex!==null){this.mediaIndex-=mediaSequenceDiff;}
if(segmentInfo){segmentInfo.mediaIndex-=mediaSequenceDiff;if(segmentInfo.mediaIndex>=0){segmentInfo.segment=newPlaylist.segments[segmentInfo.mediaIndex];}}
this.syncController_.saveExpiredSegmentInfo(oldPlaylist,newPlaylist);}},{key:'pause',value:function pause(){if(this.checkBufferTimeout_){_globalWindow2['default'].clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=null;}}},{key:'paused',value:function paused(){return this.checkBufferTimeout_===null;}},{key:'mimeType',value:function mimeType(_mimeType){if(this.mimeType_){return;}
this.mimeType_=_mimeType;if(this.playlist_&&this.state==='INIT'&&!this.paused()){this.init_();}}},{key:'resetEverything',value:function resetEverything(){this.resetLoader();this.remove(0,Infinity);}},{key:'resetLoader',value:function resetLoader(){this.fetchAtBuffer_=false;this.resyncLoader();}},{key:'resyncLoader',value:function resyncLoader(){this.mediaIndex=null;this.syncPoint_=null;}},{key:'remove',value:function remove(start,end){if(this.sourceUpdater_){this.sourceUpdater_.remove(start,end);}}},{key:'monitorBuffer_',value:function monitorBuffer_(){if(this.checkBufferTimeout_){_globalWindow2['default'].clearTimeout(this.checkBufferTimeout_);}
this.checkBufferTimeout_=_globalWindow2['default'].setTimeout(this.monitorBufferTick_.bind(this),1);}},{key:'monitorBufferTick_',value:function monitorBufferTick_(){if(this.state==='READY'){this.fillBuffer_();}
if(this.checkBufferTimeout_){_globalWindow2['default'].clearTimeout(this.checkBufferTimeout_);}
this.checkBufferTimeout_=_globalWindow2['default'].setTimeout(this.monitorBufferTick_.bind(this),CHECK_BUFFER_DELAY);}},{key:'fillBuffer_',value:function fillBuffer_(){if(this.sourceUpdater_.updating()){return;}
if(!this.syncPoint_){this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.mediaSource_.duration,this.currentTimeline_,this.currentTime_());}
var segmentInfo=this.checkBuffer_(this.sourceUpdater_.buffered(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(!segmentInfo){return;}
var isEndOfStream=detectEndOfStream(this.playlist_,this.mediaSource_,segmentInfo.mediaIndex);if(isEndOfStream){this.mediaSource_.endOfStream();return;}
if(segmentInfo.mediaIndex===this.playlist_.segments.length-1&&this.mediaSource_.readyState==='ended'&&!this.seeking_()){return;}
if(segmentInfo.timeline!==this.currentTimeline_||segmentInfo.startOfSegment!==null&&segmentInfo.startOfSegment<this.sourceUpdater_.timestampOffset()){this.syncController_.reset();segmentInfo.timestampOffset=segmentInfo.startOfSegment;}
this.loadSegment_(segmentInfo);}},{key:'checkBuffer_',value:function checkBuffer_(buffered,playlist,mediaIndex,hasPlayed,currentTime,syncPoint){var lastBufferedEnd=0;var startOfSegment=undefined;if(buffered.length){lastBufferedEnd=buffered.end(buffered.length-1);}
var bufferedTime=Math.max(0,lastBufferedEnd-currentTime);if(!playlist.segments.length){return null;}
if(bufferedTime>=_config2['default'].GOAL_BUFFER_LENGTH){return null;}
if(!hasPlayed&&bufferedTime>=1){return null;}
this.logger_('checkBuffer_','mediaIndex:',mediaIndex,'hasPlayed:',hasPlayed,'currentTime:',currentTime,'syncPoint:',syncPoint,'fetchAtBuffer:',this.fetchAtBuffer_,'bufferedTime:',bufferedTime);if(syncPoint===null){mediaIndex=this.getSyncSegmentCandidate_(playlist);this.logger_('getSync','mediaIndex:',mediaIndex);return this.generateSegmentInfo_(playlist,mediaIndex,null,true);}
if(mediaIndex!==null){this.logger_('walkForward','mediaIndex:',mediaIndex+1);var segment=playlist.segments[mediaIndex];if(segment&&segment.end){startOfSegment=segment.end;}else{startOfSegment=lastBufferedEnd;}
return this.generateSegmentInfo_(playlist,mediaIndex+1,startOfSegment,false);}
if(this.fetchAtBuffer_){var mediaSourceInfo=(0,_playlist.getMediaInfoForTime_)(playlist,lastBufferedEnd,syncPoint.segmentIndex,syncPoint.time);mediaIndex=mediaSourceInfo.mediaIndex;startOfSegment=mediaSourceInfo.startTime;}else{var mediaSourceInfo=(0,_playlist.getMediaInfoForTime_)(playlist,currentTime,syncPoint.segmentIndex,syncPoint.time);mediaIndex=mediaSourceInfo.mediaIndex;startOfSegment=mediaSourceInfo.startTime;}
this.logger_('getMediaIndexForTime','mediaIndex:',mediaIndex,'startOfSegment:',startOfSegment);return this.generateSegmentInfo_(playlist,mediaIndex,startOfSegment,false);}},{key:'getSyncSegmentCandidate_',value:function getSyncSegmentCandidate_(playlist){var _this2=this;if(this.currentTimeline_===-1){return 0;}
var segmentIndexArray=playlist.segments.map(function(s,i){return{timeline:s.timeline,segmentIndex:i};}).filter(function(s){return s.timeline===_this2.currentTimeline_;});if(segmentIndexArray.length){return segmentIndexArray[Math.min(segmentIndexArray.length-1,1)].segmentIndex;}
return Math.max(playlist.segments.length-1,0);}},{key:'generateSegmentInfo_',value:function generateSegmentInfo_(playlist,mediaIndex,startOfSegment,isSyncRequest){if(mediaIndex<0||mediaIndex>=playlist.segments.length){return null;}
var segment=playlist.segments[mediaIndex];return{uri:segment.resolvedUri,mediaIndex:mediaIndex,isSyncRequest:isSyncRequest,startOfSegment:startOfSegment,playlist:playlist,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:segment.timeline,duration:segment.duration,segment:segment};}},{key:'loadSegment_',value:function loadSegment_(segmentInfo){var _this3=this;var segment=undefined;var keyXhr=undefined;var initSegmentXhr=undefined;var segmentXhr=undefined;var removeToTime=0;removeToTime=this.trimBuffer_(segmentInfo);if(removeToTime>0){this.sourceUpdater_.remove(0,removeToTime);}
segment=segmentInfo.segment;if(segment.key){var keyRequestOptions=_videoJs2['default'].mergeOptions(this.xhrOptions_,{uri:segment.key.resolvedUri,responseType:'arraybuffer'});keyXhr=this.hls_.xhr(keyRequestOptions,this.handleResponse_.bind(this));}
if(segment.map&&!this.initSegments_[initSegmentId(segment.map)]){var initSegmentOptions=_videoJs2['default'].mergeOptions(this.xhrOptions_,{uri:segment.map.resolvedUri,responseType:'arraybuffer',headers:segmentXhrHeaders(segment.map)});initSegmentXhr=this.hls_.xhr(initSegmentOptions,this.handleResponse_.bind(this));}
this.pendingSegment_=segmentInfo;var segmentRequestOptions=_videoJs2['default'].mergeOptions(this.xhrOptions_,{uri:segmentInfo.uri,responseType:'arraybuffer',headers:segmentXhrHeaders(segment)});segmentXhr=this.hls_.xhr(segmentRequestOptions,this.handleResponse_.bind(this));segmentXhr.addEventListener('progress',function(event){_this3.trigger(event);});this.xhr_={keyXhr:keyXhr,initSegmentXhr:initSegmentXhr,segmentXhr:segmentXhr,abort:function abort(){if(this.segmentXhr){this.segmentXhr.onreadystatechange=null;this.segmentXhr.abort();this.segmentXhr=null;}
if(this.initSegmentXhr){this.initSegmentXhr.onreadystatechange=null;this.initSegmentXhr.abort();this.initSegmentXhr=null;}
if(this.keyXhr){this.keyXhr.onreadystatechange=null;this.keyXhr.abort();this.keyXhr=null;}}};this.state='WAITING';}},{key:'trimBuffer_',value:function trimBuffer_(segmentInfo){var seekable=this.seekable_();var currentTime=this.currentTime_();var removeToTime=undefined;if(seekable.length&&seekable.start(0)>0&&seekable.start(0)<currentTime){return seekable.start(0);}
removeToTime=currentTime-60;return removeToTime;}},{key:'handleResponse_',value:function handleResponse_(error,request){var segmentInfo=undefined;var segment=undefined;var view=undefined;if(!this.xhr_||request!==this.xhr_.segmentXhr&&request!==this.xhr_.keyXhr&&request!==this.xhr_.initSegmentXhr){return;}
segmentInfo=this.pendingSegment_;segment=segmentInfo.segment;if(request.timedout){this.abort_();this.bandwidth=1;this.roundTrip=NaN;this.state='READY';return this.trigger('progress');}
if(!request.aborted&&error){var keyXhrRequest=this.xhr_.keyXhr;this.abort_();this.error({status:request.status,message:request===keyXhrRequest?'HLS key request error at URL: '+segment.key.uri:'HLS segment request error at URL: '+segmentInfo.uri,code:2,xhr:request});this.state='READY';this.pause();return this.trigger('error');}
if(!request.response){this.abort_();return;}
if(request===this.xhr_.segmentXhr){this.xhr_.segmentXhr=null;segmentInfo.startOfAppend=Date.now();this.roundTrip=request.roundTripTime;this.bandwidth=request.bandwidth;this.mediaBytesTransferred+=request.bytesReceived||0;this.mediaRequests+=1;this.mediaTransferDuration+=request.roundTripTime||0;if(segment.key){segmentInfo.encryptedBytes=new Uint8Array(request.response);}else{segmentInfo.bytes=new Uint8Array(request.response);}}
if(request===this.xhr_.keyXhr){this.xhr_.keyXhr=null;if(request.response.byteLength!==16){this.abort_();this.error({status:request.status,message:'Invalid HLS key at URL: '+segment.key.uri,code:2,xhr:request});this.state='READY';this.pause();return this.trigger('error');}
view=new DataView(request.response);segment.key.bytes=new Uint32Array([view.getUint32(0),view.getUint32(4),view.getUint32(8),view.getUint32(12)]);segment.key.iv=segment.key.iv||new Uint32Array([0,0,0,segmentInfo.mediaIndex+segmentInfo.playlist.mediaSequence]);}
if(request===this.xhr_.initSegmentXhr){this.xhr_.initSegmentXhr=null;segment.map.bytes=new Uint8Array(request.response);this.initSegments_[initSegmentId(segment.map)]=segment.map;}
if(!this.xhr_.segmentXhr&&!this.xhr_.keyXhr&&!this.xhr_.initSegmentXhr){this.xhr_=null;this.processResponse_();}}},{key:'processResponse_',value:function processResponse_(){if(!this.pendingSegment_){this.state='READY';return;}
this.state='DECRYPTING';var segmentInfo=this.pendingSegment_;var segment=segmentInfo.segment;if(segment.key){this.decrypter_.postMessage((0,_binUtils.createTransferableMessage)({source:this.loaderType_,encrypted:segmentInfo.encryptedBytes,key:segment.key.bytes,iv:segment.key.iv}),[segmentInfo.encryptedBytes.buffer,segment.key.bytes.buffer]);}else{this.handleSegment_();}}},{key:'handleDecrypted_',value:function handleDecrypted_(data){var segmentInfo=this.pendingSegment_;var decrypted=data.decrypted;if(segmentInfo){segmentInfo.bytes=new Uint8Array(decrypted.bytes,decrypted.byteOffset,decrypted.byteLength);}
this.handleSegment_();}},{key:'handleSegment_',value:function handleSegment_(){var _this4=this;if(!this.pendingSegment_){this.state='READY';return;}
this.state='APPENDING';var segmentInfo=this.pendingSegment_;var segment=segmentInfo.segment;this.syncController_.probeSegmentInfo(segmentInfo);if(segmentInfo.isSyncRequest){this.trigger('syncinfoupdate');this.pendingSegment_=null;this.state='READY';return;}
if(segmentInfo.timestampOffset!==null&&segmentInfo.timestampOffset!==this.sourceUpdater_.timestampOffset()){this.sourceUpdater_.timestampOffset(segmentInfo.timestampOffset);}
if(segment.map){(function(){var initId=initSegmentId(segment.map);if(!_this4.activeInitSegmentId_||_this4.activeInitSegmentId_!==initId){var initSegment=_this4.initSegments_[initId];_this4.sourceUpdater_.appendBuffer(initSegment.bytes,function(){_this4.activeInitSegmentId_=initId;});}})();}
segmentInfo.byteLength=segmentInfo.bytes.byteLength;if(typeof segment.start==='number'&&typeof segment.end==='number'){this.mediaSecondsLoaded+=segment.end-segment.start;}else{this.mediaSecondsLoaded+=segment.duration;}
this.sourceUpdater_.appendBuffer(segmentInfo.bytes,this.handleUpdateEnd_.bind(this));}},{key:'handleUpdateEnd_',value:function handleUpdateEnd_(){this.logger_('handleUpdateEnd_','segmentInfo:',this.pendingSegment_);if(!this.pendingSegment_){this.state='READY';if(!this.paused()){this.monitorBuffer_();}
return;}
var segmentInfo=this.pendingSegment_;var segment=segmentInfo.segment;var isWalkingForward=this.mediaIndex!==null;this.pendingSegment_=null;this.recordThroughput_(segmentInfo);this.state='READY';this.mediaIndex=segmentInfo.mediaIndex;this.fetchAtBuffer_=true;this.currentTimeline_=segmentInfo.timeline;this.trigger('syncinfoupdate');if(segment.end&&this.currentTime_()-segment.end>segmentInfo.playlist.targetDuration*3){this.resetEverything();return;}
if(isWalkingForward){this.trigger('progress');}
var isEndOfStream=detectEndOfStream(segmentInfo.playlist,this.mediaSource_,this.mediaIndex+1);if(isEndOfStream){this.mediaSource_.endOfStream();}
if(!this.paused()){this.monitorBuffer_();}}},{key:'recordThroughput_',value:function recordThroughput_(segmentInfo){var rate=this.throughput.rate;var segmentProcessingTime=Date.now()-segmentInfo.startOfAppend+1;var segmentProcessingThroughput=Math.floor(segmentInfo.byteLength/segmentProcessingTime*8*1000);this.throughput.rate+=(segmentProcessingThroughput-rate)/++this.throughput.count;}},{key:'logger_',value:function logger_(){}}]);return SegmentLoader;})(_videoJs2['default'].EventTarget);exports['default']=SegmentLoader;module.exports=exports['default'];}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./bin-utils":2,"./config":3,"./playlist":8,"./source-updater":14,"global/window":28}],14:[function(require,module,exports){(function(global){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
var _videoJs=(typeof window!=="undefined"?window['videojs']:typeof global!=="undefined"?global['videojs']:null);var _videoJs2=_interopRequireDefault(_videoJs);var SourceUpdater=(function(){function SourceUpdater(mediaSource,mimeType){var _this=this;_classCallCheck(this,SourceUpdater);var createSourceBuffer=function createSourceBuffer(){_this.sourceBuffer_=mediaSource.addSourceBuffer(mimeType);_this.onUpdateendCallback_=function(){var pendingCallback=_this.pendingCallback_;_this.pendingCallback_=null;if(pendingCallback){pendingCallback();}
_this.runCallback_();};_this.sourceBuffer_.addEventListener('updateend',_this.onUpdateendCallback_);_this.runCallback_();};this.callbacks_=[];this.pendingCallback_=null;this.timestampOffset_=0;this.mediaSource=mediaSource;if(mediaSource.readyState==='closed'){mediaSource.addEventListener('sourceopen',createSourceBuffer);}else{createSourceBuffer();}}
_createClass(SourceUpdater,[{key:'abort',value:function abort(done){var _this2=this;this.queueCallback_(function(){_this2.sourceBuffer_.abort();},done);}},{key:'appendBuffer',value:function appendBuffer(bytes,done){var _this3=this;this.queueCallback_(function(){_this3.sourceBuffer_.appendBuffer(bytes);},done);}},{key:'buffered',value:function buffered(){if(!this.sourceBuffer_){return _videoJs2['default'].createTimeRanges();}
return this.sourceBuffer_.buffered;}},{key:'duration',value:function duration(_duration){var _this4=this;this.queueCallback_(function(){_this4.sourceBuffer_.duration=_duration;});}},{key:'remove',value:function remove(start,end){var _this5=this;this.queueCallback_(function(){_this5.sourceBuffer_.remove(start,end);});}},{key:'updating',value:function updating(){return!this.sourceBuffer_||this.sourceBuffer_.updating;}},{key:'timestampOffset',value:function timestampOffset(offset){var _this6=this;if(typeof offset!=='undefined'){this.queueCallback_(function(){_this6.sourceBuffer_.timestampOffset=offset;});this.timestampOffset_=offset;}
return this.timestampOffset_;}},{key:'queueCallback_',value:function queueCallback_(callback,done){this.callbacks_.push([callback.bind(this),done]);this.runCallback_();}},{key:'runCallback_',value:function runCallback_(){var callbacks=undefined;if(this.sourceBuffer_&&!this.sourceBuffer_.updating&&this.callbacks_.length){callbacks=this.callbacks_.shift();this.pendingCallback_=callbacks[1];callbacks[0]();}}},{key:'dispose',value:function dispose(){this.sourceBuffer_.removeEventListener('updateend',this.onUpdateendCallback_);if(this.sourceBuffer_&&this.mediaSource.readyState==='open'){this.sourceBuffer_.abort();}}}]);return SourceUpdater;})();exports['default']=SourceUpdater;module.exports=exports['default'];}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],15:[function(require,module,exports){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
var Stream=(function(){function Stream(){_classCallCheck(this,Stream);this.listeners={};}
_createClass(Stream,[{key:'on',value:function on(type,listener){if(!this.listeners[type]){this.listeners[type]=[];}
this.listeners[type].push(listener);}},{key:'off',value:function off(type,listener){var index=undefined;if(!this.listeners[type]){return false;}
index=this.listeners[type].indexOf(listener);this.listeners[type].splice(index,1);return index>-1;}},{key:'trigger',value:function trigger(type){var callbacks=undefined;var i=undefined;var length=undefined;var args=undefined;callbacks=this.listeners[type];if(!callbacks){return;}
if(arguments.length===2){length=callbacks.length;for(i=0;i<length;++i){callbacks[i].call(this,arguments[1]);}}else{args=Array.prototype.slice.call(arguments,1);length=callbacks.length;for(i=0;i<length;++i){callbacks[i].apply(this,args);}}}},{key:'dispose',value:function dispose(){this.listeners={};}},{key:'pipe',value:function pipe(destination){this.on('data',function(data){destination.push(data);});}}]);return Stream;})();exports['default']=Stream;module.exports=exports['default'];},{}],16:[function(require,module,exports){(function(global){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{_x=parent;_x2=property;_x3=receiver;_again=true;desc=parent=undefined;continue _function;}}else if('value'in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}
var _muxJsLibMp4Probe=require('mux.js/lib/mp4/probe');var _muxJsLibMp4Probe2=_interopRequireDefault(_muxJsLibMp4Probe);var _muxJsLibToolsTsInspectorJs=require('mux.js/lib/tools/ts-inspector.js');var _playlist=require('./playlist');var _videoJs=(typeof window!=="undefined"?window['videojs']:typeof global!=="undefined"?global['videojs']:null);var _videoJs2=_interopRequireDefault(_videoJs);var syncPointStrategies=[{name:'VOD',run:function run(syncController,playlist,duration,currentTimeline,currentTime){if(duration!==Infinity){var syncPoint={time:0,segmentIndex:0};return syncPoint;}
return null;}},{name:'ProgramDateTime',run:function run(syncController,playlist,duration,currentTimeline,currentTime){if(syncController.datetimeToDisplayTime&&playlist.dateTimeObject){var playlistTime=playlist.dateTimeObject.getTime()/1000;var playlistStart=playlistTime+syncController.datetimeToDisplayTime;var syncPoint={time:playlistStart,segmentIndex:0};return syncPoint;}
return null;}},{name:'Segment',run:function run(syncController,playlist,duration,currentTimeline,currentTime){var segments=playlist.segments;var syncPoint=null;var lastDistance=null;currentTime=currentTime||0;for(var i=0;i<segments.length;i++){var segment=segments[i];if(segment.timeline===currentTimeline&&typeof segment.start!=='undefined'){var distance=Math.abs(currentTime-segment.start);if(lastDistance!==null&&lastDistance<distance){break;}
if(!syncPoint||lastDistance===null||lastDistance>=distance){lastDistance=distance;syncPoint={time:segment.start,segmentIndex:i};}}}
return syncPoint;}},{name:'Discontinuity',run:function run(syncController,playlist,duration,currentTimeline,currentTime){var syncPoint=null;currentTime=currentTime||0;if(playlist.discontinuityStarts.length){var lastDistance=null;for(var i=0;i<playlist.discontinuityStarts.length;i++){var segmentIndex=playlist.discontinuityStarts[i];var discontinuity=playlist.discontinuitySequence+i+1;var discontinuitySync=syncController.discontinuities[discontinuity];if(discontinuitySync){var distance=Math.abs(currentTime-discontinuitySync.time);if(lastDistance!==null&&lastDistance<distance){break;}
if(!syncPoint||lastDistance===null||lastDistance>=distance){lastDistance=distance;syncPoint={time:discontinuitySync.time,segmentIndex:segmentIndex};}}}}
return syncPoint;}},{name:'Playlist',run:function run(syncController,playlist,duration,currentTimeline,currentTime){if(playlist.syncInfo){var syncPoint={time:playlist.syncInfo.time,segmentIndex:playlist.syncInfo.mediaSequence-playlist.mediaSequence};return syncPoint;}
return null;}}];exports.syncPointStrategies=syncPointStrategies;var SyncController=(function(_videojs$EventTarget){_inherits(SyncController,_videojs$EventTarget);function SyncController(){_classCallCheck(this,SyncController);_get(Object.getPrototypeOf(SyncController.prototype),'constructor',this).call(this);this.inspectCache_=undefined;this.timelines=[];this.discontinuities=[];this.datetimeToDisplayTime=null;if(_videoJs2['default'].options.hls&&_videoJs2['default'].options.hls.debug){this.logger_=_videoJs2['default'].log.bind(_videoJs2['default'],'sync-controller ->');}}
_createClass(SyncController,[{key:'getSyncPoint',value:function getSyncPoint(playlist,duration,currentTimeline,currentTime){var syncPoints=[];for(var i=0;i<syncPointStrategies.length;i++){var strategy=syncPointStrategies[i];var syncPoint=strategy.run(this,playlist,duration,currentTimeline,currentTime);if(syncPoint){syncPoint.strategy=strategy.name;syncPoints.push({strategy:strategy.name,syncPoint:syncPoint});this.logger_('syncPoint found via <'+strategy.name+'>:',syncPoint);}}
if(!syncPoints.length){return null;}
var bestSyncPoint=syncPoints[0].syncPoint;var bestDistance=Math.abs(syncPoints[0].syncPoint.time-currentTime);var bestStrategy=syncPoints[0].strategy;for(var i=1;i<syncPoints.length;i++){var newDistance=Math.abs(syncPoints[i].syncPoint.time-currentTime);if(newDistance<bestDistance){bestDistance=newDistance;bestSyncPoint=syncPoints[i].syncPoint;bestStrategy=syncPoints[i].strategy;}}
this.logger_('syncPoint with strategy <'+bestStrategy+'> chosen: ',bestSyncPoint);return bestSyncPoint;}},{key:'saveExpiredSegmentInfo',value:function saveExpiredSegmentInfo(oldPlaylist,newPlaylist){var mediaSequenceDiff=newPlaylist.mediaSequence-oldPlaylist.mediaSequence;for(var i=mediaSequenceDiff-1;i>=0;i--){var lastRemovedSegment=oldPlaylist.segments[i];if(typeof lastRemovedSegment.start!=='undefined'){newPlaylist.syncInfo={mediaSequence:oldPlaylist.mediaSequence+i,time:lastRemovedSegment.start};this.logger_('playlist sync:',newPlaylist.syncInfo);this.trigger('syncinfoupdate');break;}}}},{key:'setDateTimeMapping',value:function setDateTimeMapping(playlist){if(!this.datetimeToDisplayTime&&playlist.dateTimeObject){var playlistTimestamp=playlist.dateTimeObject.getTime()/1000;this.datetimeToDisplayTime=-playlistTimestamp;}}},{key:'reset',value:function reset(){this.inspectCache_=undefined;}},{key:'probeSegmentInfo',value:function probeSegmentInfo(segmentInfo){var segment=segmentInfo.segment;var timingInfo=undefined;if(segment.map){timingInfo=this.probeMp4Segment_(segmentInfo);}else{timingInfo=this.probeTsSegment_(segmentInfo);}
if(timingInfo){if(this.calculateSegmentTimeMapping_(segmentInfo,timingInfo)){this.saveDiscontinuitySyncInfo_(segmentInfo);}}}},{key:'probeMp4Segment_',value:function probeMp4Segment_(segmentInfo){var segment=segmentInfo.segment;var timescales=_muxJsLibMp4Probe2['default'].timescale(segment.map.bytes);var startTime=_muxJsLibMp4Probe2['default'].startTime(timescales,segmentInfo.bytes);if(segmentInfo.timestampOffset!==null){segmentInfo.timestampOffset-=startTime;}
return{start:startTime,end:startTime+segment.duration};}},{key:'probeTsSegment_',value:function probeTsSegment_(segmentInfo){var timeInfo=(0,_muxJsLibToolsTsInspectorJs.inspect)(segmentInfo.bytes,this.inspectCache_);var segmentStartTime=undefined;var segmentEndTime=undefined;if(!timeInfo){return null;}
if(timeInfo.video&&timeInfo.video.length===2){this.inspectCache_=timeInfo.video[1].dts;segmentStartTime=timeInfo.video[0].dtsTime;segmentEndTime=timeInfo.video[1].dtsTime;}else if(timeInfo.audio&&timeInfo.audio.length===2){this.inspectCache_=timeInfo.audio[1].dts;segmentStartTime=timeInfo.audio[0].dtsTime;segmentEndTime=timeInfo.audio[1].dtsTime;}
return{start:segmentStartTime,end:segmentEndTime};}},{key:'calculateSegmentTimeMapping_',value:function calculateSegmentTimeMapping_(segmentInfo,timingInfo){var segment=segmentInfo.segment;var mappingObj=this.timelines[segmentInfo.timeline];if(segmentInfo.timestampOffset!==null){this.logger_('tsO:',segmentInfo.timestampOffset);mappingObj={time:segmentInfo.timestampOffset,mapping:segmentInfo.timestampOffset-timingInfo.start};this.timelines[segmentInfo.timeline]=mappingObj;segment.start=segmentInfo.timestampOffset;segment.end=timingInfo.end+mappingObj.mapping;}else if(mappingObj){segment.start=timingInfo.start+mappingObj.mapping;segment.end=timingInfo.end+mappingObj.mapping;}else{return false;}
return true;}},{key:'saveDiscontinuitySyncInfo_',value:function saveDiscontinuitySyncInfo_(segmentInfo){var playlist=segmentInfo.playlist;var segment=segmentInfo.segment;if(segment.discontinuity){this.discontinuities[segment.timeline]={time:segment.start,accuracy:0};}else if(playlist.discontinuityStarts.length){for(var i=0;i<playlist.discontinuityStarts.length;i++){var segmentIndex=playlist.discontinuityStarts[i];var discontinuity=playlist.discontinuitySequence+i+1;var mediaIndexDiff=segmentIndex-segmentInfo.mediaIndex;var accuracy=Math.abs(mediaIndexDiff);if(!this.discontinuities[discontinuity]||this.discontinuities[discontinuity].accuracy>accuracy){if(mediaIndexDiff<0){this.discontinuities[discontinuity]={time:segment.start-(0,_playlist.sumDurations)(playlist,segmentInfo.mediaIndex,segmentIndex),accuracy:accuracy};}else{this.discontinuities[discontinuity]={time:segment.end+(0,_playlist.sumDurations)(playlist,segmentInfo.mediaIndex+1,segmentIndex),accuracy:accuracy};}}}}}},{key:'logger_',value:function logger_(){}}]);return SyncController;})(_videoJs2['default'].EventTarget);exports['default']=SyncController;}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./playlist":8,"mux.js/lib/mp4/probe":53,"mux.js/lib/tools/ts-inspector.js":55}],17:[function(require,module,exports){(function(global){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _videoJs=(typeof window!=="undefined"?window['videojs']:typeof global!=="undefined"?global['videojs']:null);var xhrFactory=function xhrFactory(){var xhr=function XhrFunction(options,callback){options=(0,_videoJs.mergeOptions)({timeout:45e3},options);if(XhrFunction.beforeRequest&&typeof XhrFunction.beforeRequest==='function'){var newOptions=XhrFunction.beforeRequest(options);if(newOptions){options=newOptions;}}
var request=(0,_videoJs.xhr)(options,function(error,response){if(!error&&request.response){request.responseTime=Date.now();request.roundTripTime=request.responseTime-request.requestTime;request.bytesReceived=request.response.byteLength||request.response.length;if(!request.bandwidth){request.bandwidth=Math.floor(request.bytesReceived/request.roundTripTime*8*1000);}}
if(error||request.timedout){request.timedout=request.timedout||error.code==='ETIMEDOUT';}else{request.timedout=false;}
if(!error&&response.statusCode!==200&&response.statusCode!==206&&response.statusCode!==0){error=new Error('XHR Failed with a response of: '+(request&&(request.response||request.responseText)));}
callback(error,request);});request.requestTime=Date.now();return request;};return xhr;};exports['default']=xhrFactory;module.exports=exports['default'];}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],18:[function(require,module,exports){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
var precompute=function precompute(){var tables=[[[],[],[],[],[]],[[],[],[],[],[]]];var encTable=tables[0];var decTable=tables[1];var sbox=encTable[4];var sboxInv=decTable[4];var i=undefined;var x=undefined;var xInv=undefined;var d=[];var th=[];var x2=undefined;var x4=undefined;var x8=undefined;var s=undefined;var tEnc=undefined;var tDec=undefined;for(i=0;i<256;i++){th[(d[i]=i<<1^(i>>7)*283)^i]=i;}
for(x=xInv=0;!sbox[x];x^=x2||1,xInv=th[xInv]||1){s=xInv^xInv<<1^xInv<<2^xInv<<3^xInv<<4;s=s>>8^s&255^99;sbox[x]=s;sboxInv[s]=x;x8=d[x4=d[x2=d[x]]];tDec=x8*0x1010101^x4*0x10001^x2*0x101^x*0x1010100;tEnc=d[s]*0x101^s*0x1010100;for(i=0;i<4;i++){encTable[i][x]=tEnc=tEnc<<24^tEnc>>>8;decTable[i][s]=tDec=tDec<<24^tDec>>>8;}}
for(i=0;i<5;i++){encTable[i]=encTable[i].slice(0);decTable[i]=decTable[i].slice(0);}
return tables;};var aesTables=null;var AES=(function(){function AES(key){_classCallCheck(this,AES);if(!aesTables){aesTables=precompute();}
this._tables=[[aesTables[0][0].slice(),aesTables[0][1].slice(),aesTables[0][2].slice(),aesTables[0][3].slice(),aesTables[0][4].slice()],[aesTables[1][0].slice(),aesTables[1][1].slice(),aesTables[1][2].slice(),aesTables[1][3].slice(),aesTables[1][4].slice()]];var i=undefined;var j=undefined;var tmp=undefined;var encKey=undefined;var decKey=undefined;var sbox=this._tables[0][4];var decTable=this._tables[1];var keyLen=key.length;var rcon=1;if(keyLen!==4&&keyLen!==6&&keyLen!==8){throw new Error('Invalid aes key size');}
encKey=key.slice(0);decKey=[];this._key=[encKey,decKey];for(i=keyLen;i<4*keyLen+28;i++){tmp=encKey[i-1];if(i%keyLen===0||keyLen===8&&i%keyLen===4){tmp=sbox[tmp>>>24]<<24^sbox[tmp>>16&255]<<16^sbox[tmp>>8&255]<<8^sbox[tmp&255];if(i%keyLen===0){tmp=tmp<<8^tmp>>>24^rcon<<24;rcon=rcon<<1^(rcon>>7)*283;}}
encKey[i]=encKey[i-keyLen]^tmp;}
for(j=0;i;j++,i--){tmp=encKey[j&3?i:i-4];if(i<=4||j<4){decKey[j]=tmp;}else{decKey[j]=decTable[0][sbox[tmp>>>24]]^decTable[1][sbox[tmp>>16&255]]^decTable[2][sbox[tmp>>8&255]]^decTable[3][sbox[tmp&255]];}}}
_createClass(AES,[{key:'decrypt',value:function decrypt(encrypted0,encrypted1,encrypted2,encrypted3,out,offset){var key=this._key[1];var a=encrypted0^key[0];var b=encrypted3^key[1];var c=encrypted2^key[2];var d=encrypted1^key[3];var a2=undefined;var b2=undefined;var c2=undefined;var nInnerRounds=key.length/4-2;var i=undefined;var kIndex=4;var table=this._tables[1];var table0=table[0];var table1=table[1];var table2=table[2];var table3=table[3];var sbox=table[4];for(i=0;i<nInnerRounds;i++){a2=table0[a>>>24]^table1[b>>16&255]^table2[c>>8&255]^table3[d&255]^key[kIndex];b2=table0[b>>>24]^table1[c>>16&255]^table2[d>>8&255]^table3[a&255]^key[kIndex+1];c2=table0[c>>>24]^table1[d>>16&255]^table2[a>>8&255]^table3[b&255]^key[kIndex+2];d=table0[d>>>24]^table1[a>>16&255]^table2[b>>8&255]^table3[c&255]^key[kIndex+3];kIndex+=4;a=a2;b=b2;c=c2;}
for(i=0;i<4;i++){out[(3&-i)+offset]=sbox[a>>>24]<<24^sbox[b>>16&255]<<16^sbox[c>>8&255]<<8^sbox[d&255]^key[kIndex++];a2=a;a=b;b=c;c=d;d=a2;}}}]);return AES;})();exports['default']=AES;module.exports=exports['default'];},{}],19:[function(require,module,exports){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{_x=parent;_x2=property;_x3=receiver;_again=true;desc=parent=undefined;continue _function;}}else if('value'in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}
var _stream=require('./stream');var _stream2=_interopRequireDefault(_stream);var AsyncStream=(function(_Stream){_inherits(AsyncStream,_Stream);function AsyncStream(){_classCallCheck(this,AsyncStream);_get(Object.getPrototypeOf(AsyncStream.prototype),'constructor',this).call(this,_stream2['default']);this.jobs=[];this.delay=1;this.timeout_=null;}
_createClass(AsyncStream,[{key:'processJob_',value:function processJob_(){this.jobs.shift()();if(this.jobs.length){this.timeout_=setTimeout(this.processJob_.bind(this),this.delay);}else{this.timeout_=null;}}},{key:'push',value:function push(job){this.jobs.push(job);if(!this.timeout_){this.timeout_=setTimeout(this.processJob_.bind(this),this.delay);}}}]);return AsyncStream;})(_stream2['default']);exports['default']=AsyncStream;module.exports=exports['default'];},{"./stream":22}],20:[function(require,module,exports){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
var _aes=require('./aes');var _aes2=_interopRequireDefault(_aes);var _asyncStream=require('./async-stream');var _asyncStream2=_interopRequireDefault(_asyncStream);var _pkcs7=require('pkcs7');var ntoh=function ntoh(word){return word<<24|(word&0xff00)<<8|(word&0xff0000)>>8|word>>>24;};var decrypt=function decrypt(encrypted,key,initVector){var encrypted32=new Int32Array(encrypted.buffer,encrypted.byteOffset,encrypted.byteLength>>2);var decipher=new _aes2['default'](Array.prototype.slice.call(key));var decrypted=new Uint8Array(encrypted.byteLength);var decrypted32=new Int32Array(decrypted.buffer);var init0=undefined;var init1=undefined;var init2=undefined;var init3=undefined;var encrypted0=undefined;var encrypted1=undefined;var encrypted2=undefined;var encrypted3=undefined;var wordIx=undefined;init0=initVector[0];init1=initVector[1];init2=initVector[2];init3=initVector[3];for(wordIx=0;wordIx<encrypted32.length;wordIx+=4){encrypted0=ntoh(encrypted32[wordIx]);encrypted1=ntoh(encrypted32[wordIx+1]);encrypted2=ntoh(encrypted32[wordIx+2]);encrypted3=ntoh(encrypted32[wordIx+3]);decipher.decrypt(encrypted0,encrypted1,encrypted2,encrypted3,decrypted32,wordIx);decrypted32[wordIx]=ntoh(decrypted32[wordIx]^init0);decrypted32[wordIx+1]=ntoh(decrypted32[wordIx+1]^init1);decrypted32[wordIx+2]=ntoh(decrypted32[wordIx+2]^init2);decrypted32[wordIx+3]=ntoh(decrypted32[wordIx+3]^init3);init0=encrypted0;init1=encrypted1;init2=encrypted2;init3=encrypted3;}
return decrypted;};exports.decrypt=decrypt;var Decrypter=(function(){function Decrypter(encrypted,key,initVector,done){_classCallCheck(this,Decrypter);var step=Decrypter.STEP;var encrypted32=new Int32Array(encrypted.buffer);var decrypted=new Uint8Array(encrypted.byteLength);var i=0;this.asyncStream_=new _asyncStream2['default']();this.asyncStream_.push(this.decryptChunk_(encrypted32.subarray(i,i+step),key,initVector,decrypted));for(i=step;i<encrypted32.length;i+=step){initVector=new Uint32Array([ntoh(encrypted32[i-4]),ntoh(encrypted32[i-3]),ntoh(encrypted32[i-2]),ntoh(encrypted32[i-1])]);this.asyncStream_.push(this.decryptChunk_(encrypted32.subarray(i,i+step),key,initVector,decrypted));}
this.asyncStream_.push(function(){done(null,(0,_pkcs7.unpad)(decrypted));});}
_createClass(Decrypter,[{key:'decryptChunk_',value:function decryptChunk_(encrypted,key,initVector,decrypted){return function(){var bytes=decrypt(encrypted,key,initVector);decrypted.set(bytes,encrypted.byteOffset);};}}],[{key:'STEP',get:function get(){return 32000;}}]);return Decrypter;})();exports.Decrypter=Decrypter;exports['default']={Decrypter:Decrypter,decrypt:decrypt};},{"./aes":18,"./async-stream":19,"pkcs7":24}],21:[function(require,module,exports){'use strict';Object.defineProperty(exports,'__esModule',{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
var _decrypter=require('./decrypter');var _asyncStream=require('./async-stream');var _asyncStream2=_interopRequireDefault(_asyncStream);exports['default']={decrypt:_decrypter.decrypt,Decrypter:_decrypter.Decrypter,AsyncStream:_asyncStream2['default']};module.exports=exports['default'];},{"./async-stream":19,"./decrypter":20}],22:[function(require,module,exports){arguments[4][15][0].apply(exports,arguments)},{"dup":15}],23:[function(require,module,exports){'use strict';var PADDING;module.exports=function pad(plaintext){var padding=PADDING[(plaintext.byteLength%16)||0],result=new Uint8Array(plaintext.byteLength+padding.length);result.set(plaintext);result.set(padding,plaintext.byteLength);return result;};PADDING=[[16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16],[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[14,14,14,14,14,14,14,14,14,14,14,14,14,14],[13,13,13,13,13,13,13,13,13,13,13,13,13],[12,12,12,12,12,12,12,12,12,12,12,12],[11,11,11,11,11,11,11,11,11,11,11],[10,10,10,10,10,10,10,10,10,10],[9,9,9,9,9,9,9,9,9],[8,8,8,8,8,8,8,8],[7,7,7,7,7,7,7],[6,6,6,6,6,6],[5,5,5,5,5],[4,4,4,4],[3,3,3],[2,2],[1]];},{}],24:[function(require,module,exports){'use strict';exports.pad=require('./pad.js');exports.unpad=require('./unpad.js');},{"./pad.js":23,"./unpad.js":25}],25:[function(require,module,exports){'use strict';module.exports=function unpad(padded){return padded.subarray(0,padded.byteLength-padded[padded.byteLength-1]);};},{}],26:[function(require,module,exports){},{}],27:[function(require,module,exports){(function(global){var topLevel=typeof global!=='undefined'?global:typeof window!=='undefined'?window:{}
var minDoc=require('min-document');if(typeof document!=='undefined'){module.exports=document;}else{var doccy=topLevel['__GLOBAL_DOCUMENT_CACHE@4'];if(!doccy){doccy=topLevel['__GLOBAL_DOCUMENT_CACHE@4']=minDoc;}
module.exports=doccy;}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"min-document":26}],28:[function(require,module,exports){(function(global){if(typeof window!=="undefined"){module.exports=window;}else if(typeof global!=="undefined"){module.exports=global;}else if(typeof self!=="undefined"){module.exports=self;}else{module.exports={};}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],29:[function(require,module,exports){'use strict';var _lineStream=require('./line-stream');var _lineStream2=_interopRequireDefault(_lineStream);var _parseStream=require('./parse-stream');var _parseStream2=_interopRequireDefault(_parseStream);var _parser=require('./parser');var _parser2=_interopRequireDefault(_parser);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
module.exports={LineStream:_lineStream2['default'],ParseStream:_parseStream2['default'],Parser:_parser2['default']};},{"./line-stream":30,"./parse-stream":31,"./parser":32}],30:[function(require,module,exports){'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _stream=require('./stream');var _stream2=_interopRequireDefault(_stream);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}
function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}
var LineStream=function(_Stream){_inherits(LineStream,_Stream);function LineStream(){_classCallCheck(this,LineStream);var _this=_possibleConstructorReturn(this,(LineStream.__proto__||Object.getPrototypeOf(LineStream)).call(this));_this.buffer='';return _this;}
_createClass(LineStream,[{key:'push',value:function push(data){var nextNewline=void 0;this.buffer+=data;nextNewline=this.buffer.indexOf('\n');for(;nextNewline>-1;nextNewline=this.buffer.indexOf('\n')){this.trigger('data',this.buffer.substring(0,nextNewline));this.buffer=this.buffer.substring(nextNewline+1);}}}]);return LineStream;}(_stream2['default']);exports['default']=LineStream;},{"./stream":33}],31:[function(require,module,exports){'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"])_i["return"]();}finally{if(_d)throw _e;}}return _arr;}return function(arr,i){if(Array.isArray(arr)){return arr;}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i);}else{throw new TypeError("Invalid attempt to destructure non-iterable instance");}};}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _stream=require('./stream');var _stream2=_interopRequireDefault(_stream);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}
function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}
var attributeSeparator=function attributeSeparator(){var key='[^=]*';var value='"[^"]*"|[^,]*';var keyvalue='(?:'+key+')=(?:'+value+')';return new RegExp('(?:^|,)('+keyvalue+')');};var parseAttributes=function parseAttributes(attributes){var attrs=attributes.split(attributeSeparator());var result={};var i=attrs.length;var attr=void 0;while(i--){if(attrs[i]===''){continue;}
attr=/([^=]*)=(.*)/.exec(attrs[i]).slice(1);attr[0]=attr[0].replace(/^\s+|\s+$/g,'');attr[1]=attr[1].replace(/^\s+|\s+$/g,'');attr[1]=attr[1].replace(/^['"](.*)['"]$/g,'$1');result[attr[0]]=attr[1];}
return result;};var ParseStream=function(_Stream){_inherits(ParseStream,_Stream);function ParseStream(){_classCallCheck(this,ParseStream);return _possibleConstructorReturn(this,(ParseStream.__proto__||Object.getPrototypeOf(ParseStream)).call(this));}
_createClass(ParseStream,[{key:'push',value:function push(line){var match=void 0;var event=void 0;line=line.replace(/^[\u0000\s]+|[\u0000\s]+$/g,'');if(line.length===0){return;}
if(line[0]!=='#'){this.trigger('data',{type:'uri',uri:line});return;}
if(line.indexOf('#EXT')!==0){this.trigger('data',{type:'comment',text:line.slice(1)});return;}
line=line.replace('\r','');match=/^#EXTM3U/.exec(line);if(match){this.trigger('data',{type:'tag',tagType:'m3u'});return;}
match=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(line);if(match){event={type:'tag',tagType:'inf'};if(match[1]){event.duration=parseFloat(match[1]);}
if(match[2]){event.title=match[2];}
this.trigger('data',event);return;}
match=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(line);if(match){event={type:'tag',tagType:'targetduration'};if(match[1]){event.duration=parseInt(match[1],10);}
this.trigger('data',event);return;}
match=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(line);if(match){event={type:'tag',tagType:'totalduration'};if(match[1]){event.duration=parseInt(match[1],10);}
this.trigger('data',event);return;}
match=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(line);if(match){event={type:'tag',tagType:'version'};if(match[1]){event.version=parseInt(match[1],10);}
this.trigger('data',event);return;}
match=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(line);if(match){event={type:'tag',tagType:'media-sequence'};if(match[1]){event.number=parseInt(match[1],10);}
this.trigger('data',event);return;}
match=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(line);if(match){event={type:'tag',tagType:'discontinuity-sequence'};if(match[1]){event.number=parseInt(match[1],10);}
this.trigger('data',event);return;}
match=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(line);if(match){event={type:'tag',tagType:'playlist-type'};if(match[1]){event.playlistType=match[1];}
this.trigger('data',event);return;}
match=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(line);if(match){event={type:'tag',tagType:'byterange'};if(match[1]){event.length=parseInt(match[1],10);}
if(match[2]){event.offset=parseInt(match[2],10);}
this.trigger('data',event);return;}
match=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(line);if(match){event={type:'tag',tagType:'allow-cache'};if(match[1]){event.allowed=!/NO/.test(match[1]);}
this.trigger('data',event);return;}
match=/^#EXT-X-MAP:?(.*)$/.exec(line);if(match){event={type:'tag',tagType:'map'};if(match[1]){var attributes=parseAttributes(match[1]);if(attributes.URI){event.uri=attributes.URI;}
if(attributes.BYTERANGE){var _attributes$BYTERANGE=attributes.BYTERANGE.split('@'),_attributes$BYTERANGE2=_slicedToArray(_attributes$BYTERANGE,2),length=_attributes$BYTERANGE2[0],offset=_attributes$BYTERANGE2[1];event.byterange={};if(length){event.byterange.length=parseInt(length,10);}
if(offset){event.byterange.offset=parseInt(offset,10);}}}
this.trigger('data',event);return;}
match=/^#EXT-X-STREAM-INF:?(.*)$/.exec(line);if(match){event={type:'tag',tagType:'stream-inf'};if(match[1]){event.attributes=parseAttributes(match[1]);if(event.attributes.RESOLUTION){var split=event.attributes.RESOLUTION.split('x');var resolution={};if(split[0]){resolution.width=parseInt(split[0],10);}
if(split[1]){resolution.height=parseInt(split[1],10);}
event.attributes.RESOLUTION=resolution;}
if(event.attributes.BANDWIDTH){event.attributes.BANDWIDTH=parseInt(event.attributes.BANDWIDTH,10);}
if(event.attributes['PROGRAM-ID']){event.attributes['PROGRAM-ID']=parseInt(event.attributes['PROGRAM-ID'],10);}}
this.trigger('data',event);return;}
match=/^#EXT-X-MEDIA:?(.*)$/.exec(line);if(match){event={type:'tag',tagType:'media'};if(match[1]){event.attributes=parseAttributes(match[1]);}
this.trigger('data',event);return;}
match=/^#EXT-X-ENDLIST/.exec(line);if(match){this.trigger('data',{type:'tag',tagType:'endlist'});return;}
match=/^#EXT-X-DISCONTINUITY/.exec(line);if(match){this.trigger('data',{type:'tag',tagType:'discontinuity'});return;}
match=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(line);if(match){event={type:'tag',tagType:'program-date-time'};if(match[1]){event.dateTimeString=match[1];event.dateTimeObject=new Date(match[1]);}
this.trigger('data',event);return;}
match=/^#EXT-X-KEY:?(.*)$/.exec(line);if(match){event={type:'tag',tagType:'key'};if(match[1]){event.attributes=parseAttributes(match[1]);if(event.attributes.IV){if(event.attributes.IV.substring(0,2).toLowerCase()==='0x'){event.attributes.IV=event.attributes.IV.substring(2);}
event.attributes.IV=event.attributes.IV.match(/.{8}/g);event.attributes.IV[0]=parseInt(event.attributes.IV[0],16);event.attributes.IV[1]=parseInt(event.attributes.IV[1],16);event.attributes.IV[2]=parseInt(event.attributes.IV[2],16);event.attributes.IV[3]=parseInt(event.attributes.IV[3],16);event.attributes.IV=new Uint32Array(event.attributes.IV);}}
this.trigger('data',event);return;}
match=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(line);if(match){event={type:'tag',tagType:'cue-out-cont'};if(match[1]){event.data=match[1];}else{event.data='';}
this.trigger('data',event);return;}
match=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(line);if(match){event={type:'tag',tagType:'cue-out'};if(match[1]){event.data=match[1];}else{event.data='';}
this.trigger('data',event);return;}
match=/^#EXT-X-CUE-IN:?(.*)?$/.exec(line);if(match){event={type:'tag',tagType:'cue-in'};if(match[1]){event.data=match[1];}else{event.data='';}
this.trigger('data',event);return;}
this.trigger('data',{type:'tag',data:line.slice(4)});}}]);return ParseStream;}(_stream2['default']);exports['default']=ParseStream;},{"./stream":33}],32:[function(require,module,exports){'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _stream=require('./stream');var _stream2=_interopRequireDefault(_stream);var _lineStream=require('./line-stream');var _lineStream2=_interopRequireDefault(_lineStream);var _parseStream=require('./parse-stream');var _parseStream2=_interopRequireDefault(_parseStream);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}
function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}
var Parser=function(_Stream){_inherits(Parser,_Stream);function Parser(){_classCallCheck(this,Parser);var _this=_possibleConstructorReturn(this,(Parser.__proto__||Object.getPrototypeOf(Parser)).call(this));_this.lineStream=new _lineStream2['default']();_this.parseStream=new _parseStream2['default']();_this.lineStream.pipe(_this.parseStream);var self=_this;var uris=[];var currentUri={};var currentMap=void 0;var _key=void 0;var noop=function noop(){};var defaultMediaGroups={'AUDIO':{},'VIDEO':{},'CLOSED-CAPTIONS':{},'SUBTITLES':{}};var currentTimeline=0;_this.manifest={allowCache:true,discontinuityStarts:[],segments:[]};_this.parseStream.on('data',function(entry){var mediaGroup=void 0;var rendition=void 0;({tag:function tag(){(({'allow-cache':function allowCache(){this.manifest.allowCache=entry.allowed;if(!('allowed'in entry)){this.trigger('info',{message:'defaulting allowCache to YES'});this.manifest.allowCache=true;}},byterange:function byterange(){var byterange={};if('length'in entry){currentUri.byterange=byterange;byterange.length=entry.length;if(!('offset'in entry)){this.trigger('info',{message:'defaulting offset to zero'});entry.offset=0;}}
if('offset'in entry){currentUri.byterange=byterange;byterange.offset=entry.offset;}},endlist:function endlist(){this.manifest.endList=true;},inf:function inf(){if(!('mediaSequence'in this.manifest)){this.manifest.mediaSequence=0;this.trigger('info',{message:'defaulting media sequence to zero'});}
if(!('discontinuitySequence'in this.manifest)){this.manifest.discontinuitySequence=0;this.trigger('info',{message:'defaulting discontinuity sequence to zero'});}
if(entry.duration>0){currentUri.duration=entry.duration;}
if(entry.duration===0){currentUri.duration=0.01;this.trigger('info',{message:'updating zero segment duration to a small value'});}
this.manifest.segments=uris;},key:function key(){if(!entry.attributes){this.trigger('warn',{message:'ignoring key declaration without attribute list'});return;}
if(entry.attributes.METHOD==='NONE'){_key=null;return;}
if(!entry.attributes.URI){this.trigger('warn',{message:'ignoring key declaration without URI'});return;}
if(!entry.attributes.METHOD){this.trigger('warn',{message:'defaulting key method to AES-128'});}
_key={method:entry.attributes.METHOD||'AES-128',uri:entry.attributes.URI};if(typeof entry.attributes.IV!=='undefined'){_key.iv=entry.attributes.IV;}},'media-sequence':function mediaSequence(){if(!isFinite(entry.number)){this.trigger('warn',{message:'ignoring invalid media sequence: '+entry.number});return;}
this.manifest.mediaSequence=entry.number;},'discontinuity-sequence':function discontinuitySequence(){if(!isFinite(entry.number)){this.trigger('warn',{message:'ignoring invalid discontinuity sequence: '+entry.number});return;}
this.manifest.discontinuitySequence=entry.number;currentTimeline=entry.number;},'playlist-type':function playlistType(){if(!/VOD|EVENT/.test(entry.playlistType)){this.trigger('warn',{message:'ignoring unknown playlist type: '+entry.playlist});return;}
this.manifest.playlistType=entry.playlistType;},map:function map(){currentMap={};if(entry.uri){currentMap.uri=entry.uri;}
if(entry.byterange){currentMap.byterange=entry.byterange;}},'stream-inf':function streamInf(){this.manifest.playlists=uris;this.manifest.mediaGroups=this.manifest.mediaGroups||defaultMediaGroups;if(!entry.attributes){this.trigger('warn',{message:'ignoring empty stream-inf attributes'});return;}
if(!currentUri.attributes){currentUri.attributes={};}
_extends(currentUri.attributes,entry.attributes);},media:function media(){this.manifest.mediaGroups=this.manifest.mediaGroups||defaultMediaGroups;if(!(entry.attributes&&entry.attributes.TYPE&&entry.attributes['GROUP-ID']&&entry.attributes.NAME)){this.trigger('warn',{message:'ignoring incomplete or missing media group'});return;}
var mediaGroupType=this.manifest.mediaGroups[entry.attributes.TYPE];mediaGroupType[entry.attributes['GROUP-ID']]=mediaGroupType[entry.attributes['GROUP-ID']]||{};mediaGroup=mediaGroupType[entry.attributes['GROUP-ID']];rendition={'default':/yes/i.test(entry.attributes.DEFAULT)};if(rendition['default']){rendition.autoselect=true;}else{rendition.autoselect=/yes/i.test(entry.attributes.AUTOSELECT);}
if(entry.attributes.LANGUAGE){rendition.language=entry.attributes.LANGUAGE;}
if(entry.attributes.URI){rendition.uri=entry.attributes.URI;}
if(entry.attributes['INSTREAM-ID']){rendition.instreamId=entry.attributes['INSTREAM-ID'];}
mediaGroup[entry.attributes.NAME]=rendition;},discontinuity:function discontinuity(){currentTimeline+=1;currentUri.discontinuity=true;this.manifest.discontinuityStarts.push(uris.length);},'program-date-time':function programDateTime(){this.manifest.dateTimeString=entry.dateTimeString;this.manifest.dateTimeObject=entry.dateTimeObject;},targetduration:function targetduration(){if(!isFinite(entry.duration)||entry.duration<0){this.trigger('warn',{message:'ignoring invalid target duration: '+entry.duration});return;}
this.manifest.targetDuration=entry.duration;},totalduration:function totalduration(){if(!isFinite(entry.duration)||entry.duration<0){this.trigger('warn',{message:'ignoring invalid total duration: '+entry.duration});return;}
this.manifest.totalDuration=entry.duration;},'cue-out':function cueOut(){currentUri.cueOut=entry.data;},'cue-out-cont':function cueOutCont(){currentUri.cueOutCont=entry.data;},'cue-in':function cueIn(){currentUri.cueIn=entry.data;}})[entry.tagType]||noop).call(self);},uri:function uri(){currentUri.uri=entry.uri;uris.push(currentUri);if(this.manifest.targetDuration&&!('duration'in currentUri)){this.trigger('warn',{message:'defaulting segment duration to the target duration'});currentUri.duration=this.manifest.targetDuration;}
if(_key){currentUri.key=_key;}
currentUri.timeline=currentTimeline;if(currentMap){currentUri.map=currentMap;}
currentUri={};},comment:function comment(){}})[entry.type].call(self);});return _this;}
_createClass(Parser,[{key:'push',value:function push(chunk){this.lineStream.push(chunk);}},{key:'end',value:function end(){this.lineStream.push('\n');}}]);return Parser;}(_stream2['default']);exports['default']=Parser;},{"./line-stream":30,"./parse-stream":31,"./stream":33}],33:[function(require,module,exports){'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
var Stream=function(){function Stream(){_classCallCheck(this,Stream);this.listeners={};}
_createClass(Stream,[{key:'on',value:function on(type,listener){if(!this.listeners[type]){this.listeners[type]=[];}
this.listeners[type].push(listener);}},{key:'off',value:function off(type,listener){if(!this.listeners[type]){return false;}
var index=this.listeners[type].indexOf(listener);this.listeners[type].splice(index,1);return index>-1;}},{key:'trigger',value:function trigger(type){var callbacks=this.listeners[type];var i=void 0;var length=void 0;var args=void 0;if(!callbacks){return;}
if(arguments.length===2){length=callbacks.length;for(i=0;i<length;++i){callbacks[i].call(this,arguments[1]);}}else{args=Array.prototype.slice.call(arguments,1);length=callbacks.length;for(i=0;i<length;++i){callbacks[i].apply(this,args);}}}},{key:'dispose',value:function dispose(){this.listeners={};}},{key:'pipe',value:function pipe(destination){this.on('data',function(data){destination.push(data);});}}]);return Stream;}();exports['default']=Stream;},{}],34:[function(require,module,exports){'use strict';var Stream=require('../utils/stream.js');var AacStream;AacStream=function(){var
everything=new Uint8Array(),timeStamp=0;AacStream.prototype.init.call(this);this.setTimestamp=function(timestamp){timeStamp=timestamp;};this.parseId3TagSize=function(header,byteIndex){var
returnSize=(header[byteIndex+6]<<21)|(header[byteIndex+7]<<14)|(header[byteIndex+8]<<7)|(header[byteIndex+9]),flags=header[byteIndex+5],footerPresent=(flags&16)>>4;if(footerPresent){return returnSize+20;}
return returnSize+10;};this.parseAdtsSize=function(header,byteIndex){var
lowThree=(header[byteIndex+5]&0xE0)>>5,middle=header[byteIndex+4]<<3,highTwo=header[byteIndex+3]&0x3<<11;return(highTwo|middle)|lowThree;};this.push=function(bytes){var
frameSize=0,byteIndex=0,bytesLeft,chunk,packet,tempLength;if(everything.length){tempLength=everything.length;everything=new Uint8Array(bytes.byteLength+tempLength);everything.set(everything.subarray(0,tempLength));everything.set(bytes,tempLength);}else{everything=bytes;}
while(everything.length-byteIndex>=3){if((everything[byteIndex]==='I'.charCodeAt(0))&&(everything[byteIndex+1]==='D'.charCodeAt(0))&&(everything[byteIndex+2]==='3'.charCodeAt(0))){if(everything.length-byteIndex<10){break;}
frameSize=this.parseId3TagSize(everything,byteIndex);if(frameSize>everything.length){break;}
chunk={type:'timed-metadata',data:everything.subarray(byteIndex,byteIndex+frameSize)};this.trigger('data',chunk);byteIndex+=frameSize;continue;}else if((everything[byteIndex]&0xff===0xff)&&((everything[byteIndex+1]&0xf0)===0xf0)){if(everything.length-byteIndex<7){break;}
frameSize=this.parseAdtsSize(everything,byteIndex);if(frameSize>everything.length){break;}
packet={type:'audio',data:everything.subarray(byteIndex,byteIndex+frameSize),pts:timeStamp,dts:timeStamp};this.trigger('data',packet);byteIndex+=frameSize;continue;}
byteIndex++;}
bytesLeft=everything.length-byteIndex;if(bytesLeft>0){everything=everything.subarray(byteIndex);}else{everything=new Uint8Array();}};};AacStream.prototype=new Stream();module.exports=AacStream;},{"../utils/stream.js":58}],35:[function(require,module,exports){'use strict';var ADTS_SAMPLING_FREQUENCIES=[96000,88200,64000,48000,44100,32000,24000,22050,16000,12000,11025,8000,7350];var parseSyncSafeInteger=function(data){return(data[0]<<21)|(data[1]<<14)|(data[2]<<7)|(data[3]);};var percentEncode=function(bytes,start,end){var i,result='';for(i=start;i<end;i++){result+='%'+('00'+bytes[i].toString(16)).slice(-2);}
return result;};var parseIso88591=function(bytes,start,end){return unescape(percentEncode(bytes,start,end));};var parseId3TagSize=function(header,byteIndex){var
returnSize=(header[byteIndex+6]<<21)|(header[byteIndex+7]<<14)|(header[byteIndex+8]<<7)|(header[byteIndex+9]),flags=header[byteIndex+5],footerPresent=(flags&16)>>4;if(footerPresent){return returnSize+20;}
return returnSize+10;};var parseAdtsSize=function(header,byteIndex){var
lowThree=(header[byteIndex+5]&0xE0)>>5,middle=header[byteIndex+4]<<3,highTwo=header[byteIndex+3]&0x3<<11;return(highTwo|middle)|lowThree;};var parseType=function(header,byteIndex){if((header[byteIndex]==='I'.charCodeAt(0))&&(header[byteIndex+1]==='D'.charCodeAt(0))&&(header[byteIndex+2]==='3'.charCodeAt(0))){return'timed-metadata';}else if((header[byteIndex]&0xff===0xff)&&((header[byteIndex+1]&0xf0)===0xf0)){return'audio';}
return null;};var parseSampleRate=function(packet){var i=0;while(i+5<packet.length){if(packet[i]!==0xFF||(packet[i+1]&0xF6)!==0xF0){i++;continue;}
return ADTS_SAMPLING_FREQUENCIES[(packet[i+2]&0x3c)>>>2];}
return null;};var parseAacTimestamp=function(packet){var frameStart,frameSize,frame,frameHeader;frameStart=10;if(packet[5]&0x40){frameStart+=4;frameStart+=parseSyncSafeInteger(packet.subarray(10,14));}
do{frameSize=parseSyncSafeInteger(packet.subarray(frameStart+4,frameStart+8));if(frameSize<1){return null;}
frameHeader=String.fromCharCode(packet[frameStart],packet[frameStart+1],packet[frameStart+2],packet[frameStart+3]);if(frameHeader==='PRIV'){frame=packet.subarray(frameStart+10,frameStart+frameSize+10);for(var i=0;i<frame.byteLength;i++){if(frame[i]===0){var owner=parseIso88591(frame,0,i);if(owner==='com.apple.streaming.transportStreamTimestamp'){var d=frame.subarray(i+1);var size=((d[3]&0x01)<<30)|(d[4]<<22)|(d[5]<<14)|(d[6]<<6)|(d[7]>>>2);size*=4;size+=d[7]&0x03;return size;}
break;}}}
frameStart+=10;frameStart+=frameSize;}while(frameStart<packet.byteLength);return null;};module.exports={parseId3TagSize:parseId3TagSize,parseAdtsSize:parseAdtsSize,parseType:parseType,parseSampleRate:parseSampleRate,parseAacTimestamp:parseAacTimestamp};},{}],36:[function(require,module,exports){'use strict';var Stream=require('../utils/stream.js');var AdtsStream;var
ADTS_SAMPLING_FREQUENCIES=[96000,88200,64000,48000,44100,32000,24000,22050,16000,12000,11025,8000,7350];AdtsStream=function(){var buffer;AdtsStream.prototype.init.call(this);this.push=function(packet){var
i=0,frameNum=0,frameLength,protectionSkipBytes,frameEnd,oldBuffer,sampleCount,adtsFrameDuration;if(packet.type!=='audio'){return;}
if(buffer){oldBuffer=buffer;buffer=new Uint8Array(oldBuffer.byteLength+packet.data.byteLength);buffer.set(oldBuffer);buffer.set(packet.data,oldBuffer.byteLength);}else{buffer=packet.data;}
while(i+5<buffer.length){if(buffer[i]!==0xFF||(buffer[i+1]&0xF6)!==0xF0){i++;continue;}
protectionSkipBytes=(~buffer[i+1]&0x01)*2;frameLength=((buffer[i+3]&0x03)<<11)|(buffer[i+4]<<3)|((buffer[i+5]&0xe0)>>5);sampleCount=((buffer[i+6]&0x03)+1)*1024;adtsFrameDuration=(sampleCount*90000)/ADTS_SAMPLING_FREQUENCIES[(buffer[i+2]&0x3c)>>>2];frameEnd=i+frameLength;if(buffer.byteLength<frameEnd){return;}
this.trigger('data',{pts:packet.pts+(frameNum*adtsFrameDuration),dts:packet.dts+(frameNum*adtsFrameDuration),sampleCount:sampleCount,audioobjecttype:((buffer[i+2]>>>6)&0x03)+1,channelcount:((buffer[i+2]&1)<<2)|((buffer[i+3]&0xc0)>>>6),samplerate:ADTS_SAMPLING_FREQUENCIES[(buffer[i+2]&0x3c)>>>2],samplingfrequencyindex:(buffer[i+2]&0x3c)>>>2,samplesize:16,data:buffer.subarray(i+7+protectionSkipBytes,frameEnd)});if(buffer.byteLength===frameEnd){buffer=undefined;return;}
frameNum++;buffer=buffer.subarray(frameEnd);}};this.flush=function(){this.trigger('done');};};AdtsStream.prototype=new Stream();module.exports=AdtsStream;},{"../utils/stream.js":58}],37:[function(require,module,exports){'use strict';var Stream=require('../utils/stream.js');var ExpGolomb=require('../utils/exp-golomb.js');var H264Stream,NalByteStream;var PROFILES_WITH_OPTIONAL_SPS_DATA;NalByteStream=function(){var
syncPoint=0,i,buffer;NalByteStream.prototype.init.call(this);this.push=function(data){var swapBuffer;if(!buffer){buffer=data.data;}else{swapBuffer=new Uint8Array(buffer.byteLength+data.data.byteLength);swapBuffer.set(buffer);swapBuffer.set(data.data,buffer.byteLength);buffer=swapBuffer;}
for(;syncPoint<buffer.byteLength-3;syncPoint++){if(buffer[syncPoint+2]===1){i=syncPoint+5;break;}}
while(i<buffer.byteLength){switch(buffer[i]){case 0:if(buffer[i-1]!==0){i+=2;break;}else if(buffer[i-2]!==0){i++;break;}
if(syncPoint+3!==i-2){this.trigger('data',buffer.subarray(syncPoint+3,i-2));}
do{i++;}while(buffer[i]!==1&&i<buffer.length);syncPoint=i-2;i+=3;break;case 1:if(buffer[i-1]!==0||buffer[i-2]!==0){i+=3;break;}
this.trigger('data',buffer.subarray(syncPoint+3,i-2));syncPoint=i-2;i+=3;break;default:i+=3;break;}}
buffer=buffer.subarray(syncPoint);i-=syncPoint;syncPoint=0;};this.flush=function(){if(buffer&&buffer.byteLength>3){this.trigger('data',buffer.subarray(syncPoint+3));}
buffer=null;syncPoint=0;this.trigger('done');};};NalByteStream.prototype=new Stream();PROFILES_WITH_OPTIONAL_SPS_DATA={100:true,110:true,122:true,244:true,44:true,83:true,86:true,118:true,128:true,138:true,139:true,134:true};H264Stream=function(){var
nalByteStream=new NalByteStream(),self,trackId,currentPts,currentDts,discardEmulationPreventionBytes,readSequenceParameterSet,skipScalingList;H264Stream.prototype.init.call(this);self=this;this.push=function(packet){if(packet.type!=='video'){return;}
trackId=packet.trackId;currentPts=packet.pts;currentDts=packet.dts;nalByteStream.push(packet);};nalByteStream.on('data',function(data){var
event={trackId:trackId,pts:currentPts,dts:currentDts,data:data};switch(data[0]&0x1f){case 0x05:event.nalUnitType='slice_layer_without_partitioning_rbsp_idr';break;case 0x06:event.nalUnitType='sei_rbsp';event.escapedRBSP=discardEmulationPreventionBytes(data.subarray(1));break;case 0x07:event.nalUnitType='seq_parameter_set_rbsp';event.escapedRBSP=discardEmulationPreventionBytes(data.subarray(1));event.config=readSequenceParameterSet(event.escapedRBSP);break;case 0x08:event.nalUnitType='pic_parameter_set_rbsp';break;case 0x09:event.nalUnitType='access_unit_delimiter_rbsp';break;default:break;}
self.trigger('data',event);});nalByteStream.on('done',function(){self.trigger('done');});this.flush=function(){nalByteStream.flush();};skipScalingList=function(count,expGolombDecoder){var
lastScale=8,nextScale=8,j,deltaScale;for(j=0;j<count;j++){if(nextScale!==0){deltaScale=expGolombDecoder.readExpGolomb();nextScale=(lastScale+deltaScale+256)%256;}
lastScale=(nextScale===0)?lastScale:nextScale;}};discardEmulationPreventionBytes=function(data){var
length=data.byteLength,emulationPreventionBytesPositions=[],i=1,newLength,newData;while(i<length-2){if(data[i]===0&&data[i+1]===0&&data[i+2]===0x03){emulationPreventionBytesPositions.push(i+2);i+=2;}else{i++;}}
if(emulationPreventionBytesPositions.length===0){return data;}
newLength=length-emulationPreventionBytesPositions.length;newData=new Uint8Array(newLength);var sourceIndex=0;for(i=0;i<newLength;sourceIndex++,i++){if(sourceIndex===emulationPreventionBytesPositions[0]){sourceIndex++;emulationPreventionBytesPositions.shift();}
newData[i]=data[sourceIndex];}
return newData;};readSequenceParameterSet=function(data){var
frameCropLeftOffset=0,frameCropRightOffset=0,frameCropTopOffset=0,frameCropBottomOffset=0,sarScale=1,expGolombDecoder,profileIdc,levelIdc,profileCompatibility,chromaFormatIdc,picOrderCntType,numRefFramesInPicOrderCntCycle,picWidthInMbsMinus1,picHeightInMapUnitsMinus1,frameMbsOnlyFlag,scalingListCount,sarRatio,aspectRatioIdc,i;expGolombDecoder=new ExpGolomb(data);profileIdc=expGolombDecoder.readUnsignedByte();profileCompatibility=expGolombDecoder.readUnsignedByte();levelIdc=expGolombDecoder.readUnsignedByte();expGolombDecoder.skipUnsignedExpGolomb();if(PROFILES_WITH_OPTIONAL_SPS_DATA[profileIdc]){chromaFormatIdc=expGolombDecoder.readUnsignedExpGolomb();if(chromaFormatIdc===3){expGolombDecoder.skipBits(1);}
expGolombDecoder.skipUnsignedExpGolomb();expGolombDecoder.skipUnsignedExpGolomb();expGolombDecoder.skipBits(1);if(expGolombDecoder.readBoolean()){scalingListCount=(chromaFormatIdc!==3)?8:12;for(i=0;i<scalingListCount;i++){if(expGolombDecoder.readBoolean()){if(i<6){skipScalingList(16,expGolombDecoder);}else{skipScalingList(64,expGolombDecoder);}}}}}
expGolombDecoder.skipUnsignedExpGolomb();picOrderCntType=expGolombDecoder.readUnsignedExpGolomb();if(picOrderCntType===0){expGolombDecoder.readUnsignedExpGolomb();}else if(picOrderCntType===1){expGolombDecoder.skipBits(1);expGolombDecoder.skipExpGolomb();expGolombDecoder.skipExpGolomb();numRefFramesInPicOrderCntCycle=expGolombDecoder.readUnsignedExpGolomb();for(i=0;i<numRefFramesInPicOrderCntCycle;i++){expGolombDecoder.skipExpGolomb();}}
expGolombDecoder.skipUnsignedExpGolomb();expGolombDecoder.skipBits(1);picWidthInMbsMinus1=expGolombDecoder.readUnsignedExpGolomb();picHeightInMapUnitsMinus1=expGolombDecoder.readUnsignedExpGolomb();frameMbsOnlyFlag=expGolombDecoder.readBits(1);if(frameMbsOnlyFlag===0){expGolombDecoder.skipBits(1);}
expGolombDecoder.skipBits(1);if(expGolombDecoder.readBoolean()){frameCropLeftOffset=expGolombDecoder.readUnsignedExpGolomb();frameCropRightOffset=expGolombDecoder.readUnsignedExpGolomb();frameCropTopOffset=expGolombDecoder.readUnsignedExpGolomb();frameCropBottomOffset=expGolombDecoder.readUnsignedExpGolomb();}
if(expGolombDecoder.readBoolean()){if(expGolombDecoder.readBoolean()){aspectRatioIdc=expGolombDecoder.readUnsignedByte();switch(aspectRatioIdc){case 1:sarRatio=[1,1];break;case 2:sarRatio=[12,11];break;case 3:sarRatio=[10,11];break;case 4:sarRatio=[16,11];break;case 5:sarRatio=[40,33];break;case 6:sarRatio=[24,11];break;case 7:sarRatio=[20,11];break;case 8:sarRatio=[32,11];break;case 9:sarRatio=[80,33];break;case 10:sarRatio=[18,11];break;case 11:sarRatio=[15,11];break;case 12:sarRatio=[64,33];break;case 13:sarRatio=[160,99];break;case 14:sarRatio=[4,3];break;case 15:sarRatio=[3,2];break;case 16:sarRatio=[2,1];break;case 255:{sarRatio=[expGolombDecoder.readUnsignedByte()<<8|expGolombDecoder.readUnsignedByte(),expGolombDecoder.readUnsignedByte()<<8|expGolombDecoder.readUnsignedByte()];break;}}
if(sarRatio){sarScale=sarRatio[0]/sarRatio[1];}}}
return{profileIdc:profileIdc,levelIdc:levelIdc,profileCompatibility:profileCompatibility,width:Math.ceil((((picWidthInMbsMinus1+1)*16)-frameCropLeftOffset*2-frameCropRightOffset*2)*sarScale),height:((2-frameMbsOnlyFlag)*(picHeightInMapUnitsMinus1+1)*16)-(frameCropTopOffset*2)-(frameCropBottomOffset*2)};};};H264Stream.prototype=new Stream();module.exports={H264Stream:H264Stream,NalByteStream:NalByteStream};},{"../utils/exp-golomb.js":57,"../utils/stream.js":58}],38:[function(require,module,exports){var highPrefix=[33,16,5,32,164,27];var lowPrefix=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252];var zeroFill=function(count){var a=[];while(count--){a.push(0);}
return a;};var makeTable=function(metaTable){return Object.keys(metaTable).reduce(function(obj,key){obj[key]=new Uint8Array(metaTable[key].reduce(function(arr,part){return arr.concat(part);},[]));return obj;},{});};var coneOfSilence={96000:[highPrefix,[227,64],zeroFill(154),[56]],88200:[highPrefix,[231],zeroFill(170),[56]],64000:[highPrefix,[248,192],zeroFill(240),[56]],48000:[highPrefix,[255,192],zeroFill(268),[55,148,128],zeroFill(54),[112]],44100:[highPrefix,[255,192],zeroFill(268),[55,163,128],zeroFill(84),[112]],32000:[highPrefix,[255,192],zeroFill(268),[55,234],zeroFill(226),[112]],24000:[highPrefix,[255,192],zeroFill(268),[55,255,128],zeroFill(268),[111,112],zeroFill(126),[224]],16000:[highPrefix,[255,192],zeroFill(268),[55,255,128],zeroFill(268),[111,255],zeroFill(269),[223,108],zeroFill(195),[1,192]],12000:[lowPrefix,zeroFill(268),[3,127,248],zeroFill(268),[6,255,240],zeroFill(268),[13,255,224],zeroFill(268),[27,253,128],zeroFill(259),[56]],11025:[lowPrefix,zeroFill(268),[3,127,248],zeroFill(268),[6,255,240],zeroFill(268),[13,255,224],zeroFill(268),[27,255,192],zeroFill(268),[55,175,128],zeroFill(108),[112]],8000:[lowPrefix,zeroFill(268),[3,121,16],zeroFill(47),[7]]};module.exports=makeTable(coneOfSilence);},{}],39:[function(require,module,exports){'use strict';var Stream=require('../utils/stream.js');var CoalesceStream=function(options){this.numberOfTracks=0;this.metadataStream=options.metadataStream;this.videoTags=[];this.audioTags=[];this.videoTrack=null;this.audioTrack=null;this.pendingCaptions=[];this.pendingMetadata=[];this.pendingTracks=0;this.processedTracks=0;CoalesceStream.prototype.init.call(this);this.push=function(output){if(output.text){return this.pendingCaptions.push(output);}
if(output.frames){return this.pendingMetadata.push(output);}
if(output.track.type==='video'){this.videoTrack=output.track;this.videoTags=output.tags;this.pendingTracks++;}
if(output.track.type==='audio'){this.audioTrack=output.track;this.audioTags=output.tags;this.pendingTracks++;}};};CoalesceStream.prototype=new Stream();CoalesceStream.prototype.flush=function(flushSource){var
id3,caption,i,timelineStartPts,event={tags:{},captions:[],metadata:[]};if(this.pendingTracks<this.numberOfTracks){if(flushSource!=='VideoSegmentStream'&&flushSource!=='AudioSegmentStream'){return;}else if(this.pendingTracks===0){this.processedTracks++;if(this.processedTracks<this.numberOfTracks){return;}}}
this.processedTracks+=this.pendingTracks;this.pendingTracks=0;if(this.processedTracks<this.numberOfTracks){return;}
if(this.videoTrack){timelineStartPts=this.videoTrack.timelineStartInfo.pts;}else if(this.audioTrack){timelineStartPts=this.audioTrack.timelineStartInfo.pts;}
event.tags.videoTags=this.videoTags;event.tags.audioTags=this.audioTags;for(i=0;i<this.pendingCaptions.length;i++){caption=this.pendingCaptions[i];caption.startTime=caption.startPts-timelineStartPts;caption.startTime/=90e3;caption.endTime=caption.endPts-timelineStartPts;caption.endTime/=90e3;event.captions.push(caption);}
for(i=0;i<this.pendingMetadata.length;i++){id3=this.pendingMetadata[i];id3.cueTime=id3.pts-timelineStartPts;id3.cueTime/=90e3;event.metadata.push(id3);}
event.metadata.dispatchType=this.metadataStream.dispatchType;this.videoTrack=null;this.audioTrack=null;this.videoTags=[];this.audioTags=[];this.pendingCaptions.length=0;this.pendingMetadata.length=0;this.pendingTracks=0;this.processedTracks=0;this.trigger('data',event);this.trigger('done');};module.exports=CoalesceStream;},{"../utils/stream.js":58}],40:[function(require,module,exports){'use strict';var FlvTag=require('./flv-tag.js');var getFlvHeader=function(duration,audio,video){var
headBytes=new Uint8Array(3+1+1+4),head=new DataView(headBytes.buffer),metadata,result,metadataLength;duration=duration||0;audio=audio===undefined?true:audio;video=video===undefined?true:video;head.setUint8(0,0x46);head.setUint8(1,0x4c);head.setUint8(2,0x56);head.setUint8(3,0x01);head.setUint8(4,(audio?0x04:0x00)|(video?0x01:0x00));head.setUint32(5,headBytes.byteLength);if(duration<=0){result=new Uint8Array(headBytes.byteLength+4);result.set(headBytes);result.set([0,0,0,0],headBytes.byteLength);return result;}
metadata=new FlvTag(FlvTag.METADATA_TAG);metadata.pts=metadata.dts=0;metadata.writeMetaDataDouble('duration',duration);metadataLength=metadata.finalize().length;result=new Uint8Array(headBytes.byteLength+metadataLength);result.set(headBytes);result.set(head.byteLength,metadataLength);return result;};module.exports=getFlvHeader;},{"./flv-tag.js":41}],41:[function(require,module,exports){'use strict';var FlvTag;FlvTag=function(type,extraData){var
adHoc=0,bufferStartSize=16384,prepareWrite=function(flv,count){var
bytes,minLength=flv.position+count;if(minLength<flv.bytes.byteLength){return;}
bytes=new Uint8Array(minLength*2);bytes.set(flv.bytes.subarray(0,flv.position),0);flv.bytes=bytes;flv.view=new DataView(flv.bytes.buffer);},widthBytes=FlvTag.widthBytes||new Uint8Array('width'.length),heightBytes=FlvTag.heightBytes||new Uint8Array('height'.length),videocodecidBytes=FlvTag.videocodecidBytes||new Uint8Array('videocodecid'.length),i;if(!FlvTag.widthBytes){for(i=0;i<'width'.length;i++){widthBytes[i]='width'.charCodeAt(i);}
for(i=0;i<'height'.length;i++){heightBytes[i]='height'.charCodeAt(i);}
for(i=0;i<'videocodecid'.length;i++){videocodecidBytes[i]='videocodecid'.charCodeAt(i);}
FlvTag.widthBytes=widthBytes;FlvTag.heightBytes=heightBytes;FlvTag.videocodecidBytes=videocodecidBytes;}
this.keyFrame=false;switch(type){case FlvTag.VIDEO_TAG:this.length=16;bufferStartSize*=6;break;case FlvTag.AUDIO_TAG:this.length=13;this.keyFrame=true;break;case FlvTag.METADATA_TAG:this.length=29;this.keyFrame=true;break;default:throw new Error('Unknown FLV tag type');}
this.bytes=new Uint8Array(bufferStartSize);this.view=new DataView(this.bytes.buffer);this.bytes[0]=type;this.position=this.length;this.keyFrame=extraData;this.pts=0;this.dts=0;this.writeBytes=function(bytes,offset,length){var
start=offset||0,end;length=length||bytes.byteLength;end=start+length;prepareWrite(this,length);this.bytes.set(bytes.subarray(start,end),this.position);this.position+=length;this.length=Math.max(this.length,this.position);};this.writeByte=function(byte){prepareWrite(this,1);this.bytes[this.position]=byte;this.position++;this.length=Math.max(this.length,this.position);};this.writeShort=function(short){prepareWrite(this,2);this.view.setUint16(this.position,short);this.position+=2;this.length=Math.max(this.length,this.position);};this.negIndex=function(pos){return this.bytes[this.length-pos];};this.nalUnitSize=function(){if(adHoc===0){return 0;}
return this.length-(adHoc+4);};this.startNalUnit=function(){if(adHoc>0){throw new Error('Attempted to create new NAL wihout closing the old one');}
adHoc=this.length;this.length+=4;this.position=this.length;};this.endNalUnit=function(nalContainer){var
nalStart,nalLength;if(this.length===adHoc+4){this.length-=4;}else if(adHoc>0){nalStart=adHoc+4;nalLength=this.length-nalStart;this.position=adHoc;this.view.setUint32(this.position,nalLength);this.position=this.length;if(nalContainer){nalContainer.push(this.bytes.subarray(nalStart,nalStart+nalLength));}}
adHoc=0;};this.writeMetaDataDouble=function(key,val){var i;prepareWrite(this,2+key.length+9);this.view.setUint16(this.position,key.length);this.position+=2;if(key==='width'){this.bytes.set(widthBytes,this.position);this.position+=5;}else if(key==='height'){this.bytes.set(heightBytes,this.position);this.position+=6;}else if(key==='videocodecid'){this.bytes.set(videocodecidBytes,this.position);this.position+=12;}else{for(i=0;i<key.length;i++){this.bytes[this.position]=key.charCodeAt(i);this.position++;}}
this.position++;this.view.setFloat64(this.position,val);this.position+=8;this.length=Math.max(this.length,this.position);++adHoc;};this.writeMetaDataBoolean=function(key,val){var i;prepareWrite(this,2);this.view.setUint16(this.position,key.length);this.position+=2;for(i=0;i<key.length;i++){prepareWrite(this,1);this.bytes[this.position]=key.charCodeAt(i);this.position++;}
prepareWrite(this,2);this.view.setUint8(this.position,0x01);this.position++;this.view.setUint8(this.position,val?0x01:0x00);this.position++;this.length=Math.max(this.length,this.position);++adHoc;};this.finalize=function(){var
dtsDelta,len;switch(this.bytes[0]){case FlvTag.VIDEO_TAG:this.bytes[11]=((this.keyFrame||extraData)?0x10:0x20)|0x07;this.bytes[12]=extraData?0x00:0x01;dtsDelta=this.pts-this.dts;this.bytes[13]=(dtsDelta&0x00FF0000)>>>16;this.bytes[14]=(dtsDelta&0x0000FF00)>>>8;this.bytes[15]=(dtsDelta&0x000000FF)>>>0;break;case FlvTag.AUDIO_TAG:this.bytes[11]=0xAF;this.bytes[12]=extraData?0x00:0x01;break;case FlvTag.METADATA_TAG:this.position=11;this.view.setUint8(this.position,0x02);this.position++;this.view.setUint16(this.position,0x0A);this.position+=2;this.bytes.set([0x6f,0x6e,0x4d,0x65,0x74,0x61,0x44,0x61,0x74,0x61],this.position);this.position+=10;this.bytes[this.position]=0x08;this.position++;this.view.setUint32(this.position,adHoc);this.position=this.length;this.bytes.set([0,0,9],this.position);this.position+=3;this.length=this.position;break;}
len=this.length-11;this.bytes[1]=(len&0x00FF0000)>>>16;this.bytes[2]=(len&0x0000FF00)>>>8;this.bytes[3]=(len&0x000000FF)>>>0;this.bytes[4]=(this.dts&0x00FF0000)>>>16;this.bytes[5]=(this.dts&0x0000FF00)>>>8;this.bytes[6]=(this.dts&0x000000FF)>>>0;this.bytes[7]=(this.dts&0xFF000000)>>>24;this.bytes[8]=0;this.bytes[9]=0;this.bytes[10]=0;prepareWrite(this,4);this.view.setUint32(this.length,this.length);this.length+=4;this.position+=4;this.bytes=this.bytes.subarray(0,this.length);this.frameTime=FlvTag.frameTime(this.bytes);return this;};};FlvTag.AUDIO_TAG=0x08;FlvTag.VIDEO_TAG=0x09;FlvTag.METADATA_TAG=0x12;FlvTag.isAudioFrame=function(tag){return FlvTag.AUDIO_TAG===tag[0];};FlvTag.isVideoFrame=function(tag){return FlvTag.VIDEO_TAG===tag[0];};FlvTag.isMetaData=function(tag){return FlvTag.METADATA_TAG===tag[0];};FlvTag.isKeyFrame=function(tag){if(FlvTag.isVideoFrame(tag)){return tag[11]===0x17;}
if(FlvTag.isAudioFrame(tag)){return true;}
if(FlvTag.isMetaData(tag)){return true;}
return false;};FlvTag.frameTime=function(tag){var pts=tag[4]<<16;pts|=tag[5]<<8;pts|=tag[6]<<0;pts|=tag[7]<<24;return pts;};module.exports=FlvTag;},{}],42:[function(require,module,exports){module.exports={tag:require('./flv-tag'),Transmuxer:require('./transmuxer'),getFlvHeader:require('./flv-header')};},{"./flv-header":40,"./flv-tag":41,"./transmuxer":44}],43:[function(require,module,exports){'use strict';var TagList=function(){var self=this;this.list=[];this.push=function(tag){this.list.push({bytes:tag.bytes,dts:tag.dts,pts:tag.pts,keyFrame:tag.keyFrame,metaDataTag:tag.metaDataTag});};Object.defineProperty(this,'length',{get:function(){return self.list.length;}});};module.exports=TagList;},{}],44:[function(require,module,exports){'use strict';var Stream=require('../utils/stream.js');var FlvTag=require('./flv-tag.js');var m2ts=require('../m2ts/m2ts.js');var AdtsStream=require('../codecs/adts.js');var H264Stream=require('../codecs/h264').H264Stream;var CoalesceStream=require('./coalesce-stream.js');var TagList=require('./tag-list.js');var
Transmuxer,VideoSegmentStream,AudioSegmentStream,collectTimelineInfo,metaDataTag,extraDataTag;collectTimelineInfo=function(track,data){if(typeof data.pts==='number'){if(track.timelineStartInfo.pts===undefined){track.timelineStartInfo.pts=data.pts;}else{track.timelineStartInfo.pts=Math.min(track.timelineStartInfo.pts,data.pts);}}
if(typeof data.dts==='number'){if(track.timelineStartInfo.dts===undefined){track.timelineStartInfo.dts=data.dts;}else{track.timelineStartInfo.dts=Math.min(track.timelineStartInfo.dts,data.dts);}}};metaDataTag=function(track,pts){var
tag=new FlvTag(FlvTag.METADATA_TAG);tag.dts=pts;tag.pts=pts;tag.writeMetaDataDouble('videocodecid',7);tag.writeMetaDataDouble('width',track.width);tag.writeMetaDataDouble('height',track.height);return tag;};extraDataTag=function(track,pts){var
i,tag=new FlvTag(FlvTag.VIDEO_TAG,true);tag.dts=pts;tag.pts=pts;tag.writeByte(0x01);tag.writeByte(track.profileIdc);tag.writeByte(track.profileCompatibility);tag.writeByte(track.levelIdc);tag.writeByte(0xFC|0x03);tag.writeByte(0xE0|0x01);tag.writeShort(track.sps[0].length);tag.writeBytes(track.sps[0]);tag.writeByte(track.pps.length);for(i=0;i<track.pps.length;++i){tag.writeShort(track.pps[i].length);tag.writeBytes(track.pps[i]);}
return tag;};AudioSegmentStream=function(track){var
adtsFrames=[],oldExtraData;AudioSegmentStream.prototype.init.call(this);this.push=function(data){collectTimelineInfo(track,data);if(track&&track.channelcount===undefined){track.audioobjecttype=data.audioobjecttype;track.channelcount=data.channelcount;track.samplerate=data.samplerate;track.samplingfrequencyindex=data.samplingfrequencyindex;track.samplesize=data.samplesize;track.extraData=(track.audioobjecttype<<11)|(track.samplingfrequencyindex<<7)|(track.channelcount<<3);}
data.pts=Math.round(data.pts/90);data.dts=Math.round(data.dts/90);adtsFrames.push(data);};this.flush=function(){var currentFrame,adtsFrame,lastMetaPts,tags=new TagList();if(adtsFrames.length===0){this.trigger('done','AudioSegmentStream');return;}
lastMetaPts=-Infinity;while(adtsFrames.length){currentFrame=adtsFrames.shift();if(track.extraData!==oldExtraData||currentFrame.pts-lastMetaPts>=1000){adtsFrame=new FlvTag(FlvTag.METADATA_TAG);adtsFrame.pts=currentFrame.pts;adtsFrame.dts=currentFrame.dts;adtsFrame.writeMetaDataDouble('audiocodecid',10);adtsFrame.writeMetaDataBoolean('stereo',track.channelcount===2);adtsFrame.writeMetaDataDouble('audiosamplerate',track.samplerate);adtsFrame.writeMetaDataDouble('audiosamplesize',16);tags.push(adtsFrame.finalize());oldExtraData=track.extraData;adtsFrame=new FlvTag(FlvTag.AUDIO_TAG,true);adtsFrame.pts=currentFrame.pts;adtsFrame.dts=currentFrame.dts;adtsFrame.view.setUint16(adtsFrame.position,track.extraData);adtsFrame.position+=2;adtsFrame.length=Math.max(adtsFrame.length,adtsFrame.position);tags.push(adtsFrame.finalize());lastMetaPts=currentFrame.pts;}
adtsFrame=new FlvTag(FlvTag.AUDIO_TAG);adtsFrame.pts=currentFrame.pts;adtsFrame.dts=currentFrame.dts;adtsFrame.writeBytes(currentFrame.data);tags.push(adtsFrame.finalize());}
oldExtraData=null;this.trigger('data',{track:track,tags:tags.list});this.trigger('done','AudioSegmentStream');};};AudioSegmentStream.prototype=new Stream();VideoSegmentStream=function(track){var
nalUnits=[],config,h264Frame;VideoSegmentStream.prototype.init.call(this);this.finishFrame=function(tags,frame){if(!frame){return;}
if(config&&track&&track.newMetadata&&(frame.keyFrame||tags.length===0)){var metaTag=metaDataTag(config,frame.dts).finalize();var extraTag=extraDataTag(track,frame.dts).finalize();metaTag.metaDataTag=extraTag.metaDataTag=true;tags.push(metaTag);tags.push(extraTag);track.newMetadata=false;}
frame.endNalUnit();tags.push(frame.finalize());h264Frame=null;};this.push=function(data){collectTimelineInfo(track,data);data.pts=Math.round(data.pts/90);data.dts=Math.round(data.dts/90);nalUnits.push(data);};this.flush=function(){var
currentNal,tags=new TagList();while(nalUnits.length){if(nalUnits[0].nalUnitType==='access_unit_delimiter_rbsp'){break;}
nalUnits.shift();}
if(nalUnits.length===0){this.trigger('done','VideoSegmentStream');return;}
while(nalUnits.length){currentNal=nalUnits.shift();if(currentNal.nalUnitType==='seq_parameter_set_rbsp'){track.newMetadata=true;config=currentNal.config;track.width=config.width;track.height=config.height;track.sps=[currentNal.data];track.profileIdc=config.profileIdc;track.levelIdc=config.levelIdc;track.profileCompatibility=config.profileCompatibility;h264Frame.endNalUnit();}else if(currentNal.nalUnitType==='pic_parameter_set_rbsp'){track.newMetadata=true;track.pps=[currentNal.data];h264Frame.endNalUnit();}else if(currentNal.nalUnitType==='access_unit_delimiter_rbsp'){if(h264Frame){this.finishFrame(tags,h264Frame);}
h264Frame=new FlvTag(FlvTag.VIDEO_TAG);h264Frame.pts=currentNal.pts;h264Frame.dts=currentNal.dts;}else{if(currentNal.nalUnitType==='slice_layer_without_partitioning_rbsp_idr'){h264Frame.keyFrame=true;}
h264Frame.endNalUnit();}
h264Frame.startNalUnit();h264Frame.writeBytes(currentNal.data);}
if(h264Frame){this.finishFrame(tags,h264Frame);}
this.trigger('data',{track:track,tags:tags.list});this.trigger('done','VideoSegmentStream');};};VideoSegmentStream.prototype=new Stream();Transmuxer=function(options){var
self=this,packetStream,parseStream,elementaryStream,videoTimestampRolloverStream,audioTimestampRolloverStream,timedMetadataTimestampRolloverStream,adtsStream,h264Stream,videoSegmentStream,audioSegmentStream,captionStream,coalesceStream;Transmuxer.prototype.init.call(this);options=options||{};this.metadataStream=new m2ts.MetadataStream();options.metadataStream=this.metadataStream;packetStream=new m2ts.TransportPacketStream();parseStream=new m2ts.TransportParseStream();elementaryStream=new m2ts.ElementaryStream();videoTimestampRolloverStream=new m2ts.TimestampRolloverStream('video');audioTimestampRolloverStream=new m2ts.TimestampRolloverStream('audio');timedMetadataTimestampRolloverStream=new m2ts.TimestampRolloverStream('timed-metadata');adtsStream=new AdtsStream();h264Stream=new H264Stream();coalesceStream=new CoalesceStream(options);packetStream.pipe(parseStream).pipe(elementaryStream);elementaryStream.pipe(videoTimestampRolloverStream).pipe(h264Stream);elementaryStream.pipe(audioTimestampRolloverStream).pipe(adtsStream);elementaryStream.pipe(timedMetadataTimestampRolloverStream).pipe(this.metadataStream).pipe(coalesceStream);captionStream=new m2ts.CaptionStream();h264Stream.pipe(captionStream).pipe(coalesceStream);elementaryStream.on('data',function(data){var i,videoTrack,audioTrack;if(data.type==='metadata'){i=data.tracks.length;while(i--){if(data.tracks[i].type==='video'){videoTrack=data.tracks[i];}else if(data.tracks[i].type==='audio'){audioTrack=data.tracks[i];}}
if(videoTrack&&!videoSegmentStream){coalesceStream.numberOfTracks++;videoSegmentStream=new VideoSegmentStream(videoTrack);h264Stream.pipe(videoSegmentStream).pipe(coalesceStream);}
if(audioTrack&&!audioSegmentStream){coalesceStream.numberOfTracks++;audioSegmentStream=new AudioSegmentStream(audioTrack);adtsStream.pipe(audioSegmentStream).pipe(coalesceStream);}}});this.push=function(data){packetStream.push(data);};this.flush=function(){packetStream.flush();};coalesceStream.on('data',function(event){self.trigger('data',event);});coalesceStream.on('done',function(){self.trigger('done');});};Transmuxer.prototype=new Stream();module.exports=Transmuxer;},{"../codecs/adts.js":36,"../codecs/h264":37,"../m2ts/m2ts.js":46,"../utils/stream.js":58,"./coalesce-stream.js":39,"./flv-tag.js":41,"./tag-list.js":43}],45:[function(require,module,exports){'use strict';var USER_DATA_REGISTERED_ITU_T_T35=4,RBSP_TRAILING_BITS=128,Stream=require('../utils/stream');var parseSei=function(bytes){var
i=0,result={payloadType:-1,payloadSize:0},payloadType=0,payloadSize=0;while(i<bytes.byteLength){if(bytes[i]===RBSP_TRAILING_BITS){break;}
while(bytes[i]===0xFF){payloadType+=255;i++;}
payloadType+=bytes[i++];while(bytes[i]===0xFF){payloadSize+=255;i++;}
payloadSize+=bytes[i++];if(!result.payload&&payloadType===USER_DATA_REGISTERED_ITU_T_T35){result.payloadType=payloadType;result.payloadSize=payloadSize;result.payload=bytes.subarray(i,i+payloadSize);break;}
i+=payloadSize;payloadType=0;payloadSize=0;}
return result;};var parseUserData=function(sei){if(sei.payload[0]!==181){return null;}
if(((sei.payload[1]<<8)|sei.payload[2])!==49){return null;}
if(String.fromCharCode(sei.payload[3],sei.payload[4],sei.payload[5],sei.payload[6])!=='GA94'){return null;}
if(sei.payload[7]!==0x03){return null;}
return sei.payload.subarray(8,sei.payload.length-1);};var parseCaptionPackets=function(pts,userData){var results=[],i,count,offset,data;if(!(userData[0]&0x40)){return results;}
count=userData[0]&0x1f;for(i=0;i<count;i++){offset=i*3;data={type:userData[offset+2]&0x03,pts:pts};if(userData[offset+2]&0x04){data.ccData=(userData[offset+3]<<8)|userData[offset+4];results.push(data);}}
return results;};var CaptionStream=function(){CaptionStream.prototype.init.call(this);this.captionPackets_=[];this.field1_=new Cea608Stream();this.field1_.on('data',this.trigger.bind(this,'data'));this.field1_.on('done',this.trigger.bind(this,'done'));};CaptionStream.prototype=new Stream();CaptionStream.prototype.push=function(event){var sei,userData;if(event.nalUnitType!=='sei_rbsp'){return;}
sei=parseSei(event.escapedRBSP);if(sei.payloadType!==USER_DATA_REGISTERED_ITU_T_T35){return;}
userData=parseUserData(sei);if(!userData){return;}
this.captionPackets_=this.captionPackets_.concat(parseCaptionPackets(event.pts,userData));};CaptionStream.prototype.flush=function(){if(!this.captionPackets_.length){this.field1_.flush();return;}
this.captionPackets_.forEach(function(elem,idx){elem.presortIndex=idx;});this.captionPackets_.sort(function(a,b){if(a.pts===b.pts){return a.presortIndex-b.presortIndex;}
return a.pts-b.pts;});this.captionPackets_.forEach(this.field1_.push,this.field1_);this.captionPackets_.length=0;this.field1_.flush();return;};var BASIC_CHARACTER_TRANSLATION={0x2a:0xe1,0x5c:0xe9,0x5e:0xed,0x5f:0xf3,0x60:0xfa,0x7b:0xe7,0x7c:0xf7,0x7d:0xd1,0x7e:0xf1,0x7f:0x2588};var getCharFromCode=function(code){if(code===null){return'';}
code=BASIC_CHARACTER_TRANSLATION[code]||code;return String.fromCharCode(code);};var PADDING=0x0000,RESUME_CAPTION_LOADING=0x1420,END_OF_CAPTION=0x142f,ROLL_UP_2_ROWS=0x1425,ROLL_UP_3_ROWS=0x1426,ROLL_UP_4_ROWS=0x1427,CARRIAGE_RETURN=0x142d,BACKSPACE=0x1421,ERASE_DISPLAYED_MEMORY=0x142c,ERASE_NON_DISPLAYED_MEMORY=0x142e;var BOTTOM_ROW=14;var createDisplayBuffer=function(){var result=[],i=BOTTOM_ROW+1;while(i--){result.push('');}
return result;};var Cea608Stream=function(){Cea608Stream.prototype.init.call(this);this.mode_='popOn';this.topRow_=0;this.startPts_=0;this.displayed_=createDisplayBuffer();this.nonDisplayed_=createDisplayBuffer();this.lastControlCode_=null;this.push=function(packet){if(packet.type!==0){return;}
var data,swap,char0,char1;data=packet.ccData&0x7f7f;if(data===this.lastControlCode_){this.lastControlCode_=null;return;}
if((data&0xf000)===0x1000){this.lastControlCode_=data;}else{this.lastControlCode_=null;}
switch(data){case PADDING:break;case RESUME_CAPTION_LOADING:this.mode_='popOn';break;case END_OF_CAPTION:this.flushDisplayed(packet.pts);swap=this.displayed_;this.displayed_=this.nonDisplayed_;this.nonDisplayed_=swap;this.startPts_=packet.pts;break;case ROLL_UP_2_ROWS:this.topRow_=BOTTOM_ROW-1;this.mode_='rollUp';break;case ROLL_UP_3_ROWS:this.topRow_=BOTTOM_ROW-2;this.mode_='rollUp';break;case ROLL_UP_4_ROWS:this.topRow_=BOTTOM_ROW-3;this.mode_='rollUp';break;case CARRIAGE_RETURN:this.flushDisplayed(packet.pts);this.shiftRowsUp_();this.startPts_=packet.pts;break;case BACKSPACE:if(this.mode_==='popOn'){this.nonDisplayed_[BOTTOM_ROW]=this.nonDisplayed_[BOTTOM_ROW].slice(0,-1);}else{this.displayed_[BOTTOM_ROW]=this.displayed_[BOTTOM_ROW].slice(0,-1);}
break;case ERASE_DISPLAYED_MEMORY:this.flushDisplayed(packet.pts);this.displayed_=createDisplayBuffer();break;case ERASE_NON_DISPLAYED_MEMORY:this.nonDisplayed_=createDisplayBuffer();break;default:char0=data>>>8;char1=data&0xff;if(char0>=0x10&&char0<=0x17&&char1>=0x40&&char1<=0x7F&&(char0!==0x10||char1<0x60)){char0=0x20;char1=null;}
if((char0===0x11||char0===0x19)&&(char1>=0x30&&char1<=0x3F)){char0=0x266A;char1='';}
if((char0&0xf0)===0x10){return;}
if(char0===0x00){char0=null;}
if(char1===0x00){char1=null;}
this[this.mode_](packet.pts,char0,char1);break;}};};Cea608Stream.prototype=new Stream();Cea608Stream.prototype.flushDisplayed=function(pts){var content=this.displayed_.map(function(row){return row.trim();}).filter(function(row){return row.length;}).join('\n');if(content.length){this.trigger('data',{startPts:this.startPts_,endPts:pts,text:content});}};Cea608Stream.prototype.popOn=function(pts,char0,char1){var baseRow=this.nonDisplayed_[BOTTOM_ROW];baseRow+=getCharFromCode(char0);baseRow+=getCharFromCode(char1);this.nonDisplayed_[BOTTOM_ROW]=baseRow;};Cea608Stream.prototype.rollUp=function(pts,char0,char1){var baseRow=this.displayed_[BOTTOM_ROW];if(baseRow===''){this.flushDisplayed(pts);this.startPts_=pts;}
baseRow+=getCharFromCode(char0);baseRow+=getCharFromCode(char1);this.displayed_[BOTTOM_ROW]=baseRow;};Cea608Stream.prototype.shiftRowsUp_=function(){var i;for(i=0;i<this.topRow_;i++){this.displayed_[i]='';}
for(i=this.topRow_;i<BOTTOM_ROW;i++){this.displayed_[i]=this.displayed_[i+1];}
this.displayed_[BOTTOM_ROW]='';};module.exports={CaptionStream:CaptionStream,Cea608Stream:Cea608Stream};},{"../utils/stream":58}],46:[function(require,module,exports){'use strict';var Stream=require('../utils/stream.js'),CaptionStream=require('./caption-stream'),StreamTypes=require('./stream-types'),TimestampRolloverStream=require('./timestamp-rollover-stream').TimestampRolloverStream;var m2tsStreamTypes=require('./stream-types.js');var TransportPacketStream,TransportParseStream,ElementaryStream;var
MP2T_PACKET_LENGTH=188,SYNC_BYTE=0x47;TransportPacketStream=function(){var
buffer=new Uint8Array(MP2T_PACKET_LENGTH),bytesInBuffer=0;TransportPacketStream.prototype.init.call(this);this.push=function(bytes){var
startIndex=0,endIndex=MP2T_PACKET_LENGTH,everything;if(bytesInBuffer){everything=new Uint8Array(bytes.byteLength+bytesInBuffer);everything.set(buffer.subarray(0,bytesInBuffer));everything.set(bytes,bytesInBuffer);bytesInBuffer=0;}else{everything=bytes;}
while(endIndex<everything.byteLength){if(everything[startIndex]===SYNC_BYTE&&everything[endIndex]===SYNC_BYTE){this.trigger('data',everything.subarray(startIndex,endIndex));startIndex+=MP2T_PACKET_LENGTH;endIndex+=MP2T_PACKET_LENGTH;continue;}
startIndex++;endIndex++;}
if(startIndex<everything.byteLength){buffer.set(everything.subarray(startIndex),0);bytesInBuffer=everything.byteLength-startIndex;}};this.flush=function(){if(bytesInBuffer===MP2T_PACKET_LENGTH&&buffer[0]===SYNC_BYTE){this.trigger('data',buffer);bytesInBuffer=0;}
this.trigger('done');};};TransportPacketStream.prototype=new Stream();TransportParseStream=function(){var parsePsi,parsePat,parsePmt,self;TransportParseStream.prototype.init.call(this);self=this;this.packetsWaitingForPmt=[];this.programMapTable=undefined;parsePsi=function(payload,psi){var offset=0;if(psi.payloadUnitStartIndicator){offset+=payload[offset]+1;}
if(psi.type==='pat'){parsePat(payload.subarray(offset),psi);}else{parsePmt(payload.subarray(offset),psi);}};parsePat=function(payload,pat){pat.section_number=payload[7];pat.last_section_number=payload[8];self.pmtPid=(payload[10]&0x1F)<<8|payload[11];pat.pmtPid=self.pmtPid;};parsePmt=function(payload,pmt){var sectionLength,tableEnd,programInfoLength,offset;if(!(payload[5]&0x01)){return;}
self.programMapTable={};sectionLength=(payload[1]&0x0f)<<8|payload[2];tableEnd=3+sectionLength-4;programInfoLength=(payload[10]&0x0f)<<8|payload[11];offset=12+programInfoLength;while(offset<tableEnd){self.programMapTable[(payload[offset+1]&0x1F)<<8|payload[offset+2]]=payload[offset];offset+=((payload[offset+3]&0x0F)<<8|payload[offset+4])+5;}
pmt.programMapTable=self.programMapTable;while(self.packetsWaitingForPmt.length){self.processPes_.apply(self,self.packetsWaitingForPmt.shift());}};this.push=function(packet){var
result={},offset=4;result.payloadUnitStartIndicator=!!(packet[1]&0x40);result.pid=packet[1]&0x1f;result.pid<<=8;result.pid|=packet[2];if(((packet[3]&0x30)>>>4)>0x01){offset+=packet[offset]+1;}
if(result.pid===0){result.type='pat';parsePsi(packet.subarray(offset),result);this.trigger('data',result);}else if(result.pid===this.pmtPid){result.type='pmt';parsePsi(packet.subarray(offset),result);this.trigger('data',result);}else if(this.programMapTable===undefined){this.packetsWaitingForPmt.push([packet,offset,result]);}else{this.processPes_(packet,offset,result);}};this.processPes_=function(packet,offset,result){result.streamType=this.programMapTable[result.pid];result.type='pes';result.data=packet.subarray(offset);this.trigger('data',result);};};TransportParseStream.prototype=new Stream();TransportParseStream.STREAM_TYPES={h264:0x1b,adts:0x0f};ElementaryStream=function(){var
self=this,video={data:[],size:0},audio={data:[],size:0},timedMetadata={data:[],size:0},parsePes=function(payload,pes){var ptsDtsFlags;pes.dataAlignmentIndicator=(payload[6]&0x04)!==0;ptsDtsFlags=payload[7];if(ptsDtsFlags&0xC0){pes.pts=(payload[9]&0x0E)<<27|(payload[10]&0xFF)<<20|(payload[11]&0xFE)<<12|(payload[12]&0xFF)<<5|(payload[13]&0xFE)>>>3;pes.pts*=4;pes.pts+=(payload[13]&0x06)>>>1;pes.dts=pes.pts;if(ptsDtsFlags&0x40){pes.dts=(payload[14]&0x0E)<<27|(payload[15]&0xFF)<<20|(payload[16]&0xFE)<<12|(payload[17]&0xFF)<<5|(payload[18]&0xFE)>>>3;pes.dts*=4;pes.dts+=(payload[18]&0x06)>>>1;}}
pes.data=payload.subarray(9+payload[8]);},flushStream=function(stream,type){var
packetData=new Uint8Array(stream.size),event={type:type},i=0,fragment;if(!stream.data.length){return;}
event.trackId=stream.data[0].pid;while(stream.data.length){fragment=stream.data.shift();packetData.set(fragment.data,i);i+=fragment.data.byteLength;}
parsePes(packetData,event);stream.size=0;self.trigger('data',event);};ElementaryStream.prototype.init.call(this);this.push=function(data){({pat:function(){},pes:function(){var stream,streamType;switch(data.streamType){case StreamTypes.H264_STREAM_TYPE:case m2tsStreamTypes.H264_STREAM_TYPE:stream=video;streamType='video';break;case StreamTypes.ADTS_STREAM_TYPE:stream=audio;streamType='audio';break;case StreamTypes.METADATA_STREAM_TYPE:stream=timedMetadata;streamType='timed-metadata';break;default:return;}
if(data.payloadUnitStartIndicator){flushStream(stream,streamType);}
stream.data.push(data);stream.size+=data.data.byteLength;},pmt:function(){var
event={type:'metadata',tracks:[]},programMapTable=data.programMapTable,k,track;for(k in programMapTable){if(programMapTable.hasOwnProperty(k)){track={timelineStartInfo:{baseMediaDecodeTime:0}};track.id=+k;if(programMapTable[k]===m2tsStreamTypes.H264_STREAM_TYPE){track.codec='avc';track.type='video';}else if(programMapTable[k]===m2tsStreamTypes.ADTS_STREAM_TYPE){track.codec='adts';track.type='audio';}
event.tracks.push(track);}}
self.trigger('data',event);}})[data.type]();};this.flush=function(){flushStream(video,'video');flushStream(audio,'audio');flushStream(timedMetadata,'timed-metadata');this.trigger('done');};};ElementaryStream.prototype=new Stream();var m2ts={PAT_PID:0x0000,MP2T_PACKET_LENGTH:MP2T_PACKET_LENGTH,TransportPacketStream:TransportPacketStream,TransportParseStream:TransportParseStream,ElementaryStream:ElementaryStream,TimestampRolloverStream:TimestampRolloverStream,CaptionStream:CaptionStream.CaptionStream,Cea608Stream:CaptionStream.Cea608Stream,MetadataStream:require('./metadata-stream')};for(var type in StreamTypes){if(StreamTypes.hasOwnProperty(type)){m2ts[type]=StreamTypes[type];}}
module.exports=m2ts;},{"../utils/stream.js":58,"./caption-stream":45,"./metadata-stream":47,"./stream-types":49,"./stream-types.js":49,"./timestamp-rollover-stream":50}],47:[function(require,module,exports){'use strict';var
Stream=require('../utils/stream'),StreamTypes=require('./stream-types'),percentEncode=function(bytes,start,end){var i,result='';for(i=start;i<end;i++){result+='%'+('00'+bytes[i].toString(16)).slice(-2);}
return result;},parseUtf8=function(bytes,start,end){return decodeURIComponent(percentEncode(bytes,start,end));},parseIso88591=function(bytes,start,end){return unescape(percentEncode(bytes,start,end));},parseSyncSafeInteger=function(data){return(data[0]<<21)|(data[1]<<14)|(data[2]<<7)|(data[3]);},tagParsers={TXXX:function(tag){var i;if(tag.data[0]!==3){return;}
for(i=1;i<tag.data.length;i++){if(tag.data[i]===0){tag.description=parseUtf8(tag.data,1,i);tag.value=parseUtf8(tag.data,i+1,tag.data.length-1);break;}}
tag.data=tag.value;},WXXX:function(tag){var i;if(tag.data[0]!==3){return;}
for(i=1;i<tag.data.length;i++){if(tag.data[i]===0){tag.description=parseUtf8(tag.data,1,i);tag.url=parseUtf8(tag.data,i+1,tag.data.length);break;}}},PRIV:function(tag){var i;for(i=0;i<tag.data.length;i++){if(tag.data[i]===0){tag.owner=parseIso88591(tag.data,0,i);break;}}
tag.privateData=tag.data.subarray(i+1);tag.data=tag.privateData;}},MetadataStream;MetadataStream=function(options){var
settings={debug:!!(options&&options.debug),descriptor:options&&options.descriptor},tagSize=0,buffer=[],bufferSize=0,i;MetadataStream.prototype.init.call(this);this.dispatchType=StreamTypes.METADATA_STREAM_TYPE.toString(16);if(settings.descriptor){for(i=0;i<settings.descriptor.length;i++){this.dispatchType+=('00'+settings.descriptor[i].toString(16)).slice(-2);}}
this.push=function(chunk){var tag,frameStart,frameSize,frame,i,frameHeader;if(chunk.type!=='timed-metadata'){return;}
if(chunk.dataAlignmentIndicator){bufferSize=0;buffer.length=0;}
if(buffer.length===0&&(chunk.data.length<10||chunk.data[0]!=='I'.charCodeAt(0)||chunk.data[1]!=='D'.charCodeAt(0)||chunk.data[2]!=='3'.charCodeAt(0))){if(settings.debug){console.log('Skipping unrecognized metadata packet');}
return;}
buffer.push(chunk);bufferSize+=chunk.data.byteLength;if(buffer.length===1){tagSize=parseSyncSafeInteger(chunk.data.subarray(6,10));tagSize+=10;}
if(bufferSize<tagSize){return;}
tag={data:new Uint8Array(tagSize),frames:[],pts:buffer[0].pts,dts:buffer[0].dts};for(i=0;i<tagSize;){tag.data.set(buffer[0].data.subarray(0,tagSize-i),i);i+=buffer[0].data.byteLength;bufferSize-=buffer[0].data.byteLength;buffer.shift();}
frameStart=10;if(tag.data[5]&0x40){frameStart+=4;frameStart+=parseSyncSafeInteger(tag.data.subarray(10,14));tagSize-=parseSyncSafeInteger(tag.data.subarray(16,20));}
do{frameSize=parseSyncSafeInteger(tag.data.subarray(frameStart+4,frameStart+8));if(frameSize<1){return console.log('Malformed ID3 frame encountered. Skipping metadata parsing.');}
frameHeader=String.fromCharCode(tag.data[frameStart],tag.data[frameStart+1],tag.data[frameStart+2],tag.data[frameStart+3]);frame={id:frameHeader,data:tag.data.subarray(frameStart+10,frameStart+frameSize+10)};frame.key=frame.id;if(tagParsers[frame.id]){tagParsers[frame.id](frame);if(frame.owner==='com.apple.streaming.transportStreamTimestamp'){var
d=frame.data,size=((d[3]&0x01)<<30)|(d[4]<<22)|(d[5]<<14)|(d[6]<<6)|(d[7]>>>2);size*=4;size+=d[7]&0x03;frame.timeStamp=size;if(tag.pts===undefined&&tag.dts===undefined){tag.pts=frame.timeStamp;tag.dts=frame.timeStamp;}
this.trigger('timestamp',frame);}}
tag.frames.push(frame);frameStart+=10;frameStart+=frameSize;}while(frameStart<tagSize);this.trigger('data',tag);};};MetadataStream.prototype=new Stream();module.exports=MetadataStream;},{"../utils/stream":58,"./stream-types":49}],48:[function(require,module,exports){'use strict';var StreamTypes=require('./stream-types.js');var parsePid=function(packet){var pid=packet[1]&0x1f;pid<<=8;pid|=packet[2];return pid;};var parsePayloadUnitStartIndicator=function(packet){return!!(packet[1]&0x40);};var parseAdaptionField=function(packet){var offset=0;if(((packet[3]&0x30)>>>4)>0x01){offset+=packet[4]+1;}
return offset;};var parseType=function(packet,pmtPid){var pid=parsePid(packet);if(pid===0){return'pat';}else if(pid===pmtPid){return'pmt';}else if(pmtPid){return'pes';}
return null;};var parsePat=function(packet){var pusi=parsePayloadUnitStartIndicator(packet);var offset=4+parseAdaptionField(packet);if(pusi){offset+=packet[offset]+1;}
return(packet[offset+10]&0x1f)<<8|packet[offset+11];};var parsePmt=function(packet){var programMapTable={};var pusi=parsePayloadUnitStartIndicator(packet);var payloadOffset=4+parseAdaptionField(packet);if(pusi){payloadOffset+=packet[payloadOffset]+1;}
if(!(packet[payloadOffset+5]&0x01)){return;}
var sectionLength,tableEnd,programInfoLength;sectionLength=(packet[payloadOffset+1]&0x0f)<<8|packet[payloadOffset+2];tableEnd=3+sectionLength-4;programInfoLength=(packet[payloadOffset+10]&0x0f)<<8|packet[payloadOffset+11];var offset=12+programInfoLength;while(offset<tableEnd){var i=payloadOffset+offset;programMapTable[(packet[i+1]&0x1F)<<8|packet[i+2]]=packet[i];offset+=((packet[i+3]&0x0F)<<8|packet[i+4])+5;}
return programMapTable;};var parsePesType=function(packet,programMapTable){var pid=parsePid(packet);var type=programMapTable[pid];switch(type){case StreamTypes.H264_STREAM_TYPE:return'video';case StreamTypes.ADTS_STREAM_TYPE:return'audio';case StreamTypes.METADATA_STREAM_TYPE:return'timed-metadata';default:return null;}};var parsePesTime=function(packet){var pusi=parsePayloadUnitStartIndicator(packet);if(!pusi){return null;}
var offset=4+parseAdaptionField(packet);var pes={};var ptsDtsFlags;ptsDtsFlags=packet[offset+7];if(ptsDtsFlags&0xC0){pes.pts=(packet[offset+9]&0x0E)<<27|(packet[offset+10]&0xFF)<<20|(packet[offset+11]&0xFE)<<12|(packet[offset+12]&0xFF)<<5|(packet[offset+13]&0xFE)>>>3;pes.pts*=4;pes.pts+=(packet[offset+13]&0x06)>>>1;pes.dts=pes.pts;if(ptsDtsFlags&0x40){pes.dts=(packet[offset+14]&0x0E)<<27|(packet[offset+15]&0xFF)<<20|(packet[offset+16]&0xFE)<<12|(packet[offset+17]&0xFF)<<5|(packet[offset+18]&0xFE)>>>3;pes.dts*=4;pes.dts+=(packet[offset+18]&0x06)>>>1;}}
return pes;};var parseNalUnitType=function(type){switch(type){case 0x05:return'slice_layer_without_partitioning_rbsp_idr';case 0x06:return'sei_rbsp';case 0x07:return'seq_parameter_set_rbsp';case 0x08:return'pic_parameter_set_rbsp';case 0x09:return'access_unit_delimiter_rbsp';default:return null;}};var videoPacketContainsKeyFrame=function(packet){var offset=4+parseAdaptionField(packet);var frameBuffer=packet.subarray(offset);var frameI=0;var frameSyncPoint=0;var foundKeyFrame=false;var nalType;for(;frameSyncPoint<frameBuffer.byteLength-3;frameSyncPoint++){if(frameBuffer[frameSyncPoint+2]===1){frameI=frameSyncPoint+5;break;}}
while(frameI<frameBuffer.byteLength){switch(frameBuffer[frameI]){case 0:if(frameBuffer[frameI-1]!==0){frameI+=2;break;}else if(frameBuffer[frameI-2]!==0){frameI++;break;}
if(frameSyncPoint+3!==frameI-2){nalType=parseNalUnitType(frameBuffer[frameSyncPoint+3]&0x1f);if(nalType==='slice_layer_without_partitioning_rbsp_idr'){foundKeyFrame=true;}}
do{frameI++;}while(frameBuffer[frameI]!==1&&frameI<frameBuffer.length);frameSyncPoint=frameI-2;frameI+=3;break;case 1:if(frameBuffer[frameI-1]!==0||frameBuffer[frameI-2]!==0){frameI+=3;break;}
nalType=parseNalUnitType(frameBuffer[frameSyncPoint+3]&0x1f);if(nalType==='slice_layer_without_partitioning_rbsp_idr'){foundKeyFrame=true;}
frameSyncPoint=frameI-2;frameI+=3;break;default:frameI+=3;break;}}
frameBuffer=frameBuffer.subarray(frameSyncPoint);frameI-=frameSyncPoint;frameSyncPoint=0;if(frameBuffer&&frameBuffer.byteLength>3){nalType=parseNalUnitType(frameBuffer[frameSyncPoint+3]&0x1f);if(nalType==='slice_layer_without_partitioning_rbsp_idr'){foundKeyFrame=true;}}
return foundKeyFrame;};module.exports={parseType:parseType,parsePat:parsePat,parsePmt:parsePmt,parsePayloadUnitStartIndicator:parsePayloadUnitStartIndicator,parsePesType:parsePesType,parsePesTime:parsePesTime,videoPacketContainsKeyFrame:videoPacketContainsKeyFrame};},{"./stream-types.js":49}],49:[function(require,module,exports){'use strict';module.exports={H264_STREAM_TYPE:0x1B,ADTS_STREAM_TYPE:0x0F,METADATA_STREAM_TYPE:0x15};},{}],50:[function(require,module,exports){'use strict';var Stream=require('../utils/stream');var MAX_TS=8589934592;var RO_THRESH=4294967296;var handleRollover=function(value,reference){var direction=1;if(value>reference){direction=-1;}
while(Math.abs(reference-value)>RO_THRESH){value+=(direction*MAX_TS);}
return value;};var TimestampRolloverStream=function(type){var lastDTS,referenceDTS;TimestampRolloverStream.prototype.init.call(this);this.type_=type;this.push=function(data){if(data.type!==this.type_){return;}
if(referenceDTS===undefined){referenceDTS=data.dts;}
data.dts=handleRollover(data.dts,referenceDTS);data.pts=handleRollover(data.pts,referenceDTS);lastDTS=data.dts;this.trigger('data',data);};this.flush=function(){referenceDTS=lastDTS;this.trigger('done');};};TimestampRolloverStream.prototype=new Stream();module.exports={TimestampRolloverStream:TimestampRolloverStream,handleRollover:handleRollover};},{"../utils/stream":58}],51:[function(require,module,exports){module.exports={generator:require('./mp4-generator'),Transmuxer:require('./transmuxer').Transmuxer,AudioSegmentStream:require('./transmuxer').AudioSegmentStream,VideoSegmentStream:require('./transmuxer').VideoSegmentStream};},{"./mp4-generator":52,"./transmuxer":54}],52:[function(require,module,exports){'use strict';var UINT32_MAX=Math.pow(2,32)-1;var box,dinf,esds,ftyp,mdat,mfhd,minf,moof,moov,mvex,mvhd,trak,tkhd,mdia,mdhd,hdlr,sdtp,stbl,stsd,traf,trex,trun,types,MAJOR_BRAND,MINOR_VERSION,AVC1_BRAND,VIDEO_HDLR,AUDIO_HDLR,HDLR_TYPES,VMHD,SMHD,DREF,STCO,STSC,STSZ,STTS;(function(){var i;types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};if(typeof Uint8Array==='undefined'){return;}
for(i in types){if(types.hasOwnProperty(i)){types[i]=[i.charCodeAt(0),i.charCodeAt(1),i.charCodeAt(2),i.charCodeAt(3)];}}
MAJOR_BRAND=new Uint8Array(['i'.charCodeAt(0),'s'.charCodeAt(0),'o'.charCodeAt(0),'m'.charCodeAt(0)]);AVC1_BRAND=new Uint8Array(['a'.charCodeAt(0),'v'.charCodeAt(0),'c'.charCodeAt(0),'1'.charCodeAt(0)]);MINOR_VERSION=new Uint8Array([0,0,0,1]);VIDEO_HDLR=new Uint8Array([0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x76,0x69,0x64,0x65,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x56,0x69,0x64,0x65,0x6f,0x48,0x61,0x6e,0x64,0x6c,0x65,0x72,0x00]);AUDIO_HDLR=new Uint8Array([0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x73,0x6f,0x75,0x6e,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x53,0x6f,0x75,0x6e,0x64,0x48,0x61,0x6e,0x64,0x6c,0x65,0x72,0x00]);HDLR_TYPES={video:VIDEO_HDLR,audio:AUDIO_HDLR};DREF=new Uint8Array([0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x0c,0x75,0x72,0x6c,0x20,0x00,0x00,0x00,0x01]);SMHD=new Uint8Array([0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00]);STCO=new Uint8Array([0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00]);STSC=STCO;STSZ=new Uint8Array([0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00]);STTS=STCO;VMHD=new Uint8Array([0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00]);}());box=function(type){var
payload=[],size=0,i,result,view;for(i=1;i<arguments.length;i++){payload.push(arguments[i]);}
i=payload.length;while(i--){size+=payload[i].byteLength;}
result=new Uint8Array(size+8);view=new DataView(result.buffer,result.byteOffset,result.byteLength);view.setUint32(0,result.byteLength);result.set(type,4);for(i=0,size=8;i<payload.length;i++){result.set(payload[i],size);size+=payload[i].byteLength;}
return result;};dinf=function(){return box(types.dinf,box(types.dref,DREF));};esds=function(track){return box(types.esds,new Uint8Array([0x00,0x00,0x00,0x00,0x03,0x19,0x00,0x00,0x00,0x04,0x11,0x40,0x15,0x00,0x06,0x00,0x00,0x00,0xda,0xc0,0x00,0x00,0xda,0xc0,0x05,0x02,(track.audioobjecttype<<3)|(track.samplingfrequencyindex>>>1),(track.samplingfrequencyindex<<7)|(track.channelcount<<3),0x06,0x01,0x02]));};ftyp=function(){return box(types.ftyp,MAJOR_BRAND,MINOR_VERSION,MAJOR_BRAND,AVC1_BRAND);};hdlr=function(type){return box(types.hdlr,HDLR_TYPES[type]);};mdat=function(data){return box(types.mdat,data);};mdhd=function(track){var result=new Uint8Array([0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x02,0x00,0x00,0x00,0x03,0x00,0x01,0x5f,0x90,(track.duration>>>24)&0xFF,(track.duration>>>16)&0xFF,(track.duration>>>8)&0xFF,track.duration&0xFF,0x55,0xc4,0x00,0x00]);if(track.samplerate){result[12]=(track.samplerate>>>24)&0xFF;result[13]=(track.samplerate>>>16)&0xFF;result[14]=(track.samplerate>>>8)&0xFF;result[15]=(track.samplerate)&0xFF;}
return box(types.mdhd,result);};mdia=function(track){return box(types.mdia,mdhd(track),hdlr(track.type),minf(track));};mfhd=function(sequenceNumber){return box(types.mfhd,new Uint8Array([0x00,0x00,0x00,0x00,(sequenceNumber&0xFF000000)>>24,(sequenceNumber&0xFF0000)>>16,(sequenceNumber&0xFF00)>>8,sequenceNumber&0xFF]));};minf=function(track){return box(types.minf,track.type==='video'?box(types.vmhd,VMHD):box(types.smhd,SMHD),dinf(),stbl(track));};moof=function(sequenceNumber,tracks){var
trackFragments=[],i=tracks.length;while(i--){trackFragments[i]=traf(tracks[i]);}
return box.apply(null,[types.moof,mfhd(sequenceNumber)].concat(trackFragments));};moov=function(tracks){var
i=tracks.length,boxes=[];while(i--){boxes[i]=trak(tracks[i]);}
return box.apply(null,[types.moov,mvhd(0xffffffff)].concat(boxes).concat(mvex(tracks)));};mvex=function(tracks){var
i=tracks.length,boxes=[];while(i--){boxes[i]=trex(tracks[i]);}
return box.apply(null,[types.mvex].concat(boxes));};mvhd=function(duration){var
bytes=new Uint8Array([0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x02,0x00,0x01,0x5f,0x90,(duration&0xFF000000)>>24,(duration&0xFF0000)>>16,(duration&0xFF00)>>8,duration&0xFF,0x00,0x01,0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xff,0xff,0xff,0xff]);return box(types.mvhd,bytes);};sdtp=function(track){var
samples=track.samples||[],bytes=new Uint8Array(4+samples.length),flags,i;for(i=0;i<samples.length;i++){flags=samples[i].flags;bytes[i+4]=(flags.dependsOn<<4)|(flags.isDependedOn<<2)|(flags.hasRedundancy);}
return box(types.sdtp,bytes);};stbl=function(track){return box(types.stbl,stsd(track),box(types.stts,STTS),box(types.stsc,STSC),box(types.stsz,STSZ),box(types.stco,STCO));};(function(){var videoSample,audioSample;stsd=function(track){return box(types.stsd,new Uint8Array([0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01]),track.type==='video'?videoSample(track):audioSample(track));};videoSample=function(track){var
sps=track.sps||[],pps=track.pps||[],sequenceParameterSets=[],pictureParameterSets=[],i;for(i=0;i<sps.length;i++){sequenceParameterSets.push((sps[i].byteLength&0xFF00)>>>8);sequenceParameterSets.push((sps[i].byteLength&0xFF));sequenceParameterSets=sequenceParameterSets.concat(Array.prototype.slice.call(sps[i]));}
for(i=0;i<pps.length;i++){pictureParameterSets.push((pps[i].byteLength&0xFF00)>>>8);pictureParameterSets.push((pps[i].byteLength&0xFF));pictureParameterSets=pictureParameterSets.concat(Array.prototype.slice.call(pps[i]));}
return box(types.avc1,new Uint8Array([0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,(track.width&0xff00)>>8,track.width&0xff,(track.height&0xff00)>>8,track.height&0xff,0x00,0x48,0x00,0x00,0x00,0x48,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x13,0x76,0x69,0x64,0x65,0x6f,0x6a,0x73,0x2d,0x63,0x6f,0x6e,0x74,0x72,0x69,0x62,0x2d,0x68,0x6c,0x73,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x11,0x11]),box(types.avcC,new Uint8Array([0x01,track.profileIdc,track.profileCompatibility,track.levelIdc,0xff].concat([sps.length]).concat(sequenceParameterSets).concat([pps.length]).concat(pictureParameterSets))),box(types.btrt,new Uint8Array([0x00,0x1c,0x9c,0x80,0x00,0x2d,0xc6,0xc0,0x00,0x2d,0xc6,0xc0])));};audioSample=function(track){return box(types.mp4a,new Uint8Array([0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,(track.channelcount&0xff00)>>8,(track.channelcount&0xff),(track.samplesize&0xff00)>>8,(track.samplesize&0xff),0x00,0x00,0x00,0x00,(track.samplerate&0xff00)>>8,(track.samplerate&0xff),0x00,0x00]),esds(track));};}());tkhd=function(track){var result=new Uint8Array([0x00,0x00,0x00,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,(track.id&0xFF000000)>>24,(track.id&0xFF0000)>>16,(track.id&0xFF00)>>8,track.id&0xFF,0x00,0x00,0x00,0x00,(track.duration&0xFF000000)>>24,(track.duration&0xFF0000)>>16,(track.duration&0xFF00)>>8,track.duration&0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x00,0x00,0x00,(track.width&0xFF00)>>8,track.width&0xFF,0x00,0x00,(track.height&0xFF00)>>8,track.height&0xFF,0x00,0x00]);return box(types.tkhd,result);};traf=function(track){var trackFragmentHeader,trackFragmentDecodeTime,trackFragmentRun,sampleDependencyTable,dataOffset,upperWordBaseMediaDecodeTime,lowerWordBaseMediaDecodeTime;trackFragmentHeader=box(types.tfhd,new Uint8Array([0x00,0x00,0x00,0x3a,(track.id&0xFF000000)>>24,(track.id&0xFF0000)>>16,(track.id&0xFF00)>>8,(track.id&0xFF),0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00]));upperWordBaseMediaDecodeTime=Math.floor(track.baseMediaDecodeTime/(UINT32_MAX+1));lowerWordBaseMediaDecodeTime=Math.floor(track.baseMediaDecodeTime%(UINT32_MAX+1));trackFragmentDecodeTime=box(types.tfdt,new Uint8Array([0x01,0x00,0x00,0x00,(upperWordBaseMediaDecodeTime>>>24)&0xFF,(upperWordBaseMediaDecodeTime>>>16)&0xFF,(upperWordBaseMediaDecodeTime>>>8)&0xFF,upperWordBaseMediaDecodeTime&0xFF,(lowerWordBaseMediaDecodeTime>>>24)&0xFF,(lowerWordBaseMediaDecodeTime>>>16)&0xFF,(lowerWordBaseMediaDecodeTime>>>8)&0xFF,lowerWordBaseMediaDecodeTime&0xFF]));dataOffset=(32+
20+
8+
16+
8+
8);if(track.type==='audio'){trackFragmentRun=trun(track,dataOffset);return box(types.traf,trackFragmentHeader,trackFragmentDecodeTime,trackFragmentRun);}
sampleDependencyTable=sdtp(track);trackFragmentRun=trun(track,sampleDependencyTable.length+dataOffset);return box(types.traf,trackFragmentHeader,trackFragmentDecodeTime,trackFragmentRun,sampleDependencyTable);};trak=function(track){track.duration=track.duration||0xffffffff;return box(types.trak,tkhd(track),mdia(track));};trex=function(track){var result=new Uint8Array([0x00,0x00,0x00,0x00,(track.id&0xFF000000)>>24,(track.id&0xFF0000)>>16,(track.id&0xFF00)>>8,(track.id&0xFF),0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x01]);if(track.type!=='video'){result[result.length-1]=0x00;}
return box(types.trex,result);};(function(){var audioTrun,videoTrun,trunHeader;trunHeader=function(samples,offset){var durationPresent=0,sizePresent=0,flagsPresent=0,compositionTimeOffset=0;if(samples.length){if(samples[0].duration!==undefined){durationPresent=0x1;}
if(samples[0].size!==undefined){sizePresent=0x2;}
if(samples[0].flags!==undefined){flagsPresent=0x4;}
if(samples[0].compositionTimeOffset!==undefined){compositionTimeOffset=0x8;}}
return[0x00,0x00,durationPresent|sizePresent|flagsPresent|compositionTimeOffset,0x01,(samples.length&0xFF000000)>>>24,(samples.length&0xFF0000)>>>16,(samples.length&0xFF00)>>>8,samples.length&0xFF,(offset&0xFF000000)>>>24,(offset&0xFF0000)>>>16,(offset&0xFF00)>>>8,offset&0xFF];};videoTrun=function(track,offset){var bytes,samples,sample,i;samples=track.samples||[];offset+=8+12+(16*samples.length);bytes=trunHeader(samples,offset);for(i=0;i<samples.length;i++){sample=samples[i];bytes=bytes.concat([(sample.duration&0xFF000000)>>>24,(sample.duration&0xFF0000)>>>16,(sample.duration&0xFF00)>>>8,sample.duration&0xFF,(sample.size&0xFF000000)>>>24,(sample.size&0xFF0000)>>>16,(sample.size&0xFF00)>>>8,sample.size&0xFF,(sample.flags.isLeading<<2)|sample.flags.dependsOn,(sample.flags.isDependedOn<<6)|(sample.flags.hasRedundancy<<4)|(sample.flags.paddingValue<<1)|sample.flags.isNonSyncSample,sample.flags.degradationPriority&0xF0<<8,sample.flags.degradationPriority&0x0F,(sample.compositionTimeOffset&0xFF000000)>>>24,(sample.compositionTimeOffset&0xFF0000)>>>16,(sample.compositionTimeOffset&0xFF00)>>>8,sample.compositionTimeOffset&0xFF]);}
return box(types.trun,new Uint8Array(bytes));};audioTrun=function(track,offset){var bytes,samples,sample,i;samples=track.samples||[];offset+=8+12+(8*samples.length);bytes=trunHeader(samples,offset);for(i=0;i<samples.length;i++){sample=samples[i];bytes=bytes.concat([(sample.duration&0xFF000000)>>>24,(sample.duration&0xFF0000)>>>16,(sample.duration&0xFF00)>>>8,sample.duration&0xFF,(sample.size&0xFF000000)>>>24,(sample.size&0xFF0000)>>>16,(sample.size&0xFF00)>>>8,sample.size&0xFF]);}
return box(types.trun,new Uint8Array(bytes));};trun=function(track,offset){if(track.type==='audio'){return audioTrun(track,offset);}
return videoTrun(track,offset);};}());module.exports={ftyp:ftyp,mdat:mdat,moof:moof,moov:moov,initSegment:function(tracks){var
fileType=ftyp(),movie=moov(tracks),result;result=new Uint8Array(fileType.byteLength+movie.byteLength);result.set(fileType);result.set(movie,fileType.byteLength);return result;}};},{}],53:[function(require,module,exports){'use strict';var findBox,parseType,timescale,startTime;findBox=function(data,path){var results=[],i,size,type,end,subresults;if(!path.length){return null;}
for(i=0;i<data.byteLength;){size=data[i]<<24;size|=data[i+1]<<16;size|=data[i+2]<<8;size|=data[i+3];type=parseType(data.subarray(i+4,i+8));end=size>1?i+size:data.byteLength;if(type===path[0]){if(path.length===1){results.push(data.subarray(i+8,end));}else{subresults=findBox(data.subarray(i+8,end),path.slice(1));if(subresults.length){results=results.concat(subresults);}}}
i=end;}
return results;};parseType=function(buffer){var result='';result+=String.fromCharCode(buffer[0]);result+=String.fromCharCode(buffer[1]);result+=String.fromCharCode(buffer[2]);result+=String.fromCharCode(buffer[3]);return result;};timescale=function(init){var
result={},traks=findBox(init,['moov','trak']);return traks.reduce(function(result,trak){var tkhd,version,index,id,mdhd;tkhd=findBox(trak,['tkhd'])[0];if(!tkhd){return null;}
version=tkhd[0];index=version===0?12:20;id=tkhd[index]<<24|tkhd[index+1]<<16|tkhd[index+2]<<8|tkhd[index+3];mdhd=findBox(trak,['mdia','mdhd'])[0];if(!mdhd){return null;}
version=mdhd[0];index=version===0?12:20;result[id]=mdhd[index]<<24|mdhd[index+1]<<16|mdhd[index+2]<<8|mdhd[index+3];return result;},result);};startTime=function(timescale,fragment){var trafs,baseTimes,result;trafs=findBox(fragment,['moof','traf']);baseTimes=[].concat.apply([],trafs.map(function(traf){return findBox(traf,['tfhd']).map(function(tfhd){var id,scale,baseTime;id=tfhd[4]<<24|tfhd[5]<<16|tfhd[6]<<8|tfhd[7];scale=timescale[id]||90e3;baseTime=findBox(traf,['tfdt']).map(function(tfdt){var version,result;version=tfdt[0];result=tfdt[4]<<24|tfdt[5]<<16|tfdt[6]<<8|tfdt[7];if(version===1){result*=Math.pow(2,32);result+=tfdt[8]<<24|tfdt[9]<<16|tfdt[10]<<8|tfdt[11];}
return result;})[0];baseTime=baseTime||Infinity;return baseTime/scale;});}));result=Math.min.apply(null,baseTimes);return isFinite(result)?result:0;};module.exports={parseType:parseType,timescale:timescale,startTime:startTime};},{}],54:[function(require,module,exports){'use strict';var Stream=require('../utils/stream.js');var mp4=require('./mp4-generator.js');var m2ts=require('../m2ts/m2ts.js');var AdtsStream=require('../codecs/adts.js');var H264Stream=require('../codecs/h264').H264Stream;var AacStream=require('../aac');var coneOfSilence=require('../data/silence');var clock=require('../utils/clock');var AUDIO_PROPERTIES=['audioobjecttype','channelcount','samplerate','samplingfrequencyindex','samplesize'];var VIDEO_PROPERTIES=['width','height','profileIdc','levelIdc','profileCompatibility'];var ONE_SECOND_IN_TS=90000;var VideoSegmentStream,AudioSegmentStream,Transmuxer,CoalesceStream;var
createDefaultSample,isLikelyAacData,collectDtsInfo,clearDtsInfo,calculateTrackBaseMediaDecodeTime,arrayEquals,sumFrameByteLengths;createDefaultSample=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0}};};isLikelyAacData=function(data){if((data[0]==='I'.charCodeAt(0))&&(data[1]==='D'.charCodeAt(0))&&(data[2]==='3'.charCodeAt(0))){return true;}
return false;};arrayEquals=function(a,b){var
i;if(a.length!==b.length){return false;}
for(i=0;i<a.length;i++){if(a[i]!==b[i]){return false;}}
return true;};sumFrameByteLengths=function(array){var
i,currentObj,sum=0;for(i=0;i<array.length;i++){currentObj=array[i];sum+=currentObj.data.byteLength;}
return sum;};AudioSegmentStream=function(track){var
adtsFrames=[],sequenceNumber=0,earliestAllowedDts=0,audioAppendStartTs=0,videoBaseMediaDecodeTime=Infinity;AudioSegmentStream.prototype.init.call(this);this.push=function(data){collectDtsInfo(track,data);if(track){AUDIO_PROPERTIES.forEach(function(prop){track[prop]=data[prop];});}
adtsFrames.push(data);};this.setEarliestDts=function(earliestDts){earliestAllowedDts=earliestDts-track.timelineStartInfo.baseMediaDecodeTime;};this.setVideoBaseMediaDecodeTime=function(baseMediaDecodeTime){videoBaseMediaDecodeTime=baseMediaDecodeTime;};this.setAudioAppendStart=function(timestamp){audioAppendStartTs=timestamp;};this.flush=function(){var
frames,moof,mdat,boxes;if(adtsFrames.length===0){this.trigger('done','AudioSegmentStream');return;}
frames=this.trimAdtsFramesByEarliestDts_(adtsFrames);track.baseMediaDecodeTime=calculateTrackBaseMediaDecodeTime(track);this.prefixWithSilence_(track,frames);track.samples=this.generateSampleTable_(frames);mdat=mp4.mdat(this.concatenateFrameData_(frames));adtsFrames=[];moof=mp4.moof(sequenceNumber,[track]);boxes=new Uint8Array(moof.byteLength+mdat.byteLength);sequenceNumber++;boxes.set(moof);boxes.set(mdat,moof.byteLength);clearDtsInfo(track);this.trigger('data',{track:track,boxes:boxes});this.trigger('done','AudioSegmentStream');};this.prefixWithSilence_=function(track,frames){var
baseMediaDecodeTimeTs,frameDuration=0,audioGapDuration=0,audioFillFrameCount=0,audioFillDuration=0,silentFrame,i;if(!frames.length){return;}
baseMediaDecodeTimeTs=clock.audioTsToVideoTs(track.baseMediaDecodeTime,track.samplerate);frameDuration=Math.ceil(ONE_SECOND_IN_TS/(track.samplerate/1024));if(audioAppendStartTs&&videoBaseMediaDecodeTime){audioGapDuration=baseMediaDecodeTimeTs-Math.max(audioAppendStartTs,videoBaseMediaDecodeTime);audioFillFrameCount=Math.floor(audioGapDuration/frameDuration);audioFillDuration=audioFillFrameCount*frameDuration;}
if(audioFillFrameCount<1||audioFillDuration>ONE_SECOND_IN_TS/2){return;}
silentFrame=coneOfSilence[track.samplerate];if(!silentFrame){silentFrame=frames[0].data;}
for(i=0;i<audioFillFrameCount;i++){frames.splice(i,0,{data:silentFrame});}
track.baseMediaDecodeTime-=Math.floor(clock.videoTsToAudioTs(audioFillDuration,track.samplerate));};this.trimAdtsFramesByEarliestDts_=function(adtsFrames){if(track.minSegmentDts>=earliestAllowedDts){return adtsFrames;}
track.minSegmentDts=Infinity;return adtsFrames.filter(function(currentFrame){if(currentFrame.dts>=earliestAllowedDts){track.minSegmentDts=Math.min(track.minSegmentDts,currentFrame.dts);track.minSegmentPts=track.minSegmentDts;return true;}
return false;});};this.generateSampleTable_=function(frames){var
i,currentFrame,samples=[];for(i=0;i<frames.length;i++){currentFrame=frames[i];samples.push({size:currentFrame.data.byteLength,duration:1024});}
return samples;};this.concatenateFrameData_=function(frames){var
i,currentFrame,dataOffset=0,data=new Uint8Array(sumFrameByteLengths(frames));for(i=0;i<frames.length;i++){currentFrame=frames[i];data.set(currentFrame.data,dataOffset);dataOffset+=currentFrame.data.byteLength;}
return data;};};AudioSegmentStream.prototype=new Stream();VideoSegmentStream=function(track){var
sequenceNumber=0,nalUnits=[],config,pps;VideoSegmentStream.prototype.init.call(this);delete track.minPTS;this.gopCache_=[];this.push=function(nalUnit){collectDtsInfo(track,nalUnit);if(nalUnit.nalUnitType==='seq_parameter_set_rbsp'&&!config){config=nalUnit.config;track.sps=[nalUnit.data];VIDEO_PROPERTIES.forEach(function(prop){track[prop]=config[prop];},this);}
if(nalUnit.nalUnitType==='pic_parameter_set_rbsp'&&!pps){pps=nalUnit.data;track.pps=[nalUnit.data];}
nalUnits.push(nalUnit);};this.flush=function(){var
frames,gopForFusion,gops,moof,mdat,boxes;while(nalUnits.length){if(nalUnits[0].nalUnitType==='access_unit_delimiter_rbsp'){break;}
nalUnits.shift();}
if(nalUnits.length===0){this.resetStream_();this.trigger('done','VideoSegmentStream');return;}
frames=this.groupNalsIntoFrames_(nalUnits);gops=this.groupFramesIntoGops_(frames);if(!gops[0][0].keyFrame){gopForFusion=this.getGopForFusion_(nalUnits[0],track);if(gopForFusion){gops.unshift(gopForFusion);gops.byteLength+=gopForFusion.byteLength;gops.nalCount+=gopForFusion.nalCount;gops.pts=gopForFusion.pts;gops.dts=gopForFusion.dts;gops.duration+=gopForFusion.duration;}else{gops=this.extendFirstKeyFrame_(gops);}}
collectDtsInfo(track,gops);track.samples=this.generateSampleTable_(gops);mdat=mp4.mdat(this.concatenateNalData_(gops));this.gopCache_.unshift({gop:gops.pop(),pps:track.pps,sps:track.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);nalUnits=[];track.baseMediaDecodeTime=calculateTrackBaseMediaDecodeTime(track);this.trigger('baseMediaDecodeTime',track.baseMediaDecodeTime);this.trigger('timelineStartInfo',track.timelineStartInfo);moof=mp4.moof(sequenceNumber,[track]);boxes=new Uint8Array(moof.byteLength+mdat.byteLength);sequenceNumber++;boxes.set(moof);boxes.set(mdat,moof.byteLength);this.trigger('data',{track:track,boxes:boxes});this.resetStream_();this.trigger('done','VideoSegmentStream');};this.resetStream_=function(){clearDtsInfo(track);config=undefined;pps=undefined;};this.getGopForFusion_=function(nalUnit){var
halfSecond=45000,allowableOverlap=10000,nearestDistance=Infinity,dtsDistance,nearestGopObj,currentGop,currentGopObj,i;for(i=0;i<this.gopCache_.length;i++){currentGopObj=this.gopCache_[i];currentGop=currentGopObj.gop;if(!(track.pps&&arrayEquals(track.pps[0],currentGopObj.pps[0]))||!(track.sps&&arrayEquals(track.sps[0],currentGopObj.sps[0]))){continue;}
if(currentGop.dts<track.timelineStartInfo.dts){continue;}
dtsDistance=(nalUnit.dts-currentGop.dts)-currentGop.duration;if(dtsDistance>=-allowableOverlap&&dtsDistance<=halfSecond){if(!nearestGopObj||nearestDistance>dtsDistance){nearestGopObj=currentGopObj;nearestDistance=dtsDistance;}}}
if(nearestGopObj){return nearestGopObj.gop;}
return null;};this.extendFirstKeyFrame_=function(gops){var currentGop;if(!gops[0][0].keyFrame&&gops.length>1){currentGop=gops.shift();gops.byteLength-=currentGop.byteLength;gops.nalCount-=currentGop.nalCount;gops[0][0].dts=currentGop.dts;gops[0][0].pts=currentGop.pts;gops[0][0].duration+=currentGop.duration;}
return gops;};this.groupNalsIntoFrames_=function(nalUnits){var
i,currentNal,currentFrame=[],frames=[];currentFrame.byteLength=0;for(i=0;i<nalUnits.length;i++){currentNal=nalUnits[i];if(currentNal.nalUnitType==='access_unit_delimiter_rbsp'){if(currentFrame.length){currentFrame.duration=currentNal.dts-currentFrame.dts;frames.push(currentFrame);}
currentFrame=[currentNal];currentFrame.byteLength=currentNal.data.byteLength;currentFrame.pts=currentNal.pts;currentFrame.dts=currentNal.dts;}else{if(currentNal.nalUnitType==='slice_layer_without_partitioning_rbsp_idr'){currentFrame.keyFrame=true;}
currentFrame.duration=currentNal.dts-currentFrame.dts;currentFrame.byteLength+=currentNal.data.byteLength;currentFrame.push(currentNal);}}
if(frames.length&&(!currentFrame.duration||currentFrame.duration<=0)){currentFrame.duration=frames[frames.length-1].duration;}
frames.push(currentFrame);return frames;};this.groupFramesIntoGops_=function(frames){var
i,currentFrame,currentGop=[],gops=[];currentGop.byteLength=0;currentGop.nalCount=0;currentGop.duration=0;currentGop.pts=frames[0].pts;currentGop.dts=frames[0].dts;gops.byteLength=0;gops.nalCount=0;gops.duration=0;gops.pts=frames[0].pts;gops.dts=frames[0].dts;for(i=0;i<frames.length;i++){currentFrame=frames[i];if(currentFrame.keyFrame){if(currentGop.length){gops.push(currentGop);gops.byteLength+=currentGop.byteLength;gops.nalCount+=currentGop.nalCount;gops.duration+=currentGop.duration;}
currentGop=[currentFrame];currentGop.nalCount=currentFrame.length;currentGop.byteLength=currentFrame.byteLength;currentGop.pts=currentFrame.pts;currentGop.dts=currentFrame.dts;currentGop.duration=currentFrame.duration;}else{currentGop.duration+=currentFrame.duration;currentGop.nalCount+=currentFrame.length;currentGop.byteLength+=currentFrame.byteLength;currentGop.push(currentFrame);}}
if(gops.length&&currentGop.duration<=0){currentGop.duration=gops[gops.length-1].duration;}
gops.byteLength+=currentGop.byteLength;gops.nalCount+=currentGop.nalCount;gops.duration+=currentGop.duration;gops.push(currentGop);return gops;};this.generateSampleTable_=function(gops,baseDataOffset){var
h,i,sample,currentGop,currentFrame,dataOffset=baseDataOffset||0,samples=[];for(h=0;h<gops.length;h++){currentGop=gops[h];for(i=0;i<currentGop.length;i++){currentFrame=currentGop[i];sample=createDefaultSample();sample.dataOffset=dataOffset;sample.compositionTimeOffset=currentFrame.pts-currentFrame.dts;sample.duration=currentFrame.duration;sample.size=4*currentFrame.length;sample.size+=currentFrame.byteLength;if(currentFrame.keyFrame){sample.flags.dependsOn=2;}
dataOffset+=sample.size;samples.push(sample);}}
return samples;};this.concatenateNalData_=function(gops){var
h,i,j,currentGop,currentFrame,currentNal,dataOffset=0,nalsByteLength=gops.byteLength,numberOfNals=gops.nalCount,totalByteLength=nalsByteLength+4*numberOfNals,data=new Uint8Array(totalByteLength),view=new DataView(data.buffer);for(h=0;h<gops.length;h++){currentGop=gops[h];for(i=0;i<currentGop.length;i++){currentFrame=currentGop[i];for(j=0;j<currentFrame.length;j++){currentNal=currentFrame[j];view.setUint32(dataOffset,currentNal.data.byteLength);dataOffset+=4;data.set(currentNal.data,dataOffset);dataOffset+=currentNal.data.byteLength;}}}
return data;};};VideoSegmentStream.prototype=new Stream();collectDtsInfo=function(track,data){if(typeof data.pts==='number'){if(track.timelineStartInfo.pts===undefined){track.timelineStartInfo.pts=data.pts;}
if(track.minSegmentPts===undefined){track.minSegmentPts=data.pts;}else{track.minSegmentPts=Math.min(track.minSegmentPts,data.pts);}
if(track.maxSegmentPts===undefined){track.maxSegmentPts=data.pts;}else{track.maxSegmentPts=Math.max(track.maxSegmentPts,data.pts);}}
if(typeof data.dts==='number'){if(track.timelineStartInfo.dts===undefined){track.timelineStartInfo.dts=data.dts;}
if(track.minSegmentDts===undefined){track.minSegmentDts=data.dts;}else{track.minSegmentDts=Math.min(track.minSegmentDts,data.dts);}
if(track.maxSegmentDts===undefined){track.maxSegmentDts=data.dts;}else{track.maxSegmentDts=Math.max(track.maxSegmentDts,data.dts);}}};clearDtsInfo=function(track){delete track.minSegmentDts;delete track.maxSegmentDts;delete track.minSegmentPts;delete track.maxSegmentPts;};calculateTrackBaseMediaDecodeTime=function(track){var
baseMediaDecodeTime,scale,timeSinceStartOfTimeline=track.minSegmentDts-track.timelineStartInfo.dts;baseMediaDecodeTime=track.timelineStartInfo.baseMediaDecodeTime;baseMediaDecodeTime+=timeSinceStartOfTimeline;baseMediaDecodeTime=Math.max(0,baseMediaDecodeTime);if(track.type==='audio'){scale=track.samplerate/ONE_SECOND_IN_TS;baseMediaDecodeTime*=scale;baseMediaDecodeTime=Math.floor(baseMediaDecodeTime);}
return baseMediaDecodeTime;};CoalesceStream=function(options,metadataStream){this.numberOfTracks=0;this.metadataStream=metadataStream;if(typeof options.remux!=='undefined'){this.remuxTracks=!!options.remux;}else{this.remuxTracks=true;}
this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.pendingBytes=0;this.emittedTracks=0;CoalesceStream.prototype.init.call(this);this.push=function(output){if(output.text){return this.pendingCaptions.push(output);}
if(output.frames){return this.pendingMetadata.push(output);}
this.pendingTracks.push(output.track);this.pendingBoxes.push(output.boxes);this.pendingBytes+=output.boxes.byteLength;if(output.track.type==='video'){this.videoTrack=output.track;}
if(output.track.type==='audio'){this.audioTrack=output.track;}};};CoalesceStream.prototype=new Stream();CoalesceStream.prototype.flush=function(flushSource){var
offset=0,event={captions:[],metadata:[],info:{}},caption,id3,initSegment,timelineStartPts=0,i;if(this.pendingTracks.length<this.numberOfTracks){if(flushSource!=='VideoSegmentStream'&&flushSource!=='AudioSegmentStream'){return;}else if(this.remuxTracks){return;}else if(this.pendingTracks.length===0){this.emittedTracks++;if(this.emittedTracks>=this.numberOfTracks){this.trigger('done');this.emittedTracks=0;}
return;}}
if(this.videoTrack){timelineStartPts=this.videoTrack.timelineStartInfo.pts;VIDEO_PROPERTIES.forEach(function(prop){event.info[prop]=this.videoTrack[prop];},this);}else if(this.audioTrack){timelineStartPts=this.audioTrack.timelineStartInfo.pts;AUDIO_PROPERTIES.forEach(function(prop){event.info[prop]=this.audioTrack[prop];},this);}
if(this.pendingTracks.length===1){event.type=this.pendingTracks[0].type;}else{event.type='combined';}
this.emittedTracks+=this.pendingTracks.length;initSegment=mp4.initSegment(this.pendingTracks);event.initSegment=new Uint8Array(initSegment.byteLength);event.initSegment.set(initSegment);event.data=new Uint8Array(this.pendingBytes);for(i=0;i<this.pendingBoxes.length;i++){event.data.set(this.pendingBoxes[i],offset);offset+=this.pendingBoxes[i].byteLength;}
for(i=0;i<this.pendingCaptions.length;i++){caption=this.pendingCaptions[i];caption.startTime=(caption.startPts-timelineStartPts);caption.startTime/=90e3;caption.endTime=(caption.endPts-timelineStartPts);caption.endTime/=90e3;event.captions.push(caption);}
for(i=0;i<this.pendingMetadata.length;i++){id3=this.pendingMetadata[i];id3.cueTime=(id3.pts-timelineStartPts);id3.cueTime/=90e3;event.metadata.push(id3);}
event.metadata.dispatchType=this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingCaptions.length=0;this.pendingBytes=0;this.pendingMetadata.length=0;this.trigger('data',event);if(this.emittedTracks>=this.numberOfTracks){this.trigger('done');this.emittedTracks=0;}};Transmuxer=function(options){var
self=this,hasFlushed=true,videoTrack,audioTrack;Transmuxer.prototype.init.call(this);options=options||{};this.baseMediaDecodeTime=options.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var pipeline={};this.transmuxPipeline_=pipeline;pipeline.type='aac';pipeline.metadataStream=new m2ts.MetadataStream();pipeline.aacStream=new AacStream();pipeline.audioTimestampRolloverStream=new m2ts.TimestampRolloverStream('audio');pipeline.timedMetadataTimestampRolloverStream=new m2ts.TimestampRolloverStream('timed-metadata');pipeline.adtsStream=new AdtsStream();pipeline.coalesceStream=new CoalesceStream(options,pipeline.metadataStream);pipeline.headOfPipeline=pipeline.aacStream;pipeline.aacStream.pipe(pipeline.audioTimestampRolloverStream).pipe(pipeline.adtsStream);pipeline.aacStream.pipe(pipeline.timedMetadataTimestampRolloverStream).pipe(pipeline.metadataStream).pipe(pipeline.coalesceStream);pipeline.metadataStream.on('timestamp',function(frame){pipeline.aacStream.setTimestamp(frame.timeStamp);});pipeline.aacStream.on('data',function(data){if(data.type==='timed-metadata'&&!pipeline.audioSegmentStream){audioTrack=audioTrack||{timelineStartInfo:{baseMediaDecodeTime:self.baseMediaDecodeTime},codec:'adts',type:'audio'};pipeline.coalesceStream.numberOfTracks++;pipeline.audioSegmentStream=new AudioSegmentStream(audioTrack);pipeline.adtsStream.pipe(pipeline.audioSegmentStream).pipe(pipeline.coalesceStream);}});pipeline.coalesceStream.on('data',this.trigger.bind(this,'data'));pipeline.coalesceStream.on('done',this.trigger.bind(this,'done'));};this.setupTsPipeline=function(){var pipeline={};this.transmuxPipeline_=pipeline;pipeline.type='ts';pipeline.metadataStream=new m2ts.MetadataStream();pipeline.packetStream=new m2ts.TransportPacketStream();pipeline.parseStream=new m2ts.TransportParseStream();pipeline.elementaryStream=new m2ts.ElementaryStream();pipeline.videoTimestampRolloverStream=new m2ts.TimestampRolloverStream('video');pipeline.audioTimestampRolloverStream=new m2ts.TimestampRolloverStream('audio');pipeline.timedMetadataTimestampRolloverStream=new m2ts.TimestampRolloverStream('timed-metadata');pipeline.adtsStream=new AdtsStream();pipeline.h264Stream=new H264Stream();pipeline.captionStream=new m2ts.CaptionStream();pipeline.coalesceStream=new CoalesceStream(options,pipeline.metadataStream);pipeline.headOfPipeline=pipeline.packetStream;pipeline.packetStream.pipe(pipeline.parseStream).pipe(pipeline.elementaryStream);pipeline.elementaryStream.pipe(pipeline.videoTimestampRolloverStream).pipe(pipeline.h264Stream);pipeline.elementaryStream.pipe(pipeline.audioTimestampRolloverStream).pipe(pipeline.adtsStream);pipeline.elementaryStream.pipe(pipeline.timedMetadataTimestampRolloverStream).pipe(pipeline.metadataStream).pipe(pipeline.coalesceStream);pipeline.h264Stream.pipe(pipeline.captionStream).pipe(pipeline.coalesceStream);pipeline.elementaryStream.on('data',function(data){var i;if(data.type==='metadata'){i=data.tracks.length;while(i--){if(!videoTrack&&data.tracks[i].type==='video'){videoTrack=data.tracks[i];videoTrack.timelineStartInfo.baseMediaDecodeTime=self.baseMediaDecodeTime;}else if(!audioTrack&&data.tracks[i].type==='audio'){audioTrack=data.tracks[i];audioTrack.timelineStartInfo.baseMediaDecodeTime=self.baseMediaDecodeTime;}}
if(videoTrack&&!pipeline.videoSegmentStream){pipeline.coalesceStream.numberOfTracks++;pipeline.videoSegmentStream=new VideoSegmentStream(videoTrack);pipeline.videoSegmentStream.on('timelineStartInfo',function(timelineStartInfo){if(audioTrack){audioTrack.timelineStartInfo=timelineStartInfo;pipeline.audioSegmentStream.setEarliestDts(timelineStartInfo.dts);}});pipeline.videoSegmentStream.on('baseMediaDecodeTime',function(baseMediaDecodeTime){if(audioTrack){pipeline.audioSegmentStream.setVideoBaseMediaDecodeTime(baseMediaDecodeTime);}});pipeline.h264Stream.pipe(pipeline.videoSegmentStream).pipe(pipeline.coalesceStream);}
if(audioTrack&&!pipeline.audioSegmentStream){pipeline.coalesceStream.numberOfTracks++;pipeline.audioSegmentStream=new AudioSegmentStream(audioTrack);pipeline.adtsStream.pipe(pipeline.audioSegmentStream).pipe(pipeline.coalesceStream);}}});pipeline.coalesceStream.on('data',this.trigger.bind(this,'data'));pipeline.coalesceStream.on('done',this.trigger.bind(this,'done'));};this.setBaseMediaDecodeTime=function(baseMediaDecodeTime){var pipeline=this.transmuxPipeline_;this.baseMediaDecodeTime=baseMediaDecodeTime;if(audioTrack){audioTrack.timelineStartInfo.dts=undefined;audioTrack.timelineStartInfo.pts=undefined;clearDtsInfo(audioTrack);audioTrack.timelineStartInfo.baseMediaDecodeTime=baseMediaDecodeTime;}
if(videoTrack){if(pipeline.videoSegmentStream){pipeline.videoSegmentStream.gopCache_=[];}
videoTrack.timelineStartInfo.dts=undefined;videoTrack.timelineStartInfo.pts=undefined;clearDtsInfo(videoTrack);videoTrack.timelineStartInfo.baseMediaDecodeTime=baseMediaDecodeTime;}};this.setAudioAppendStart=function(timestamp){if(audioTrack){this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(timestamp);}};this.push=function(data){if(hasFlushed){var isAac=isLikelyAacData(data);if(isAac&&this.transmuxPipeline_.type!=='aac'){this.setupAacPipeline();}else if(!isAac&&this.transmuxPipeline_.type!=='ts'){this.setupTsPipeline();}
hasFlushed=false;}
this.transmuxPipeline_.headOfPipeline.push(data);};this.flush=function(){hasFlushed=true;this.transmuxPipeline_.headOfPipeline.flush();};};Transmuxer.prototype=new Stream();module.exports={Transmuxer:Transmuxer,VideoSegmentStream:VideoSegmentStream,AudioSegmentStream:AudioSegmentStream,AUDIO_PROPERTIES:AUDIO_PROPERTIES,VIDEO_PROPERTIES:VIDEO_PROPERTIES};},{"../aac":34,"../codecs/adts.js":36,"../codecs/h264":37,"../data/silence":38,"../m2ts/m2ts.js":46,"../utils/clock":56,"../utils/stream.js":58,"./mp4-generator.js":52}],55:[function(require,module,exports){'use strict';var StreamTypes=require('../m2ts/stream-types.js');var handleRollover=require('../m2ts/timestamp-rollover-stream.js').handleRollover;var probe={};probe.ts=require('../m2ts/probe.js');probe.aac=require('../aac/probe.js');var
PES_TIMESCALE=90000,MP2T_PACKET_LENGTH=188,SYNC_BYTE=0x47;var isLikelyAacData=function(data){if((data[0]==='I'.charCodeAt(0))&&(data[1]==='D'.charCodeAt(0))&&(data[2]==='3'.charCodeAt(0))){return true;}
return false;};var parsePsi_=function(bytes,pmt){var
startIndex=0,endIndex=MP2T_PACKET_LENGTH,packet,type;while(endIndex<bytes.byteLength){if(bytes[startIndex]===SYNC_BYTE&&bytes[endIndex]===SYNC_BYTE){packet=bytes.subarray(startIndex,endIndex);type=probe.ts.parseType(packet,pmt.pid);switch(type){case'pat':if(!pmt.pid){pmt.pid=probe.ts.parsePat(packet);}
break;case'pmt':if(!pmt.table){pmt.table=probe.ts.parsePmt(packet);}
break;default:break;}
if(pmt.pid&&pmt.table){return;}
startIndex+=MP2T_PACKET_LENGTH;endIndex+=MP2T_PACKET_LENGTH;continue;}
startIndex++;endIndex++;}};var parseAudioPes_=function(bytes,pmt,result){var
startIndex=0,endIndex=MP2T_PACKET_LENGTH,packet,type,pesType,pusi,parsed;var endLoop=false;while(endIndex<bytes.byteLength){if(bytes[startIndex]===SYNC_BYTE&&bytes[endIndex]===SYNC_BYTE){packet=bytes.subarray(startIndex,endIndex);type=probe.ts.parseType(packet,pmt.pid);switch(type){case'pes':pesType=probe.ts.parsePesType(packet,pmt.table);pusi=probe.ts.parsePayloadUnitStartIndicator(packet);if(pesType==='audio'&&pusi){parsed=probe.ts.parsePesTime(packet);parsed.type='audio';result.audio.push(parsed);endLoop=true;}
break;default:break;}
if(endLoop){break;}
startIndex+=MP2T_PACKET_LENGTH;endIndex+=MP2T_PACKET_LENGTH;continue;}
startIndex++;endIndex++;}
endIndex=bytes.byteLength;startIndex=endIndex-MP2T_PACKET_LENGTH;endLoop=false;while(startIndex>=0){if(bytes[startIndex]===SYNC_BYTE&&bytes[endIndex]===SYNC_BYTE){packet=bytes.subarray(startIndex,endIndex);type=probe.ts.parseType(packet,pmt.pid);switch(type){case'pes':pesType=probe.ts.parsePesType(packet,pmt.table);pusi=probe.ts.parsePayloadUnitStartIndicator(packet);if(pesType==='audio'&&pusi){parsed=probe.ts.parsePesTime(packet);parsed.type='audio';result.audio.push(parsed);endLoop=true;}
break;default:break;}
if(endLoop){break;}
startIndex-=MP2T_PACKET_LENGTH;endIndex-=MP2T_PACKET_LENGTH;continue;}
startIndex--;endIndex--;}};var parseVideoPes_=function(bytes,pmt,result){var
startIndex=0,endIndex=MP2T_PACKET_LENGTH,packet,type,pesType,pusi,parsed,frame,i,pes;var endLoop=false;var currentFrame={data:[],size:0};while(endIndex<bytes.byteLength){if(bytes[startIndex]===SYNC_BYTE&&bytes[endIndex]===SYNC_BYTE){packet=bytes.subarray(startIndex,endIndex);type=probe.ts.parseType(packet,pmt.pid);switch(type){case'pes':pesType=probe.ts.parsePesType(packet,pmt.table);pusi=probe.ts.parsePayloadUnitStartIndicator(packet);if(pesType==='video'){if(pusi&&!endLoop){parsed=probe.ts.parsePesTime(packet);parsed.type='video';result.video.push(parsed);endLoop=true;}
if(!result.firstKeyFrame){if(pusi){if(currentFrame.size!==0){frame=new Uint8Array(currentFrame.size);i=0;while(currentFrame.data.length){pes=currentFrame.data.shift();frame.set(pes,i);i+=pes.byteLength;}
if(probe.ts.videoPacketContainsKeyFrame(frame)){result.firstKeyFrame=probe.ts.parsePesTime(frame);result.firstKeyFrame.type='video';}
currentFrame.size=0;}}
currentFrame.data.push(packet);currentFrame.size+=packet.byteLength;}}
break;default:break;}
if(endLoop&&result.firstKeyFrame){break;}
startIndex+=MP2T_PACKET_LENGTH;endIndex+=MP2T_PACKET_LENGTH;continue;}
startIndex++;endIndex++;}
endIndex=bytes.byteLength;startIndex=endIndex-MP2T_PACKET_LENGTH;endLoop=false;while(startIndex>=0){if(bytes[startIndex]===SYNC_BYTE&&bytes[endIndex]===SYNC_BYTE){packet=bytes.subarray(startIndex,endIndex);type=probe.ts.parseType(packet,pmt.pid);switch(type){case'pes':pesType=probe.ts.parsePesType(packet,pmt.table);pusi=probe.ts.parsePayloadUnitStartIndicator(packet);if(pesType==='video'&&pusi){parsed=probe.ts.parsePesTime(packet);parsed.type='video';result.video.push(parsed);endLoop=true;}
break;default:break;}
if(endLoop){break;}
startIndex-=MP2T_PACKET_LENGTH;endIndex-=MP2T_PACKET_LENGTH;continue;}
startIndex--;endIndex--;}};var adjustTimestamp_=function(segmentInfo,baseTimestamp){if(segmentInfo.audio&&segmentInfo.audio.length){var audioBaseTimestamp=baseTimestamp;if(typeof audioBaseTimestamp==='undefined'){audioBaseTimestamp=segmentInfo.audio[0].dts;}
segmentInfo.audio.forEach(function(info){info.dts=handleRollover(info.dts,audioBaseTimestamp);info.pts=handleRollover(info.pts,audioBaseTimestamp);info.dtsTime=info.dts/PES_TIMESCALE;info.ptsTime=info.pts/PES_TIMESCALE;});}
if(segmentInfo.video&&segmentInfo.video.length){var videoBaseTimestamp=baseTimestamp;if(typeof videoBaseTimestamp==='undefined'){videoBaseTimestamp=segmentInfo.video[0].dts;}
segmentInfo.video.forEach(function(info){info.dts=handleRollover(info.dts,videoBaseTimestamp);info.pts=handleRollover(info.pts,videoBaseTimestamp);info.dtsTime=info.dts/PES_TIMESCALE;info.ptsTime=info.pts/PES_TIMESCALE;});if(segmentInfo.firstKeyFrame){var frame=segmentInfo.firstKeyFrame;frame.dts=handleRollover(frame.dts,videoBaseTimestamp);frame.pts=handleRollover(frame.pts,videoBaseTimestamp);frame.dtsTime=frame.dts/PES_TIMESCALE;frame.ptsTime=frame.dts/PES_TIMESCALE;}}};var inspectAac_=function(bytes){var
endLoop=false,audioCount=0,sampleRate=null,timestamp=null,frameSize=0,byteIndex=0,packet;while(bytes.length-byteIndex>=3){var type=probe.aac.parseType(bytes,byteIndex);switch(type){case'timed-metadata':if(bytes.length-byteIndex<10){endLoop=true;break;}
frameSize=probe.aac.parseId3TagSize(bytes,byteIndex);if(frameSize>bytes.length){endLoop=true;break;}
if(timestamp===null){packet=bytes.subarray(byteIndex,byteIndex+frameSize);timestamp=probe.aac.parseAacTimestamp(packet);}
byteIndex+=frameSize;break;case'audio':if(bytes.length-byteIndex<7){endLoop=true;break;}
frameSize=probe.aac.parseAdtsSize(bytes,byteIndex);if(frameSize>bytes.length){endLoop=true;break;}
if(sampleRate===null){packet=bytes.subarray(byteIndex,byteIndex+frameSize);sampleRate=probe.aac.parseSampleRate(packet);}
audioCount++;byteIndex+=frameSize;break;default:byteIndex++;break;}
if(endLoop){return null;}}
if(sampleRate===null||timestamp===null){return null;}
var audioTimescale=PES_TIMESCALE/sampleRate;var result={audio:[{type:'audio',dts:timestamp,pts:timestamp},{type:'audio',dts:timestamp+(audioCount*1024*audioTimescale),pts:timestamp+(audioCount*1024*audioTimescale)}]};return result;};var inspectTs_=function(bytes){var pmt={pid:null,table:null};var result={};parsePsi_(bytes,pmt);for(var pid in pmt.table){if(pmt.table.hasOwnProperty(pid)){var type=pmt.table[pid];switch(type){case StreamTypes.H264_STREAM_TYPE:result.video=[];parseVideoPes_(bytes,pmt,result);if(result.video.length===0){delete result.video;}
break;case StreamTypes.ADTS_STREAM_TYPE:result.audio=[];parseAudioPes_(bytes,pmt,result);if(result.audio.length===0){delete result.audio;}
break;default:break;}}}
return result;};var inspect=function(bytes,baseTimestamp){var isAacData=isLikelyAacData(bytes);var result;if(isAacData){result=inspectAac_(bytes);}else{result=inspectTs_(bytes);}
if(!result||(!result.audio&&!result.video)){return null;}
adjustTimestamp_(result,baseTimestamp);return result;};module.exports={inspect:inspect};},{"../aac/probe.js":35,"../m2ts/probe.js":48,"../m2ts/stream-types.js":49,"../m2ts/timestamp-rollover-stream.js":50}],56:[function(require,module,exports){var
ONE_SECOND_IN_TS=90000,secondsToVideoTs,secondsToAudioTs,videoTsToSeconds,audioTsToSeconds,audioTsToVideoTs,videoTsToAudioTs;secondsToVideoTs=function(seconds){return seconds*ONE_SECOND_IN_TS;};secondsToAudioTs=function(seconds,sampleRate){return seconds*sampleRate;};videoTsToSeconds=function(timestamp){return timestamp/ONE_SECOND_IN_TS;};audioTsToSeconds=function(timestamp,sampleRate){return timestamp/sampleRate;};audioTsToVideoTs=function(timestamp,sampleRate){return secondsToVideoTs(audioTsToSeconds(timestamp,sampleRate));};videoTsToAudioTs=function(timestamp,sampleRate){return secondsToAudioTs(videoTsToSeconds(timestamp),sampleRate);};module.exports={secondsToVideoTs:secondsToVideoTs,secondsToAudioTs:secondsToAudioTs,videoTsToSeconds:videoTsToSeconds,audioTsToSeconds:audioTsToSeconds,audioTsToVideoTs:audioTsToVideoTs,videoTsToAudioTs:videoTsToAudioTs};},{}],57:[function(require,module,exports){'use strict';var ExpGolomb;ExpGolomb=function(workingData){var
workingBytesAvailable=workingData.byteLength,workingWord=0,workingBitsAvailable=0;this.length=function(){return(8*workingBytesAvailable);};this.bitsAvailable=function(){return(8*workingBytesAvailable)+workingBitsAvailable;};this.loadWord=function(){var
position=workingData.byteLength-workingBytesAvailable,workingBytes=new Uint8Array(4),availableBytes=Math.min(4,workingBytesAvailable);if(availableBytes===0){throw new Error('no bytes available');}
workingBytes.set(workingData.subarray(position,position+availableBytes));workingWord=new DataView(workingBytes.buffer).getUint32(0);workingBitsAvailable=availableBytes*8;workingBytesAvailable-=availableBytes;};this.skipBits=function(count){var skipBytes;if(workingBitsAvailable>count){workingWord<<=count;workingBitsAvailable-=count;}else{count-=workingBitsAvailable;skipBytes=Math.floor(count/8);count-=(skipBytes*8);workingBytesAvailable-=skipBytes;this.loadWord();workingWord<<=count;workingBitsAvailable-=count;}};this.readBits=function(size){var
bits=Math.min(workingBitsAvailable,size),valu=workingWord>>>(32-bits);workingBitsAvailable-=bits;if(workingBitsAvailable>0){workingWord<<=bits;}else if(workingBytesAvailable>0){this.loadWord();}
bits=size-bits;if(bits>0){return valu<<bits|this.readBits(bits);}
return valu;};this.skipLeadingZeros=function(){var leadingZeroCount;for(leadingZeroCount=0;leadingZeroCount<workingBitsAvailable;++leadingZeroCount){if((workingWord&(0x80000000>>>leadingZeroCount))!==0){workingWord<<=leadingZeroCount;workingBitsAvailable-=leadingZeroCount;return leadingZeroCount;}}
this.loadWord();return leadingZeroCount+this.skipLeadingZeros();};this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros());};this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros());};this.readUnsignedExpGolomb=function(){var clz=this.skipLeadingZeros();return this.readBits(clz+1)-1;};this.readExpGolomb=function(){var valu=this.readUnsignedExpGolomb();if(0x01&valu){return(1+valu)>>>1;}
return-1*(valu>>>1);};this.readBoolean=function(){return this.readBits(1)===1;};this.readUnsignedByte=function(){return this.readBits(8);};this.loadWord();};module.exports=ExpGolomb;},{}],58:[function(require,module,exports){'use strict';var Stream=function(){this.init=function(){var listeners={};this.on=function(type,listener){if(!listeners[type]){listeners[type]=[];}
listeners[type]=listeners[type].concat(listener);};this.off=function(type,listener){var index;if(!listeners[type]){return false;}
index=listeners[type].indexOf(listener);listeners[type]=listeners[type].slice();listeners[type].splice(index,1);return index>-1;};this.trigger=function(type){var callbacks,i,length,args;callbacks=listeners[type];if(!callbacks){return;}
if(arguments.length===2){length=callbacks.length;for(i=0;i<length;++i){callbacks[i].call(this,arguments[1]);}}else{args=[];i=arguments.length;for(i=1;i<arguments.length;++i){args.push(arguments[i]);}
length=callbacks.length;for(i=0;i<length;++i){callbacks[i].apply(this,args);}}};this.dispose=function(){listeners={};};};};Stream.prototype.pipe=function(destination){this.on('data',function(data){destination.push(data);});this.on('done',function(flushSource){destination.flush(flushSource);});return destination;};Stream.prototype.push=function(data){this.trigger('data',data);};Stream.prototype.flush=function(flushSource){this.trigger('done',flushSource);};module.exports=Stream;},{}],59:[function(require,module,exports){(function(root){var URLToolkit={buildAbsoluteURL:function(baseURL,relativeURL){relativeURL=relativeURL.trim();if(/^[a-z]+:/i.test(relativeURL)){return relativeURL;}
var relativeURLQuery=null;var relativeURLHash=null;var relativeURLHashSplit=/^([^#]*)(.*)$/.exec(relativeURL);if(relativeURLHashSplit){relativeURLHash=relativeURLHashSplit[2];relativeURL=relativeURLHashSplit[1];}
var relativeURLQuerySplit=/^([^\?]*)(.*)$/.exec(relativeURL);if(relativeURLQuerySplit){relativeURLQuery=relativeURLQuerySplit[2];relativeURL=relativeURLQuerySplit[1];}
var baseURLHashSplit=/^([^#]*)(.*)$/.exec(baseURL);if(baseURLHashSplit){baseURL=baseURLHashSplit[1];}
var baseURLQuerySplit=/^([^\?]*)(.*)$/.exec(baseURL);if(baseURLQuerySplit){baseURL=baseURLQuerySplit[1];}
var baseURLDomainSplit=/^(([a-z]+:)?\/\/[^:\/]+(:[0-9]+)?)?(\/?.*)$/i.exec(baseURL);if(!baseURLDomainSplit){throw new Error('Error trying to parse base URL.');}
var baseURLProtocol=baseURLDomainSplit[2]||'';var baseURLProtocolDomain=baseURLDomainSplit[1]||'';var baseURLPath=baseURLDomainSplit[4];if(baseURLPath.indexOf('/')!==0&&baseURLProtocolDomain!==''){baseURLPath='/'+baseURLPath;}
var builtURL=null;if(/^\/\//.test(relativeURL)){builtURL=baseURLProtocol+'//'+URLToolkit.buildAbsolutePath('',relativeURL.substring(2));}
else if(/^\//.test(relativeURL)){builtURL=baseURLProtocolDomain+'/'+URLToolkit.buildAbsolutePath('',relativeURL.substring(1));}
else{builtURL=URLToolkit.buildAbsolutePath(baseURLProtocolDomain+baseURLPath,relativeURL);}
if(relativeURLQuery){builtURL+=relativeURLQuery;}
if(relativeURLHash){builtURL+=relativeURLHash;}
return builtURL;},buildAbsolutePath:function(basePath,relativePath){var sRelPath=relativePath;var nUpLn,sDir='',sPath=basePath.replace(/[^\/]*$/,sRelPath.replace(/(\/|^)(?:\.?\/+)+/g,'$1'));for(var nEnd,nStart=0;nEnd=sPath.indexOf('/../',nStart),nEnd>-1;nStart=nEnd+nUpLn){nUpLn=/^\/(?:\.\.\/)*/.exec(sPath.slice(nEnd))[0].length;sDir=(sDir+sPath.substring(nStart,nEnd)).replace(new RegExp('(?:\\\/+[^\\\/]*){0,'+((nUpLn-1)/3)+'}$'),'/');}
return sDir+sPath.substr(nStart);}};if(typeof exports==='object'&&typeof module==='object')
module.exports=URLToolkit;else if(typeof define==='function'&&define.amd)
define([],function(){return URLToolkit;});else if(typeof exports==='object')
exports["URLToolkit"]=URLToolkit;else
root["URLToolkit"]=URLToolkit;})(this);},{}],60:[function(require,module,exports){(function(global){'use strict';Object.defineProperty(exports,'__esModule',{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
var _globalWindow=require('global/window');var _globalWindow2=_interopRequireDefault(_globalWindow);var _videoJs=(typeof window!=="undefined"?window['videojs']:typeof global!=="undefined"?global['videojs']:null);var _videoJs2=_interopRequireDefault(_videoJs);var deprecateOldCue=function deprecateOldCue(cue){Object.defineProperties(cue.frame,{id:{get:function get(){_videoJs2['default'].log.warn('cue.frame.id is deprecated. Use cue.value.key instead.');return cue.value.key;}},value:{get:function get(){_videoJs2['default'].log.warn('cue.frame.value is deprecated. Use cue.value.data instead.');return cue.value.data;}},privateData:{get:function get(){_videoJs2['default'].log.warn('cue.frame.privateData is deprecated. Use cue.value.data instead.');return cue.value.data;}}});};var durationOfVideo=function durationOfVideo(duration){var dur=undefined;if(isNaN(duration)||Math.abs(duration)===Infinity){dur=Number.MAX_VALUE;}else{dur=duration;}
return dur;};var addTextTrackData=function addTextTrackData(sourceHandler,captionArray,metadataArray){var Cue=_globalWindow2['default'].WebKitDataCue||_globalWindow2['default'].VTTCue;if(captionArray){captionArray.forEach(function(caption){this.inbandTextTrack_.addCue(new Cue(caption.startTime+this.timestampOffset,caption.endTime+this.timestampOffset,caption.text));},sourceHandler);}
if(metadataArray){(function(){var videoDuration=durationOfVideo(sourceHandler.mediaSource_.duration);metadataArray.forEach(function(metadata){var time=metadata.cueTime+this.timestampOffset;metadata.frames.forEach(function(frame){var cue=new Cue(time,time,frame.value||frame.url||frame.data||'');cue.frame=frame;cue.value=frame;deprecateOldCue(cue);this.metadataTrack_.addCue(cue);},this);},sourceHandler);if(sourceHandler.metadataTrack_&&sourceHandler.metadataTrack_.cues&&sourceHandler.metadataTrack_.cues.length){(function(){var cues=sourceHandler.metadataTrack_.cues;var cuesArray=[];for(var i=0;i<cues.length;i++){if(cues[i]){cuesArray.push(cues[i]);}}
var cuesGroupedByStartTime=cuesArray.reduce(function(obj,cue){var timeSlot=obj[cue.startTime]||[];timeSlot.push(cue);obj[cue.startTime]=timeSlot;return obj;},{});var sortedStartTimes=Object.keys(cuesGroupedByStartTime).sort(function(a,b){return Number(a)-Number(b);});sortedStartTimes.forEach(function(startTime,idx){var cueGroup=cuesGroupedByStartTime[startTime];var nextTime=Number(sortedStartTimes[idx+1])||videoDuration;cueGroup.forEach(function(cue){cue.endTime=nextTime;});});})();}})();}};exports['default']={addTextTrackData:addTextTrackData,durationOfVideo:durationOfVideo};module.exports=exports['default'];}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"global/window":28}],61:[function(require,module,exports){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var removeExistingTrack=function removeExistingTrack(player,kind,label){var tracks=player.remoteTextTracks()||[];for(var i=0;i<tracks.length;i++){var track=tracks[i];if(track.kind===kind&&track.label===label){player.removeRemoteTextTrack(track);}}};exports.removeExistingTrack=removeExistingTrack;var cleanupTextTracks=function cleanupTextTracks(player){removeExistingTrack(player,'captions','cc1');removeExistingTrack(player,'metadata','Timed Metadata');};exports.cleanupTextTracks=cleanupTextTracks;},{}],62:[function(require,module,exports){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var isAudioCodec=function isAudioCodec(codec){return(/mp4a\.\d+.\d+/i.test(codec));};var isVideoCodec=function isVideoCodec(codec){return(/avc1\.[\da-f]+/i.test(codec));};var parseContentType=function parseContentType(type){var object={type:'',parameters:{}};var parameters=type.trim().split(';');object.type=parameters.shift().trim();parameters.forEach(function(parameter){var pair=parameter.trim().split('=');if(pair.length>1){var _name=pair[0].replace(/"/g,'').trim();var value=pair[1].replace(/"/g,'').trim();object.parameters[_name]=value;}});return object;};var translateLegacyCodecs=function translateLegacyCodecs(codecs){return codecs.map(function(codec){return codec.replace(/avc1\.(\d+)\.(\d+)/i,function(orig,profile,avcLevel){var profileHex=('00'+Number(profile).toString(16)).slice(-2);var avcLevelHex=('00'+Number(avcLevel).toString(16)).slice(-2);return'avc1.'+profileHex+'00'+avcLevelHex;});});};exports['default']={isAudioCodec:isAudioCodec,parseContentType:parseContentType,isVideoCodec:isVideoCodec,translateLegacyCodecs:translateLegacyCodecs};module.exports=exports['default'];},{}],63:[function(require,module,exports){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _cleanupTextTracks=require('./cleanup-text-tracks');var createTextTracksIfNecessary=function createTextTracksIfNecessary(sourceBuffer,mediaSource,segment){var player=mediaSource.player_;if(segment.captions&&segment.captions.length&&!sourceBuffer.inbandTextTrack_){(0,_cleanupTextTracks.removeExistingTrack)(player,'captions','cc1');sourceBuffer.inbandTextTrack_=player.addRemoteTextTrack({kind:'captions',label:'cc1'},false).track;}
if(segment.metadata&&segment.metadata.length&&!sourceBuffer.metadataTrack_){(0,_cleanupTextTracks.removeExistingTrack)(player,'metadata','Timed Metadata',true);sourceBuffer.metadataTrack_=player.addRemoteTextTrack({kind:'metadata',label:'Timed Metadata'},false).track;sourceBuffer.metadataTrack_.inBandMetadataTrackDispatchType=segment.metadata.dispatchType;}};exports['default']=createTextTracksIfNecessary;module.exports=exports['default'];},{"./cleanup-text-tracks":61}],64:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var flashConstants={TIME_BETWEEN_CHUNKS:1,BYTES_PER_CHUNK:1024*32};exports["default"]=flashConstants;module.exports=exports["default"];},{}],65:[function(require,module,exports){(function(global){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{_x=parent;_x2=property;_x3=receiver;_again=true;desc=parent=undefined;continue _function;}}else if('value'in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}
var _globalDocument=require('global/document');var _globalDocument2=_interopRequireDefault(_globalDocument);var _videoJs=(typeof window!=="undefined"?window['videojs']:typeof global!=="undefined"?global['videojs']:null);var _videoJs2=_interopRequireDefault(_videoJs);var _flashSourceBuffer=require('./flash-source-buffer');var _flashSourceBuffer2=_interopRequireDefault(_flashSourceBuffer);var _flashConstants=require('./flash-constants');var _flashConstants2=_interopRequireDefault(_flashConstants);var _codecUtils=require('./codec-utils');var _cleanupTextTracks=require('./cleanup-text-tracks');var FlashMediaSource=(function(_videojs$EventTarget){_inherits(FlashMediaSource,_videojs$EventTarget);function FlashMediaSource(){var _this=this;_classCallCheck(this,FlashMediaSource);_get(Object.getPrototypeOf(FlashMediaSource.prototype),'constructor',this).call(this);this.sourceBuffers=[];this.readyState='closed';this.on(['sourceopen','webkitsourceopen'],function(event){_this.swfObj=_globalDocument2['default'].getElementById(event.swfId);_this.player_=(0,_videoJs2['default'])(_this.swfObj.parentNode);_this.tech_=_this.swfObj.tech;_this.readyState='open';_this.tech_.on('seeking',function(){var i=_this.sourceBuffers.length;while(i--){_this.sourceBuffers[i].abort();}});if(_this.tech_.hls){_this.tech_.hls.on('dispose',function(){(0,_cleanupTextTracks.cleanupTextTracks)(_this.player_);});}
if(_this.swfObj){_this.swfObj.vjs_load();}});}
_createClass(FlashMediaSource,[{key:'addSeekableRange_',value:function addSeekableRange_(){}},{key:'addSourceBuffer',value:function addSourceBuffer(type){var parsedType=(0,_codecUtils.parseContentType)(type);var sourceBuffer=undefined;if(parsedType.type==='video/mp2t'){sourceBuffer=new _flashSourceBuffer2['default'](this);}else{throw new Error('NotSupportedError (Video.js)');}
this.sourceBuffers.push(sourceBuffer);return sourceBuffer;}},{key:'endOfStream',value:function endOfStream(error){if(error==='network'){this.tech_.error(2);}else if(error==='decode'){this.tech_.error(3);}
if(this.readyState!=='ended'){this.readyState='ended';this.swfObj.vjs_endOfStream();}}}]);return FlashMediaSource;})(_videoJs2['default'].EventTarget);exports['default']=FlashMediaSource;try{Object.defineProperty(FlashMediaSource.prototype,'duration',{get:function get(){if(!this.swfObj){return NaN;}
return this.swfObj.vjs_getProperty('duration');},set:function set(value){var i=undefined;var oldDuration=this.swfObj.vjs_getProperty('duration');this.swfObj.vjs_setProperty('duration',value);if(value<oldDuration){for(i=0;i<this.sourceBuffers.length;i++){this.sourceBuffers[i].remove(value,oldDuration);}}
return value;}});}catch(e){FlashMediaSource.prototype.duration=NaN;}
for(var property in _flashConstants2['default']){FlashMediaSource[property]=_flashConstants2['default'][property];}
module.exports=exports['default'];}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./cleanup-text-tracks":61,"./codec-utils":62,"./flash-constants":64,"./flash-source-buffer":66,"global/document":27}],66:[function(require,module,exports){(function(global){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{_x=parent;_x2=property;_x3=receiver;_again=true;desc=parent=undefined;continue _function;}}else if('value'in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}
var _globalWindow=require('global/window');var _globalWindow2=_interopRequireDefault(_globalWindow);var _videoJs=(typeof window!=="undefined"?window['videojs']:typeof global!=="undefined"?global['videojs']:null);var _videoJs2=_interopRequireDefault(_videoJs);var _muxJsLibFlv=require('mux.js/lib/flv');var _muxJsLibFlv2=_interopRequireDefault(_muxJsLibFlv);var _removeCuesFromTrack=require('./remove-cues-from-track');var _removeCuesFromTrack2=_interopRequireDefault(_removeCuesFromTrack);var _createTextTracksIfNecessary=require('./create-text-tracks-if-necessary');var _createTextTracksIfNecessary2=_interopRequireDefault(_createTextTracksIfNecessary);var _addTextTrackData=require('./add-text-track-data');var _flashTransmuxerWorker=require('./flash-transmuxer-worker');var _flashTransmuxerWorker2=_interopRequireDefault(_flashTransmuxerWorker);var _webworkify=require('webworkify');var _webworkify2=_interopRequireDefault(_webworkify);var _flashConstants=require('./flash-constants');var _flashConstants2=_interopRequireDefault(_flashConstants);var scheduleTick=function scheduleTick(func){_globalWindow2['default'].setTimeout(func,_flashConstants2['default'].TIME_BETWEEN_CHUNKS);};var generateRandomString=function generateRandomString(){return Math.random().toString(36).slice(2,8);};var toDecimalPlaces=function toDecimalPlaces(num,places){if(typeof places!=='number'||places<0){places=0;}
var scale=Math.pow(10,places);return Math.round(num*scale)/scale;};var FlashSourceBuffer=(function(_videojs$EventTarget){_inherits(FlashSourceBuffer,_videojs$EventTarget);function FlashSourceBuffer(mediaSource){var _this=this;_classCallCheck(this,FlashSourceBuffer);_get(Object.getPrototypeOf(FlashSourceBuffer.prototype),'constructor',this).call(this);var encodedHeader=undefined;this.chunkSize_=_flashConstants2['default'].BYTES_PER_CHUNK;this.buffer_=[];this.bufferSize_=0;this.basePtsOffset_=NaN;this.mediaSource_=mediaSource;this.audioBufferEnd_=NaN;this.videoBufferEnd_=NaN;this.updating=false;this.timestampOffset_=0;encodedHeader=_globalWindow2['default'].btoa(String.fromCharCode.apply(null,Array.prototype.slice.call(_muxJsLibFlv2['default'].getFlvHeader())));var safePlayerId=this.mediaSource_.player_.id().replace(/[^a-zA-Z0-9]/g,'_');this.flashEncodedHeaderName_='vjs_flashEncodedHeader_'+safePlayerId+generateRandomString();this.flashEncodedDataName_='vjs_flashEncodedData_'+safePlayerId+generateRandomString();_globalWindow2['default'][this.flashEncodedHeaderName_]=function(){delete _globalWindow2['default'][_this.flashEncodedHeaderName_];return encodedHeader;};this.mediaSource_.swfObj.vjs_appendChunkReady(this.flashEncodedHeaderName_);this.transmuxer_=(0,_webworkify2['default'])(_flashTransmuxerWorker2['default']);this.transmuxer_.postMessage({action:'init',options:{}});this.transmuxer_.onmessage=function(event){if(event.data.action==='data'){_this.receiveBuffer_(event.data.segment);}};this.one('updateend',function(){_this.mediaSource_.tech_.trigger('loadedmetadata');});Object.defineProperty(this,'timestampOffset',{get:function get(){return this.timestampOffset_;},set:function set(val){if(typeof val==='number'&&val>=0){this.timestampOffset_=val;this.mediaSource_.swfObj.vjs_discontinuity();this.basePtsOffset_=NaN;this.audioBufferEnd_=NaN;this.videoBufferEnd_=NaN;this.transmuxer_.postMessage({action:'reset'});}}});Object.defineProperty(this,'buffered',{get:function get(){if(!this.mediaSource_||!this.mediaSource_.swfObj||!('vjs_getProperty'in this.mediaSource_.swfObj)){return _videoJs2['default'].createTimeRange();}
var buffered=this.mediaSource_.swfObj.vjs_getProperty('buffered');if(buffered&&buffered.length){buffered[0][0]=toDecimalPlaces(buffered[0][0],3);buffered[0][1]=toDecimalPlaces(buffered[0][1],3);}
return _videoJs2['default'].createTimeRanges(buffered);}});this.mediaSource_.player_.on('seeked',function(){(0,_removeCuesFromTrack2['default'])(0,Infinity,_this.metadataTrack_);(0,_removeCuesFromTrack2['default'])(0,Infinity,_this.inbandTextTrack_);});this.mediaSource_.player_.tech_.hls.on('dispose',function(){_this.transmuxer_.terminate();});}
_createClass(FlashSourceBuffer,[{key:'appendBuffer',value:function appendBuffer(bytes){var error=undefined;if(this.updating){error=new Error('SourceBuffer.append() cannot be called '+'while an update is in progress');error.name='InvalidStateError';error.code=11;throw error;}
this.updating=true;this.mediaSource_.readyState='open';this.trigger({type:'update'});this.transmuxer_.postMessage({action:'push',data:bytes.buffer,byteOffset:bytes.byteOffset,byteLength:bytes.byteLength},[bytes.buffer]);this.transmuxer_.postMessage({action:'flush'});}},{key:'abort',value:function abort(){this.buffer_=[];this.bufferSize_=0;this.mediaSource_.swfObj.vjs_abort();if(this.updating){this.updating=false;this.trigger({type:'updateend'});}}},{key:'remove',value:function remove(start,end){(0,_removeCuesFromTrack2['default'])(start,end,this.metadataTrack_);(0,_removeCuesFromTrack2['default'])(start,end,this.inbandTextTrack_);this.trigger({type:'update'});this.trigger({type:'updateend'});}},{key:'receiveBuffer_',value:function receiveBuffer_(segment){var _this2=this;(0,_createTextTracksIfNecessary2['default'])(this,this.mediaSource_,segment);(0,_addTextTrackData.addTextTrackData)(this,segment.captions,segment.metadata);scheduleTick(function(){var flvBytes=_this2.convertTagsToData_(segment);if(_this2.buffer_.length===0){scheduleTick(_this2.processBuffer_.bind(_this2));}
if(flvBytes){_this2.buffer_.push(flvBytes);_this2.bufferSize_+=flvBytes.byteLength;}});}},{key:'processBuffer_',value:function processBuffer_(){var _this3=this;var chunkSize=_flashConstants2['default'].BYTES_PER_CHUNK;if(!this.buffer_.length){if(this.updating!==false){this.updating=false;this.trigger({type:'updateend'});}
return;}
var chunk=this.buffer_[0].subarray(0,chunkSize);if(chunk.byteLength<chunkSize||this.buffer_[0].byteLength===chunkSize){this.buffer_.shift();}else{this.buffer_[0]=this.buffer_[0].subarray(chunkSize);}
this.bufferSize_-=chunk.byteLength;var binary=[];var length=chunk.byteLength;for(var i=0;i<length;i++){binary.push(String.fromCharCode(chunk[i]));}
var b64str=_globalWindow2['default'].btoa(binary.join(''));_globalWindow2['default'][this.flashEncodedDataName_]=function(){scheduleTick(_this3.processBuffer_.bind(_this3));delete _globalWindow2['default'][_this3.flashEncodedDataName_];return b64str;};this.mediaSource_.swfObj.vjs_appendChunkReady(this.flashEncodedDataName_);}},{key:'convertTagsToData_',value:function convertTagsToData_(segmentData){var segmentByteLength=0;var tech=this.mediaSource_.tech_;var videoTargetPts=0;var segment=undefined;var videoTags=segmentData.tags.videoTags;var audioTags=segmentData.tags.audioTags;if(isNaN(this.basePtsOffset_)&&(videoTags.length||audioTags.length)){var firstVideoTag=videoTags[0]||{pts:Infinity};var firstAudioTag=audioTags[0]||{pts:Infinity};this.basePtsOffset_=Math.min(firstAudioTag.pts,firstVideoTag.pts);}
if(tech.seeking()){this.videoBufferEnd_=NaN;this.audioBufferEnd_=NaN;}
if(isNaN(this.videoBufferEnd_)){if(tech.buffered().length){videoTargetPts=tech.buffered().end(0)-this.timestampOffset;}
if(tech.seeking()){videoTargetPts=Math.max(videoTargetPts,tech.currentTime()-this.timestampOffset);}
videoTargetPts*=1e3;videoTargetPts+=this.basePtsOffset_;}else{videoTargetPts=this.videoBufferEnd_+0.1;}
var currentIndex=videoTags.length;if(currentIndex&&videoTags[currentIndex-1].pts>=videoTargetPts){while(--currentIndex){var currentTag=videoTags[currentIndex];if(currentTag.pts>videoTargetPts){continue;}
if(currentTag.keyFrame||currentTag.metaDataTag){break;}}
while(currentIndex){var nextTag=videoTags[currentIndex-1];if(!nextTag.metaDataTag){break;}
currentIndex--;}}
var filteredVideoTags=videoTags.slice(currentIndex);var audioTargetPts=undefined;if(isNaN(this.audioBufferEnd_)){audioTargetPts=videoTargetPts;}else{audioTargetPts=this.audioBufferEnd_+0.1;}
if(filteredVideoTags.length){audioTargetPts=Math.min(audioTargetPts,filteredVideoTags[0].pts);}
currentIndex=0;while(currentIndex<audioTags.length){if(audioTags[currentIndex].pts>=audioTargetPts){break;}
currentIndex++;}
var filteredAudioTags=audioTags.slice(currentIndex);if(filteredAudioTags.length){this.audioBufferEnd_=filteredAudioTags[filteredAudioTags.length-1].pts;}
if(filteredVideoTags.length){this.videoBufferEnd_=filteredVideoTags[filteredVideoTags.length-1].pts;}
var tags=this.getOrderedTags_(filteredVideoTags,filteredAudioTags);if(tags.length===0){return;}
if(tags[0].pts<videoTargetPts&&tech.seeking()){var fudgeFactor=1/30;var currentTime=tech.currentTime();var diff=(videoTargetPts-tags[0].pts)/1e3;var adjustedTime=currentTime-diff;if(adjustedTime<fudgeFactor){adjustedTime=0;}
try{this.mediaSource_.swfObj.vjs_adjustCurrentTime(adjustedTime);}catch(e){}}
for(var i=0;i<tags.length;i++){segmentByteLength+=tags[i].bytes.byteLength;}
segment=new Uint8Array(segmentByteLength);for(var i=0,j=0;i<tags.length;i++){segment.set(tags[i].bytes,j);j+=tags[i].bytes.byteLength;}
return segment;}},{key:'getOrderedTags_',value:function getOrderedTags_(videoTags,audioTags){var tag=undefined;var tags=[];while(videoTags.length||audioTags.length){if(!videoTags.length){tag=audioTags.shift();}else if(!audioTags.length){tag=videoTags.shift();}else if(audioTags[0].dts<videoTags[0].dts){tag=audioTags.shift();}else{tag=videoTags.shift();}
tags.push(tag);}
return tags;}}]);return FlashSourceBuffer;})(_videoJs2['default'].EventTarget);exports['default']=FlashSourceBuffer;module.exports=exports['default'];}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./add-text-track-data":60,"./create-text-tracks-if-necessary":63,"./flash-constants":64,"./flash-transmuxer-worker":67,"./remove-cues-from-track":69,"global/window":28,"mux.js/lib/flv":42,"webworkify":73}],67:[function(require,module,exports){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
var _globalWindow=require('global/window');var _globalWindow2=_interopRequireDefault(_globalWindow);var _muxJsLibFlv=require('mux.js/lib/flv');var _muxJsLibFlv2=_interopRequireDefault(_muxJsLibFlv);var wireTransmuxerEvents=function wireTransmuxerEvents(transmuxer){transmuxer.on('data',function(segment){_globalWindow2['default'].postMessage({action:'data',segment:segment});});transmuxer.on('done',function(data){_globalWindow2['default'].postMessage({action:'done'});});};var MessageHandlers=(function(){function MessageHandlers(options){_classCallCheck(this,MessageHandlers);this.options=options||{};this.init();}
_createClass(MessageHandlers,[{key:'init',value:function init(){if(this.transmuxer){this.transmuxer.dispose();}
this.transmuxer=new _muxJsLibFlv2['default'].Transmuxer(this.options);wireTransmuxerEvents(this.transmuxer);}},{key:'push',value:function push(data){var segment=new Uint8Array(data.data,data.byteOffset,data.byteLength);this.transmuxer.push(segment);}},{key:'reset',value:function reset(){this.init();}},{key:'flush',value:function flush(){this.transmuxer.flush();}}]);return MessageHandlers;})();var FlashTransmuxerWorker=function FlashTransmuxerWorker(self){self.onmessage=function(event){if(event.data.action==='init'&&event.data.options){this.messageHandlers=new MessageHandlers(event.data.options);return;}
if(!this.messageHandlers){this.messageHandlers=new MessageHandlers();}
if(event.data&&event.data.action&&event.data.action!=='init'){if(this.messageHandlers[event.data.action]){this.messageHandlers[event.data.action](event.data);}}};};exports['default']=function(self){return new FlashTransmuxerWorker(self);};module.exports=exports['default'];},{"global/window":28,"mux.js/lib/flv":42}],68:[function(require,module,exports){(function(global){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{_x=parent;_x2=property;_x3=receiver;_again=true;desc=parent=undefined;continue _function;}}else if('value'in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}
var _globalWindow=require('global/window');var _globalWindow2=_interopRequireDefault(_globalWindow);var _globalDocument=require('global/document');var _globalDocument2=_interopRequireDefault(_globalDocument);var _videoJs=(typeof window!=="undefined"?window['videojs']:typeof global!=="undefined"?global['videojs']:null);var _videoJs2=_interopRequireDefault(_videoJs);var _virtualSourceBuffer=require('./virtual-source-buffer');var _virtualSourceBuffer2=_interopRequireDefault(_virtualSourceBuffer);var _addTextTrackData=require('./add-text-track-data');var _codecUtils=require('./codec-utils');var _cleanupTextTracks=require('./cleanup-text-tracks');var HtmlMediaSource=(function(_videojs$EventTarget){_inherits(HtmlMediaSource,_videojs$EventTarget);function HtmlMediaSource(){var _this=this;_classCallCheck(this,HtmlMediaSource);_get(Object.getPrototypeOf(HtmlMediaSource.prototype),'constructor',this).call(this);var property=undefined;this.nativeMediaSource_=new _globalWindow2['default'].MediaSource();for(property in this.nativeMediaSource_){if(!(property in HtmlMediaSource.prototype)&&typeof this.nativeMediaSource_[property]==='function'){this[property]=this.nativeMediaSource_[property].bind(this.nativeMediaSource_);}}
this.duration_=NaN;Object.defineProperty(this,'duration',{get:function get(){if(this.duration_===Infinity){return this.duration_;}
return this.nativeMediaSource_.duration;},set:function set(duration){this.duration_=duration;if(duration!==Infinity){this.nativeMediaSource_.duration=duration;return;}}});Object.defineProperty(this,'seekable',{get:function get(){if(this.duration_===Infinity){return _videoJs2['default'].createTimeRanges([[0,this.nativeMediaSource_.duration]]);}
return this.nativeMediaSource_.seekable;}});Object.defineProperty(this,'readyState',{get:function get(){return this.nativeMediaSource_.readyState;}});Object.defineProperty(this,'activeSourceBuffers',{get:function get(){return this.activeSourceBuffers_;}});this.sourceBuffers=[];this.activeSourceBuffers_=[];this.updateActiveSourceBuffers_=function(){_this.activeSourceBuffers_.length=0;var combined=false;var audioOnly=true;for(var i=0;i<_this.player_.audioTracks().length;i++){var track=_this.player_.audioTracks()[i];if(track.enabled&&track.kind!=='main'){combined=true;audioOnly=false;break;}}
_this.sourceBuffers.forEach(function(sourceBuffer){sourceBuffer.appendAudioInitSegment_=true;if(sourceBuffer.videoCodec_&&sourceBuffer.audioCodec_){sourceBuffer.audioDisabled_=combined;}else if(sourceBuffer.videoCodec_&&!sourceBuffer.audioCodec_){sourceBuffer.audioDisabled_=true;audioOnly=false;}else if(!sourceBuffer.videoCodec_&&sourceBuffer.audioCodec_){sourceBuffer.audioDisabled_=audioOnly;if(audioOnly){return;}}
_this.activeSourceBuffers_.push(sourceBuffer);});};this.onPlayerMediachange_=function(){_this.sourceBuffers.forEach(function(sourceBuffer){sourceBuffer.appendAudioInitSegment_=true;});};['sourceopen','sourceclose','sourceended'].forEach(function(eventName){this.nativeMediaSource_.addEventListener(eventName,this.trigger.bind(this));},this);this.on('sourceopen',function(event){var video=_globalDocument2['default'].querySelector('[src="'+_this.url_+'"]');if(!video){return;}
_this.player_=(0,_videoJs2['default'])(video.parentNode);if(_this.player_.audioTracks&&_this.player_.audioTracks()){_this.player_.audioTracks().on('change',_this.updateActiveSourceBuffers_);_this.player_.audioTracks().on('addtrack',_this.updateActiveSourceBuffers_);_this.player_.audioTracks().on('removetrack',_this.updateActiveSourceBuffers_);}
_this.player_.on('mediachange',_this.onPlayerMediachange_);});this.on('sourceended',function(event){var duration=(0,_addTextTrackData.durationOfVideo)(_this.duration);for(var i=0;i<_this.sourceBuffers.length;i++){var sourcebuffer=_this.sourceBuffers[i];var cues=sourcebuffer.metadataTrack_&&sourcebuffer.metadataTrack_.cues;if(cues&&cues.length){cues[cues.length-1].endTime=duration;}}});this.on('sourceclose',function(event){this.sourceBuffers.forEach(function(sourceBuffer){if(sourceBuffer.transmuxer_){sourceBuffer.transmuxer_.terminate();}});this.sourceBuffers.length=0;if(!this.player_){return;}
(0,_cleanupTextTracks.cleanupTextTracks)(this.player_);if(this.player_.audioTracks&&this.player_.audioTracks()){this.player_.audioTracks().off('change',this.updateActiveSourceBuffers_);this.player_.audioTracks().off('addtrack',this.updateActiveSourceBuffers_);this.player_.audioTracks().off('removetrack',this.updateActiveSourceBuffers_);}
if(this.player_.el_){this.player_.off('mediachange',this.onPlayerMediachange_);}});}
_createClass(HtmlMediaSource,[{key:'addSeekableRange_',value:function addSeekableRange_(start,end){var error=undefined;if(this.duration!==Infinity){error=new Error('MediaSource.addSeekableRange() can only be invoked '+'when the duration is Infinity');error.name='InvalidStateError';error.code=11;throw error;}
if(end>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration)){this.nativeMediaSource_.duration=end;}}},{key:'addSourceBuffer',value:function addSourceBuffer(type){var buffer=undefined;var parsedType=(0,_codecUtils.parseContentType)(type);if(/^(video|audio)\/mp2t$/i.test(parsedType.type)){var codecs=[];if(parsedType.parameters&&parsedType.parameters.codecs){codecs=parsedType.parameters.codecs.split(',');codecs=(0,_codecUtils.translateLegacyCodecs)(codecs);codecs=codecs.filter(function(codec){return(0,_codecUtils.isAudioCodec)(codec)||(0,_codecUtils.isVideoCodec)(codec);});}
if(codecs.length===0){codecs=['avc1.4d400d','mp4a.40.2'];}
buffer=new _virtualSourceBuffer2['default'](this,codecs);if(this.sourceBuffers.length!==0){this.sourceBuffers[0].createRealSourceBuffers_();buffer.createRealSourceBuffers_();this.sourceBuffers[0].audioDisabled_=true;}}else{buffer=this.nativeMediaSource_.addSourceBuffer(type);}
this.sourceBuffers.push(buffer);return buffer;}}]);return HtmlMediaSource;})(_videoJs2['default'].EventTarget);exports['default']=HtmlMediaSource;module.exports=exports['default'];}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./add-text-track-data":60,"./cleanup-text-tracks":61,"./codec-utils":62,"./virtual-source-buffer":72,"global/document":27,"global/window":28}],69:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var removeCuesFromTrack=function removeCuesFromTrack(start,end,track){var i=undefined;var cue=undefined;if(!track){return;}
if(!track.cues){return;}
i=track.cues.length;while(i--){cue=track.cues[i];if(cue.startTime<=end&&cue.endTime>=start){track.removeCue(cue);}}};exports["default"]=removeCuesFromTrack;module.exports=exports["default"];},{}],70:[function(require,module,exports){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
var _globalWindow=require('global/window');var _globalWindow2=_interopRequireDefault(_globalWindow);var _muxJsLibMp4=require('mux.js/lib/mp4');var _muxJsLibMp42=_interopRequireDefault(_muxJsLibMp4);var wireTransmuxerEvents=function wireTransmuxerEvents(transmuxer){transmuxer.on('data',function(segment){var initArray=segment.initSegment;segment.initSegment={data:initArray.buffer,byteOffset:initArray.byteOffset,byteLength:initArray.byteLength};var typedArray=segment.data;segment.data=typedArray.buffer;_globalWindow2['default'].postMessage({action:'data',segment:segment,byteOffset:typedArray.byteOffset,byteLength:typedArray.byteLength},[segment.data]);});if(transmuxer.captionStream){transmuxer.captionStream.on('data',function(caption){_globalWindow2['default'].postMessage({action:'caption',data:caption});});}
transmuxer.on('done',function(data){_globalWindow2['default'].postMessage({action:'done'});});};var MessageHandlers=(function(){function MessageHandlers(options){_classCallCheck(this,MessageHandlers);this.options=options||{};this.init();}
_createClass(MessageHandlers,[{key:'init',value:function init(){if(this.transmuxer){this.transmuxer.dispose();}
this.transmuxer=new _muxJsLibMp42['default'].Transmuxer(this.options);wireTransmuxerEvents(this.transmuxer);}},{key:'push',value:function push(data){var segment=new Uint8Array(data.data,data.byteOffset,data.byteLength);this.transmuxer.push(segment);}},{key:'reset',value:function reset(){this.init();}},{key:'setTimestampOffset',value:function setTimestampOffset(data){var timestampOffset=data.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(timestampOffset*90000));}},{key:'setAudioAppendStart',value:function setAudioAppendStart(data){this.transmuxer.setAudioAppendStart(Math.ceil(data.appendStart*90000));}},{key:'flush',value:function flush(data){this.transmuxer.flush();}}]);return MessageHandlers;})();var TransmuxerWorker=function TransmuxerWorker(self){self.onmessage=function(event){if(event.data.action==='init'&&event.data.options){this.messageHandlers=new MessageHandlers(event.data.options);return;}
if(!this.messageHandlers){this.messageHandlers=new MessageHandlers();}
if(event.data&&event.data.action&&event.data.action!=='init'){if(this.messageHandlers[event.data.action]){this.messageHandlers[event.data.action](event.data);}}};};exports['default']=function(self){return new TransmuxerWorker(self);};module.exports=exports['default'];},{"global/window":28,"mux.js/lib/mp4":51}],71:[function(require,module,exports){(function(global){'use strict';Object.defineProperty(exports,'__esModule',{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
var _globalWindow=require('global/window');var _globalWindow2=_interopRequireDefault(_globalWindow);var _flashMediaSource=require('./flash-media-source');var _flashMediaSource2=_interopRequireDefault(_flashMediaSource);var _htmlMediaSource=require('./html-media-source');var _htmlMediaSource2=_interopRequireDefault(_htmlMediaSource);var _videoJs=(typeof window!=="undefined"?window['videojs']:typeof global!=="undefined"?global['videojs']:null);var _videoJs2=_interopRequireDefault(_videoJs);var urlCount=0;var defaults={mode:'auto'};_videoJs2['default'].mediaSources={};var open=function open(msObjectURL,swfId){var mediaSource=_videoJs2['default'].mediaSources[msObjectURL];if(mediaSource){mediaSource.trigger({type:'sourceopen',swfId:swfId});}else{throw new Error('Media Source not found (Video.js)');}};var supportsNativeMediaSources=function supportsNativeMediaSources(){return!!_globalWindow2['default'].MediaSource&&!!_globalWindow2['default'].MediaSource.isTypeSupported&&_globalWindow2['default'].MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"');};var MediaSource=function MediaSource(options){var settings=_videoJs2['default'].mergeOptions(defaults,options);this.MediaSource={open:open,supportsNativeMediaSources:supportsNativeMediaSources};if(settings.mode==='html5'||settings.mode==='auto'&&supportsNativeMediaSources()){return new _htmlMediaSource2['default']();}else if(_videoJs2['default'].getTech('Flash')){return new _flashMediaSource2['default']();}
throw new Error('Cannot use Flash or Html5 to create a MediaSource for this video');};exports.MediaSource=MediaSource;MediaSource.open=open;MediaSource.supportsNativeMediaSources=supportsNativeMediaSources;var URL={createObjectURL:function createObjectURL(object){var objectUrlPrefix='blob:vjs-media-source/';var url=undefined;if(object instanceof _htmlMediaSource2['default']){url=_globalWindow2['default'].URL.createObjectURL(object.nativeMediaSource_);object.url_=url;return url;}
if(!(object instanceof _flashMediaSource2['default'])){url=_globalWindow2['default'].URL.createObjectURL(object);object.url_=url;return url;}
url=objectUrlPrefix+urlCount;urlCount++;_videoJs2['default'].mediaSources[url]=object;return url;}};exports.URL=URL;_videoJs2['default'].MediaSource=MediaSource;_videoJs2['default'].URL=URL;}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./flash-media-source":65,"./html-media-source":68,"global/window":28}],72:[function(require,module,exports){(function(global){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{_x=parent;_x2=property;_x3=receiver;_again=true;desc=parent=undefined;continue _function;}}else if('value'in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}
var _videoJs=(typeof window!=="undefined"?window['videojs']:typeof global!=="undefined"?global['videojs']:null);var _videoJs2=_interopRequireDefault(_videoJs);var _createTextTracksIfNecessary=require('./create-text-tracks-if-necessary');var _createTextTracksIfNecessary2=_interopRequireDefault(_createTextTracksIfNecessary);var _removeCuesFromTrack=require('./remove-cues-from-track');var _removeCuesFromTrack2=_interopRequireDefault(_removeCuesFromTrack);var _addTextTrackData=require('./add-text-track-data');var _webworkify=require('webworkify');var _webworkify2=_interopRequireDefault(_webworkify);var _transmuxerWorker=require('./transmuxer-worker');var _transmuxerWorker2=_interopRequireDefault(_transmuxerWorker);var _codecUtils=require('./codec-utils');var VirtualSourceBuffer=(function(_videojs$EventTarget){_inherits(VirtualSourceBuffer,_videojs$EventTarget);function VirtualSourceBuffer(mediaSource,codecs){var _this=this;_classCallCheck(this,VirtualSourceBuffer);_get(Object.getPrototypeOf(VirtualSourceBuffer.prototype),'constructor',this).call(this,_videoJs2['default'].EventTarget);this.timestampOffset_=0;this.pendingBuffers_=[];this.bufferUpdating_=false;this.mediaSource_=mediaSource;this.codecs_=codecs;this.audioCodec_=null;this.videoCodec_=null;this.audioDisabled_=false;this.appendAudioInitSegment_=true;var options={remux:false};this.codecs_.forEach(function(codec){if((0,_codecUtils.isAudioCodec)(codec)){_this.audioCodec_=codec;}else if((0,_codecUtils.isVideoCodec)(codec)){_this.videoCodec_=codec;}});this.transmuxer_=(0,_webworkify2['default'])(_transmuxerWorker2['default']);this.transmuxer_.postMessage({action:'init',options:options});this.transmuxer_.onmessage=function(event){if(event.data.action==='data'){return _this.data_(event);}
if(event.data.action==='done'){return _this.done_(event);}};Object.defineProperty(this,'timestampOffset',{get:function get(){return this.timestampOffset_;},set:function set(val){if(typeof val==='number'&&val>=0){this.timestampOffset_=val;this.appendAudioInitSegment_=true;this.transmuxer_.postMessage({action:'setTimestampOffset',timestampOffset:val});}}});Object.defineProperty(this,'appendWindowStart',{get:function get(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart;},set:function set(start){if(this.videoBuffer_){this.videoBuffer_.appendWindowStart=start;}
if(this.audioBuffer_){this.audioBuffer_.appendWindowStart=start;}}});Object.defineProperty(this,'updating',{get:function get(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating);}});Object.defineProperty(this,'buffered',{get:function get(){var start=null;var end=null;var arity=0;var extents=[];var ranges=[];if(!this.videoBuffer_&&!this.audioBuffer_){return _videoJs2['default'].createTimeRange();}
if(!this.videoBuffer_){return this.audioBuffer_.buffered;}
if(!this.audioBuffer_){return this.videoBuffer_.buffered;}
if(this.audioDisabled_){return this.videoBuffer_.buffered;}
if(this.videoBuffer_.buffered.length===0&&this.audioBuffer_.buffered.length===0){return _videoJs2['default'].createTimeRange();}
var videoBuffered=this.videoBuffer_.buffered;var audioBuffered=this.audioBuffer_.buffered;var count=videoBuffered.length;while(count--){extents.push({time:videoBuffered.start(count),type:'start'});extents.push({time:videoBuffered.end(count),type:'end'});}
count=audioBuffered.length;while(count--){extents.push({time:audioBuffered.start(count),type:'start'});extents.push({time:audioBuffered.end(count),type:'end'});}
extents.sort(function(a,b){return a.time-b.time;});for(count=0;count<extents.length;count++){if(extents[count].type==='start'){arity++;if(arity===2){start=extents[count].time;}}else if(extents[count].type==='end'){arity--;if(arity===1){end=extents[count].time;}}
if(start!==null&&end!==null){ranges.push([start,end]);start=null;end=null;}}
return _videoJs2['default'].createTimeRanges(ranges);}});}
_createClass(VirtualSourceBuffer,[{key:'data_',value:function data_(event){var segment=event.data.segment;segment.data=new Uint8Array(segment.data,event.data.byteOffset,event.data.byteLength);segment.initSegment=new Uint8Array(segment.initSegment.data,segment.initSegment.byteOffset,segment.initSegment.byteLength);(0,_createTextTracksIfNecessary2['default'])(this,this.mediaSource_,segment);this.pendingBuffers_.push(segment);return;}},{key:'done_',value:function done_(event){this.processPendingSegments_();return;}},{key:'createRealSourceBuffers_',value:function createRealSourceBuffers_(){var _this2=this;var types=['audio','video'];types.forEach(function(type){if(!_this2[type+'Codec_']){return;}
if(_this2[type+'Buffer_']){return;}
var buffer=null;if(_this2.mediaSource_[type+'Buffer_']){buffer=_this2.mediaSource_[type+'Buffer_'];}else{buffer=_this2.mediaSource_.nativeMediaSource_.addSourceBuffer(type+'/mp4;codecs="'+_this2[type+'Codec_']+'"');_this2.mediaSource_[type+'Buffer_']=buffer;}
_this2[type+'Buffer_']=buffer;['update','updatestart','updateend'].forEach(function(event){buffer.addEventListener(event,function(){if(type==='audio'&&_this2.audioDisabled_){return;}
var shouldTrigger=types.every(function(t){if(t==='audio'&&_this2.audioDisabled_){return true;}
if(type!==t&&_this2[t+'Buffer_']&&_this2[t+'Buffer_'].updating){return false;}
return true;});if(shouldTrigger){return _this2.trigger(event);}});});});}},{key:'appendBuffer',value:function appendBuffer(segment){this.bufferUpdating_=true;if(this.audioBuffer_&&this.audioBuffer_.buffered.length){var audioBuffered=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:'setAudioAppendStart',appendStart:audioBuffered.end(audioBuffered.length-1)});}
this.transmuxer_.postMessage({action:'push',data:segment.buffer,byteOffset:segment.byteOffset,byteLength:segment.byteLength},[segment.buffer]);this.transmuxer_.postMessage({action:'flush'});}},{key:'remove',value:function remove(start,end){if(this.videoBuffer_){this.videoBuffer_.remove(start,end);}
if(this.audioBuffer_){this.audioBuffer_.remove(start,end);}
(0,_removeCuesFromTrack2['default'])(start,end,this.metadataTrack_);(0,_removeCuesFromTrack2['default'])(start,end,this.inbandTextTrack_);}},{key:'processPendingSegments_',value:function processPendingSegments_(){var sortedSegments={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};sortedSegments=this.pendingBuffers_.reduce(function(segmentObj,segment){var type=segment.type;var data=segment.data;var initSegment=segment.initSegment;segmentObj[type].segments.push(data);segmentObj[type].bytes+=data.byteLength;segmentObj[type].initSegment=initSegment;if(segment.captions){segmentObj.captions=segmentObj.captions.concat(segment.captions);}
if(segment.info){segmentObj[type].info=segment.info;}
if(segment.metadata){segmentObj.metadata=segmentObj.metadata.concat(segment.metadata);}
return segmentObj;},sortedSegments);if(!this.videoBuffer_&&!this.audioBuffer_){if(sortedSegments.video.bytes===0){this.videoCodec_=null;}
if(sortedSegments.audio.bytes===0){this.audioCodec_=null;}
this.createRealSourceBuffers_();}
if(sortedSegments.audio.info){this.mediaSource_.trigger({type:'audioinfo',info:sortedSegments.audio.info});}
if(sortedSegments.video.info){this.mediaSource_.trigger({type:'videoinfo',info:sortedSegments.video.info});}
if(this.appendAudioInitSegment_){if(!this.audioDisabled_&&this.audioBuffer_){sortedSegments.audio.segments.unshift(sortedSegments.audio.initSegment);sortedSegments.audio.bytes+=sortedSegments.audio.initSegment.byteLength;}
this.appendAudioInitSegment_=false;}
if(this.videoBuffer_){sortedSegments.video.segments.unshift(sortedSegments.video.initSegment);sortedSegments.video.bytes+=sortedSegments.video.initSegment.byteLength;this.concatAndAppendSegments_(sortedSegments.video,this.videoBuffer_);(0,_addTextTrackData.addTextTrackData)(this,sortedSegments.captions,sortedSegments.metadata);}
if(!this.audioDisabled_&&this.audioBuffer_){this.concatAndAppendSegments_(sortedSegments.audio,this.audioBuffer_);}
this.pendingBuffers_.length=0;this.bufferUpdating_=false;}},{key:'concatAndAppendSegments_',value:function concatAndAppendSegments_(segmentObj,destinationBuffer){var offset=0;var tempBuffer=undefined;if(segmentObj.bytes){tempBuffer=new Uint8Array(segmentObj.bytes);segmentObj.segments.forEach(function(segment){tempBuffer.set(segment,offset);offset+=segment.byteLength;});try{destinationBuffer.appendBuffer(tempBuffer);}catch(error){if(this.mediaSource_.player_){this.mediaSource_.player_.error({code:-3,type:'APPEND_BUFFER_ERR',message:error.message,originalError:error});}}}}},{key:'abort',value:function abort(){if(this.videoBuffer_){this.videoBuffer_.abort();}
if(this.audioBuffer_){this.audioBuffer_.abort();}
if(this.transmuxer_){this.transmuxer_.postMessage({action:'reset'});}
this.pendingBuffers_.length=0;this.bufferUpdating_=false;}}]);return VirtualSourceBuffer;})(_videoJs2['default'].EventTarget);exports['default']=VirtualSourceBuffer;module.exports=exports['default'];}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./add-text-track-data":60,"./codec-utils":62,"./create-text-tracks-if-necessary":63,"./remove-cues-from-track":69,"./transmuxer-worker":70,"webworkify":73}],73:[function(require,module,exports){var bundleFn=arguments[3];var sources=arguments[4];var cache=arguments[5];var stringify=JSON.stringify;module.exports=function(fn){var keys=[];var wkey;var cacheKeys=Object.keys(cache);for(var i=0,l=cacheKeys.length;i<l;i++){var key=cacheKeys[i];if(cache[key].exports===fn){wkey=key;break;}}
if(!wkey){wkey=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var wcache={};for(var i=0,l=cacheKeys.length;i<l;i++){var key=cacheKeys[i];wcache[key]=key;}
sources[wkey]=[Function(['require','module','exports'],'('+fn+')(self)'),wcache];}
var skey=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var scache={};scache[wkey]=wkey;sources[skey]=[Function(['require'],'require('+stringify(wkey)+')(self)'),scache];var src='('+bundleFn+')({'
+Object.keys(sources).map(function(key){return stringify(key)+':['
+sources[key][0]
+','+stringify(sources[key][1])+']';}).join(',')
+'},{},['+stringify(skey)+'])';var URL=window.URL||window.webkitURL||window.mozURL||window.msURL;return new Worker(URL.createObjectURL(new Blob([src],{type:'text/javascript'})));};},{}],74:[function(require,module,exports){(function(global){'use strict';var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{_x=parent;_x2=property;_x3=receiver;_again=true;desc=parent=undefined;continue _function;}}else if('value'in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}
var _globalDocument=require('global/document');var _globalDocument2=_interopRequireDefault(_globalDocument);var _playlistLoader=require('./playlist-loader');var _playlistLoader2=_interopRequireDefault(_playlistLoader);var _playlist=require('./playlist');var _playlist2=_interopRequireDefault(_playlist);var _xhr=require('./xhr');var _xhr2=_interopRequireDefault(_xhr);var _aesDecrypter=require('aes-decrypter');var _binUtils=require('./bin-utils');var _binUtils2=_interopRequireDefault(_binUtils);var _videojsContribMediaSources=require('videojs-contrib-media-sources');var _m3u8Parser=require('m3u8-parser');var _m3u8Parser2=_interopRequireDefault(_m3u8Parser);var _videoJs=(typeof window!=="undefined"?window['videojs']:typeof global!=="undefined"?global['videojs']:null);var _videoJs2=_interopRequireDefault(_videoJs);var _masterPlaylistController=require('./master-playlist-controller');var _config=require('./config');var _config2=_interopRequireDefault(_config);var _renditionMixin=require('./rendition-mixin');var _renditionMixin2=_interopRequireDefault(_renditionMixin);var _globalWindow=require('global/window');var _globalWindow2=_interopRequireDefault(_globalWindow);var _playbackWatcher=require('./playback-watcher');var _playbackWatcher2=_interopRequireDefault(_playbackWatcher);var _reloadSourceOnError=require('./reload-source-on-error');var _reloadSourceOnError2=_interopRequireDefault(_reloadSourceOnError);var Hls={PlaylistLoader:_playlistLoader2['default'],Playlist:_playlist2['default'],Decrypter:_aesDecrypter.Decrypter,AsyncStream:_aesDecrypter.AsyncStream,decrypt:_aesDecrypter.decrypt,utils:_binUtils2['default'],xhr:(0,_xhr2['default'])()};Object.defineProperty(Hls,'GOAL_BUFFER_LENGTH',{get:function get(){_videoJs2['default'].log.warn('using Hls.GOAL_BUFFER_LENGTH is UNSAFE be sure '+'you know what you are doing');return _config2['default'].GOAL_BUFFER_LENGTH;},set:function set(v){_videoJs2['default'].log.warn('using Hls.GOAL_BUFFER_LENGTH is UNSAFE be sure '+'you know what you are doing');if(typeof v!=='number'||v<=0){_videoJs2['default'].log.warn('value passed to Hls.GOAL_BUFFER_LENGTH '+'must be a number and greater than 0');return;}
_config2['default'].GOAL_BUFFER_LENGTH=v;}});var BANDWIDTH_VARIANCE=1.2;var safeGetComputedStyle=function safeGetComputedStyle(el,property){var result=undefined;if(!el){return'';}
result=_globalWindow2['default'].getComputedStyle(el);if(!result){return'';}
return result[property];};var handleHlsMediaChange=function handleHlsMediaChange(qualityLevels,playlistLoader){var newPlaylist=playlistLoader.media();var selectedIndex=-1;for(var i=0;i<qualityLevels.length;i++){if(qualityLevels[i].id===newPlaylist.uri){selectedIndex=i;break;}}
qualityLevels.selectedIndex_=selectedIndex;qualityLevels.trigger({selectedIndex:selectedIndex,type:'change'});};var handleHlsLoadedMetadata=function handleHlsLoadedMetadata(qualityLevels,hls){hls.representations().forEach(function(rep){qualityLevels.addQualityLevel(rep);});handleHlsMediaChange(qualityLevels,hls.playlists);};var stableSort=function stableSort(array,sortFn){var newArray=array.slice();array.sort(function(left,right){var cmp=sortFn(left,right);if(cmp===0){return newArray.indexOf(left)-newArray.indexOf(right);}
return cmp;});};Hls.STANDARD_PLAYLIST_SELECTOR=function(){var sortedPlaylists=this.playlists.master.playlists.slice();var bandwidthPlaylists=[];var bandwidthBestVariant=undefined;var resolutionPlusOne=undefined;var resolutionBestVariant=undefined;var width=undefined;var height=undefined;var systemBandwidth=undefined;var haveResolution=undefined;var resolutionPlusOneList=[];var resolutionPlusOneSmallest=[];var resolutionBestVariantList=[];stableSort(sortedPlaylists,Hls.comparePlaylistBandwidth);sortedPlaylists=sortedPlaylists.filter(_playlist2['default'].isEnabled);systemBandwidth=this.systemBandwidth;bandwidthPlaylists=sortedPlaylists.filter(function(elem){return elem.attributes&&elem.attributes.BANDWIDTH&&elem.attributes.BANDWIDTH*BANDWIDTH_VARIANCE<systemBandwidth;});bandwidthBestVariant=bandwidthPlaylists.filter(function(elem){return elem.attributes.BANDWIDTH===bandwidthPlaylists[bandwidthPlaylists.length-1].attributes.BANDWIDTH;})[0];stableSort(bandwidthPlaylists,Hls.comparePlaylistResolution);width=parseInt(safeGetComputedStyle(this.tech_.el(),'width'),10);height=parseInt(safeGetComputedStyle(this.tech_.el(),'height'),10);haveResolution=bandwidthPlaylists.filter(function(elem){return elem.attributes&&elem.attributes.RESOLUTION&&elem.attributes.RESOLUTION.width&&elem.attributes.RESOLUTION.height;});resolutionBestVariantList=haveResolution.filter(function(elem){return elem.attributes.RESOLUTION.width===width&&elem.attributes.RESOLUTION.height===height;});resolutionBestVariant=resolutionBestVariantList.filter(function(elem){return elem.attributes.BANDWIDTH===resolutionBestVariantList[resolutionBestVariantList.length-1].attributes.BANDWIDTH;})[0];if(!resolutionBestVariant){resolutionPlusOneList=haveResolution.filter(function(elem){return elem.attributes.RESOLUTION.width>width||elem.attributes.RESOLUTION.height>height;});resolutionPlusOneSmallest=resolutionPlusOneList.filter(function(elem){return elem.attributes.RESOLUTION.width===resolutionPlusOneList[0].attributes.RESOLUTION.width&&elem.attributes.RESOLUTION.height===resolutionPlusOneList[0].attributes.RESOLUTION.height;});resolutionPlusOne=resolutionPlusOneSmallest.filter(function(elem){return elem.attributes.BANDWIDTH===resolutionPlusOneSmallest[resolutionPlusOneSmallest.length-1].attributes.BANDWIDTH;})[0];}
return resolutionPlusOne||resolutionBestVariant||bandwidthBestVariant||sortedPlaylists[0];};Hls.canPlaySource=function(){return _videoJs2['default'].log.warn('HLS is no longer a tech. Please remove it from '+'your player\'s techOrder.');};Hls.supportsNativeHls=(function(){var video=_globalDocument2['default'].createElement('video');if(!_videoJs2['default'].getTech('Html5').isSupported()){return false;}
var canPlay=['application/vnd.apple.mpegurl','audio/mpegurl','audio/x-mpegurl','application/x-mpegurl','video/x-mpegurl','video/mpegurl','application/mpegurl'];return canPlay.some(function(canItPlay){return(/maybe|probably/i.test(video.canPlayType(canItPlay)));});})();Hls.isSupported=function(){return _videoJs2['default'].log.warn('HLS is no longer a tech. Please remove it from '+'your player\'s techOrder.');};var USER_AGENT=_globalWindow2['default'].navigator&&_globalWindow2['default'].navigator.userAgent||'';Hls.supportsAudioInfoChange_=function(){if(_videoJs2['default'].browser.IS_FIREFOX){var firefoxVersionMap=/Firefox\/([\d.]+)/i.exec(USER_AGENT);var version=parseInt(firefoxVersionMap[1],10);return version>=49;}
return true;};var Component=_videoJs2['default'].getComponent('Component');var HlsHandler=(function(_Component){_inherits(HlsHandler,_Component);function HlsHandler(source,tech,options){var _this=this;_classCallCheck(this,HlsHandler);_get(Object.getPrototypeOf(HlsHandler.prototype),'constructor',this).call(this,tech);if(tech.options_&&tech.options_.playerId){var _player=(0,_videoJs2['default'])(tech.options_.playerId);if(!_player.hasOwnProperty('hls')){Object.defineProperty(_player,'hls',{get:function get(){_videoJs2['default'].log.warn('player.hls is deprecated. Use player.tech_.hls instead.');return _this;}});}}
if(_videoJs2['default'].options.hls.overrideNative&&(tech.featuresNativeVideoTracks||tech.featuresNativeAudioTracks)){throw new Error('Overriding native HLS requires emulated tracks. '+'See https://git.io/vMpjB');}
this.tech_=tech;this.source_=source;this.stats={};this.ignoreNextSeekingEvent_=false;this.options_=_videoJs2['default'].mergeOptions(_videoJs2['default'].options.hls||{},options.hls);this.setOptions_();this.on(_globalDocument2['default'],['fullscreenchange','webkitfullscreenchange','mozfullscreenchange','MSFullscreenChange'],function(event){var fullscreenElement=_globalDocument2['default'].fullscreenElement||_globalDocument2['default'].webkitFullscreenElement||_globalDocument2['default'].mozFullScreenElement||_globalDocument2['default'].msFullscreenElement;if(fullscreenElement&&fullscreenElement.contains(_this.tech_.el())){_this.masterPlaylistController_.fastQualityChange_();}});this.on(this.tech_,'seeking',function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=false;return;}
this.setCurrentTime(this.tech_.currentTime());});this.on(this.tech_,'error',function(){if(this.masterPlaylistController_){this.masterPlaylistController_.pauseLoading();}});this.audioTrackChange_=function(){_this.masterPlaylistController_.setupAudio();};this.on(this.tech_,'play',this.play);}
_createClass(HlsHandler,[{key:'setOptions_',value:function setOptions_(){var _this2=this;this.options_.withCredentials=this.options_.withCredentials||false;if(typeof this.options_.bandwidth!=='number'){this.options_.bandwidth=4194304;}
['withCredentials','bandwidth'].forEach(function(option){if(typeof _this2.source_[option]!=='undefined'){_this2.options_[option]=_this2.source_[option];}});this.bandwidth=this.options_.bandwidth;}},{key:'src',value:function src(_src){var _this3=this;if(!_src){return;}
this.setOptions_();this.options_.url=this.source_.src;this.options_.tech=this.tech_;this.options_.externHls=Hls;this.masterPlaylistController_=new _masterPlaylistController.MasterPlaylistController(this.options_);this.playbackWatcher_=new _playbackWatcher2['default'](_videoJs2['default'].mergeOptions(this.options_,{seekable:function seekable(){return _this3.seekable();}}));this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):Hls.STANDARD_PLAYLIST_SELECTOR.bind(this);this.playlists=this.masterPlaylistController_.masterPlaylistLoader_;this.mediaSource=this.masterPlaylistController_.mediaSource;Object.defineProperties(this,{selectPlaylist:{get:function get(){return this.masterPlaylistController_.selectPlaylist;},set:function set(selectPlaylist){this.masterPlaylistController_.selectPlaylist=selectPlaylist.bind(this);}},throughput:{get:function get(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate;},set:function set(throughput){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=throughput;this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1;}},bandwidth:{get:function get(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth;},set:function set(bandwidth){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=bandwidth;this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0};}},systemBandwidth:{get:function get(){var invBandwidth=1/(this.bandwidth||1);var invThroughput=undefined;if(this.throughput>0){invThroughput=1/this.throughput;}else{invThroughput=0;}
var systemBitrate=Math.floor(1/(invBandwidth+invThroughput));return systemBitrate;},set:function set(){_videoJs2['default'].log.error('The "systemBandwidth" property is read-only');}}});Object.defineProperties(this.stats,{bandwidth:{get:function get(){return _this3.bandwidth||0;},enumerable:true},mediaRequests:{get:function get(){return _this3.masterPlaylistController_.mediaRequests_()||0;},enumerable:true},mediaTransferDuration:{get:function get(){return _this3.masterPlaylistController_.mediaTransferDuration_()||0;},enumerable:true},mediaBytesTransferred:{get:function get(){return _this3.masterPlaylistController_.mediaBytesTransferred_()||0;},enumerable:true},mediaSecondsLoaded:{get:function get(){return _this3.masterPlaylistController_.mediaSecondsLoaded_()||0;},enumerable:true}});this.tech_.one('canplay',this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_));this.masterPlaylistController_.on('sourceopen',function(){_this3.tech_.audioTracks().addEventListener('change',_this3.audioTrackChange_);});this.masterPlaylistController_.on('selectedinitialmedia',function(){(0,_renditionMixin2['default'])(_this3);});this.masterPlaylistController_.on('audioupdate',function(){_this3.tech_.clearTracks('audio');_this3.masterPlaylistController_.activeAudioGroup().forEach(function(audioTrack){_this3.tech_.audioTracks().addTrack(audioTrack);});});this.on(this.masterPlaylistController_,'progress',function(){this.tech_.trigger('progress');});this.on(this.masterPlaylistController_,'firstplay',function(){this.ignoreNextSeekingEvent_=true;});this.tech_.ready(function(){return _this3.setupQualityLevels_();});if(!this.tech_.el()){return;}
this.tech_.src(_videoJs2['default'].URL.createObjectURL(this.masterPlaylistController_.mediaSource));}},{key:'setupQualityLevels_',value:function setupQualityLevels_(){var _this4=this;var player=_videoJs2['default'].players[this.tech_.options_.playerId];if(player&&player.qualityLevels){this.qualityLevels_=player.qualityLevels();this.masterPlaylistController_.on('selectedinitialmedia',function(){handleHlsLoadedMetadata(_this4.qualityLevels_,_this4);});this.playlists.on('mediachange',function(){handleHlsMediaChange(_this4.qualityLevels_,_this4.playlists);});}}},{key:'activeAudioGroup_',value:function activeAudioGroup_(){return this.masterPlaylistController_.activeAudioGroup();}},{key:'play',value:function play(){this.masterPlaylistController_.play();}},{key:'setCurrentTime',value:function setCurrentTime(currentTime){this.masterPlaylistController_.setCurrentTime(currentTime);}},{key:'duration',value:function duration(){return this.masterPlaylistController_.duration();}},{key:'seekable',value:function seekable(){return this.masterPlaylistController_.seekable();}},{key:'dispose',value:function dispose(){if(this.playbackWatcher_){this.playbackWatcher_.dispose();}
if(this.masterPlaylistController_){this.masterPlaylistController_.dispose();}
if(this.qualityLevels_){this.qualityLevels_.dispose();}
this.tech_.audioTracks().removeEventListener('change',this.audioTrackChange_);_get(Object.getPrototypeOf(HlsHandler.prototype),'dispose',this).call(this);}}]);return HlsHandler;})(Component);var HlsSourceHandler=function HlsSourceHandler(mode){return{canHandleSource:function canHandleSource(srcObj){if(_videoJs2['default'].options.hls&&_videoJs2['default'].options.hls.mode&&_videoJs2['default'].options.hls.mode!==mode){return false;}
return HlsSourceHandler.canPlayType(srcObj.type);},handleSource:function handleSource(source,tech,options){if(mode==='flash'){tech.setTimeout(function(){tech.trigger('loadstart');},1);}
var settings=_videoJs2['default'].mergeOptions(options,{hls:{mode:mode}});tech.hls=new HlsHandler(source,tech,settings);tech.hls.xhr=(0,_xhr2['default'])();if(_videoJs2['default'].Hls.xhr.beforeRequest){tech.hls.xhr.beforeRequest=_videoJs2['default'].Hls.xhr.beforeRequest;}
tech.hls.src(source.src);return tech.hls;},canPlayType:function canPlayType(type){if(HlsSourceHandler.canPlayType(type)){return'maybe';}
return'';}};};Hls.comparePlaylistBandwidth=function(left,right){var leftBandwidth=undefined;var rightBandwidth=undefined;if(left.attributes&&left.attributes.BANDWIDTH){leftBandwidth=left.attributes.BANDWIDTH;}
leftBandwidth=leftBandwidth||_globalWindow2['default'].Number.MAX_VALUE;if(right.attributes&&right.attributes.BANDWIDTH){rightBandwidth=right.attributes.BANDWIDTH;}
rightBandwidth=rightBandwidth||_globalWindow2['default'].Number.MAX_VALUE;return leftBandwidth-rightBandwidth;};Hls.comparePlaylistResolution=function(left,right){var leftWidth=undefined;var rightWidth=undefined;if(left.attributes&&left.attributes.RESOLUTION&&left.attributes.RESOLUTION.width){leftWidth=left.attributes.RESOLUTION.width;}
leftWidth=leftWidth||_globalWindow2['default'].Number.MAX_VALUE;if(right.attributes&&right.attributes.RESOLUTION&&right.attributes.RESOLUTION.width){rightWidth=right.attributes.RESOLUTION.width;}
rightWidth=rightWidth||_globalWindow2['default'].Number.MAX_VALUE;if(leftWidth===rightWidth&&left.attributes.BANDWIDTH&&right.attributes.BANDWIDTH){return left.attributes.BANDWIDTH-right.attributes.BANDWIDTH;}
return leftWidth-rightWidth;};HlsSourceHandler.canPlayType=function(type){if(_videoJs2['default'].browser.IE_VERSION&&_videoJs2['default'].browser.IE_VERSION<=10){return false;}
var mpegurlRE=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i;if(!_videoJs2['default'].options.hls.overrideNative&&Hls.supportsNativeHls){return false;}
return mpegurlRE.test(type);};if(typeof _videoJs2['default'].MediaSource==='undefined'||typeof _videoJs2['default'].URL==='undefined'){_videoJs2['default'].MediaSource=_videojsContribMediaSources.MediaSource;_videoJs2['default'].URL=_videojsContribMediaSources.URL;}
var flashTech=_videoJs2['default'].getTech('Flash');if(_videojsContribMediaSources.MediaSource.supportsNativeMediaSources()){_videoJs2['default'].getTech('Html5').registerSourceHandler(HlsSourceHandler('html5'),0);}
if(_globalWindow2['default'].Uint8Array&&flashTech){flashTech.registerSourceHandler(HlsSourceHandler('flash'));}
_videoJs2['default'].HlsHandler=HlsHandler;_videoJs2['default'].HlsSourceHandler=HlsSourceHandler;_videoJs2['default'].Hls=Hls;if(!_videoJs2['default'].use){_videoJs2['default'].registerComponent('Hls',Hls);}
_videoJs2['default'].m3u8=_m3u8Parser2['default'];_videoJs2['default'].options.hls=_videoJs2['default'].options.hls||{};if(_videoJs2['default'].registerPlugin){_videoJs2['default'].registerPlugin('reloadSourceOnError',_reloadSourceOnError2['default']);}else{_videoJs2['default'].plugin('reloadSourceOnError',_reloadSourceOnError2['default']);}
module.exports={Hls:Hls,HlsHandler:HlsHandler,HlsSourceHandler:HlsSourceHandler};}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./bin-utils":2,"./config":3,"./master-playlist-controller":5,"./playback-watcher":6,"./playlist":8,"./playlist-loader":7,"./reload-source-on-error":10,"./rendition-mixin":11,"./xhr":17,"aes-decrypter":21,"global/document":27,"global/window":28,"m3u8-parser":29,"videojs-contrib-media-sources":71}]},{},[74])(74)});




/********** https://www.aufeminin.com/reloaded/static/preconcat_%2Freloaded%2Fstatic%2FFront%2FComponent%2FvideoPlayer%2Ftrackers%2FaufVideoLogger.js.202002281736.js**********/

/** https://www.aufeminin.com/reloaded/static/Front/Component/videoPlayer/trackers/aufVideoLogger.js?v=202002281736 **/
var VideoLogger=(function(){var SAMPLE_RATE_ANALYTICS=100;var SAMPLE_RATE_ERRORS=10;var NOISY_ERRORS=['play() can only be initiated by a user gesture','The request is not allowed by the user agent','The play() request was interrupted by a call to pause()','play() failed because the user didn\'t interact with the document first.','The operation was aborted.','The operation is not supported.'];var NOISY_RATE_ERRORS=0;var logger=function(options){this.initLogger();this.initLog(options);};logger.prototype={constructor:logger,initLogger:function(){if(!window.afLogger)window.afLogger=new Aflog.Logger();window.afLogger.initQueue();this.logger=window.afLogger;},initLog:function(data){this.debug=data.debug||(localStorage&&localStorage.getItem('video_logs')==='true');this.logged={'VIDEO_ERROR':{},'VIDEO_LOG':{}};this.adPlayerName=data.adPlayer.name;this.player={name:data.player.name,version:(data.player.version?data.player.version:'N/A'),context:data.player.context,position:data.player.position,videoId:(data.player.videoId?data.player.videoId.toString():'N/A')};this.target=data.target;var that=this;PubSub.subscribe('video.logger.updateAdPlayerName',function(msg,infos){that.adPlayerName=infos.adPlayerName;});},logConsole:function(log,logType){this.logger.logConsole(log,logType,'video');},getErrorRate:function(message){for(var i=0;i<NOISY_ERRORS.length;i++){if(message.indexOf(NOISY_ERRORS[i])!==-1){return NOISY_RATE_ERRORS;}}
return SAMPLE_RATE_ERRORS;},logError:function(message,category){if(!this.logger)return;var errorCategory='video'+(category?':'+category:'');var errorRate=this.getErrorRate(message);if(errorRate===0||(errorRate&&Math.floor((Math.random()*100))>errorRate)){this.logger.logConsole('['+errorCategory+'] '+message,'error');return;}
this.logger.logError(message,errorCategory);},logAnalytics:function(message,event,data){if(SAMPLE_RATE_ANALYTICS&&Math.floor((Math.random()*100))>SAMPLE_RATE_ANALYTICS){return;}
var log={adPlayer:{name:(data&&typeof data.adPlayerName!=='undefined')?data.adPlayerName:this.adPlayerName},event:(event||''),player:this.player,target:this.target,execution_time:performance.now()};if(data){var videoLog={};if(data.duration){videoLog.duration=data.duration;}
if(data.file){videoLog.file=data.file;}
if(data.position){videoLog.position=data.position;}
log.video=videoLog;if(data.ad){log.ad=data.ad;}
if(data.headerBidding){log.headerBidding=data.headerBidding;}}
if(this.debug){this.logger.logConsole(log,'video');}
this.logger.logAnalytics(message,log,false);},logEvent:function(event,data){if(!this.logger)return;if(this.logged['VIDEO_LOG'][event])return;this.logged['VIDEO_LOG'][event]=true;this.logAnalytics('VIDEO_LOG',event,data);}};return logger;})();




/********** https://www.aufeminin.com/reloaded/static/preconcat_%2Freloaded%2Fstatic%2FFront%2FComponent%2FvideoPlayer%2FvideoPlayer-utils.js.202002281736.js**********/

/** https://www.aufeminin.com/reloaded/static/Front/Component/videoPlayer/videoPlayer-utils.js?v=202002281736 **/
var AufVideo=AufVideo||{};AufVideo.Utils={getDFPFormattedKeywords:function(keywords){var formattedKeywords='';var cleanedKeywords=keywords.replace(/^\W/,'').replace(/;/g,'&').replace(/&+/g,'&');cleanedKeywords.split('&').forEach(function(keyValue){var keyValueArr=keyValue.split('=');var key=keyValueArr[0];var value=keyValueArr[1];if(!key||typeof value==='undefined'){return;}
var keyQS='&'+key+'=';var keyQSPos=formattedKeywords.indexOf(keyQS);if(keyQSPos!==-1){var keyValues=formattedKeywords.substr(keyQSPos+keyQS.length);if(keyValues.indexOf('&')!==-1){keyValues=keyValues.substr(0,keyValues.indexOf('&'));}
if(keyValues.indexOf(value)!==-1){return;}
formattedKeywords=formattedKeywords.substr(0,keyQSPos+keyQS.length)+value+','+formattedKeywords.substr(keyQSPos+keyQS.length);}else{formattedKeywords+=keyQS+value;}});if(formattedKeywords.indexOf('&')===0){formattedKeywords=formattedKeywords.substr(1);}
return formattedKeywords;}};




/********** https://www.aufeminin.com/reloaded/static/preconcat_%2Freloaded%2Fstatic%2FFront%2FComponent%2FvideoPlayer%2FvideoPlayer.js.202002281736.js**********/

/** https://www.aufeminin.com/reloaded/static/Front/Component/videoPlayer/videoPlayer.js?v=202002281736 **/
var AufVideo=AufVideo||{};AufVideo.Manager=AufVideo.Manager||(function(){var COMPLETE_STICKY_TIMEOUT=3000;var self;var Manager=function(opts){self=this;this.labels=(opts!=undefined&&opts.labels)?opts.labels:null;this.players=[];this.playingInstance;this.initPlayersListeners();this.initAdPlayersListeners();this.maxCountDown=6;this.revolverRunning=false;var scrollTimer;af_addEvent(document,'scroll',this.onScroll.bind(this,scrollTimer),false);};Manager.prototype={init:function(player,adPlayer){if(adPlayer&&typeof adPlayer.init==='function'){adPlayer.init();}
var done=false;var callback=function videoCallback(){try{if(typeof Mrtn!=='undefined'&&typeof Mrtn.cookbooks!=='undefined'&&Mrtn.cookbooks.cookbooks.Settings){var videoautoplay=Mrtn.cookbooks.cookbooks.Settings.IsVideoAutoPlay;if(!videoautoplay){player.opts.setup.autoplay=false;player.opts.startOnSight=false;}}
player.init();self.addPlayer(player);if(adPlayer&&typeof adPlayer.onPlayerInit==='function'){adPlayer.onPlayerInit(player);}
self.initRelatedContents(player);done=true;}
catch(e){console.log(e);}};if(typeof Mrtn!=='undefined'&&typeof Mrtn.cookbooks!=='undefined'&&Mrtn.USER){Mrtn.cookbooks.getUserCookbooks({user:Mrtn.USER,callback:callback});}
if(!done&&(typeof Mrtn==='undefined'||!Mrtn.USER||typeof Mrtn.cookbooks==='undefined')){callback();}},onScroll:function(timer){clearTimeout(timer);var that=this;timer=setTimeout(function(){that.autoplayWhenVisible();},100);},addPlayer:function(player){this.players.push(player);},getPlayer:function(playerId){for(var i=0;i<this.players.length;i++){if(this.players[i].id===playerId){return this.players[i];}}
return;},logError:function(category,data){var player=data.player||this.getPlayer(data.playerId);if(player){player.logError(data.message,category);}else if(window.afLogger){afLogger.logError(data.message,'video');}},logEvent:function(message,data){var player=data.player||this.getPlayer(data.playerId);if(player){player.logEvent(message,data);}},initPlayersListeners:function(){var that=this;PubSub.subscribe('video.player.ready',function(msg,data){that.logEvent('player ready',data);that.autoplayWhenVisible();});PubSub.subscribe('video.player.opportunities',function(msg,data){that.logEvent('ad opportunities',data);});PubSub.subscribe('video.player.play',function(msg,data){that.logEvent('player play',data);if(that.playingInstance&&data.player.id!==that.playingInstance.id){that.playingInstance.pause(true);}
that.playingInstance=data.player;that.clearUnstickOnComplete(data.player);});PubSub.subscribe('video.player.complete',function(msg,data){that.logEvent('player complete',data);that.revolver(data.player);that.unstickOnComplete(data.player);});PubSub.subscribe('video.player.seek',function(msg,data){that.clearUnstickOnComplete(data.player);});PubSub.subscribe('video.player.revolver',function(msg,data){that.logEvent('player revolver',data);af_ua_trackEvent('Video revolver',data.player.getContext(),that.getEventType(),null,true);if(data&&typeof data.callback==='function'){data.callback();}});PubSub.subscribe('video.player.setupError',function(msg,data){that.logError('player setup error',data);});PubSub.subscribe('video.player.error',function(msg,data){that.logError('player error',data);});},initAdPlayersListeners:function(){var that=this;PubSub.subscribe('video.ad.player.ready',function(msg,data){that.logEvent('ad player ready',data);if(data.adblockDetected){PubSub.publish('video.logger.updateAdPlayerName',data);}});PubSub.subscribe('video.ad.ready',function(msg,data){that.logEvent('ad '+data.videoBreak+' ready',data);var player=that.getPlayer(data.playerId);player.onAdReady({data:data});});PubSub.subscribe('video.ad.unfilled',function(msg,data){that.logEvent('ad unfilled',data);});PubSub.subscribe('video.ad.start',function(msg,data){that.logEvent('ad '+data.videoBreak+' start',data);var player=that.getPlayer(data.playerId);player.autoplayBlocked=true;player.pause(true);});PubSub.subscribe('video.ad.end',function(msg,data){that.logEvent('ad '+data.videoBreak+' end',data);var player=that.getPlayer(data.playerId);player.autoplayBlocked=false;player.play(true);player.onAdEnd({data:data});if(data.videoBreak==='postroll'){that.revolver(player);}});PubSub.subscribe('video.ad.validated',function(msg,data){that.logEvent('ad '+data.videoBreak+' validated',data);});PubSub.subscribe('video.ad.notAvailable',function(msg,data){that.logEvent('ad '+data.videoBreak+' not available',data);});PubSub.subscribe('video.ad.block',function(msg,data){that.logEvent('adblock detected',data);});PubSub.subscribe('video.ad.click',function(msg,data){that.logEvent('ad '+data.videoBreak+' click',data);});PubSub.subscribe('video.ad.impression',function(msg,data){that.logEvent('ad '+data.videoBreak+' impression',data);});PubSub.subscribe('video.ad.contentresume',function(msg,data){that.logEvent('ad content resume',data);});PubSub.subscribe('video.ad.error',function(msg,data){that.logError('ad error',data);that.logEvent('ad error',data);});PubSub.subscribe('video.ad.setupError',function(msg,data){that.logError('ad setup error',data);});},initRelatedContents:function(player){if(typeof AufVideo.RelatedContents==='function'){var afRelatedContent=new AufVideo.RelatedContents();afRelatedContent.init({labels:this.labels,player:player});}},unstickOnComplete:function(player){if(!player||player.completeStickyTimeout)return;player.completeStickyTimeout=setTimeout(function(){player.unstick(true,true);},COMPLETE_STICKY_TIMEOUT);},clearUnstickOnComplete:function(player){if(!player||!player.completeStickyTimeout)return;clearTimeout(player.completeStickyTimeout);player.completeStickyTimeout=null;},autoplayWhenVisible:function(){for(var i=0;i<this.players.length;i++){var player=this.players[i];var playerContainer=player.getContainer();var canPlay=player.hasStartOnSight()&&!player.autoplayBlocked;var canStick=typeof player.canStick==='function'&&player.canStick();if((canPlay||canStick)&&playerContainer){if(af_isInViewport(playerContainer,0.5)){if(canPlay){player.logOpportunities();if(player.adPlayer&&player.adPlayer.opts.noPrefetch&&typeof player.adPlayer.requestAds==='function'){player.adPlayer.requestAds();}
player.play(true);}
if(canStick){player.unstick();}}else{if(canStick){player.stick();}else if(canPlay){player.pause(true);}}}}},revolver:function(player){var revolverData=player.getRevolverData();if(!revolverData||!player.isPostrollDone()||!window.location.href.match(/^.*\-n(\d+)\.html(#.*)?$/)||this.revolverRunning)return;this.revolverRunning=true;var that=this;var nextVideoTxt=this.labels.nextVideo.replace('#SECONDS#','<span id="af_revolver_countdown">0</span>');var container=document.createElement('div');container.setAttribute('id','af_nextVideo');container.innerHTML='<a id="af_close_video" class="close-classic"></a>'
+'<a id="replay_video">replay</a>'
+'<img src="'+revolverData.urlVignette96+'">'
+'<div class="ly"></div>'
+'<a class="chart" href="'+revolverData.URLComplete+'">'
+'<h2>'+revolverData.titre+'</h2>'
+'<span class="playB"></span>'
+'<div class="progress" data-percent="100"></div>'
+' <span class="timer">'+nextVideoTxt+'</span>'
+'</a>';var playerCtn=player.getContainer();playerCtn.appendChild(container);var charts=[];var chartConfig={scaleColor:false,trackColor:'rgba(0, 0, 0, 0)',barColor:'#FFFFFF',lineWidth:8,lineCap:'butt',size:150,animate:this.maxCountDown*1000,onStop:function(){if(that.revolverRunning){PubSub.publish('video.player.revolver',{player:player,callback:function(){location.href=revolverData.URLComplete+'#revolver';}});}}};[].forEach.call(document.getElementsByClassName('progress'),function(el){charts.push(new EasyPieChart(el,chartConfig));});var closeButton=document.getElementById('af_close_video');if(closeButton){af_addEvent(closeButton,'click',function(e){that.revolverRunning=false;af_stopEvent(e);that.stopLoader();af_remove(document.getElementById('af_nextVideo'));},false);}
var replay_video=document.getElementById('replay_video');af_addEvent(replay_video,'click',function(){that.revolverRunning=false;that.stopLoader();af_remove(document.getElementById('af_nextVideo'));player.play(true);},false);this.startLoader();},getEventType:function(){if(window.location.href.indexOf('forum')>-1||window.location.href.indexOf('foro')>-1){return'Forum';}else{return'Edito';}},startLoader:function(){this.initialTime=new Date().getTime();this.updateTime();if(typeof this.loaderInterval==='undefined'){this.loaderInterval=setInterval(af_bind(this,this.updateTime),500);}},stopLoader:function(){if(typeof this.loaderInterval!=='undefined'){clearInterval(this.loaderInterval);this.loaderInterval=undefined;}},updateTime:function(){var timeDiff=new Date().getTime()-this.initialTime;var countDown=this.maxCountDown-Math.floor(timeDiff/1e3);var countDownElt=document.getElementById('af_revolver_countdown');if(countDownElt){if(countDown>=1){countDownElt.innerHTML=countDown;}else{countDownElt.classList.add('hidden');this.stopLoader();}}else{this.stopLoader();}}};var singleInstance;return{getInstance:function(opts){if(!singleInstance){singleInstance=new Manager(opts);}
return singleInstance;}};})();




/********** https://www.aufeminin.com/reloaded/static/preconcat_%2Freloaded%2Fstatic%2FFront%2FComponent%2FsButtonsV2%2FsButtonsV2.js.202002281736.js**********/

/** https://www.aufeminin.com/reloaded/static/Front/Component/sButtonsV2/sButtonsV2.js?v=202002281736 **/
var AufSButtonsV2=(function(){AufSButtonsV2=function(){this.options={hasRun:false,infos:{providers:{}},providers:{facebook:{classCSS:"facebook",name:"Facebook",refererDomain:"facebook.com",title:"",url:"https://facebook.com/sharer/sharer.php?u="},google:{classCSS:"googleplus",name:"Google +",refererDomain:"plus.url.google.com",title:"",url:"https://plus.google.com/share?url="},pinterest:{classCSS:"pinterest",name:"Pinterest",refererDomain:"pinterest.com",title:document.title,url:"http://pinterest.com/pin/create/button/?url="},twitter:{classCSS:"twitter",name:"Twitter",refererDomain:"t.co/",title:document.title,url:"https://twitter.com/share?url="},whatsapp:{classCSS:"whatsapp",name:"WhatsApp",onlyMobile:true,refererDomain:"whatsapp.com",title:document.title+" "+window.location.href,url:"whatsapp://send?text="}},refererDomain:"",socialsBtn:null,type:null};};AufSButtonsV2.prototype={constructor:AufSButtonsV2,init:function(id,type,infos){this.run(id,type,infos);PubSub.subscribe("sButtons"+id+":asyncInit",af_bind(this,function(){this.run(id,type,infos);}));},run:function(id,type,infos){this.options.socialsBtn=document.getElementById(id);if(this.options.socialsBtn){this.options.infos=infos;this.options.type=type;this.setRefererDomain();this.makeButtons();if(!this.options.hasRun){this.options.hasRun=true;PubSub.subscribe("sButtons"+id+":refreshDatas",af_bind(this,this.refreshDatas));PubSub.subscribe("sButton:update",af_bind(this,this.refreshMetasAndDatas));}
PubSub.publish("sButtons"+id+":initDone");}},getMetaImage:function(){var metas=document.getElementsByTagName("meta");for(var i=0;i<metas.length;i++){var meta=metas[i];var property=meta.getAttribute("property");if(property&&property.toLowerCase()==="og:image"){return meta.getAttribute("content");}}
return"";},getPopupSize:function(name){var sizes={facebook:[400,400],"google +":[680,489],pinterest:[830,620],twitter:[520,542]};if(name&&sizes[name]){return sizes[name];}else{return[300,300];}},isLocalStorage:function(){return typeof Storage!=="undefined";},getMaxDisplayedButtons:function(){switch(this.options.type){case"card":return this.options.infos.isMobile?3:4;case"scrollspy":return 4;default:return 5;}},makeButtons:function(){var infos=this.options.infos;var refererDomain=this.options.refererDomain;var socialShareContainer=this.options.socialsBtn;var nbDisplayedButtons=0;var maxDisplayedButtons=this.getMaxDisplayedButtons();var socialButtonsContainers=socialShareContainer.getElementsByClassName("af-social-btns");var socialButtonsContainer;if(socialButtonsContainers.length>0){socialButtonsContainer=socialButtonsContainers[0];socialButtonsContainer.innerHTML="";}else{socialButtonsContainer=document.createElement("div");socialButtonsContainer.className=this.options.type==="big"?"af-social-btn-big":"af-social-btns";}
for(var i in infos.shareProviders){var shareProvider=infos.shareProviders[i];if(this.options.providers.hasOwnProperty(shareProvider)){var provider=this.options.providers[shareProvider];var infosProvider=infos.providers.hasOwnProperty(shareProvider)?infos.providers[shareProvider]:{};if(typeof provider==="object"&&!(provider.onlyMobile&&!infos.isMobile)){var paramName=provider.name==="Facebook"?"picture":"media";var infosShareImg=infos.shareImg||this.getMetaImage();if(infosProvider.shareImg&&this.getPosition()===1){infosShareImg=infosProvider.shareImg;}
var shareImg="&"+paramName+"="+infosShareImg;var shareUrl=infos.shareUrl||document.location.href;var utm=afSession.getUtm();if(utm&&utm.source){shareUrl+=shareUrl.indexOf("#")===-1?"#":"&";shareUrl+="utm_source="+
utm.source+"&utm_medium="+
utm.medium+"&utm_campaign="+
utm.campaign;}
var shareTitle="";var infosShareTitle=infos.shareTitle||provider.title;if(infosShareTitle){shareTitle="&description="+
encodeURI(infosShareTitle)+"&text="+
encodeURI(infosShareTitle);}
var a=document.createElement("a");var providerUrl=infosProvider.hasOwnProperty("url")?infosProvider.url:provider.url;a.href=providerUrl+
encodeURIComponent(shareUrl)+
shareTitle+
shareImg;a.className=this.options.type==="big"?"":"af-btn-v2 round af-btn-"+provider.classCSS;a.target="_blank";if(window.Didomi&&window.Didomi.getUserConsentStatusForPurpose("reseauxsociaux")===false){a.classList.add("disabled");}
window.didomiEventListeners=window.didomiEventListeners||[];window.didomiEventListeners.push({event:"consent.changed",listener:function(context){var disabledOn=false;if(window.Didomi){if(window.Didomi.getUserConsentStatusForPurpose("reseauxsociaux")===false){disabledOn=true;}}
var elements=document.querySelectorAll(".af-btn-v2");for(var i=0;i<elements.length;i++){if(elements[i].classList.contains("disabled")!==disabledOn){elements[i].classList.toggle("disabled");}}}});if(provider.name==="Pinterest"){a.setAttribute("data-pin-custom",true);a.setAttribute("data-pin-do","none");}
a.setAttribute("data-share-name",provider.name);a.setAttribute("data-track-classname",provider.classCSS);if(this.options.type==="big"){var icon=document.createElement("span");icon.innerHTML=af_translations.sButtonsShareText.replace("#socialNetworkName#",provider.name);}else{var icon=document.createElement("i");icon.className="icon icon-"+provider.classCSS;}
a.insertBefore(icon,a.firstChild);var span=document.createElement("span");span.innerHTML=af_translations.sTooltipsShareText;span.className="disabled-tooltip";a.insertBefore(span,icon);var that=this;af_addEvent(a,"click",function(e){af_stopEvent(e);if(a.classList.contains("disabled"))return;var el=af_getParent(af_getTarget(e),"a");var dataShareName=el.getAttribute("data-share-name").toLowerCase();var size=that.getPopupSize(dataShareName);PubSub.publish("social.buttons.top.click",dataShareName);af_ua_trackEvent("Share",that.options.type+" Click",el.getAttribute("data-track-classname"),0);window.open(el.href,"Share","width="+size[0]+",height="+size[1]);},false);socialButtonsContainer.appendChild(a);if(provider.refererDomain===refererDomain){if(refererDomain==="facebook.com"&&infosProvider.showLikeButton&&infosProvider.pageURL){var div=document.createElement("div");div.className="fb-like";div.setAttribute("data-href",infosProvider.pageURL);div.setAttribute("data-layout","box_count");div.setAttribute("data-action","like");div.setAttribute("data-size","small");div.setAttribute("data-share","false");div.setAttribute("data-show-faces","false");this.options.socialsBtn.appendChild(div);}
if(!infos.isMobile&&infosProvider.hasOwnProperty("urlFollowUs")&&this.canShowFollowUs(refererDomain)){var timer;var followUsSize=this.getFollowUsSize(refererDomain);this.scrollHandler=this.onScroll.bind(this,refererDomain,infosProvider.urlFollowUs,followUsSize[0],followUsSize[1],timer);af_addEvent(window,"scroll",this.scrollHandler,false);}}
nbDisplayedButtons++;if(nbDisplayedButtons>=maxDisplayedButtons){break;}}}}
if(!infos.initOpen){var iconContainer=document.createElement("i");iconContainer.className="icon icon-share";af_addEvent(iconContainer,"click",function(e){af_stopEvent(e);if(!socialShareContainer.classList.contains("open")){socialShareContainer.classList.add("open");socialShareContainer.classList.remove("hide");}},false);socialShareContainer.appendChild(iconContainer);}
socialShareContainer.appendChild(socialButtonsContainer);},refreshDatas:function(eventName,data){this.options.infos.shareImg=data.shareImg;this.options.infos.shareTitle=data.shareTitle;this.options.infos.shareUrl=data.shareUrl;this.makeButtons();},refreshMetasAndDatas:function(){var obj={};var metas=document.getElementsByTagName("meta");var mLen=metas.length;for(var i=0;i<mLen;i++){var _meta=metas[i].getAttribute("property");if(_meta&&_meta.toLowerCase()==="og:image"){obj["shareImg"]=metas[i].getAttribute("content");}else if(_meta&&_meta.toLowerCase()==="og:title"){obj["shareTitle"]=metas[i].getAttribute("content");}else if(_meta&&_meta.toLowerCase()==="og:description"){obj["shareDescription"]=metas[i].getAttribute("content");}else if(_meta&&_meta.toLowerCase()==="og:url"){obj["shareUrl"]=metas[i].getAttribute("content");}}
this.refreshDatas("refreshDatasMetas",obj);},setRefererDomain:function(){var now=Math.round(Date.now()/1000);var lifeTime=now-60*30;var afDomain="^http(s?)://:"+window.location.hostname;var patt=new RegExp(afDomain.replace(/\./g,"\\."));var documentReferer=document.referrer;if(!patt.exec(documentReferer)){for(var i in this.options.providers){var provider=this.options.providers[i];var providerPatt=new RegExp(provider.refererDomain.replace(/\./g,"\\."));var providerReferer=providerPatt.exec(documentReferer);if(this.isLocalStorage()&&providerReferer){localStorage.setItem("sButtonsReferer",providerReferer);localStorage.setItem("sButtonsDate",now);break;}}}
if(this.isLocalStorage()){var sButtonsDate=localStorage.getItem("sButtonsDate");if(sButtonsDate>=lifeTime){localStorage.setItem("sButtonsDate",now);this.options.refererDomain=localStorage.getItem("sButtonsReferer");}else{localStorage.removeItem("sButtonsDate");localStorage.removeItem("sButtonsReferer");}}},canShowFollowUs:function(referer){switch(referer){case"facebook.com":return this.canShowFollowUsFacebook();case"pinterest.com":return this.canShowFollowUsPinterest();default:return false;}},canShowFollowUsFacebook:function(){return(this.isLocalStorage()&&localStorage.getItem("af-follow-us-fb")!=="1");},canShowFollowUsPinterest:function(){return(this.isLocalStorage()&&localStorage.getItem("af-follow-us-pin")!=="1");},getFollowUsSize:function(referer){switch(referer){case"facebook.com":return[290,300];case"pinterest.com":return[290,510];default:return[300,300];}},onScroll:function(referer,url,w,h,timer){if(this.canShowFollowUs(referer)){var socialCtn=document.getElementById("af-socials-btn-story-bottom");clearTimeout(timer);timer=setTimeout(function(){if(af_popup_social&&socialCtn){if(socialCtn.getBoundingClientRect().bottom<=(window.innerHeight||document.documentElement.clientHeight)){af_popup_social.show(url,w,h);}else{af_popup_social.hide();}}},100);}else if(typeof this.scrollHandler==="function"){af_removeEvent(window,"scroll",this.scrollHandler,false);}},getPosition:function(){return window.location.hash?parseInt(window.location.hash.replace("#p","")):1;}};return AufSButtonsV2;})();




/********** https://www.aufeminin.com/reloaded/static/preconcat_%2Freloaded%2Fstatic%2FFront%2FVendor%2Fauf%2FafLazyload.js.202002281736.js**********/

/** https://www.aufeminin.com/reloaded/static/Front/Vendor/auf/afLazyload.js?v=202002281736 **/
var iOS=/(iPad|iPhone|iPod)/g.test(navigator.userAgent);var af_lazyloading_timeout=null;var af_lazyloading_dist=iOS?1000:200;var af_html_lazyloading_dist=iOS?1200:500;var af_html_lazyloading_items=[];var af_html_lazyloading_callback=[];function af_lazyloading(){if(af_lazyloading_timeout===null){af_lazyloading_timeout=setTimeout(af_lazyloading_real,50);}}
function af_lazyloading_real(){var ws=af_windowSize();var imgs=document.querySelectorAll('img');var len=imgs.length;var img,dataOrigin,visibility,display;for(var i=0;i<len;i++){img=imgs[i];dataOrigin=img.getAttribute('data-origin');display=(img.currentStyle?img.currentStyle.display:window.getComputedStyle(img,null).display);visibility=(img.currentStyle?img.currentStyle.visibility:window.getComputedStyle(img,null).visibility);if(dataOrigin&&visibility!=='hidden'&&display!=='none'&&ws.b+af_lazyloading_dist>=af_findPos(img).t){img.setAttribute('data-origin','');af_addEvent(img,'load',(function(){this.classList.add('af-lazyloaded');setTimeout((function(){this.classList.remove('af-lazyload');}).bind(this),500);}).bind(img),false);img.src=dataOrigin;}}
len=af_html_lazyloading_items.length;for(var j=0;j<len;j++){var item=af_html_lazyloading_items[j];var callback=af_html_lazyloading_callback[j];if(callback!==null){if(ws.b+af_html_lazyloading_dist>=af_findPos(item).t){if(!item){af_html_lazyloading_items[j]=null;af_html_lazyloading_callback[j]=null;continue;}
if(item.classList&&(item.classList.contains('af-hidden')||item.classList.contains('no-lazyload'))){continue;}
callback(item);af_html_lazyloading_callback[j]=null;}}else{af_html_lazyloading_items[j]=null;af_html_lazyloading_callback[j]=null;}}
af_lazyloading_timeout=null;}




